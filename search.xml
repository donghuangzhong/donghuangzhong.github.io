<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Mybatis_多表+注解</title>
      <link href="2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/"/>
      <url>2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="1-Mybatis多表查询"><a href="#1-Mybatis多表查询" class="headerlink" title="1.Mybatis多表查询"></a>1.Mybatis多表查询</h1><h2 id="一对一查询"><a href="#一对一查询" class="headerlink" title="一对一查询"></a>一对一查询</h2><h3 id="一对一查询的模型MapperScannerConfigurer"><a href="#一对一查询的模型MapperScannerConfigurer" class="headerlink" title="一对一查询的模型MapperScannerConfigurer"></a>一对一查询的模型MapperScannerConfigurer</h3><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p><p>一对一查询的需求：查询一个订单，与此同时查询出该订单所属的用户</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%871.png" alt></p><h3 id="一对一查询的语句"><a href="#一对一查询的语句" class="headerlink" title="一对一查询的语句"></a>一对一查询的语句</h3><p>对应的sql语句：select *  from orders o,user u where o.uid=u.id;</p><p>查询的结果如下：</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%872.png" alt></p><h3 id="创建Order和User实体"><a href="#创建Order和User实体" class="headerlink" title="创建Order和User实体"></a>创建Order和User实体</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> Date ordertime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//代表当前订单从属于哪一个客户</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建OrderMapper接口"><a href="#创建OrderMapper接口" class="headerlink" title="创建OrderMapper接口"></a>创建OrderMapper接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrderMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Order&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置OrderMapper-xml"><a href="#配置OrderMapper-xml" class="headerlink" title="配置OrderMapper.xml"></a>配置OrderMapper.xml</h3><p><strong>无歧义不用单独配</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.dhz.mapper.OrderMapper"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"orderMap"</span> <span class="attr">type</span>=<span class="string">"order"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"oid"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">property</span>=<span class="string">"user.id"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"user.username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"user.password"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"user.birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"orderMap"</span>&gt;</span></span><br><span class="line">        SELECT *,o.id oid,u.id uid  FROM orders o,USER u WHERE o.uid=u.id;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中<resultMap>还可以配置如下：</resultMap></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"orderMap"</span> <span class="attr">type</span>=<span class="string">"com.itheima.domain.Order"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"ordertime"</span> <span class="attr">column</span>=<span class="string">"ordertime"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"total"</span> <span class="attr">column</span>=<span class="string">"total"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"user"</span> <span class="attr">javaType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"uid"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OrderMapper mapper = sqlSession.getMapper(OrderMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">List&lt;Order&gt; all = mapper.findAll();</span><br><span class="line"><span class="keyword">for</span>(Order order : all)&#123;</span><br><span class="line">    System.out.println(order);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%873.png" alt></p><h2 id="一对多查询"><a href="#一对多查询" class="headerlink" title="一对多查询"></a>一对多查询</h2><h3 id="一对多查询的模型"><a href="#一对多查询的模型" class="headerlink" title="一对多查询的模型"></a>一对多查询的模型</h3><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p><p>一对多查询的需求：查询一个用户，与此同时查询出该用户具有的订单</p><p>  <img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%874.png" alt></p><h3 id="一对多查询的语句"><a href="#一对多查询的语句" class="headerlink" title="一对多查询的语句"></a>一对多查询的语句</h3><p>对应的sql语句：select *,o.id oid from user u left join orders o on u.id=o.uid;</p><p>查询的结果如下：</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%875.png" alt></p><h3 id="修改User实体"><a href="#修改User实体" class="headerlink" title="修改User实体"></a>修改User实体</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> Date ordertime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//代表当前订单从属于哪一个客户</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="comment">//代表当前用户具备哪些订单</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Order&gt; orderList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建UserMapper接口"><a href="#创建UserMapper接口" class="headerlink" title="创建UserMapper接口"></a>创建UserMapper接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置UserMapper-xml"><a href="#配置UserMapper-xml" class="headerlink" title="配置UserMapper.xml"></a>配置UserMapper.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.dhz.mapper.UserMapper"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"orderMap"</span> <span class="attr">type</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"uid"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"username"</span> <span class="attr">column</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"password"</span> <span class="attr">column</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"birthday"</span> <span class="attr">column</span>=<span class="string">"birthday"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"orders"</span> <span class="attr">ofType</span>=<span class="string">"order"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"id"</span> <span class="attr">column</span>=<span class="string">"oid"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"ordertime"</span> <span class="attr">column</span>=<span class="string">"ordertime"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"total"</span> <span class="attr">column</span>=<span class="string">"total"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultMap</span>=<span class="string">"orderMap"</span>&gt;</span></span><br><span class="line">        SELECT *,o.id oid FROM USER u,orders o WHERE u.id=o.uid</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="测试结果-1"><a href="#测试结果-1" class="headerlink" title="测试结果"></a>测试结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UserMapper mapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">List&lt;User&gt; all = mapper.findAll();</span><br><span class="line"><span class="keyword">for</span>(User user : all)&#123;</span><br><span class="line">    System.out.println(user.getUsername());</span><br><span class="line">    List&lt;Order&gt; orderList = user.getOrderList();</span><br><span class="line">    <span class="keyword">for</span>(Order order : orderList)&#123;</span><br><span class="line">        System.out.println(order);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%876.png" alt></p><h2 id="多对多查询"><a href="#多对多查询" class="headerlink" title="多对多查询"></a>多对多查询</h2><h3 id="多对多查询的模型"><a href="#多对多查询的模型" class="headerlink" title="多对多查询的模型"></a>多对多查询的模型</h3><p>用户表和角色表的关系为，一个用户有多个角色，一个角色被多个用户使用</p><p>多对多查询的需求：查询用户同时查询出该用户的所有角色</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%877.png" alt></p><h3 id="多对多查询的语句"><a href="#多对多查询的语句" class="headerlink" title="多对多查询的语句"></a>多对多查询的语句</h3><p>对应的sql语句：select u.<em>,r.</em>,r.id rid from user u left join user_role ur on u.id=ur.user_id</p><p> inner join role r on ur.role_id=r.id;</p><p>查询的结果如下：</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%878.png" alt></p><h3 id="创建Role实体，修改User实体"><a href="#创建Role实体，修改User实体" class="headerlink" title="创建Role实体，修改User实体"></a>创建Role实体，修改User实体</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="comment">//代表当前用户具备哪些订单</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Order&gt; orderList;</span><br><span class="line">    <span class="comment">//代表当前用户具备哪些角色</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Role&gt; roleList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line">    <span class="keyword">private</span> String roleDesc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加UserMapper接口方法"><a href="#添加UserMapper接口方法" class="headerlink" title="添加UserMapper接口方法"></a>添加UserMapper接口方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;User&gt; <span class="title">findAllUserAndRole</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><h3 id="配置UserMapper-xml-1"><a href="#配置UserMapper-xml-1" class="headerlink" title="配置UserMapper.xml"></a>配置UserMapper.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userRoleMap"</span> <span class="attr">type</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"username"</span> <span class="attr">property</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">property</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"birthday"</span> <span class="attr">property</span>=<span class="string">"birthday"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"roleList"</span> <span class="attr">ofType</span>=<span class="string">"com.dhz.domain.Role"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"rid"</span> <span class="attr">property</span>=<span class="string">"id"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"rolename"</span> <span class="attr">property</span>=<span class="string">"rolename"</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllUserAndRole"</span> <span class="attr">resultMap</span>=<span class="string">"userRoleMap"</span>&gt;</span></span><br><span class="line">    select u.*,r.*,r.id rid from user u left join user_role ur on u.id=ur.user_id</span><br><span class="line">    inner join role r on ur.role_id=r.id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="测试结果-2"><a href="#测试结果-2" class="headerlink" title="测试结果"></a>测试结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UserMapper mapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">List&lt;User&gt; all = mapper.findAllUserAndRole();</span><br><span class="line"><span class="keyword">for</span>(User user : all)&#123;</span><br><span class="line">    System.out.println(user.getUsername());</span><br><span class="line">    List&lt;Role&gt; roleList = user.getRoleList();</span><br><span class="line">    <span class="keyword">for</span>(Role role : roleList)&#123;</span><br><span class="line">        System.out.println(role);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%879.png" alt></p><h2 id="知识小结"><a href="#知识小结" class="headerlink" title="知识小结"></a>知识小结</h2><p>MyBatis多表配置方式：</p><p><strong>一对一配置：使用<resultMap>做配置</resultMap></strong></p><p><strong>一对多配置：使用<resultMap>+<collection>做配置</collection></resultMap></strong></p><p><strong>多对多配置：使用<resultMap>+<collection>做配置</collection></resultMap></strong></p><h1 id="2-Mybatis的注解开发"><a href="#2-Mybatis的注解开发" class="headerlink" title="2.Mybatis的注解开发"></a>2.Mybatis的注解开发</h1><h2 id="MyBatis的常用注解"><a href="#MyBatis的常用注解" class="headerlink" title="MyBatis的常用注解"></a>MyBatis的常用注解</h2><p>这几年来注解开发越来越流行，Mybatis也可以使用注解开发方式，这样我们就可以减少编写Mapper</p><p>映射文件了。我们先围绕一些基本的CRUD来学习，再学习复杂映射多表操作。</p><p>@Insert：实现新增</p><p>@Update：实现更新</p><p>@Delete：实现删除</p><p>@Select：实现查询</p><p>@Result：实现结果集封装</p><p>@Results：可以与@Result 一起使用，封装多个结果集</p><p>@One：实现一对一结果集封装</p><p>@Many：实现一对多结果集封装</p><h2 id="MyBatis的增删改查"><a href="#MyBatis的增删改查" class="headerlink" title="MyBatis的增删改查"></a>MyBatis的增删改查</h2><p>我们完成简单的user表的增删改查的操作</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">    SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> </span><br><span class="line">                 SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">    SqlSession sqlSession = sqlSessionFactory.openSession(<span class="keyword">true</span>);</span><br><span class="line">    userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testAdd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setUsername(<span class="string">"测试数据"</span>);</span><br><span class="line">    user.setPassword(<span class="string">"123"</span>);</span><br><span class="line">    user.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">    userMapper.add(user);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User();</span><br><span class="line">    user.setId(<span class="number">16</span>);</span><br><span class="line">    user.setUsername(<span class="string">"测试数据修改"</span>);</span><br><span class="line">    user.setPassword(<span class="string">"abc"</span>);</span><br><span class="line">    user.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">    userMapper.update(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    userMapper.delete(<span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindById</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    User user = userMapper.findById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    List&lt;User&gt; all = userMapper.findAll();</span><br><span class="line">    <span class="keyword">for</span>(User user : all)&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改MyBatis的核心配置文件，我们使用了注解替代的映射文件，所以我们只需要加载使用了注解的Mapper接口即可</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--扫描使用注解的类--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">"com.itheima.mapper.UserMapper"</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>或者指定扫描包含映射关系的接口所在的包也可以  //<strong>常用</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--扫描使用注解的类所在的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.itheima.mapper"</span>&gt;</span><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="MyBatis的注解实现复杂映射开发"><a href="#MyBatis的注解实现复杂映射开发" class="headerlink" title="MyBatis的注解实现复杂映射开发"></a>MyBatis的注解实现复杂映射开发</h2><p>实现复杂关系映射之前我们可以在映射文件中通过配置<resultMap>来实现，使用注解开发后，我们可以使用@Results注解，@Result注解，@One注解，@Many注解组合完成复杂关系的配置</resultMap></p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8710.png" alt></p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8711.png" alt></p><h2 id="一对一查询-1"><a href="#一对一查询-1" class="headerlink" title="一对一查询"></a>一对一查询</h2><h3 id="一对一查询的模型"><a href="#一对一查询的模型" class="headerlink" title="一对一查询的模型"></a>一对一查询的模型</h3><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p><p>一对一查询的需求：查询一个订单，与此同时查询出该订单所属的用户</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8712.png" alt></p><h3 id="一对一查询的语句-1"><a href="#一对一查询的语句-1" class="headerlink" title="一对一查询的语句"></a>一对一查询的语句</h3><p>对应的sql语句：</p><pre><code>select * from orders;select * from user where id=查询出订单的uid;</code></pre><p>查询的结果如下：</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8713.png" alt></p><h3 id="创建Order和User实体-1"><a href="#创建Order和User实体-1" class="headerlink" title="创建Order和User实体"></a>创建Order和User实体</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> Date ordertime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//代表当前订单从属于哪一个客户</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建OrderMapper接口-1"><a href="#创建OrderMapper接口-1" class="headerlink" title="创建OrderMapper接口"></a>创建OrderMapper接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrderMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;Order&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用注解配置Mapper"><a href="#使用注解配置Mapper" class="headerlink" title="使用注解配置Mapper"></a>使用注解配置Mapper</h3><ul><li><strong>无歧义的会自动注入，主键最好不要省略</strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT * FROM orders"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(&#123;</span><br><span class="line">            <span class="meta">@Result</span>(id = <span class="keyword">true</span>,property = <span class="string">"id"</span>,column = <span class="string">"id"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(javaType = User<span class="class">.<span class="keyword">class</span>,<span class="title">property</span> </span>= <span class="string">"user"</span>,column = <span class="string">"uid"</span>,</span><br><span class="line">                    one = <span class="meta">@One</span>(select = <span class="string">"com.dhz.mapper.UserMapper.findById"</span>)</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">List&lt;Order&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT *,o.id oid FROM orders o,USER u WHERE o.uid=u.id"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(&#123;</span><br><span class="line">            <span class="meta">@Result</span>(property =<span class="string">"id"</span>,column = <span class="string">"oid"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property =<span class="string">"user.username"</span>,column = <span class="string">"username"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property =<span class="string">"user.password"</span>,column = <span class="string">"password"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property =<span class="string">"user.birthday"</span>,column = <span class="string">"birthday"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">List&lt;Order&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function">User <span class="title">findById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试结果-3"><a href="#测试结果-3" class="headerlink" title="测试结果"></a>测试结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSelectOrderAndUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Order&gt; all = orderMapper.findAll();</span><br><span class="line">    <span class="keyword">for</span>(Order order : all)&#123;</span><br><span class="line">        System.out.println(order);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8714.png" alt></p><h2 id="一对多查询-1"><a href="#一对多查询-1" class="headerlink" title="一对多查询"></a>一对多查询</h2><h3 id="一对多查询的模型-1"><a href="#一对多查询的模型-1" class="headerlink" title="一对多查询的模型"></a>一对多查询的模型</h3><p>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户</p><p>一对多查询的需求：查询一个用户，与此同时查询出该用户具有的订单</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8715.png" alt></p><h3 id="一对多查询的语句-1"><a href="#一对多查询的语句-1" class="headerlink" title="一对多查询的语句"></a>一对多查询的语句</h3><p>对应的sql语句：</p><pre><code>select * from user;select * from orders where uid=查询出用户的id;</code></pre><p>查询的结果如下：</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8716.png" alt></p><h3 id="修改User实体-1"><a href="#修改User实体-1" class="headerlink" title="修改User实体"></a>修改User实体</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> Date ordertime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> total;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//代表当前订单从属于哪一个客户</span></span><br><span class="line">    <span class="keyword">private</span> User user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="comment">//代表当前用户具备哪些订单</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Order&gt; orderList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建UserMapper接口-1"><a href="#创建UserMapper接口-1" class="headerlink" title="创建UserMapper接口"></a>创建UserMapper接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;User&gt; <span class="title">findAllUserAndOrder</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><h3 id="使用注解配置Mapper-1"><a href="#使用注解配置Mapper-1" class="headerlink" title="使用注解配置Mapper"></a>使用注解配置Mapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(&#123;</span><br><span class="line">            <span class="meta">@Result</span>(id = <span class="keyword">true</span>,property = <span class="string">"id"</span>,column = <span class="string">"id"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property = <span class="string">"username"</span>,column = <span class="string">"username"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property = <span class="string">"password"</span>,column = <span class="string">"password"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property = <span class="string">"birthday"</span>,column = <span class="string">"birthday"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(property = <span class="string">"orderList"</span>,column = <span class="string">"id"</span>,</span><br><span class="line">                    javaType = List<span class="class">.<span class="keyword">class</span>,</span></span><br><span class="line"><span class="class">                    <span class="title">many</span> </span>= <span class="meta">@Many</span>(select = <span class="string">"com.itheima.mapper.OrderMapper.findByUid"</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAllUserAndOrder</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OrderMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from orders where uid=#&#123;uid&#125;"</span>)</span><br><span class="line">    <span class="function">List&lt;Order&gt; <span class="title">findByUid</span><span class="params">(<span class="keyword">int</span> uid)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试结果-4"><a href="#测试结果-4" class="headerlink" title="测试结果"></a>测试结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; all = userMapper.findAllUserAndOrder();</span><br><span class="line"><span class="keyword">for</span>(User user : all)&#123;</span><br><span class="line">    System.out.println(user.getUsername());</span><br><span class="line">    List&lt;Order&gt; orderList = user.getOrderList();</span><br><span class="line">    <span class="keyword">for</span>(Order order : orderList)&#123;</span><br><span class="line">        System.out.println(order);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"-----------------------------"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8717.png" alt></p><h2 id="多对多查询-1"><a href="#多对多查询-1" class="headerlink" title="多对多查询"></a>多对多查询</h2><h3 id="多对多查询的模型-1"><a href="#多对多查询的模型-1" class="headerlink" title="多对多查询的模型"></a>多对多查询的模型</h3><p>用户表和角色表的关系为，一个用户有多个角色，一个角色被多个用户使用</p><p>多对多查询的需求：查询用户同时查询出该用户的所有角色</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8718.png" alt></p><h3 id="2-6-2-多对多查询的语句"><a href="#2-6-2-多对多查询的语句" class="headerlink" title="2.6.2 多对多查询的语句"></a>2.6.2 多对多查询的语句</h3><p>对应的sql语句：</p><pre><code>select * from user;SELECT * FROM sys_user_role uo,sys_role r WHERE uo.roleId=r.id AND uo.userId=用户的uid</code></pre><p>查询的结果如下(uid=1)：</p><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/image-20210302181921260.png" alt="image-20210302181921260"></p><h3 id="2-6-3-创建Role实体，修改User实体"><a href="#2-6-3-创建Role实体，修改User实体" class="headerlink" title="2.6.3 创建Role实体，修改User实体"></a>2.6.3 创建Role实体，修改User实体</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="comment">//代表当前用户具备哪些订单</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Order&gt; orders;</span><br><span class="line">    <span class="comment">//代表当前用户具备哪些角色</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Role&gt; roles;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Role</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String roleName;</span><br><span class="line">    <span class="keyword">private</span> String roleDesc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加UserMapper接口方法-1"><a href="#添加UserMapper接口方法-1" class="headerlink" title="添加UserMapper接口方法"></a>添加UserMapper接口方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;User&gt; <span class="title">findAllUserAndRole</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><h3 id="使用注解配置Mapper-2"><a href="#使用注解配置Mapper-2" class="headerlink" title="使用注解配置Mapper"></a>使用注解配置Mapper</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from user"</span>)</span><br><span class="line">    <span class="meta">@Results</span>(&#123;</span><br><span class="line">            <span class="meta">@Result</span>(id = <span class="keyword">true</span>, property = <span class="string">"id"</span>,column = <span class="string">"id"</span>),</span><br><span class="line">            <span class="meta">@Result</span>(javaType = List<span class="class">.<span class="keyword">class</span>,<span class="title">property</span> </span>= <span class="string">"roles"</span>,column = <span class="string">"id"</span>,</span><br><span class="line">                    many = <span class="meta">@Many</span>(select = <span class="string">"com.dhz.mapper.RoleMapper.findByUid"</span>)</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAllUserAndRole</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RoleMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"SELECT * FROM sys_user_role uo,sys_role r WHERE uo.roleId=r.id AND uo.userId=#&#123;uid&#125;"</span>)</span><br><span class="line">    <span class="function">List&lt;Role&gt; <span class="title">findByUid</span><span class="params">(<span class="keyword">int</span> uid)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6-6-测试结果"><a href="#2-6-6-测试结果" class="headerlink" title="2.6.6 测试结果"></a>2.6.6 测试结果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">List&lt;User&gt; users = userMapper.findAllUserAndRole();</span><br><span class="line"><span class="keyword">for</span> (User user : users) &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/%E5%9B%BE%E7%89%8720.png" alt></p><h1 id="SSM框架整合"><a href="#SSM框架整合" class="headerlink" title="SSM框架整合"></a>SSM框架整合</h1><h2 id="1-1-原始方式整合"><a href="#1-1-原始方式整合" class="headerlink" title="1.1 原始方式整合"></a>1.1 原始方式整合</h2><h3 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1.准备工作"></a>1.准备工作</h3><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/7.png" alt></p><h3 id="2-创建Maven工程"><a href="#2-创建Maven工程" class="headerlink" title="2.创建Maven工程"></a>2.创建Maven工程</h3><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/8.png" alt></p><h3 id="3-导入Maven坐标"><a href="#3-导入Maven坐标" class="headerlink" title="3.导入Maven坐标"></a>3.导入Maven坐标</h3><p>参考：<strong>素材/配置文件/pom.xml文件</strong></p><h3 id="4-编写实体类"><a href="#4-编写实体类" class="headerlink" title="4.编写实体类"></a>4.编写实体类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> money;</span><br><span class="line">    <span class="comment">//省略getter和setter方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-编写Mapper接口"><a href="#5-编写Mapper接口" class="headerlink" title="5.编写Mapper接口"></a>5.编写Mapper接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">//保存账户数据</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(Account account)</span></span>;</span><br><span class="line">    <span class="comment">//查询账户数据</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-编写Service接口"><a href="#6-编写Service接口" class="headerlink" title="6.编写Service接口"></a>6.编写Service接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(Account account)</span></span>; <span class="comment">//保存账户数据</span></span><br><span class="line">    <span class="function">List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span></span>; <span class="comment">//查询账户数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-编写Service接口实现"><a href="#7-编写Service接口实现" class="headerlink" title="7.编写Service接口实现"></a>7.编写Service接口实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.openSession();</span><br><span class="line">        AccountMapper accountMapper = sqlSession.getMapper(AccountMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        accountMapper.save(account);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MyBatisUtils.openSession();</span><br><span class="line">        AccountMapper accountMapper = sqlSession.getMapper(AccountMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        <span class="keyword">return</span> accountMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-编写Controller"><a href="#8-编写Controller" class="headerlink" title="8.编写Controller"></a>8.编写Controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">(Account account)</span></span>&#123;</span><br><span class="line">        accountService.save(account);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"save success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        modelAndView.setViewName(<span class="string">"accountList"</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">"accountList"</span>,accountService.findAll());</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-编写添加页面"><a href="#9-编写添加页面" class="headerlink" title="9.编写添加页面"></a>9.编写添加页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>保存账户信息表单<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"$&#123;pageContext.request.contextPath&#125;/save.action"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        用户名称<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        账户金额<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"money"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"保存"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="10-编写列表页面"><a href="#10-编写列表页面" class="headerlink" title="10.编写列表页面"></a>10.编写列表页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>账户id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>账户名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>账户金额<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">items</span>=<span class="string">"$&#123;accountList&#125;"</span> <span class="attr">var</span>=<span class="string">"account"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;account.id&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;account.name&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;account.money&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="11-编写相应配置文件-文件参考目录：素材-配置文件"><a href="#11-编写相应配置文件-文件参考目录：素材-配置文件" class="headerlink" title="11.编写相应配置文件(文件参考目录：素材/配置文件)"></a>11.编写相应配置文件(文件参考目录：素材/配置文件)</h3><p>•Spring配置文件：<a href="配置文件/applicationContext.xml">applicationContext.xml</a></p><p>•SprngMVC配置文件：<a href="配置文件/spring-mvc.xml">spring-mvc.xml</a></p><p>•MyBatis映射文件：<a href="配置文件/AccountMapper.xml">AccountMapper.xml</a></p><p>•MyBatis核心文件：<a href="配置文件/sqlMapConfig.xml">sqlMapConfig.xml</a></p><p>•数据库连接信息文件：<a href="配置文件/jdbc.properties">jdbc.properties</a></p><p>•Web.xml文件：<a href="配置文件/web.xml">web.xml</a></p><p>•日志文件：[log4j.xml](</p><h3 id="12-测试添加账户"><a href="#12-测试添加账户" class="headerlink" title="12.测试添加账户"></a>12.测试添加账户</h3><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/9.jpg" alt></p><h3 id="13-测试账户列表"><a href="#13-测试账户列表" class="headerlink" title="13.测试账户列表"></a>13.测试账户列表</h3><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/10.png" alt></p><h2 id="1-2-Spring整合MyBatis"><a href="#1-2-Spring整合MyBatis" class="headerlink" title="1.2 Spring整合MyBatis"></a>1.2 Spring整合MyBatis</h2><h3 id="1-整合思路"><a href="#1-整合思路" class="headerlink" title="1.整合思路"></a>1.整合思路</h3><p><img src="/2021/02/25/Mybatis-%E5%A4%9A%E8%A1%A8-%E6%B3%A8%E8%A7%A3/11.png" alt></p><h3 id="2-将SqlSessionFactory配置到Spring容器中"><a href="#2-将SqlSessionFactory配置到Spring容器中" class="headerlink" title="2.将SqlSessionFactory配置到Spring容器中"></a>2.将SqlSessionFactory配置到Spring容器中</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--加载jdbc.properties--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置数据源--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置MyBatis的SqlSessionFactory--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:sqlMapConfig.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-扫描Mapper，让Spring容器产生Mapper实现类"><a href="#3-扫描Mapper，让Spring容器产生Mapper实现类" class="headerlink" title="3.扫描Mapper，让Spring容器产生Mapper实现类"></a>3.扫描Mapper，让Spring容器产生Mapper实现类</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Mapper扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.itheima.mapper"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-配置声明式事务控制"><a href="#4-配置声明式事务控制" class="headerlink" title="4.配置声明式事务控制"></a>4.配置声明式事务控制</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置声明式事务控制--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transacionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transacionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"txPointcut"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"txPointcut"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-修改Service实现类代码"><a href="#5-修改Service实现类代码" class="headerlink" title="5.修改Service实现类代码"></a>5.修改Service实现类代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountMapper accountMapper;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(Account account)</span> </span>&#123;</span><br><span class="line">        accountMapper.save(account);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Account&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> accountMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis_Dao</title>
      <link href="2021/02/25/Mybatis-Dao/"/>
      <url>2021/02/25/Mybatis-Dao/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="Mybatis的Dao层实现"><a href="#Mybatis的Dao层实现" class="headerlink" title="Mybatis的Dao层实现"></a>Mybatis的Dao层实现</h2><h3 id="传统开发方式"><a href="#传统开发方式" class="headerlink" title="传统开发方式"></a>传统开发方式</h3><h4 id="编写UserDao接口"><a href="#编写UserDao接口" class="headerlink" title="编写UserDao接口"></a>编写UserDao接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="编写UserDaoImpl实现"><a href="#编写UserDaoImpl实现" class="headerlink" title="编写UserDaoImpl实现"></a>编写UserDaoImpl实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        InputStream resourceAsStream = </span><br><span class="line">                    Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">        SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> </span><br><span class="line">                    SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">        SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        List&lt;User&gt; userList = sqlSession.selectList(<span class="string">"userMapper.findAll"</span>);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="测试传统方式"><a href="#测试传统方式" class="headerlink" title="测试传统方式"></a>测试传统方式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTraditionDao</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    UserDao userDao = <span class="keyword">new</span> UserDaoImpl();</span><br><span class="line">    List&lt;User&gt; all = userDao.findAll();</span><br><span class="line">    System.out.println(all);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代理开发方式"><a href="#代理开发方式" class="headerlink" title="代理开发方式"></a>代理开发方式</h3><h4 id="代理开发方式介绍"><a href="#代理开发方式介绍" class="headerlink" title="代理开发方式介绍"></a>代理开发方式介绍</h4><p>采用 Mybatis 的代理开发方式实现 DAO 层的开发，这种方式是我们后面进入企业的主流。</p><p>Mapper 接口开发方法只需要程序员编写Mapper 接口（相当于Dao 接口），由Mybatis 框架根据接口定义创建接口的动态代理对象，代理对象的方法体同上边Dao接口实现类方法。</p><p>Mapper 接口开发需要遵循以下规范：</p><p><strong>1) Mapper.xml文件中的namespace与mapper接口的全限定名相同</strong></p><p><strong>2) Mapper接口方法名和Mapper.xml中定义的每个statement的id相同</strong></p><p><strong>3) Mapper接口方法的输入参数类型和mapper.xml中定义的每个sql的parameterType的类型相同</strong></p><p><strong>4) Mapper接口方法的输出参数类型和mapper.xml中定义的每个sql的resultType的类型相同</strong></p><h4 id="编写UserMapper接口"><a href="#编写UserMapper接口" class="headerlink" title="编写UserMapper接口"></a>编写UserMapper接口</h4><p><img src="/2021/02/25/Mybatis-Dao/%E5%9B%BE1.png" alt></p><h4 id="测试代理方式"><a href="#测试代理方式" class="headerlink" title="测试代理方式"></a>测试代理方式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testProxyDao</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">    SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">    SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//获得MyBatis框架生成的UserMapper接口的实现类</span></span><br><span class="line">  UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    User user = userMapper.findById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="知识小结"><a href="#知识小结" class="headerlink" title="知识小结"></a>知识小结</h3><p>MyBatis的Dao层实现的两种方式：</p><p>手动对Dao进行实现：传统开发方式</p><p><strong>代理方式对Dao进行实现：</strong></p><pre><code>**UserMapper userMapper = sqlSession.getMapper(UserMapper.class);**</code></pre><h2 id="MyBatis映射文件深入"><a href="#MyBatis映射文件深入" class="headerlink" title="MyBatis映射文件深入"></a>MyBatis映射文件深入</h2><h3 id="动态sql语句"><a href="#动态sql语句" class="headerlink" title="动态sql语句"></a>动态sql语句</h3><h4 id="动态sql语句概述"><a href="#动态sql语句概述" class="headerlink" title="动态sql语句概述"></a>动态sql语句概述</h4><p>Mybatis 的映射文件中，前面我们的 SQL 都是比较简单的，有些时候业务逻辑复杂时，我们的 SQL是动态变化的，此时在前面的学习中我们的 SQL 就不能满足要求了。</p><p>参考的官方文档，描述如下：</p><p><img src="/2021/02/25/Mybatis-Dao/%E5%9B%BE%E7%89%872.png" alt></p><h4 id="动态-SQL-之-lt-if-gt"><a href="#动态-SQL-之-lt-if-gt" class="headerlink" title="动态 SQL  之&lt;if&gt;"></a>动态 SQL  之&lt;<strong>if&gt;</strong></h4><p>我们根据实体类的不同取值，使用不同的 SQL语句来进行查询。比如在 id如果不为空时可以根据id查询，如果username 不同空时还要加入用户名作为条件。这种情况在我们的多条件组合查询中经常会碰到。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByCondition"</span> <span class="attr">parameterType</span>=<span class="string">"user"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    select * from User</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"id!=0"</span>&gt;</span></span><br><span class="line">            and id=#&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"username!=null"</span>&gt;</span></span><br><span class="line">            and username=#&#123;username&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>当查询条件id和username都存在时，控制台打印的sql语句如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   … … …</span><br><span class="line">   <span class="comment">//获得MyBatis框架生成的UserMapper接口的实现类</span></span><br><span class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  User condition = <span class="keyword">new</span> User();</span><br><span class="line">  condition.setId(<span class="number">1</span>);</span><br><span class="line">  condition.setUsername(<span class="string">"lucy"</span>);</span><br><span class="line">  User user = userMapper.findByCondition(condition);</span><br><span class="line">  … … …</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-Dao/%E5%9B%BE%E7%89%873.png" alt></p><p>当查询条件只有id存在时，控制台打印的sql语句如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> … … …</span><br><span class="line"> <span class="comment">//获得MyBatis框架生成的UserMapper接口的实现类</span></span><br><span class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">User condition = <span class="keyword">new</span> User();</span><br><span class="line">condition.setId(<span class="number">1</span>);</span><br><span class="line">User user = userMapper.findByCondition(condition);</span><br><span class="line">… … …</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-Dao/%E5%9B%BE%E7%89%874.png" alt></p><h4 id="动态-SQL-之-lt-foreach-gt"><a href="#动态-SQL-之-lt-foreach-gt" class="headerlink" title="动态 SQL  之&lt;foreach&gt;"></a>动态 SQL  之&lt;<strong>foreach&gt;</strong></h4><p>循环执行sql的拼接操作，例如：SELECT * FROM USER WHERE id IN (1,2,5)。</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByIds"</span> <span class="attr">parameterType</span>=<span class="string">"list"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    select * from User</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">open</span>=<span class="string">"id in("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>测试代码片段如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> … … …</span><br><span class="line"> <span class="comment">//获得MyBatis框架生成的UserMapper接口的实现类</span></span><br><span class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="keyword">int</span>[] ids = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>,<span class="number">5</span>&#125;;</span><br><span class="line">List&lt;User&gt; userList = userMapper.findByIds(ids);</span><br><span class="line">System.out.println(userList);</span><br><span class="line">… … …</span><br></pre></td></tr></table></figure><p><img src="/2021/02/25/Mybatis-Dao/%E5%9B%BE%E7%89%875.png" alt></p><p>foreach标签的属性含义如下：</p><p><foreach>标签用于遍历集合，它的属性：</foreach></p><p>•collection：代表要遍历的集合元素，注意编写时不要写#{}，<strong>list或者array</strong></p><p>•open：代表语句的开始部分</p><p>•close：代表结束部分</p><p>•item：代表遍历集合的每个元素，生成的变量名</p><p>•sperator：代表分隔符</p><h3 id="SQL片段抽取"><a href="#SQL片段抽取" class="headerlink" title="SQL片段抽取"></a>SQL片段抽取</h3><p>Sql 中可将重复的 sql 提取出来，使用时用 include 引用即可，最终达到 sql 重用的目的</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--抽取sql片段简化编写--&gt;</span></span><br><span class="line">&lt;sql id="selectUser" select * from User&lt;/sql&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"selectUser"</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByIds"</span> <span class="attr">parameterType</span>=<span class="string">"list"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"selectUser"</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">open</span>=<span class="string">"id in("</span> <span class="attr">close</span>=<span class="string">")"</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span>&gt;</span></span><br><span class="line">            #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="知识小结-1"><a href="#知识小结-1" class="headerlink" title="知识小结"></a>知识小结</h3><p>MyBatis映射文件配置：</p><p><select>：查询</select></p><p><insert>：插入</insert></p><p><update>：修改</update></p><p><delete>：删除</delete></p><p><where>：where条件</where></p><p><if>：if判断</if></p><p><foreach>：循环</foreach></p><p><sql>：sql片段抽取</sql></p><h2 id="MyBatis核心配置文件深入"><a href="#MyBatis核心配置文件深入" class="headerlink" title="MyBatis核心配置文件深入"></a>MyBatis核心配置文件深入</h2><h3 id="typeHandlers标签"><a href="#typeHandlers标签" class="headerlink" title="typeHandlers标签"></a>typeHandlers标签</h3><p>无论是 MyBatis 在预处理语句（PreparedStatement）中设置一个参数时，还是从结果集中取出一个值时， 都会用类型处理器将获取的值以合适的方式转换成 Java 类型。下表描述了一些默认的类型处理器（截取部分）。</p><p> <img src="/2021/02/25/Mybatis-Dao/%E5%9B%BE%E7%89%876.png" alt></p><p>你可以重写类型处理器或创建你自己的类型处理器来处理不支持的或非标准的类型。具体做法为：实现 org.apache.ibatis.type.TypeHandler 接口， 或继承一个很便利的类 org.apache.ibatis.type.BaseTypeHandler， 然后可以选择性地将它映射到一个JDBC类型。例如需求：一个Java中的Date数据类型，我想将之存到数据库的时候存成一个1970年至今的毫秒数，取出来时转换成java的Date，即java的Date与数据库的varchar毫秒值之间转换。</p><p>开发步骤：</p><p>①定义转换类继承类BaseTypeHandler<T></T></p><p>②覆盖4个未实现的方法，其中setNonNullParameter为java程序设置数据到数据库的回调方法，getNullableResult为查询时 mysql的字符串类型转换成 java的Type类型的方法</p><p>③在MyBatis核心配置文件中进行注册</p><p>测试转换是否正确</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateTypeHandler</span> <span class="keyword">extends</span> <span class="title">BaseTypeHandler</span>&lt;<span class="title">Date</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNonNullParameter</span><span class="params">(PreparedStatement ps, <span class="keyword">int</span> i, Date parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        ps.setLong(i,parameter.getTime());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getNullableResult</span><span class="params">(ResultSet rs, String columnName)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Date(rs.getLong(columnName));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getNullableResult</span><span class="params">(ResultSet rs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Date(rs.getLong(columnIndex));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getNullableResult</span><span class="params">(CallableStatement cs, <span class="keyword">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Date(cs.getLong(columnIndex));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册类型自定义转换器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">"com.itheima.typeHandlers.MyDateTypeHandler"</span>&gt;</span><span class="tag">&lt;/<span class="name">typeHandler</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>测试添加操作：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">userMapper.save(user);</span><br></pre></td></tr></table></figure><h3 id="plugins标签"><a href="#plugins标签" class="headerlink" title="plugins标签"></a>plugins标签</h3><p>MyBatis可以使用第三方的插件来对功能进行扩展，分页助手PageHelper是将分页的复杂操作进行封装，使用简单的方式即可获得分页的相关数据</p><p>开发步骤：</p><p>①导入通用PageHelper的坐标</p><p>②在mybatis核心配置文件中配置PageHelper插件</p><p>③测试分页数据获取</p><h4 id="①导入通用PageHelper坐标"><a href="#①导入通用PageHelper坐标" class="headerlink" title="①导入通用PageHelper坐标"></a>①导入通用PageHelper坐标</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 分页助手 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.jsqlparser<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="②在mybatis核心配置文件中配置PageHelper插件"><a href="#②在mybatis核心配置文件中配置PageHelper插件" class="headerlink" title="②在mybatis核心配置文件中配置PageHelper插件"></a>②在mybatis核心配置文件中配置PageHelper插件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注意：分页助手的插件  配置在通用馆mapper之前 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- PageHelper5版本配置 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">"com.github.pagehelper.PageInterceptor"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="③测试分页代码实现"><a href="#③测试分页代码实现" class="headerlink" title="③测试分页代码实现"></a>③测试分页代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPageHelper</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//设置分页参数</span></span><br><span class="line">    PageHelper.startPage(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; select = userMapper2.select(<span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">for</span>(User user : select)&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>获得分页相关的其他参数</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//其他分页的数据</span></span><br><span class="line">PageInfo&lt;User&gt; pageInfo = <span class="keyword">new</span> PageInfo&lt;User&gt;(select);</span><br><span class="line">System.out.println(<span class="string">"总条数："</span>+pageInfo.getTotal());</span><br><span class="line">System.out.println(<span class="string">"总页数："</span>+pageInfo.getPages());</span><br><span class="line">System.out.println(<span class="string">"当前页："</span>+pageInfo.getPageNum());</span><br><span class="line">System.out.println(<span class="string">"每页显示长度："</span>+pageInfo.getPageSize());</span><br><span class="line">System.out.println(<span class="string">"是否第一页："</span>+pageInfo.isIsFirstPage());</span><br><span class="line">System.out.println(<span class="string">"是否最后一页："</span>+pageInfo.isIsLastPage());</span><br></pre></td></tr></table></figure><h3 id="知识小结-2"><a href="#知识小结-2" class="headerlink" title="知识小结"></a>知识小结</h3><p>MyBatis核心配置文件常用标签：</p><p>1、properties标签：该标签可以加载外部的properties文件</p><p>2、typeAliases标签：设置类型别名</p><p>3、environments标签：数据源环境配置标签</p><p>4、typeHandlers标签：配置自定义类型处理器</p><p>5、plugins标签：配置MyBatis的插件</p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis</title>
      <link href="2021/02/24/Mybatis/"/>
      <url>2021/02/24/Mybatis/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="Mybatis简介"><a href="#Mybatis简介" class="headerlink" title="Mybatis简介"></a>Mybatis简介</h2><h3 id="原始jdbc操作（查询数据）"><a href="#原始jdbc操作（查询数据）" class="headerlink" title="原始jdbc操作（查询数据）"></a>原始jdbc操作（查询数据）</h3><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%871.png" alt></p><h3 id="原始jdbc操作（插入数据）"><a href="#原始jdbc操作（插入数据）" class="headerlink" title="原始jdbc操作（插入数据）"></a>原始jdbc操作（插入数据）</h3><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%872.png" alt></p><h3 id="原始jdbc操作的分析"><a href="#原始jdbc操作的分析" class="headerlink" title="原始jdbc操作的分析"></a>原始jdbc操作的分析</h3><p>原始jdbc开发存在的问题如下：</p><p>①数据库连接创建、释放频繁造成系统资源浪费从而影响系统性能</p><p>②sql 语句在代码中硬编码，造成代码不易维护，实际应用 sql 变化的可能较大，sql 变动需要改变java代码。</p><p>③查询操作时，需要手动将结果集中的数据手动封装到实体中。插入操作时，需要手动将实体的数据设置到sql语句的占位符位置</p><p>应对上述问题给出的解决方案：</p><p>①使用数据库连接池初始化连接资源</p><p>②将sql语句抽取到xml配置文件中</p><p>③使用反射、内省等底层技术，自动将实体与表进行属性与字段的自动映射</p><h3 id="什么是Mybatis"><a href="#什么是Mybatis" class="headerlink" title="什么是Mybatis"></a>什么是Mybatis</h3><p>mybatis 是一个优秀的基于java的持久层框架，它内部封装了jdbc，使开发者只需要关注sql语句本身，而不需要花费精力去处理加载驱动、创建连接、创建statement等繁杂的过程。</p><p>mybatis通过xml或注解的方式将要执行的各种 statement配置起来，并通过java对象和statement中sql的动态参数进行映射生成最终执行的sql语句。</p><p>最后mybatis框架执行sql并将结果映射为java对象并返回。采用ORM思想解决了实体和数据库映射的问题，对jdbc 进行了封装，屏蔽了jdbc api 底层访问细节，使我们不用与jdbc api 打交道，就可以完成对数据库的持久化操作。</p><h2 id="Mybatis的快速入门"><a href="#Mybatis的快速入门" class="headerlink" title="Mybatis的快速入门"></a>Mybatis的快速入门</h2><h3 id="MyBatis开发步骤"><a href="#MyBatis开发步骤" class="headerlink" title="MyBatis开发步骤"></a>MyBatis开发步骤</h3><p>MyBatis官网地址：<a href="http://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener">http://www.mybatis.org/mybatis-3/</a> </p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%873.png" alt></p><p><strong>MyBatis开发步骤：</strong></p><p>①添加MyBatis的坐标</p><p>②创建user数据表</p><p>③编写User实体类 </p><p>④编写映射文件UserMapper.xml</p><p>⑤编写核心文件SqlMapConfig.xml</p><p>⑥编写测试类</p><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p>1)导入MyBatis的坐标和其他相关坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mysql驱动坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--单元测试坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--日志坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2)  创建user数据表</p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%875.png" alt></p><p>3) 编写User实体</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;    </span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> id;    </span><br><span class="line"><span class="keyword">private</span> String username;    </span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">//省略get个set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4)编写UserMapper映射文件</p><p><img src="/2021/02/24/Mybatis/image-20210224181439586.png" alt="image-20210224181439586"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"userMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.dhz.domain.User"</span>&gt;</span>        </span><br><span class="line">select * from User    </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5) 编写MyBatis核心文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    数据源环境--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///test"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">             <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    加载映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com\dhz\mapper\UserMapper.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="编写测试代码"><a href="#编写测试代码" class="headerlink" title="编写测试代码"></a>编写测试代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载核心配置文件</span></span><br><span class="line">InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line"><span class="comment">//获得sqlSession工厂对象</span></span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line"><span class="comment">//获得sqlSession对象</span></span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//执行sql语句</span></span><br><span class="line">List&lt;User&gt; userList = sqlSession.selectList(<span class="string">"userMapper.findAll"</span>);</span><br><span class="line"><span class="comment">//打印结果</span></span><br><span class="line">System.out.println(uselrList);</span><br><span class="line"><span class="comment">//释放资源</span></span><br><span class="line">sqlSession.close();</span><br></pre></td></tr></table></figure><h3 id="知识小结"><a href="#知识小结" class="headerlink" title="知识小结"></a>知识小结</h3><p><strong>MyBatis开发步骤：</strong></p><p>①添加MyBatis的坐标</p><p>②创建user数据表</p><p>③编写User实体类 </p><p>④编写映射文件UserMapper.xml</p><p>⑤编写核心文件SqlMapConfig.xml</p><p>⑥编写测试类</p><h2 id="MyBatis的映射文件概述"><a href="#MyBatis的映射文件概述" class="headerlink" title="MyBatis的映射文件概述"></a>MyBatis的映射文件概述</h2><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%876.png" alt></p><h2 id="MyBatis的增删改查操作"><a href="#MyBatis的增删改查操作" class="headerlink" title="MyBatis的增删改查操作"></a>MyBatis的增删改查操作</h2><h3 id="MyBatis的插入数据操作"><a href="#MyBatis的插入数据操作" class="headerlink" title="MyBatis的插入数据操作"></a>MyBatis的插入数据操作</h3><p><strong>1)编写UserMapper映射文件</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"userMapper"</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"add"</span> <span class="attr">parameterType</span>=<span class="string">"com.dhz.domain.User"</span>&gt;</span>        </span><br><span class="line">insert into user values(#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;)    </span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2)编写插入实体User的代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> </span><br><span class="line">                        SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">int</span> insert = sqlSession.insert(<span class="string">"userMapper.add"</span>, user);</span><br><span class="line">System.out.println(insert);</span><br><span class="line"><span class="comment">//提交事务</span></span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br></pre></td></tr></table></figure><p><strong>3)插入操作注意问题</strong></p><p>• 插入语句使用insert标签</p><p>• 在映射文件中使用parameterType属性指定要插入的数据类型</p><p>•Sql语句中使用#{实体属性名}方式引用实体中的属性值</p><p>•插入操作使用的API是sqlSession.insert(“命名空间.id”,实体对象);</p><p>•插入操作涉及数据库数据变化，所以要使用sqlSession对象显示的提交事务，即sqlSession.commit() </p><h3 id="MyBatis的修改数据操作"><a href="#MyBatis的修改数据操作" class="headerlink" title="MyBatis的修改数据操作"></a>MyBatis的修改数据操作</h3><p><strong>1)编写UserMapper映射文件</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"userMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"update"</span> <span class="attr">parameterType</span>=<span class="string">"com.itheima.domain.User"</span>&gt;</span></span><br><span class="line">        update user set username=#&#123;username&#125;,password=#&#123;password&#125; where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2)编写修改实体User的代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">int</span> update = sqlSession.update(<span class="string">"userMapper.update"</span>, user);</span><br><span class="line">System.out.println(update);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br></pre></td></tr></table></figure><p><strong>3)修改操作注意问题</strong></p><p>• 修改语句使用update标签</p><p>• 修改操作使用的API是sqlSession.update(“命名空间.id”,实体对象);</p><h3 id="MyBatis的删除数据操作"><a href="#MyBatis的删除数据操作" class="headerlink" title="MyBatis的删除数据操作"></a>MyBatis的删除数据操作</h3><p><strong>1)编写UserMapper映射文件</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"userMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"delete"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span><br><span class="line">        delete from user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2)编写删除数据的代码</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">InputStream resourceAsStream = Resources.getResourceAsStream(<span class="string">"SqlMapConfig.xml"</span>);</span><br><span class="line">SqlSessionFactory sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(resourceAsStream);</span><br><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">int</span> delete = sqlSession.delete(<span class="string">"userMapper.delete"</span>,<span class="number">3</span>);</span><br><span class="line">System.out.println(delete);</span><br><span class="line">sqlSession.commit();</span><br><span class="line">sqlSession.close();</span><br></pre></td></tr></table></figure><p><strong>3)删除操作注意问题</strong></p><p>• 删除语句使用delete标签</p><p><strong>•Sql语句中使用#{任意字符串}方式引用传递的单个参数</strong></p><p>•删除操作使用的API是sqlSession.delete(“命名空间.id”,Object);</p><h3 id="知识小结-1"><a href="#知识小结-1" class="headerlink" title="知识小结"></a>知识小结</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">增删改查映射配置与API：</span><br><span class="line">查询数据： List&lt;User&gt; userList = sqlSession.selectList(<span class="string">"userMapper.findAll"</span>);</span><br><span class="line">    &lt;select id=<span class="string">"findAll"</span> resultType=<span class="string">"com.itheima.domain.User"</span>&gt;</span><br><span class="line">        select * from User</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">添加数据： sqlSession.insert(<span class="string">"userMapper.add"</span>, user);</span><br><span class="line">    &lt;insert id=<span class="string">"add"</span> parameterType=<span class="string">"com.itheima.domain.User"</span>&gt;</span><br><span class="line">        <span class="function">insert into user <span class="title">values</span><span class="params">(#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;)</span></span></span><br><span class="line"><span class="function">    &lt;/insert&gt;</span></span><br><span class="line"><span class="function">修改数据： sqlSession.<span class="title">update</span><span class="params">(<span class="string">"userMapper.update"</span>, user)</span></span>;</span><br><span class="line">    &lt;update id=<span class="string">"update"</span> parameterType=<span class="string">"com.itheima.domain.User"</span>&gt;</span><br><span class="line">        update user set username=#&#123;username&#125;,password=#&#123;password&#125; where id=#&#123;id&#125;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line">删除数据：sqlSession.delete(<span class="string">"userMapper.delete"</span>,<span class="number">3</span>);</span><br><span class="line">    &lt;delete id=<span class="string">"delete"</span> parameterType=<span class="string">"java.lang.Integer"</span>&gt;</span><br><span class="line">        delete from user where id=#&#123;id&#125;</span><br><span class="line">    &lt;/delete&gt;</span><br></pre></td></tr></table></figure><h2 id="MyBatis核心配置文件概述"><a href="#MyBatis核心配置文件概述" class="headerlink" title="MyBatis核心配置文件概述"></a>MyBatis核心配置文件概述</h2><h3 id="MyBatis核心配置文件层级关系"><a href="#MyBatis核心配置文件层级关系" class="headerlink" title="MyBatis核心配置文件层级关系"></a>MyBatis核心配置文件层级关系</h3><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%877.png" alt></p><h3 id="MyBatis常用配置解析"><a href="#MyBatis常用配置解析" class="headerlink" title="MyBatis常用配置解析"></a>MyBatis常用配置解析</h3><p><strong>1)environments标签</strong></p><p>数据库环境的配置，支持多环境配置</p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%878.png" alt></p><p>其中，事务管理器（transactionManager）类型有两种：</p><p>•JDBC：这个配置就是直接使用了JDBC 的提交和回滚设置，它依赖于从数据源得到的连接来管理事务作用域。</p><p>•MANAGED：这个配置几乎没做什么。它从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期（比如 JEE 应用服务器的上下文）。 默认情况下它会关闭连接，然而一些容器并不希望这样，因此需要将 closeConnection 属性设置为 false 来阻止它默认的关闭行为。</p><p>其中，数据源（dataSource）类型有三种：</p><p>•UNPOOLED：这个数据源的实现只是每次被请求时打开和关闭连接。</p><p>•POOLED：这种数据源的实现利用“池”的概念将 JDBC 连接对象组织起来。</p><p>•JNDI：这个数据源的实现是为了能在如 EJB 或应用服务器这类容器中使用，容器可以集中或在外部配置数据源，然后放置一个 JNDI 上下文的引用。</p><p><strong>2)mapper标签</strong></p><p>该标签的作用是加载映射的，加载方式有如下几种：</p><p>•使用相对于类路径的资源引用，例如：</p><mapper resource="org/mybatis/builder/AuthorMapper.xml"><p>•使用完全限定资源定位符（URL），例如：</p><mapper url="file:///var/mappers/AuthorMapper.xml"><p>•使用映射器接口实现类的完全限定类名，例如：</p><mapper class="org.mybatis.builder.AuthorMapper"><p>•将包内的映射器接口实现全部注册为映射器，例如：</p><package name="org.mybatis.builder"><p><strong>3)Properties标签</strong></p><p>实际开发中，习惯将数据源的配置信息单独抽取成一个properties文件，该标签可以加载额外配置的properties文件</p><p>  <img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%879.png" alt></p><p><strong>4)typeAliases标签（在SqlMapConfig.xml里，注意顺序）</strong></p><p>类型别名是为Java 类型设置一个短的名字。原来的类型名称配置如下</p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%8710.png" alt></p><p>配置typeAliases，为com.itheima.domain.User定义别名为user</p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%8711.png" alt></p><p>上面我们是自定义的别名，mybatis框架已经为我们设置好的一些常用的类型的别名</p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%8712.png" alt></p><h3 id="知识小结-2"><a href="#知识小结-2" class="headerlink" title="知识小结"></a>知识小结</h3><p><strong>核心配置文件常用配置：</strong></p><p>properties标签：该标签可以加载外部的properties文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"jdbc.properties"</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p>typeAliases标签：设置类型别名</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">"com.itheima.domain.User"</span> <span class="attr">alias</span>=<span class="string">"user"</span>&gt;</span><span class="tag">&lt;/<span class="name">typeAlias</span>&gt;</span></span><br></pre></td></tr></table></figure><p>mappers标签：加载映射配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/itheima/mapper/UserMapping.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>environments标签：数据源环境配置标签</p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%8713.png" alt></p><h2 id="MyBatis相应API"><a href="#MyBatis相应API" class="headerlink" title="MyBatis相应API"></a>MyBatis相应API</h2><h3 id="SqlSession工厂构建器SqlSessionFactoryBuilder"><a href="#SqlSession工厂构建器SqlSessionFactoryBuilder" class="headerlink" title="SqlSession工厂构建器SqlSessionFactoryBuilder"></a>SqlSession工厂构建器SqlSessionFactoryBuilder</h3><p>常用API：SqlSessionFactory  build(InputStream inputStream)</p><p>通过加载mybatis的核心文件的输入流的形式构建一个SqlSessionFactory对象</p> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String resource = <span class="string">"org/mybatis/builder/mybatis-config.xml"</span>; </span><br><span class="line">InputStream inputStream = Resources.getResourceAsStream(resource); </span><br><span class="line">SqlSessionFactoryBuilder builder = <span class="keyword">new</span> SqlSessionFactoryBuilder(); </span><br><span class="line">SqlSessionFactory factory = builder.build(inputStream);</span><br></pre></td></tr></table></figure><p>其中， Resources 工具类，这个类在 org.apache.ibatis.io 包中。Resources 类帮助你从类路径下、文件系统或一个 web URL 中加载资源文件。</p><h3 id="SqlSession工厂对象SqlSessionFactory"><a href="#SqlSession工厂对象SqlSessionFactory" class="headerlink" title="SqlSession工厂对象SqlSessionFactory"></a>SqlSession工厂对象SqlSessionFactory</h3><p>SqlSessionFactory 有多个个方法创建SqlSession 实例。常用的有如下两个：</p><p><img src="/2021/02/24/Mybatis/%E5%9B%BE%E7%89%8714.png" alt="1552653723002"></p><h3 id="SqlSession会话对象"><a href="#SqlSession会话对象" class="headerlink" title="SqlSession会话对象"></a>SqlSession会话对象</h3><p>SqlSession 实例在 MyBatis 中是非常强大的一个类。在这里你会看到所有执行语句、提交或回滚事务和获取映射器实例的方法。</p><p>执行语句的方法主要有：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt; <span class="function">T <span class="title">selectOne</span><span class="params">(String statement, Object parameter)</span> </span></span><br><span class="line"><span class="function">&lt;E&gt; List&lt;E&gt; <span class="title">selectList</span><span class="params">(String statement, Object parameter)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(String statement, Object parameter)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(String statement, Object parameter)</span> </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">delete</span><span class="params">(String statement, Object parameter)</span></span></span><br></pre></td></tr></table></figure><p>操作事务的方法主要有：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">commit</span><span class="params">()</span>  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rollback</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></package></mapper></mapper></mapper>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springmvc_快速操作</title>
      <link href="2021/02/21/springmvc-%E5%BF%AB%E9%80%9F%E6%93%8D%E4%BD%9C/"/>
      <url>2021/02/21/springmvc-%E5%BF%AB%E9%80%9F%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="快速搭建环境"><a href="#快速搭建环境" class="headerlink" title="快速搭建环境"></a>快速搭建环境</h2><h3 id="创建maven项目选中webapp-修改web-xml"><a href="#创建maven项目选中webapp-修改web-xml" class="headerlink" title="创建maven项目选中webapp,修改web.xml"></a>创建maven项目选中webapp,修改web.xml</h3><ul><li>maven-archetype-webapp创建web.xml默认不支持EL</li></ul><p><img src="/2021/02/21/springmvc-%E5%BF%AB%E9%80%9F%E6%93%8D%E4%BD%9C/image-20210221084921913.png" alt="image-20210221084921913"></p><p>修改web.xml如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;web-app xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot; xmlns&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;javaee&quot; xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;javaee http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;javaee&#x2F;web-app_3_0.xsd&quot; id&#x3D;&quot;WebApp_ID&quot; version&#x3D;&quot;3.0&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;&#x2F;web-app&gt;</span><br></pre></td></tr></table></figure><h3 id="新建各种包和配置文件"><a href="#新建各种包和配置文件" class="headerlink" title="新建各种包和配置文件"></a>新建各种包和配置文件</h3><h4 id="新建包"><a href="#新建包" class="headerlink" title="新建包"></a>新建包</h4><p>controller、service、dao、domain、utils</p><h4 id="新建配置文件-resources下"><a href="#新建配置文件-resources下" class="headerlink" title="新建配置文件(resources下)"></a>新建配置文件(resources下)</h4><p>applicationContext.xml、spring-mvc.xml、jdbc.properties、log4j.properties</p><ul><li><p>applicationContext.xml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;</span><br><span class="line">       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;</span><br><span class="line">       xsi:schemaLocation&#x3D;&quot;</span><br><span class="line">       http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd</span><br><span class="line">       http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd</span><br><span class="line">&quot;&gt;</span><br><span class="line">    &lt;!--1、加载jdbc.properties--&gt;</span><br><span class="line">    &lt;context:property-placeholder location&#x3D;&quot;classpath:jdbc.properties&quot;&#x2F;&gt;</span><br><span class="line">    &lt;!--2、配置数据源对象--&gt;</span><br><span class="line">    &lt;bean id&#x3D;&quot;dataSource&quot; class&#x3D;&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;driverClass&quot; value&#x3D;&quot;$&#123;jdbc.driver&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;jdbcUrl&quot; value&#x3D;&quot;$&#123;jdbc.url&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;user&quot; value&#x3D;&quot;$&#123;jdbc.username&#125;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;$&#123;jdbc.password&#125;&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;bean&gt;</span><br><span class="line">    &lt;!--3、配置JdbcTemplate对象--&gt;</span><br><span class="line">    &lt;bean id&#x3D;&quot;jdbcTemplate&quot; class&#x3D;&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;dataSource&quot; ref&#x3D;&quot;dataSource&quot;&gt;&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;&#x2F;bean&gt;</span><br><span class="line">    &lt;context:component-scan base-package&#x3D;&quot;com.dhz&quot;&gt;&lt;&#x2F;context:component-scan&gt;</span><br><span class="line">&lt;&#x2F;beans&gt;</span><br></pre></td></tr></table></figure></li><li><p>spring-mvc.xml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;</span><br><span class="line">       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">       xmlns:mvc&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc&quot;</span><br><span class="line">       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;</span><br><span class="line">       xsi:schemaLocation&#x3D;&quot;</span><br><span class="line">       http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd</span><br><span class="line">       http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;mvc&#x2F;spring-mvc.xsd</span><br><span class="line">       http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd</span><br><span class="line">&quot;&gt;</span><br><span class="line">    &lt;!--1、mvc注解驱动--&gt;</span><br><span class="line">    &lt;mvc:annotation-driven&#x2F;&gt;</span><br><span class="line">    &lt;!--2、配置视图解析器--&gt;</span><br><span class="line">    &lt;bean class&#x3D;&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;prefix&quot; value&#x3D;&quot;&#x2F;pages&#x2F;&quot;&#x2F;&gt;</span><br><span class="line">        &lt;property name&#x3D;&quot;suffix&quot; value&#x3D;&quot;.jsp&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;bean&gt;</span><br><span class="line">    &lt;!--3、静态资源权限开放--&gt;</span><br><span class="line">    &lt;mvc:default-servlet-handler&#x2F;&gt;</span><br><span class="line">    &lt;!--4、组件扫描  扫描Controller--&gt;</span><br><span class="line">    &lt;context:component-scan base-package&#x3D;&quot;com.dhz.controller&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;beans&gt;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>jdbc.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;test</span><br><span class="line">jdbc.username&#x3D;root</span><br><span class="line">jdbc.password&#x3D;root</span><br></pre></td></tr></table></figure></li><li><p>log4j.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">### direct log messages to stdout ###</span><br><span class="line">log4j.appender.stdout&#x3D;org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.Target&#x3D;System.out</span><br><span class="line">log4j.appender.stdout.layout&#x3D;org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern&#x3D;%d&#123;ABSOLUTE&#125; %5p %c&#123;1&#125;:%L - %m%n</span><br><span class="line"></span><br><span class="line">### direct messages to file mylog.log ###</span><br><span class="line">log4j.appender.file&#x3D;org.apache.log4j.FileAppender</span><br><span class="line">log4j.appender.file.File&#x3D;c:&#x2F;mylog.log</span><br><span class="line">log4j.appender.file.layout&#x3D;org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.file.layout.ConversionPattern&#x3D;%d&#123;ABSOLUTE&#125; %5p %c&#123;1&#125;:%L - %m%n</span><br><span class="line"></span><br><span class="line">### set log levels - for more verbose logging change &#39;info&#39; to &#39;debug&#39; ###</span><br><span class="line"></span><br><span class="line">log4j.rootLogger&#x3D;info, stdout</span><br></pre></td></tr></table></figure></li></ul><h3 id="导入需要坐标-pom-xml"><a href="#导入需要坐标-pom-xml" class="headerlink" title="导入需要坐标(pom.xml)"></a>导入需要坐标(pom.xml)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.1.32&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;c3p0&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;c3p0&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.9.1.2&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1.10&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.12&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;&#x2F;scope&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-context&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-test&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-web&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-webmvc&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.servlet&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;javax.servlet-api&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.0.1&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;&#x2F;scope&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;javax.servlet.jsp&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;javax.servlet.jsp-api&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.1&lt;&#x2F;version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;&#x2F;scope&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jackson-core&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.9.0&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jackson-databind&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.9.0&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jackson-annotations&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.9.0&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;commons-fileupload&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;commons-fileupload&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.1&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;commons-io&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;commons-io&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.3&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;commons-logging&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;commons-logging&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.slf4j&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;slf4j-log4j12&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.7.7&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;log4j&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;log4j&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.17&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-jdbc&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-tx&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;jstl&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jstl&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2&lt;&#x2F;version&gt;</span><br><span class="line">  &lt;&#x2F;dependency&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;dependencies&gt;</span><br></pre></td></tr></table></figure><h3 id="web集成spring和springmvc-web-xml"><a href="#web集成spring和springmvc-web-xml" class="headerlink" title="web集成spring和springmvc(web.xml)"></a>web集成spring和springmvc(web.xml)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--全局的初始化参数--&gt;</span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;contextConfigLocation&lt;&#x2F;param-name&gt;</span><br><span class="line">        &lt;param-value&gt;classpath:applicationContext.xml&lt;&#x2F;param-value&gt;</span><br><span class="line">    &lt;&#x2F;context-param&gt;</span><br><span class="line">    &lt;!--Spring的监听器--&gt;</span><br><span class="line">    &lt;listener&gt;</span><br><span class="line">        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;&#x2F;listener-class&gt;</span><br><span class="line">    &lt;&#x2F;listener&gt;</span><br><span class="line">    &lt;!--SpringMVC的前端控制器--&gt;</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;DispatcherServlet&lt;&#x2F;servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;&#x2F;servlet-class&gt;</span><br><span class="line">        &lt;init-param&gt;</span><br><span class="line">            &lt;param-name&gt;contextConfigLocation&lt;&#x2F;param-name&gt;</span><br><span class="line">            &lt;param-value&gt;classpath:spring-mvc.xml&lt;&#x2F;param-value&gt;</span><br><span class="line">        &lt;&#x2F;init-param&gt;</span><br><span class="line">        &lt;load-on-startup&gt;2&lt;&#x2F;load-on-startup&gt;</span><br><span class="line">    &lt;&#x2F;servlet&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;DispatcherServlet&lt;&#x2F;servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;&#x2F;&lt;&#x2F;url-pattern&gt;</span><br><span class="line">    &lt;&#x2F;servlet-mapping&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springmvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC的文件上传</title>
      <link href="2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="SpringMVC的文件上传"><a href="#SpringMVC的文件上传" class="headerlink" title="SpringMVC的文件上传"></a>SpringMVC的文件上传</h1><h2 id="客户端表单实现-应用"><a href="#客户端表单实现-应用" class="headerlink" title="客户端表单实现(应用)"></a>客户端表单实现(应用)</h2><p>文件上传客户端表单需要满足：</p><p>表单项type=“file”</p><p>表单的提交方式是post  </p><p>表单的enctype属性是多部分表单形式，及enctype=“multipart/form-data”</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/quick22"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">        名称&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt;</span><br><span class="line">        文件<span class="number">1</span>&lt;input type=<span class="string">"file"</span> name=<span class="string">"uploadFile"</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br></pre></td></tr></table></figure><h2 id="文件上传的原理-理解"><a href="#文件上传的原理-理解" class="headerlink" title="文件上传的原理(理解)"></a>文件上传的原理(理解)</h2><p><img src="/2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/5-1613798582439.jpg" alt></p><h2 id="单文件上传的代码实现1-应用"><a href="#单文件上传的代码实现1-应用" class="headerlink" title="单文件上传的代码实现1(应用)"></a>单文件上传的代码实现1(应用)</h2><p>添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>配置多媒体解析器</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置文件上传解析器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultEncoding"</span> <span class="attr">value</span>=<span class="string">"UTF-8"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"500000"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>后台程序</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/upload1"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">upload1</span><span class="params">(String username, MultipartFile uploadFile)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(username);</span><br><span class="line">    System.out.println(uploadFile);</span><br><span class="line">    String filename = uploadFile.getOriginalFilename();</span><br><span class="line">    uploadFile.transferTo(<span class="keyword">new</span> File(<span class="string">"E:/upload/"</span>+filename));</span><br><span class="line">    <span class="keyword">return</span> username+<span class="string">"\n"</span>+uploadFile.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多文件上传的代码实现-应用"><a href="#多文件上传的代码实现-应用" class="headerlink" title="多文件上传的代码实现(应用)"></a>多文件上传的代码实现(应用)</h2><p>多文件上传，只需要将页面修改为多个文件上传项，将方法参数MultipartFile类型修改为MultipartFile[]即可</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/upload2"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    名称&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt;</span><br><span class="line">    文件<span class="number">1</span>&lt;input type=<span class="string">"file"</span> name=<span class="string">"uploadFile"</span>&gt;&lt;br/&gt;</span><br><span class="line">    文件<span class="number">2</span>&lt;input type=<span class="string">"file"</span> name=<span class="string">"uploadFile"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/upload2"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">upload2</span><span class="params">(String username, MultipartFile[] uploadFile)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(username);</span><br><span class="line">    System.out.println(uploadFile);</span><br><span class="line">    <span class="keyword">for</span> (MultipartFile file : uploadFile) &#123;</span><br><span class="line">        String filename = file.getOriginalFilename();</span><br><span class="line">        file.transferTo(<span class="keyword">new</span> File(<span class="string">"E:/upload/"</span>+filename));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> username+<span class="string">"\n"</span>+uploadFile.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="知识要点-理解，记忆"><a href="#知识要点-理解，记忆" class="headerlink" title="知识要点(理解，记忆)"></a>知识要点(理解，记忆)</h2><p><img src="/2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/6.jpg" alt></p><h1 id="SpringMVC的拦截器"><a href="#SpringMVC的拦截器" class="headerlink" title="SpringMVC的拦截器"></a>SpringMVC的拦截器</h1><h2 id="拦截器的作用-理解"><a href="#拦截器的作用-理解" class="headerlink" title="拦截器的作用(理解)"></a>拦截器的作用(理解)</h2><p>Spring MVC 的拦截器类似于 Servlet  开发中的过滤器 Filter，用于对处理器进行预处理和后处理。</p><p>将拦截器按一定的顺序联结成一条链，这条链称为拦截器链（InterceptorChain）。在访问被拦截的方法或字段时，拦截器链中的拦截器就会按其之前定义的顺序被调用。拦截器也是AOP思想的具体实现。</p><h2 id="interceptor和filter区别-理解，记忆"><a href="#interceptor和filter区别-理解，记忆" class="headerlink" title="interceptor和filter区别(理解，记忆)"></a>interceptor和filter区别(理解，记忆)</h2><p>关于interceptor和filter的区别，如图所示：</p><p><img src="/2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/1.png" alt></p><h2 id="快速入门-应用"><a href="#快速入门-应用" class="headerlink" title="快速入门(应用)"></a>快速入门(应用)</h2><p>自定义拦截器很简单，只有如下三步：</p><p>①创建拦截器类实现HandlerInterceptor接口</p><p>②配置拦截器</p><p>③测试拦截器的拦截效果</p><p>编写拦截器：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor1</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">//在目标方法执行之前 执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"preHandle....."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"yes"</span>.equals(request.getParameter(<span class="string">"status"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在目标方法执行之后 视图对象返回之前执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"postHandle...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在流程都执行完毕后 执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"afterCompletion..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置：在SpringMVC的配置文件中配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.dhz.interceptor.MyInterceptor1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>编写测试程序测试：</p><p>编写Controller,发请求到controller,跳转页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/save"</span>,method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"controller save ..."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"save"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>页面</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;save ........&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="快速入门详解-应用"><a href="#快速入门详解-应用" class="headerlink" title="快速入门详解(应用)"></a>快速入门详解(应用)</h2><p>拦截器在预处理后什么情况下会执行目标资源，什么情况下不执行目标资源，以及在有多个拦截器的情况下拦截器的执行顺序是什么?</p><p>再编写一个拦截器2，</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor2</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">//在目标方法执行之前 执行</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"preHandle22222....."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在目标方法执行之后 视图对象返回之前执行</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"postHandle2222..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在流程都执行完毕后 执行</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"afterCompletion2222...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置拦截器2</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--对哪些资源执行拦截操作--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.itheima.interceptor.MyInterceptor2"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--对哪些资源执行拦截操作--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.itheima.interceptor.MyInterceptor1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><p>结论：</p><p>当拦截器的preHandle方法返回true则会执行目标资源，如果返回false则不执行目标资源</p><p>多个拦截器情况下，配置在前的先执行，配置在后的后执行</p><p>拦截器中的方法执行顺序是：preHandler——-目标资源—-postHandle—- afterCompletion</p><h2 id="知识小结-记忆"><a href="#知识小结-记忆" class="headerlink" title="知识小结(记忆)"></a>知识小结(记忆)</h2><p>拦截器中的方法说明如下</p><p><img src="/2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/BaiduYunDownload/spring_mvc/img/2.png" alt></p><h2 id="06-SpringMVC拦截器-用户登录权限控制分析-理解"><a href="#06-SpringMVC拦截器-用户登录权限控制分析-理解" class="headerlink" title="06-SpringMVC拦截器-用户登录权限控制分析(理解)"></a>06-SpringMVC拦截器-用户登录权限控制分析(理解)</h2><p>在day06-Spring练习案例的基础之上：用户没有登录的情况下，不能对后台菜单进行访问操作，点击菜单跳转到登录页面，只有用户登录成功后才能进行后台功能的操作</p><p>需求图：</p><p><img src="/2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/BaiduYunDownload/spring_mvc/img/3.jpg" alt></p><h2 id="07-SpringMVC拦截器-用户登录权限控制代码实现1-应用"><a href="#07-SpringMVC拦截器-用户登录权限控制代码实现1-应用" class="headerlink" title="07-SpringMVC拦截器-用户登录权限控制代码实现1(应用)"></a>07-SpringMVC拦截器-用户登录权限控制代码实现1(应用)</h2><p>判断用户是否登录  本质：判断session中有没有user，如果没有登陆则先去登陆，如果已经登陆则直接放行访问目标资源</p><p>先编写拦截器如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrivilegeInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//逻辑：判断用户是否登录  本质：判断session中有没有user</span></span><br><span class="line">        HttpSession session = request.getSession();</span><br><span class="line">        User user = (User) session.getAttribute(<span class="string">"user"</span>);</span><br><span class="line">        <span class="keyword">if</span>(user==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//没有登录</span></span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">"/login.jsp"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//放行  访问目标资源</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后配置该拦截器：找到项目案例的spring-mvc.xml，添加如下配置：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置权限拦截器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置对哪些资源执行拦截操作--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.itheima.interceptor.PrivilegeInterceptor"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="08-SpringMVC拦截器-用户登录权限控制代码实现2-应用"><a href="#08-SpringMVC拦截器-用户登录权限控制代码实现2-应用" class="headerlink" title="08-SpringMVC拦截器-用户登录权限控制代码实现2(应用)"></a>08-SpringMVC拦截器-用户登录权限控制代码实现2(应用)</h2><p>在登陆页面输入用户名密码，点击登陆，通过用户名密码进行查询，如果登陆成功，则将用户信息实体存入session，然后跳转到首页，如果登陆失败则继续回到登陆页面</p><p>在UserController中编写登陆逻辑</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/login"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">login</span><span class="params">(String username,String password,HttpSession session)</span></span>&#123;</span><br><span class="line">        User user = userService.login(username,password);</span><br><span class="line">        <span class="keyword">if</span>(user!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//登录成功  将user存储到session</span></span><br><span class="line">            session.setAttribute(<span class="string">"user"</span>,user);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"redirect:/index.jsp"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"redirect:/login.jsp"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>service层代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//service层</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">            User user = userDao.findByUsernameAndPassword(username,password);</span><br><span class="line">            <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>dao层代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dao层</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> User <span class="title">findByUsernameAndPassword</span><span class="params">(String username, String password)</span> <span class="keyword">throws</span> EmptyResultDataAccessException</span>&#123;</span><br><span class="line">        User user = jdbcTemplate.queryForObject(<span class="string">"select * from sys_user where username=? and password=?"</span>, <span class="keyword">new</span> BeanPropertyRowMapper&lt;User&gt;(User<span class="class">.<span class="keyword">class</span>), <span class="title">username</span>, <span class="title">password</span>)</span>;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>此时仍然登陆不上，因为我们需要将登陆请求url让拦截器放行,添加资源排除的配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置权限拦截器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置对哪些资源执行拦截操作--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--配置哪些资源排除拦截操作--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/user/login"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.itheima.interceptor.PrivilegeInterceptor"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="09-SpringMVC拦截器-用户登录权限控制代码实现3-应用"><a href="#09-SpringMVC拦截器-用户登录权限控制代码实现3-应用" class="headerlink" title="09-SpringMVC拦截器-用户登录权限控制代码实现3(应用)"></a>09-SpringMVC拦截器-用户登录权限控制代码实现3(应用)</h2><p>JdbcTemplate.queryForObject对象如果查询不到数据会抛异常，导致程序无法达到预期效果，如何来解决该问题？</p><p>在业务层处理来自dao层的异常，如果出现异常service层返回null,而不是将异常抛给controller</p><p>因此改造登陆的业务层代码,添加异常的控制</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            User user = userDao.findByUsernameAndPassword(username,password);</span><br><span class="line">            <span class="keyword">return</span> user;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (EmptyResultDataAccessException e)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="SpringMVC异常处理机制"><a href="#SpringMVC异常处理机制" class="headerlink" title="SpringMVC异常处理机制"></a>SpringMVC异常处理机制</h1><h2 id="异常处理的思路"><a href="#异常处理的思路" class="headerlink" title="异常处理的思路"></a>异常处理的思路</h2><p>系统中异常包括两类：预期异常和运行时异常RuntimeException，前者通过捕获异常从而获取异常信息，后者主要通过规范代码开发、测试等手段减少运行时异常的发生。</p><p>系统的Dao、Service、Controller出现都通过throws Exception向上抛出，最后由SpringMVC前端控制器交由异常处理器进行异常处理，如下图：</p><p><img src="/2021/02/20/SpringMVC%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/image-20210220181559950.png" alt="image-20210220181559950"></p><h2 id="异常处理两种方式"><a href="#异常处理两种方式" class="headerlink" title="异常处理两种方式"></a>异常处理两种方式</h2><p>① 使用Spring MVC提供的简单异常处理器SimpleMappingExceptionResolver</p><p>② 实现Spring的异常处理接口HandlerExceptionResolver 自定义自己的异常处理器</p><h3 id="简单异常处理器SimpleMappingExceptionResolver"><a href="#简单异常处理器SimpleMappingExceptionResolver" class="headerlink" title="简单异常处理器SimpleMappingExceptionResolver"></a>简单异常处理器SimpleMappingExceptionResolver</h3><p>SpringMVC已经定义好了该类型转换器，在使用时可以根据项目情况进行相应异常与视图的映射配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置简单映射异常处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultErrorView"</span> <span class="attr">value</span>=<span class="string">"error"</span>/&gt;</span>  <span class="comment">&lt;!--默认异常，服从前后缀(jsp/error.jsp)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"exceptionMappings"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"com.dhz.exception.MyExcepton"</span> <span class="attr">value</span>=<span class="string">"error1"</span>/&gt;</span> <span class="comment">&lt;!--自定义异常--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"java.lang.ArithmeticException"</span> <span class="attr">value</span>=<span class="string">"error2"</span>/&gt;</span> <span class="comment">&lt;!--除数为0异常--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>测试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;&#x2F;yichang&#x2F;&#123;id&#125;&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public void yichang(@PathVariable(value &#x3D; &quot;id&quot;) int id) throws MyExcepton &#123;</span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;---------------------&quot;);</span><br><span class="line">    if (id&#x3D;&#x3D;0)&#123;</span><br><span class="line">        System.out.println(&quot;0.....&quot;);</span><br><span class="line">        int j&#x3D;1&#x2F;0;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (id&#x3D;&#x3D;1)&#123;</span><br><span class="line">        System.out.println(&quot;1.....&quot;);</span><br><span class="line">        int k&#x3D;Integer.parseInt(&quot;张三&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        System.out.println(&quot;2.....&quot;);</span><br><span class="line">        throw new MyExcepton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义异常处理步骤"><a href="#自定义异常处理步骤" class="headerlink" title="自定义异常处理步骤"></a>自定义异常处理步骤</h3><p>①创建异常处理器类实现HandlerExceptionResolver</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> </span>&#123;</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        <span class="keyword">if</span> (ex <span class="keyword">instanceof</span> MyExcepton)</span><br><span class="line">        &#123;</span><br><span class="line">            modelAndView.addObject(<span class="string">"error_info"</span>,<span class="string">"自定义异常"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ex <span class="keyword">instanceof</span> ArithmeticException)&#123;</span><br><span class="line">            modelAndView.addObject(<span class="string">"error_info"</span>,<span class="string">"除数为0异常"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            modelAndView.addObject(<span class="string">"error_info"</span>,<span class="string">"通用异常"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        modelAndView.setViewName(<span class="string">"error_msg"</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>②配置异常处理器</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.dhz.resovler.MyExceptionResolver"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>③编写异常页面</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">$&#123;error_info&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>④测试异常跳转</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/yichang/&#123;id&#125;"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">yichang</span><span class="params">(@PathVariable(value = <span class="string">"id"</span>)</span> <span class="keyword">int</span> id) <span class="keyword">throws</span> MyExcepton </span>&#123;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"---------------------"</span>);</span><br><span class="line">    <span class="keyword">if</span> (id==<span class="number">0</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">"0....."</span>);</span><br><span class="line">        <span class="keyword">int</span> j=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (id==<span class="number">1</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">"1....."</span>);</span><br><span class="line">        <span class="keyword">int</span> k=Integer.parseInt(<span class="string">"张三"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"2....."</span>);</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> MyExcepton();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-5-知识要点"><a href="#1-5-知识要点" class="headerlink" title="1.5 知识要点"></a>1.5 知识要点</h3><p>异常处理方式</p><pre><code>配置简单异常处理器SimpleMappingExceptionResolver自定义异常处理器</code></pre><p>自定义异常处理步骤</p><pre><code>①创建异常处理器类实现HandlerExceptionResolver②配置异常处理器③编写异常页面④测试异常跳转</code></pre>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC的请求和响应</title>
      <link href="2021/02/18/SpringMVC%E7%9A%84%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94/"/>
      <url>2021/02/18/SpringMVC%E7%9A%84%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="SpringMVC的请求和响应"><a href="#SpringMVC的请求和响应" class="headerlink" title="SpringMVC的请求和响应"></a>SpringMVC的请求和响应</h1><h2 id="SpringMVC的数据响应"><a href="#SpringMVC的数据响应" class="headerlink" title="SpringMVC的数据响应"></a>SpringMVC的数据响应</h2><h3 id="数据响应方式-理解"><a href="#数据响应方式-理解" class="headerlink" title="数据响应方式(理解)"></a>数据响应方式(理解)</h3><ol><li><p>页面跳转</p><ul><li><p>直接返回字符串</p></li><li><p>通过ModelAndView对象返回</p></li></ul></li><li><p>回写数据 </p><ul><li>直接返回字符串</li><li>返回对象或集合    </li></ul></li></ol><h3 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h3><h4 id="返回字符串形式（应用）"><a href="#返回字符串形式（应用）" class="headerlink" title="返回字符串形式（应用）"></a>返回字符串形式（应用）</h4><p><img src="/2021/02/18/SpringMVC%E7%9A%84%E8%AF%B7%E6%B1%82%E5%92%8C%E5%93%8D%E5%BA%94/1.jpg" alt="1"></p><h4 id="返回ModelAndView形式1-应用"><a href="#返回ModelAndView形式1-应用" class="headerlink" title="返回ModelAndView形式1(应用)"></a>返回ModelAndView形式1(应用)</h4><p>在Controller中方法返回ModelAndView对象，并且设置视图名称</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/MAV1"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">ModelAndView1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            Model:模型 作用封装数据</span></span><br><span class="line"><span class="comment">            View：视图 作用展示数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(<span class="string">"ModelAndView1 ..."</span>);</span><br><span class="line">        ModelAndView modelAndView=<span class="keyword">new</span> ModelAndView();</span><br><span class="line">        <span class="comment">//设置模型数据,可以直接在jsp中用$&#123;username&#125;</span></span><br><span class="line">        modelAndView.addObject(<span class="string">"username"</span>,<span class="string">"DongHuangZhong"</span>);</span><br><span class="line">        <span class="comment">//设置视图名称</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">"mav1"</span>);<span class="comment">//也受前缀后缀约束,文件在/jsp/mav1.jsp</span></span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>mav1.jsp</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;mav1&lt;&#x2F;h1&gt;</span><br><span class="line">    username:$&#123;username&#125;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><h4 id="返回ModelAndView形式2-应用"><a href="#返回ModelAndView形式2-应用" class="headerlink" title="返回ModelAndView形式2(应用)"></a>返回ModelAndView形式2(应用)</h4><p>n在Controller中方法形参上直接声明ModelAndView，无需在方法中自己创建，在方法中直接使用该对象设置视图，同样可以跳转页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/MAV2"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">ModelAndView2</span><span class="params">(ModelAndView modelAndView)</span></span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"ModelAndView1 ..."</span>);</span><br><span class="line">       modelAndView.addObject(<span class="string">"username"</span>,<span class="string">"ManJi"</span>);</span><br><span class="line">       modelAndView.setViewName(<span class="string">"mav1"</span>);<span class="comment">//也受前缀后缀约束</span></span><br><span class="line">       <span class="keyword">return</span> modelAndView;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="返回ModelAndView3-应用"><a href="#返回ModelAndView3-应用" class="headerlink" title="返回ModelAndView3(应用)"></a>返回ModelAndView3(应用)</h4><p>在Controller方法的形参上可以直接使用原生的HttpServeltRequest对象，只需声明即可</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/MAV3"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">ModelAndView2</span><span class="params">(HttpServletRequest request)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ModelAndView3 ..."</span>);</span><br><span class="line">       request.setAttribute(<span class="string">"username"</span>,<span class="string">"MiLin"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"mav1"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="回写数据"><a href="#回写数据" class="headerlink" title="回写数据"></a>回写数据</h3><h4 id="直接回写字符串-应用"><a href="#直接回写字符串-应用" class="headerlink" title="直接回写字符串(应用)"></a>直接回写字符串(应用)</h4><p>通过SpringMVC框架注入的response对象，使用response.getWriter().print(“hello world”) 回写数据，此时不需要视图跳转，业务方法返回值为void</p><p>将需要回写的字符串直接返回，但此时需要通过@ResponseBody注解告知SpringMVC框架，方法返回的字符串不是跳转是直接在http响应体中返回</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/re_str2"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">//告知SpringMVC框架 不进行视图跳转 直接进行数据响应</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">re_str2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"re_str2 ..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello restr2"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/re_str1"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">re_str1</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"re_str1 ..."</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">"response return ...."</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="直接回写json格式字符串-应用"><a href="#直接回写json格式字符串-应用" class="headerlink" title="直接回写json格式字符串(应用)"></a>直接回写json格式字符串(应用)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/re_str_json1"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">//告知SpringMVC框架 不进行视图跳转 直接进行数据响应</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">re_str_json1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"re_str_json1 ..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&#123;\"username\":\"zhangsan\",\"age\":18&#125;"</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>手动拼接json格式字符串的方式很麻烦，开发中往往要将复杂的java对象转换成json格式的字符串，我们可以使用web阶段学习过的json转换工具jackson进行转换,通过jackson转换json格式字符串，回写字符串</p><ol><li><p>添加依赖jar包(不要低于2.6版本)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;jackson-core&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.9.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;jackson-databind&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.9.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.fasterxml.jackson.core&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;jackson-annotations&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.9.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>用ObjectMapper得到json</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;&#x2F;re_str_json2&quot;)</span><br><span class="line">@ResponseBody &#x2F;&#x2F;告知SpringMVC框架 不进行视图跳转 直接进行数据响应</span><br><span class="line">public String re_str_json2() throws JsonProcessingException &#123;</span><br><span class="line">    System.out.println(&quot;re_str_json2 ...&quot;);</span><br><span class="line">    User user&#x3D;new User(&quot;lisi&quot;,22);</span><br><span class="line">    ObjectMapper mapper &#x3D; new ObjectMapper();</span><br><span class="line">    String user_json &#x3D; mapper.writeValueAsString(user);</span><br><span class="line">    return user_json;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="返回对象或集合-应用"><a href="#返回对象或集合-应用" class="headerlink" title="返回对象或集合(应用)"></a>返回对象或集合(应用)</h4><p>通过SpringMVC帮助我们对对象或集合进行json字符串的转换并回写，为处理器适配器配置消息转换参数，指定使用jackson进行对象或集合的转换，因此需要在spring-mvc.xml中进行如下配置：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"messageConverters"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/re_obj_json1"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">//告知SpringMVC框架 不进行视图跳转 直接进行数据响应</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">re_obj_json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"re_obj_json1 ..."</span>);</span><br><span class="line">        User user=<span class="keyword">new</span> User(<span class="string">"lisi"</span>,<span class="number">22</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="09-SpringMVC的数据响应-回写数据-返回对象或集合2-应用"><a href="#09-SpringMVC的数据响应-回写数据-返回对象或集合2-应用" class="headerlink" title="09-SpringMVC的数据响应-回写数据-返回对象或集合2(应用)"></a>09-SpringMVC的数据响应-回写数据-返回对象或集合2(应用)</h4><p>在方法上添加@ResponseBody就可以返回json格式的字符串，但是这样配置比较麻烦，配置的代码比较多，因此，我们可以使用mvc的注解驱动代替上述配置(返回对象自动变成json)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>在 SpringMVC 的各个组件中，处理器映射器、处理器适配器、视图解析器称为 SpringMVC 的三大组件。</p><p>使用<code>&lt;mvc:annotation-driven /&gt;</code>自动加载 RequestMappingHandlerMapping（处理映射器）和</p><p>RequestMappingHandlerAdapter（ 处 理 适 配 器 ），可用在Spring-xml.xml配置文件中使用</p><p><code>&lt;mvc:annotation-driven /&gt;</code>替代注解处理器和适配器的配置。</p><p><strong>同时使用<code>&lt;mvc:annotation-driven /&gt;</code></strong></p><p><strong>默认底层就会集成jackson进行对象或集合的json格式字符串的转换</strong></p><h4 id="10-SpringMVC的数据响应-知识要点小结-理解，记忆"><a href="#10-SpringMVC的数据响应-知识要点小结-理解，记忆" class="headerlink" title="10-SpringMVC的数据响应-知识要点小结(理解，记忆)"></a>10-SpringMVC的数据响应-知识要点小结(理解，记忆)</h4><p>1） 页面跳转</p><p>直接返回字符串</p><p>通过ModelAndView对象返回</p><p>2） 回写数据 </p><p>直接返回字符串</p><p>HttpServletResponse 对象直接写回数据，HttpServletRequest对象带回数据，Model对象带回数据或者@ResponseBody将字符串数据写回</p><p>返回对象或集合 </p><p>@ResponseBody+<code>&lt;mvc:annotation-driven/&gt;</code></p><h2 id="SpringMVC的请求"><a href="#SpringMVC的请求" class="headerlink" title="SpringMVC的请求"></a>SpringMVC的请求</h2><h3 id="请求参数类型-理解"><a href="#请求参数类型-理解" class="headerlink" title="请求参数类型(理解)"></a>请求参数类型(理解)</h3><p>客户端请求参数的格式是：name=value&amp;name=value……</p><p>服务器端要获得请求的参数，有时还需要进行数据的封装，SpringMVC可以接收如下类型的参数</p><p>基本类型参数</p><p>POJO类型参数</p><p>数组类型参数</p><p>集合类型参数</p><h3 id="获得基本类型参数-应用"><a href="#获得基本类型参数-应用" class="headerlink" title="获得基本类型参数(应用)"></a>获得基本类型参数(应用)</h3><p>Controller中的业务方法的参数名称要与请求参数的name一致，参数值会自动映射匹配。并且能自动做类型转换；</p><p>自动的类型转换是指从String向其他类型的转换</p><p><code>http://localhost:8080/user/get_base_para?name=zzz&amp;age=18</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/get_base_para"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span> <span class="comment">//告知SpringMVC框架 不进行视图跳转 直接进行数据响应</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">get_base_para</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"paras=&#123;name="</span>+name+<span class="string">";age="</span>+age+<span class="string">"&#125;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获得POJO类型参数-应用"><a href="#获得POJO类型参数-应用" class="headerlink" title="获得POJO类型参数(应用)"></a>获得POJO类型参数(应用)</h3><p>Controller中的业务方法的POJO参数的属性名与请求参数的name一致，参数值会自动映射匹配。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dhz.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"username='"</span> + username + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://localhost:8080/user/get_POPJ_para?username=popj&amp;age=18" target="_blank" rel="noopener">http://localhost:8080/user/get_POPJ_para?username=popj&amp;age=18</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/get_POPJ_para"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span> <span class="comment">//告知SpringMVC框架 不进行视图跳转 直接进行数据响应</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">get_POPJ_para</span><span class="params">(User user)</span></span>&#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获得数组类型参数-应用"><a href="#获得数组类型参数-应用" class="headerlink" title="获得数组类型参数(应用)"></a>获得数组类型参数(应用)</h3><p>Controller中的业务方法数组名称与请求参数的name一致，参数值会自动映射匹配。</p><p><a href="http://localhost:8080/user/get_arrays_para?name=zhangsan&amp;name=lisi" target="_blank" rel="noopener">http://localhost:8080/user/get_arrays_para?name=zhangsan&amp;name=lisi</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/get_arrays_para"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span> <span class="comment">//告知SpringMVC框架 不进行视图跳转 直接进行数据响应</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">get_arrays_para</span><span class="params">(String[] name)</span></span>&#123;</span><br><span class="line">    List&lt;String&gt; names = Arrays.asList(name);</span><br><span class="line">    System.out.println(names);</span><br><span class="line">    <span class="keyword">return</span> names;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获得User集合类型参数1-应用"><a href="#获得User集合类型参数1-应用" class="headerlink" title="获得User集合类型参数1(应用)"></a>获得User集合类型参数1(应用)</h3><p>获得集合参数时，要将集合参数包装到一个POJO中才可以。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/get_userList"</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">        &lt;%--表明是第一个User对象的username age--%&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"userList[0].username"</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"userList[0].age"</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"userList[1].username"</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"userList[1].age"</span>&gt;&lt;br/&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dhz.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VO</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;User&gt; userList;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserList</span><span class="params">(List&lt;User&gt; userList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userList = userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"VO&#123;"</span> +</span><br><span class="line">                <span class="string">"userList="</span> + userList +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>注：public List<User> get_userList2(List<User> userList) 不行</User></User></strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/get_userList"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> VO <span class="title">get_userList</span><span class="params">(VO vo)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    System.out.println(vo);</span><br><span class="line">    <span class="keyword">return</span>  vo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获得集合类型参数2-应用"><a href="#获得集合类型参数2-应用" class="headerlink" title="获得集合类型参数2(应用)"></a>获得集合类型参数2(应用)</h3><p>当使用ajax提交时，可以指定contentType为json形式，那么在方法参数位置使用@RequestBody可以直接接收集合数据而无需使用POJO进行包装</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src="$&#123;pageContext.request.contextPath&#125;/js/jquery-3.3.1.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> userList = <span class="keyword">new</span> Array();</span><br><span class="line">    userList.push(&#123;username:<span class="string">"zhangsan"</span>,age:<span class="number">18</span>&#125;);</span><br><span class="line">    userList.push(&#123;username:<span class="string">"lisi"</span>,age:<span class="number">28</span>&#125;);</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">"POST"</span>,</span><br><span class="line">        url:<span class="string">"$&#123;pageContext.request.contextPath&#125;/user/get_ajax_userlist"</span>,</span><br><span class="line">        data:JSON.stringify(userList),</span><br><span class="line">        contentType:<span class="string">"application/json;charset=utf-8"</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><ul><li>注：需要按照下面的步骤开启静态资源的引用</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/get_ajax_userlist"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get_ajax_userlist</span><span class="params">(@RequestBody List&lt;User&gt; userList)</span></span>&#123;</span><br><span class="line">    System.out.println(userList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="静态资源引用的开启-应用"><a href="#静态资源引用的开启-应用" class="headerlink" title="静态资源引用的开启(应用)"></a>静态资源引用的开启(应用)</h3><p>当有静态资源需要加载时，比如jquery文件，通过谷歌开发者工具抓包发现，没有加载到jquery文件，原因是SpringMVC的前端控制器DispatcherServlet的url-pattern配置的是/,代表对所有的资源都进行过滤操作，我们可以通过以下两种方式指定放行静态资源：</p><p>•在spring-mvc.xml配置文件中指定放行的资源</p><p>​     <code>&lt;mvc:resources mapping=&quot;/js/**&quot;location=&quot;/js/&quot;/&gt;</code></p><p>•使用<code>&lt;mvc:default-servlet-handler/&gt;</code>标签</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--开发资源的访问--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;mvc:resources mapping="/js/**" location="/js/"/&gt;</span></span><br><span class="line"><span class="comment">    &lt;mvc:resources mapping="/img/**" location="/img/"/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置全局乱码过滤器-应用"><a href="#配置全局乱码过滤器-应用" class="headerlink" title="配置全局乱码过滤器(应用)"></a>配置全局乱码过滤器(应用)</h3><p>当post请求时，数据会出现乱码，我们可以设置一个过滤器来进行编码的过滤。在web.xml中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置全局过滤的filter--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="参数绑定注解-RequestParam-应用"><a href="#参数绑定注解-RequestParam-应用" class="headerlink" title="参数绑定注解@RequestParam(应用)"></a>参数绑定注解@RequestParam(应用)</h3><p>当请求的参数名称与Controller的业务方法参数名称不一致时，就需要通过@RequestParam注解显示的绑定</p><p><a href="http://localhost:8080/user/get_para_anno?xingming=lisi" target="_blank" rel="noopener">http://localhost:8080/user/get_para_anno?xingming=lisi</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/get_para_anno"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">get_para_anno</span><span class="params">(@RequestParam(value = <span class="string">"xingming"</span>,required = <span class="keyword">false</span>,defaultValue = <span class="string">"null"</span>)</span> String name)</span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Restful风格的参数的获取-应用"><a href="#Restful风格的参数的获取-应用" class="headerlink" title="Restful风格的参数的获取(应用)"></a>Restful风格的参数的获取(应用)</h3><p>Restful是一种软件架构风格、设计风格，而不是标准，只是提供了一组设计原则和约束条件。主要用于客户端和服务器交互类的软件，基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存机制等。</p><p>Restful风格的请求是使用“url+请求方式”表示一次请求目的的，HTTP 协议里面四个表示操作方式的动词如下：</p><p>GET：用于获取资源</p><p>POST：用于新建资源</p><p>PUT：用于更新资源</p><p>DELETE：用于删除资源  </p><p>例如：</p><p>/user/1    GET ：       得到 id = 1 的 user</p><p>/user/1   DELETE：  删除 id = 1 的 user</p><p>/user/1    PUT：       更新 id = 1 的 user</p><p>/user       POST：      新增 user</p><p>上述url地址/user/1中的1就是要获得的请求参数，在SpringMVC中可以使用占位符进行参数绑定。地址/user/1可以写成/user/{id}，占位符{id}对应的就是1的值。在业务方法中我们可以使用@PathVariable注解进行占位符的匹配获取工作。</p><p><code>http://localhost:8080/user/request_restful/zhansgan</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/request_restful/&#123;name&#125;"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">request_restful</span><span class="params">(@PathVariable(value = <span class="string">"name"</span>)</span> String name)</span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义类型转换器-应用"><a href="#自定义类型转换器-应用" class="headerlink" title="自定义类型转换器(应用)"></a>自定义类型转换器(应用)</h3><p>SpringMVC 默认已经提供了一些常用的类型转换器，例如客户端提交的字符串转换成int型进行参数设置。</p><p>但是不是所有的数据类型都提供了转换器，没有提供的就需要自定义转换器，例如：日期类型的数据就需要自定义转换器。默认格式:2020/03/05</p><ol><li><p>编写DateConverter类继承Converter，重写convert方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class DateConverter implements Converter&lt;String, Date&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Date convert(String dateStr) &#123;</span><br><span class="line">        SimpleDateFormat simpleDateFormat &#x3D; new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</span><br><span class="line">        Date date &#x3D; null;</span><br><span class="line">        try &#123;</span><br><span class="line">            date &#x3D; simpleDateFormat.parse(dateStr);</span><br><span class="line">        &#125; catch (ParseException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return date;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>声明转换器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id&#x3D;&quot;conversionService&quot; class&#x3D;&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;converters&quot;&gt;</span><br><span class="line">        &lt;list&gt;</span><br><span class="line">            &lt;bean class&#x3D;&quot;com.dhz.converter.DateConverter&quot;&#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;list&gt;</span><br><span class="line">    &lt;&#x2F;property&gt;</span><br><span class="line">&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure></li><li><p>配置到mvc.xml</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;mvc:annotation-driven conversion-service&#x3D;&quot;conversionService&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure></li><li><p>测试</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;&#x2F;date&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public String date(Date date)&#123;</span><br><span class="line">    System.out.println(date);</span><br><span class="line">    return date.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="获得Servlet相关API-应用"><a href="#获得Servlet相关API-应用" class="headerlink" title="获得Servlet相关API(应用)"></a>获得Servlet相关API(应用)</h3><p>SpringMVC支持使用原始ServletAPI对象作为控制器方法的参数进行注入，常用的对象如下：</p><p>HttpServletRequest</p><p>HttpServletResponse</p><p>HttpSession</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/quick19"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save19</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpSession session)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(request);</span><br><span class="line">        System.out.println(response);</span><br><span class="line">        System.out.println(session);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="获得请求头信息-应用"><a href="#获得请求头信息-应用" class="headerlink" title="获得请求头信息(应用)"></a>获得请求头信息(应用)</h3><p>使用@RequestHeader可以获得请求头信息，相当于web阶段学习的request.getHeader(name)</p><p>@RequestHeader注解的属性如下：</p><p>value：请求头的名称</p><p>required：是否必须携带此请求头</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/quick20"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save20</span><span class="params">(@RequestHeader(value = <span class="string">"User-Agent"</span>,required = <span class="keyword">false</span>)</span> String user_agent) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        System.out.println(user_agent);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>使用@CookieValue可以获得指定Cookie的值</p><p>@CookieValue注解的属性如下：</p><p>value：指定cookie的名称</p><p>required：是否必须携带此cookie</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/quick21"</span>)</span><br><span class="line">   <span class="meta">@ResponseBody</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save21</span><span class="params">(@CookieValue(value = <span class="string">"JSESSIONID"</span>)</span> String jsessionId) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">       System.out.println(jsessionId);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring与Web环境集成</title>
      <link href="2021/02/18/Spring%E4%B8%8EWeb%E7%8E%AF%E5%A2%83%E9%9B%86%E6%88%90/"/>
      <url>2021/02/18/Spring%E4%B8%8EWeb%E7%8E%AF%E5%A2%83%E9%9B%86%E6%88%90/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="Spring与Web环境集成"><a href="#Spring与Web环境集成" class="headerlink" title="Spring与Web环境集成"></a>Spring与Web环境集成</h2><h3 id="ApplicationContext应用上下文获取方式弊端"><a href="#ApplicationContext应用上下文获取方式弊端" class="headerlink" title="ApplicationContext应用上下文获取方式弊端"></a>ApplicationContext应用上下文获取方式弊端</h3><p>应用上下文对象是通过new ClasspathXmlApplicationContext(spring配置文件) 方式获取的，但是每次从容器中获得Bean时都要编写new ClasspathXmlApplicationContext(spring配置文件) ，这样的弊端是配置文件加载多次，应用上下文对象创建多次。</p><p>在Web项目中，可以使用ServletContextListener监听Web应用的启动，我们可以在Web应用启动时，就加载Spring的配置文件，创建应用上下文对象ApplicationContext，在将其存储到最大的域servletContext域中，这样就可以在任意位置从域中获得应用上下文ApplicationContext对象了。</p><h3 id="Spring提供获取应用上下文的工具"><a href="#Spring提供获取应用上下文的工具" class="headerlink" title="Spring提供获取应用上下文的工具"></a>Spring提供获取应用上下文的工具</h3><p>上面的分析不用手动实现，Spring提供了一个监听器ContextLoaderListener就是对上述功能的封装，该监听器内部加载Spring配置文件，创建应用上下文对象，并存储到ServletContext域中，提供了一个客户端工具WebApplicationContextUtils供使用者获得应用上下文对象。</p><p>所以我们需要做的只有两件事：</p><p>①在web.xml中配置ContextLoaderListener监听器（导入spring-web坐标）</p><p>②使用WebApplicationContextUtils获得应用上下文对象ApplicationContext</p><h3 id="获取步骤"><a href="#获取步骤" class="headerlink" title="获取步骤"></a>获取步骤</h3><h4 id="导入Spring集成web的坐标"><a href="#导入Spring集成web的坐标" class="headerlink" title="导入Spring集成web的坐标"></a>导入Spring集成web的坐标</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="配置ContextLoaderListener监听器"><a href="#配置ContextLoaderListener监听器" class="headerlink" title="配置ContextLoaderListener监听器"></a>配置ContextLoaderListener监听器</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--全局参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Spring的监听器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span></span><br><span class="line">       org.springframework.web.context.ContextLoaderListener</span><br><span class="line">   <span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="通过工具获得应用上下文对象"><a href="#通过工具获得应用上下文对象" class="headerlink" title="通过工具获得应用上下文对象"></a>通过工具获得应用上下文对象</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext app = WebApplicationContextUtils.getWebApplicationContext(<span class="keyword">this</span>.getServletContext());</span><br><span class="line">        UserService userService = app.getBean(UserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure><h2 id="SpringMVC的简介"><a href="#SpringMVC的简介" class="headerlink" title="SpringMVC的简介"></a>SpringMVC的简介</h2><h3 id="SpringMVC概述"><a href="#SpringMVC概述" class="headerlink" title="SpringMVC概述"></a>SpringMVC概述</h3><p>SpringMVC 是一种基于 Java 的实现 MVC 设计模型的请求驱动类型的轻量级 Web 框架，属于SpringFrameWork 的后续产品，已经融合在 Spring Web Flow 中。</p><p>SpringMVC 已经成为目前最主流的MVC框架之一，并且随着Spring3.0 的发布，全面超越 Struts2，成为最优秀的 MVC 框架。它通过一套注解，让一个简单的 Java 类成为处理请求的控制器，而无须实现任何接口。同时它还支持 RESTful 编程风格的请求。</p><h3 id="SpringMVC快速入门"><a href="#SpringMVC快速入门" class="headerlink" title="SpringMVC快速入门"></a>SpringMVC快速入门</h3><p>需求：客户端发起请求，服务器端接收请求，执行逻辑并进行视图跳转。</p><p><strong>开发步骤</strong></p><p>①导入SpringMVC相关坐标</p><p>②配置SpringMVC核心控制器DispathcerServlet</p><p>③创建Controller类和视图页面</p><p>④使用注解配置Controller类中业务方法的映射地址</p><p>⑤配置SpringMVC核心文件 spring-mvc.xml</p><p>⑥客户端发起请求测试</p><p><strong>代码实现</strong></p><p>①导入Spring和SpringMVC的坐标、导入Servlet和Jsp的坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--Spring坐标--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--SpringMVC坐标--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Servlet坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Jsp坐标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>②创建Controller和业务方法</p><ul><li>return “save.jsp” ：从当前请求路径下</li><li>return “/save.jsp”   从当前web容器的的路径下，推荐写法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">save</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"controller save ..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"save.jsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>③配置注解</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class UserController &#123;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(&quot;&#x2F;save&quot;)</span><br><span class="line">    public String save()&#123;</span><br><span class="line">        System.out.println(&quot;controller save ...&quot;);</span><br><span class="line">        return &quot;save.jsp&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>④创建视图页面save.jsp</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;Hello SpringMVC!&lt;/h2&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>⑤创建spring-mvc.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.dhz.controller"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>⑥在web.xml配置SpringMVC的核心控制器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;servlet&gt;</span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;&#x2F;servlet-name&gt;</span><br><span class="line">    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;&#x2F;servlet-class&gt;  </span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;contextConfigLocation&lt;&#x2F;param-name&gt;</span><br><span class="line">        &lt;param-value&gt;classpath:spring-mvc.xml&lt;&#x2F;param-value&gt;</span><br><span class="line">    &lt;&#x2F;init-param&gt;</span><br><span class="line">&lt;load-on-startup&gt;1&lt;&#x2F;load-on-startup&gt;</span><br><span class="line">&lt;&#x2F;servlet&gt;</span><br><span class="line">&lt;servlet-mapping&gt;   </span><br><span class="line">    &lt;servlet-name&gt;DispatcherServlet&lt;&#x2F;servlet-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;&#x2F;&lt;&#x2F;url-pattern&gt;</span><br><span class="line">&lt;&#x2F;servlet-mapping&gt;</span><br></pre></td></tr></table></figure><p>⑦访问测试地址</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/save</span><br></pre></td></tr></table></figure><h2 id="SpringMVC的组件解析"><a href="#SpringMVC的组件解析" class="headerlink" title="SpringMVC的组件解析"></a>SpringMVC的组件解析</h2><h3 id="SpringMVC的执行流程"><a href="#SpringMVC的执行流程" class="headerlink" title="SpringMVC的执行流程"></a>SpringMVC的执行流程</h3><p>①用户发送请求至前端控制器DispatcherServlet。</p><p>②DispatcherServlet收到请求调用HandlerMapping处理器映射器。</p><p>③处理器映射器找到具体的处理器(可以根据xml配置、注解进行查找)，生成处理器对象及处理器拦截器(如果有则生成)一并返回给DispatcherServlet。</p><p>④DispatcherServlet调用HandlerAdapter处理器适配器。</p><p>⑤HandlerAdapter经过适配调用具体的处理器(Controller，也叫后端控制器)。</p><p>⑥Controller执行完成返回ModelAndView。</p><p>⑦HandlerAdapter将controller执行结果ModelAndView返回给DispatcherServlet。</p><p>⑧DispatcherServlet将ModelAndView传给ViewReslover视图解析器。</p><p>⑨ViewReslover解析后返回具体View。</p><p>⑩DispatcherServlet根据View进行渲染视图（即将模型数据填充至视图中）。DispatcherServlet响应用户。</p><h3 id="SpringMVC组件解析"><a href="#SpringMVC组件解析" class="headerlink" title="SpringMVC组件解析"></a>SpringMVC组件解析</h3><ol><li><strong>前端控制器：DispatcherServlet</strong></li></ol><p>​    用户请求到达前端控制器，它就相当于 MVC 模式中的 C，DispatcherServlet 是整个流程控制的中心，由</p><p>它调用其它组件处理用户的请求，DispatcherServlet 的存在降低了组件之间的耦合性。</p><ol start="2"><li><strong>处理器映射器：HandlerMapping</strong></li></ol><p>​    HandlerMapping 负责根据用户请求找到 Handler 即处理器，SpringMVC 提供了不同的映射器实现不同的</p><p>映射方式，例如：配置文件方式，实现接口方式，注解方式等。</p><ol start="3"><li><strong>处理器适配器：HandlerAdapter</strong></li></ol><p>​    通过 HandlerAdapter 对处理器进行执行，这是适配器模式的应用，通过扩展适配器可以对更多类型的处理</p><p>器进行执行。</p><ol start="4"><li><strong>处理器：Handler</strong></li></ol><p>​    它就是我们开发中要编写的具体业务控制器。由 DispatcherServlet 把用户请求转发到 Handler。由</p><p>Handler 对具体的用户请求进行处理。</p><ol start="5"><li><strong>视图解析器：View Resolver</strong></li></ol><p>​    View Resolver 负责将处理结果生成 View 视图，View Resolver 首先根据逻辑视图名解析成物理视图名，即具体的页面地址，再生成 View 视图对象，最后对 View 进行渲染将处理结果通过页面展示给用户。</p><ol start="6"><li><strong>视图：View</strong></li></ol><p>​    SpringMVC 框架提供了很多的 View 视图类型的支持，包括：jstlView、freemarkerView、pdfView等。最常用的视图就是 jsp。一般情况下需要通过页面标签或页面模版技术将模型数据通过页面展示给用户，需要由程序员根据业务需求开发具体的页面</p><h3 id="SpringMVC注解解析"><a href="#SpringMVC注解解析" class="headerlink" title="SpringMVC注解解析"></a>SpringMVC注解解析</h3><h4 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h4><p>作用：用于建立请求 URL 和处理请求方法之间的对应关系</p><p>位置：</p><p>​      类上，请求URL 的第一级访问目录。此处不写的话，就相当于应用的根目录</p><p>​      方法上，请求 URL 的第二级访问目录，与类上的使用@ReqquestMapping标注的一级目录一起组成访问虚拟路径</p><p>属性：</p><p>​      value：用于指定请求的URL。它和path属性的作用是一样的</p><p>​      method：用于指定请求的方式</p><p>​      params：用于指定限制请求参数的条件。它支持简单的表达式。要求请求参数的key和value必须和配置的一模一样</p><p>例如：</p><p>​      params = {“accountName”}，表示请求参数必须有accountName</p><p>​      params = {“moeny!100”}，表示请求参数中money不能是100</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例： @RequestMapping(value &#x3D; &quot;&#x2F;save&quot;,method &#x3D; RequestMethod.GET)</span><br><span class="line">    public String save()&#123;</span><br><span class="line">        return &quot;save.jsp&quot;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>1.mvc命名空间引入</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">命名空间：xmlns:context="http://www.springframework.org/schema/context"</span><br><span class="line">        xmlns:mvc="http://www.springframework.org/schema/mvc"</span><br><span class="line">约束地址：http://www.springframework.org/schema/context</span><br><span class="line">        http://www.springframework.org/schema/context/spring-context.xsd</span><br><span class="line">        http://www.springframework.org/schema/mvc </span><br><span class="line">        http://www.springframework.org/schema/mvc/spring-mvc.xsd</span><br></pre></td></tr></table></figure><p>2.组件扫描</p><p>SpringMVC基于Spring容器，所以在进行SpringMVC操作时，需要将Controller存储到Spring容器中，如果使用@Controller注解标注的话，就需要使用&lt;context:component-scan base-package=“com.itheima.controller”/&gt;进行组件扫描。</p><p>扫描可以如下配置过滤(或包含)指定的注解，一般只扫描controller</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:component-scan base-package&#x3D;&quot;com.dhz.controller&quot;&gt;</span><br><span class="line">       &lt;context:include-filter type&#x3D;&quot;annotation&quot; expression&#x3D;&quot;org.springframework.stereotype.Controller&quot;&#x2F;&gt;</span><br><span class="line">       &lt;context:exclude-filter type&#x3D;&quot;annotation&quot; expression&#x3D;&quot;org.springframework.stereotype.Controller&quot;&#x2F;&gt;</span><br><span class="line">   &lt;&#x2F;context:component-scan&gt;</span><br></pre></td></tr></table></figure><h3 id="SpringMVC的XML配置解析"><a href="#SpringMVC的XML配置解析" class="headerlink" title="SpringMVC的XML配置解析"></a>SpringMVC的XML配置解析</h3><p>SpringMVC有默认组件配置，默认组件都是DispatcherServlet.properties配置文件中配置的，该配置文件地址org/springframework/web/servlet/DispatcherServlet.properties(下方external library-&gt;spring_webmvc)，该文件中配置了默认的视图解析器，如下：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">org.springframework.web.servlet.ViewResolver</span>=<span class="string">org.springframework.web.servlet.view.InternalResourceViewResolver</span></span><br></pre></td></tr></table></figure><p>翻看该解析器源码，可以看到该解析器的默认设置，如下：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">REDIRECT_URL_PREFIX</span> = <span class="string">"redirect:"  --重定向前缀</span></span><br><span class="line"><span class="attr">FORWARD_URL_PREFIX</span> = <span class="string">"forward:"    --转发前缀（默认值）在return "[forword:]/save.jsp";</span></span><br><span class="line"><span class="attr">prefix</span> = <span class="string">"";     --视图名称前缀</span></span><br><span class="line"><span class="attr">suffix</span> = <span class="string">"";     --视图名称后缀</span></span><br></pre></td></tr></table></figure><ol><li>视图解析器</li></ol><p>我们可以通过属性注入的方式修改视图的的前后缀，return “save”===访问/jsp/save.jsp</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置内部资源视图解析器--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/jsp/"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-5-知识要点"><a href="#3-5-知识要点" class="headerlink" title="3.5 知识要点"></a>3.5 知识要点</h3><p><strong>SpringMVC的相关组件</strong> </p><p>前端控制器：DispatcherServlet</p><p>处理器映射器：HandlerMapping</p><p>处理器适配器：HandlerAdapter</p><p>处理器：Handler</p><p>视图解析器：View Resolver</p><p>视图：View</p><p><strong>SpringMVC的注解和配置</strong> </p><p>请求映射注解：@RequestMapping</p><p>视图解析器配置：</p><p>REDIRECT_URL_PREFIX = “redirect:”  </p><p>FORWARD_URL_PREFIX = “forward:”    </p><p>prefix = “”;     </p><p>suffix = “”;     </p>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring+web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>maven</title>
      <link href="2021/02/17/maven/"/>
      <url>2021/02/17/maven/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="安装配置相关"><a href="#安装配置相关" class="headerlink" title="安装配置相关"></a>安装配置相关</h2><h3 id="Idea卡在Resolving-Maven-dependencies"><a href="#Idea卡在Resolving-Maven-dependencies" class="headerlink" title="Idea卡在Resolving Maven dependencies"></a>Idea卡在Resolving Maven dependencies</h3><ol><li><p>更换阿里云镜像</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;修改apache-maven-3.5.2-bin\apache-maven-3.5.2\conf\settings.xml</span><br><span class="line">&#x2F;&#x2F;在镜像位置增加如下内容</span><br><span class="line"></span><br><span class="line"> &lt;mirror&gt;</span><br><span class="line">            &lt;id&gt;aliyunmaven&lt;&#x2F;id&gt;</span><br><span class="line">            &lt;mirrorOf&gt;*&lt;&#x2F;mirrorOf&gt;</span><br><span class="line">            &lt;name&gt;阿里云公共仓库&lt;&#x2F;name&gt;</span><br><span class="line">            &lt;url&gt;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;public&lt;&#x2F;url&gt;</span><br><span class="line">        &lt;&#x2F;mirror&gt;</span><br><span class="line">        &lt;mirror&gt;</span><br><span class="line">            &lt;id&gt;aliyunmaven&lt;&#x2F;id&gt;</span><br><span class="line">            &lt;mirrorOf&gt;*&lt;&#x2F;mirrorOf&gt;</span><br><span class="line">            &lt;name&gt;阿里云谷歌仓库&lt;&#x2F;name&gt;</span><br><span class="line">            &lt;url&gt;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;google&lt;&#x2F;url&gt;</span><br><span class="line">        &lt;&#x2F;mirror&gt;</span><br><span class="line">        &lt;mirror&gt;</span><br><span class="line">            &lt;id&gt;aliyunmaven&lt;&#x2F;id&gt;</span><br><span class="line">            &lt;mirrorOf&gt;*&lt;&#x2F;mirrorOf&gt;</span><br><span class="line">            &lt;name&gt;阿里云阿帕奇仓库&lt;&#x2F;name&gt;</span><br><span class="line">            &lt;url&gt;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;apache-snapshots&lt;&#x2F;url&gt;</span><br><span class="line">        &lt;&#x2F;mirror&gt;</span><br></pre></td></tr></table></figure></li><li><p>修改maven设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">修改maven Importing的jvm参数, 默认为700多, 直接修改成 -Xms1024m -Xmx2048m</span><br></pre></td></tr></table></figure><p><img src="/2021/02/17/maven/image-20210220095424280.png" alt="image-20210220095424280"></p></li></ol><h2 id="pom-xml相关"><a href="#pom-xml相关" class="headerlink" title="pom.xml相关"></a>pom.xml相关</h2><h3 id="jar包"><a href="#jar包" class="headerlink" title="jar包"></a>jar包</h3><h4 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;javax.servlet&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;servlet-api&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.5&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;javax.servlet.jsp&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jsp-api&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.0&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.tomcat&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;tomcat-servlet-api&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;7.0.47&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><h4 id="tomcat7"><a href="#tomcat7" class="headerlink" title="tomcat7"></a>tomcat7</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.apache.tomcat.maven&lt;&#x2F;groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;tomcat7-maven-plugin&lt;&#x2F;artifactId&gt;</span><br><span class="line">                &lt;version&gt;2.2&lt;&#x2F;version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;port&gt;80&lt;&#x2F;port&gt;</span><br><span class="line">                    &lt;path&gt;&#x2F;&lt;&#x2F;path&gt;</span><br><span class="line">                &lt;&#x2F;configuration&gt;</span><br><span class="line">            &lt;&#x2F;plugin&gt;</span><br><span class="line">        &lt;&#x2F;plugins&gt;</span><br><span class="line">    &lt;&#x2F;build&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring_problem</title>
      <link href="2021/02/17/spring-problem/"/>
      <url>2021/02/17/spring-problem/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="类存在，但报找不到的错误"><a href="#类存在，但报找不到的错误" class="headerlink" title="类存在，但报找不到的错误"></a>类存在，但报找不到的错误</h3><p><img src="/2021/02/17/spring-problem/image-20210217175451474.png" alt="image-20210217175451474"></p><ul><li>原因：target-&gt;classes目录下没有该文件</li><li>解决方法：手动进行maven编译</li></ul><h3 id="jsp无法解析EL表达式-username"><a href="#jsp无法解析EL表达式-username" class="headerlink" title="jsp无法解析EL表达式(${username})"></a>jsp无法解析EL表达式(${username})</h3><ul><li><p>原因</p><ol><li>Application server in question doesn’t support JSP 2.0. （应用服务器不支持JSP2.0)</li><li>The <code>web.xml</code> is not declared as Servlet 2.4 or higher. (web.xml中servlet版本没有声明在2.4以上）</li><li>The <code>@page</code> is configured with <code>isELIgnored=true</code>. （页面上配置了&lt;%@ page isELIgnored=”true” %&gt; )</li><li>The web.xml is configured with <code>&lt;el-ignored&gt;true&lt;/el-ignored&gt;</code> in <code>&lt;jsp-config&gt;</code>. (web.xml中显式地配置了忽略EL表达式）</li><li>maven-archetype-webapp创建web.xml默认不支持EL</li></ol></li><li><p>解决方法：修改web.xml如下，重启tomcat</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;web-app xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot; xmlns&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;javaee&quot; xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;javaee http:&#x2F;&#x2F;java.sun.com&#x2F;xml&#x2F;ns&#x2F;javaee&#x2F;web-app_3_0.xsd&quot; id&#x3D;&quot;WebApp_ID&quot; version&#x3D;&quot;3.0&quot;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;&#x2F;web-app&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="spring-mvc导入jackson报错"><a href="#spring-mvc导入jackson报错" class="headerlink" title="spring mvc导入jackson报错"></a>spring mvc导入jackson报错</h3><ul><li>原因：mvc为4.x。需要Jackson为2.6以上</li><li>解决方法：修改pom.xml中<strong>三个jackson jar包</strong>的版本为2.6以上即可</li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring JdbcTemplate&amp;声明式事务</title>
      <link href="2021/02/17/Spring-JdbcTemplate-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1/"/>
      <url>2021/02/17/Spring-JdbcTemplate-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="JdbcTemplate基本使用"><a href="#JdbcTemplate基本使用" class="headerlink" title="JdbcTemplate基本使用"></a>JdbcTemplate基本使用</h1><h2 id="概述-了解"><a href="#概述-了解" class="headerlink" title="概述(了解)"></a>概述(了解)</h2><p>JdbcTemplate是spring框架中提供的一个对象，是对原始繁琐的Jdbc API对象的简单封装。spring框架为我们提供了很多的操作模板类。例如：操作关系型数据的JdbcTemplate和HibernateTemplate，操作nosql数据库的RedisTemplate，操作消息队列的JmsTemplate等等。</p><h2 id="开发步骤-理解"><a href="#开发步骤-理解" class="headerlink" title="开发步骤(理解)"></a>开发步骤(理解)</h2><p>①导入spring-jdbc和spring-tx坐标</p><p>②创建数据库表和实体</p><p>③创建JdbcTemplate对象</p><p>④执行数据库操作</p><h2 id="快速入门代码实现-应用"><a href="#快速入门代码实现-应用" class="headerlink" title="快速入门代码实现(应用)"></a>快速入门代码实现(应用)</h2><ol><li><p>导入spring-jdbc、spring-tx、数据库相关坐标</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-jdbc&lt;&#x2F;artifactId&gt;</span><br><span class="line">           &lt;version&gt;5.0.3.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">       &lt;&#x2F;dependency&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-tx&lt;&#x2F;artifactId&gt;</span><br><span class="line">           &lt;version&gt;5.0.3.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">       &lt;&#x2F;dependency&gt;</span><br><span class="line">   &lt;&#x2F;dependencies&gt;</span><br></pre></td></tr></table></figure></li><li><p>创建数据库表和实体</p><p><img src="/2021/02/17/Spring-JdbcTemplate-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1/1.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">package com.dhz.domain;</span><br><span class="line"></span><br><span class="line">public class Account &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private double money;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Account&#123;&quot; +</span><br><span class="line">                &quot;name&#x3D;&#39;&quot; + name + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, money&#x3D;&quot; + money +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getMoney() &#123;</span><br><span class="line">        return money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMoney(double money) &#123;</span><br><span class="line">        this.money &#x3D; money;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建JdbcTemplate对象，执行数据库操作</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="comment">//测试JdbcTemplate开发步骤</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> PropertyVetoException </span>&#123;</span><br><span class="line">        <span class="comment">//创建数据源对象</span></span><br><span class="line">        ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">        dataSource.setDriverClass(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        dataSource.setJdbcUrl(<span class="string">"jdbc:mysql://localhost:3306/test"</span>);</span><br><span class="line">        dataSource.setUser(<span class="string">"root"</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">"root"</span>);</span><br><span class="line"></span><br><span class="line">        JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate();</span><br><span class="line">        <span class="comment">//设置数据源对象  知道数据库在哪</span></span><br><span class="line">        jdbcTemplate.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">//执行操作</span></span><br><span class="line">        <span class="keyword">int</span> row = jdbcTemplate.update(<span class="string">"insert into account values(?,?)"</span>, <span class="string">"tom"</span>, <span class="number">5000</span>);</span><br><span class="line">        System.out.println(row);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="spring产生模板对象分析-理解"><a href="#spring产生模板对象分析-理解" class="headerlink" title="spring产生模板对象分析(理解)"></a>spring产生模板对象分析(理解)</h2><p>我们可以将JdbcTemplate的创建权交给Spring，将数据源DataSource的创建权也交给Spring，在Spring容器内部将数据源DataSource注入到JdbcTemplate模版对象中,然后通过Spring容器获得JdbcTemplate对象来执行操作。</p><h2 id="spring产生模板对象代码实现-应用"><a href="#spring产生模板对象代码实现-应用" class="headerlink" title="spring产生模板对象代码实现(应用)"></a>spring产生模板对象代码实现(应用)</h2><p>配置如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--数据源对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql:///test"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--jdbc模板对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>测试代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="comment">//测试Spring产生jdbcTemplate对象</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> PropertyVetoException </span>&#123;</span><br><span class="line">       ApplicationContext app = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line">       JdbcTemplate jdbcTemplate = app.getBean(JdbcTemplate<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">       <span class="keyword">int</span> row = jdbcTemplate.update(<span class="string">"insert into account values(?,?)"</span>, <span class="string">"lisi"</span>, <span class="number">5000</span>);</span><br><span class="line">       System.out.println(row);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="spring产生模板对象代码实现（抽取jdbc-properties）-应用"><a href="#spring产生模板对象代码实现（抽取jdbc-properties）-应用" class="headerlink" title="spring产生模板对象代码实现（抽取jdbc.properties）(应用)"></a>spring产生模板对象代码实现（抽取jdbc.properties）(应用)</h2><p>将数据库的连接信息抽取到外部配置文件中，和spring的配置文件分离开，有利于后期维护</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/test</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure><p>配置文件修改为:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--加载jdbc.properties--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--数据源对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--jdbc模板对象--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="声明式事务控制"><a href="#声明式事务控制" class="headerlink" title="声明式事务控制"></a>声明式事务控制</h1><h2 id="编程式事务控制相关对象"><a href="#编程式事务控制相关对象" class="headerlink" title="编程式事务控制相关对象"></a>编程式事务控制相关对象</h2><h3 id="PlatformTransactionManager"><a href="#PlatformTransactionManager" class="headerlink" title="PlatformTransactionManager"></a>PlatformTransactionManager</h3><p>PlatformTransactionManager 接口是 spring 的事务管理器，它里面提供了我们常用的操作事务的方法。</p><p><img src="/2021/02/17/Spring-JdbcTemplate-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1/2.png" alt="1554628587457"></p><p>注意：</p><p>PlatformTransactionManager 是接口类型，不同的 Dao 层技术则有不同的实现类，例如：Dao 层技术是jdbc 或 mybatis 时：org.springframework.jdbc.datasource.DataSourceTransactionManager </p><p>Dao 层技术是hibernate时：org.springframework.orm.hibernate5.HibernateTransactionManager</p><h3 id="TransactionDefinition"><a href="#TransactionDefinition" class="headerlink" title="TransactionDefinition"></a>TransactionDefinition</h3><p>TransactionDefinition 是事务的定义信息对象，里面有如下方法：</p><p><img src="/2021/02/17/Spring-JdbcTemplate-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1/3.png" alt="1554628676150"></p><h4 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h4><p>设置隔离级别，可以解决事务并发产生的问题，如脏读、不可重复读和虚读。</p><ul><li><p>ISOLATION_DEFAULT</p></li><li><p>ISOLATION_READ_UNCOMMITTED</p></li><li><p>ISOLATION_READ_COMMITTED</p></li><li><p>ISOLATION_REPEATABLE_READ</p></li><li><p>ISOLATION_SERIALIZABLE</p></li></ul><h4 id="事务传播行为"><a href="#事务传播行为" class="headerlink" title="事务传播行为"></a>事务传播行为</h4><ul><li><p><strong>REQUIRED：如果当前没有事务，就新建一个事务，如果已经存在一个事务中，加入到这个事务中。一般的选择（默认值）</strong></p></li><li><p><strong>SUPPORTS：支持当前事务，如果当前没有事务，就以非事务方式执行（没有事务）</strong></p></li><li><p>MANDATORY：使用当前的事务，如果当前没有事务，就抛出异常</p></li><li><p>REQUERS_NEW：新建事务，如果当前在事务中，把当前事务挂起。</p></li><li><p>NOT_SUPPORTED：以非事务方式执行操作，如果当前存在事务，就把当前事务挂起</p></li><li><p>NEVER：以非事务方式运行，如果当前存在事务，抛出异常</p></li><li><p>NESTED：如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则执行 REQUIRED 类似的操作</p></li><li><p>超时时间：默认值是-1，没有超时限制。如果有，以秒为单位进行设置</p></li><li><p>是否只读：建议查询时设置为只读</p></li></ul><h3 id="TransactionStatus"><a href="#TransactionStatus" class="headerlink" title="TransactionStatus"></a>TransactionStatus</h3><p>TransactionStatus 接口提供的是事务具体的运行状态，方法介绍如下。</p><p><img src="/2021/02/17/Spring-JdbcTemplate-%E5%A3%B0%E6%98%8E%E5%BC%8F%E4%BA%8B%E5%8A%A1/4.png" alt="1554628857200"></p><h2 id="基于-XML-的声明式事务控制"><a href="#基于-XML-的声明式事务控制" class="headerlink" title="基于 XML 的声明式事务控制"></a>基于 XML 的声明式事务控制</h2><h3 id="什么是声明式事务控制"><a href="#什么是声明式事务控制" class="headerlink" title="什么是声明式事务控制"></a>什么是声明式事务控制</h3><p>Spring 的声明式事务顾名思义就是采用声明的方式来处理事务。这里所说的声明，就是指在配置文件中声明，用在 Spring 配置文件中声明式的处理事务来代替代码式的处理事务。</p><p><strong>声明式事务处理的作用</strong></p><ul><li><p>事务管理不侵入开发的组件。具体来说，业务逻辑对象就不会意识到正在事务管理之中，事实上也应该如此，因为事务管理是属于系统层面的服务，而不是业务逻辑的一部分，如果想要改变事务管理策划的话，也只需要在定义文件中重新配置即可</p></li><li><p>在不需要事务管理的时候，只要在设定文件上修改一下，即可移去事务管理服务，无需改变代码重新编译，这样维护起来极其方便</p></li></ul><p><strong>注意：Spring 声明式事务控制底层就是AOP。</strong></p><h3 id="声明式事务控制的实现"><a href="#声明式事务控制的实现" class="headerlink" title="声明式事务控制的实现"></a>声明式事务控制的实现</h3><p>声明式事务控制明确事项：</p><ul><li><p>谁是切点？</p></li><li><p>谁是通知？</p></li><li><p>配置切面？</p></li></ul><p>①引入tx命名空间</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop/spring-aop.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx </span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>②配置事务增强</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--平台事务管理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--事务增强配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure><p>③配置事务 AOP 织入</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--事务的aop增强--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"myPointcut"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.impl.*.*(..))"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointcut"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:advisor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure><p>④测试事务控制转账业务代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String outMan, String inMan, <span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">    accountDao.out(outMan,money);</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">    accountDao.in(inMan,money);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="切点方法的事务参数的配置"><a href="#切点方法的事务参数的配置" class="headerlink" title="切点方法的事务参数的配置"></a>切点方法的事务参数的配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--事务增强配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure><p>其中，<a href="tx:method">tx:method</a> 代表切点方法的事务参数的配置，例如：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"transfer"</span> <span class="attr">isolation</span>=<span class="string">"REPEATABLE_READ"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">timeout</span>=<span class="string">"-1"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p>name：切点方法名称</p></li><li><p>isolation:事务的隔离级别</p></li><li><p>propogation：事务的传播行为</p></li><li><p>timeout：超时时间</p></li><li><p>read-only：是否只读</p></li></ul><h2 id="3-基于注解的声明式事务控制"><a href="#3-基于注解的声明式事务控制" class="headerlink" title="3 基于注解的声明式事务控制"></a>3 基于注解的声明式事务控制</h2><h3 id="3-1-使用注解配置声明式事务控制"><a href="#3-1-使用注解配置声明式事务控制" class="headerlink" title="3.1 使用注解配置声明式事务控制"></a>3.1 使用注解配置声明式事务控制</h3><ul><li>正常注入+方法(或者类)上加@Transactional</li></ul><ol><li>编写 AccoutDao</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span>(<span class="string">"accountDao"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountDaoImpl</span> <span class="keyword">implements</span> <span class="title">AccountDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">(String outMan, <span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">"update account set money=money-? where name=?"</span>,money,outMan);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">(String inMan, <span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        jdbcTemplate.update(<span class="string">"update account set money=money+? where name=?"</span>,money,inMan);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>编写 AccoutService</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span>(<span class="string">"accountService"</span>)</span><br><span class="line"><span class="meta">@Transactional</span> <span class="comment">//可以加在类上</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountServiceImpl</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao;</span><br><span class="line">    <span class="meta">@Transactional</span>(isolation = Isolation.READ_COMMITTED,propagation = Propagation.REQUIRED) <span class="comment">//也可以加在方法上</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transfer</span><span class="params">(String outMan, String inMan, <span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">        accountDao.out(outMan,money);</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        accountDao.in(inMan,money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>编写 applicationContext.xml 配置文件</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">!—之前省略datsSource、jdbcTemplate、平台事务管理器的配置--</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--事务的注解驱动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-2-注解配置声明式事务控制解析"><a href="#3-2-注解配置声明式事务控制解析" class="headerlink" title="3.2 注解配置声明式事务控制解析"></a>3.2 注解配置声明式事务控制解析</h3><p>①使用 @Transactional 在需要进行事务控制的类或是方法上修饰，注解可用的属性同 xml 配置方式，例如隔离级别、传播行为等。</p><p>②注解使用在类上，那么该类下的所有方法都使用同一套注解参数配置。</p><p>③使用在方法上，不同的方法可以采用不同的事务参数配置。</p><p>④Xml配置文件中要开启事务的注解驱动&lt;tx:annotation-driven /&gt;</p><h3 id="3-3-知识要点"><a href="#3-3-知识要点" class="headerlink" title="3.3 知识要点"></a>3.3 知识要点</h3><p><strong>注解声明式事务控制的配置要点</strong></p><ul><li><p>平台事务管理器配置（xml方式）</p></li><li><p>事务通知的配置（@Transactional注解配置）</p></li><li><p>事务注解驱动的配置 <a href="tx:annotation-driven/">tx:annotation-driven/</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java_Spring</title>
      <link href="2021/02/14/Java-Spring/"/>
      <url>2021/02/14/Java-Spring/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="spring入门"><a href="#spring入门" class="headerlink" title="spring入门"></a>spring入门</h1><h2 id="spring-注解-快速搭建"><a href="#spring-注解-快速搭建" class="headerlink" title="spring+注解 快速搭建"></a>spring+注解 快速搭建</h2><h3 id="新建空的maven项目，在pom-xml中引入spring-jar包"><a href="#新建空的maven项目，在pom-xml中引入spring-jar包" class="headerlink" title="新建空的maven项目，在pom.xml中引入spring jar包"></a>新建空的maven项目，在pom.xml中引入spring jar包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-context&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="添加注解"><a href="#添加注解" class="headerlink" title="添加注解"></a>添加注解</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Component(&quot;userService&quot;)</span><br><span class="line">public class UserServiceImpl implements UserService &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    @Qualifier(&quot;userDao&quot;)</span><br><span class="line">    private UserDao userDao;</span><br><span class="line">    public void save() &#123;</span><br><span class="line">        userDao.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;1.@Component(&quot;xxx&quot;)  xxx为id</span><br><span class="line">&#x2F;&#x2F;2.为成员变量赋值</span><br><span class="line">&#x2F;&#x2F; @Autowired</span><br><span class="line">&#x2F;&#x2F; @Qualifier(&quot;xxx&quot;)  xxx为之前设置的id</span><br></pre></td></tr></table></figure><h3 id="在applicationContext-xml中添加扫描注解的路径"><a href="#在applicationContext-xml中添加扫描注解的路径" class="headerlink" title="在applicationContext.xml中添加扫描注解的路径"></a>在applicationContext.xml中添加扫描注解的路径</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;</span><br><span class="line">       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;</span><br><span class="line">       xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd</span><br><span class="line">        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd&quot;&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;context:component-scan base-package&#x3D;&quot;com.dhz&quot;&gt;&lt;&#x2F;context:component-scan&gt;</span><br><span class="line">    </span><br><span class="line">&lt;&#x2F;beans&gt;</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">        ApplicationContext app&#x3D;new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line">        UserService userService &#x3D; app.getBean(UserService.class);&#x2F;&#x2F;参数为id或者字节码类文件</span><br><span class="line">        userService.save();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h2><h3 id="原始注解"><a href="#原始注解" class="headerlink" title="原始注解"></a>原始注解</h3><table><thead><tr><th>注解</th><th>说明</th></tr></thead><tbody><tr><td>@Component</td><td>使用在类上用于实例化Bean</td></tr><tr><td>@Controller</td><td>使用在web层类上用于实例化Bean</td></tr><tr><td>@Service</td><td>使用在service层类上用于实例化Bean</td></tr><tr><td>@Repository</td><td>使用在dao层类上用于实例化Bean</td></tr><tr><td>@Autowired</td><td>使用在字段上用于根据类型依赖注入</td></tr><tr><td>@Qualifier</td><td>结合@Autowired一起使用用于根据名称进行依赖注入</td></tr><tr><td>@Resource</td><td>相当于@Autowired+@Qualifier，按照名称进行注入</td></tr><tr><td>@Value</td><td>注入普通属性</td></tr><tr><td>@Scope</td><td>标注Bean的作用范围</td></tr><tr><td>@PostConstruct</td><td>使用在方法上标注该方法是Bean的初始化方法</td></tr><tr><td>@PreDestroy</td><td>使用在方法上标注该方法是Bean的销毁方法</td></tr></tbody></table><h4 id="Component-“id名”"><a href="#Component-“id名”" class="headerlink" title="@Component(“id名”)"></a>@Component(“id名”)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Component(&quot;userDao&quot;) &#x2F;&#x2F;类注解，配置bean</span><br></pre></td></tr></table></figure><h4 id="Resource-name-”xxx”"><a href="#Resource-name-”xxx”" class="headerlink" title="@Resource(name=”xxx”)"></a>@Resource(name=”xxx”)</h4><p>相当于@Autowired+@Qualifier(“xxx”)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;    @Autowired</span><br><span class="line">&#x2F;&#x2F;    @Qualifier(&quot;userDao&quot;)</span><br><span class="line">      @Resource(name&#x3D;&quot;userDao&quot;)</span><br><span class="line">      private UserDao userDao;</span><br></pre></td></tr></table></figure><h4 id="Value-“xxx”"><a href="#Value-“xxx”" class="headerlink" title="@Value(“xxx”)"></a>@Value(“xxx”)</h4><p>基本数据类型赋值，xxx可为EL表达式</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span><br><span class="line">private String driver;</span><br></pre></td></tr></table></figure><h4 id="Scope-“xxx”"><a href="#Scope-“xxx”" class="headerlink" title="@Scope(“xxx”)"></a>@Scope(“xxx”)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">加在类上</span><br><span class="line">scope&#x3D;&quot;singleton&quot; &#x2F;&#x2F;默认，单例</span><br><span class="line">scope&#x3D;&quot;prototype&quot; &#x2F;&#x2F;多例</span><br></pre></td></tr></table></figure><h4 id="PostConstruct和-PreDestroy"><a href="#PostConstruct和-PreDestroy" class="headerlink" title="@PostConstruct和@PreDestroy"></a>@PostConstruct和@PreDestroy</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@PostConstruct &#x2F;&#x2F;init方法</span><br><span class="line">@PreDestroy  &#x2F;&#x2F;Destroy方法</span><br></pre></td></tr></table></figure><h3 id="新注解"><a href="#新注解" class="headerlink" title="新注解"></a>新注解</h3><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Configuration &#x2F;&#x2F;类注解。标志Spring配置类</span><br></pre></td></tr></table></figure><h4 id="ComponentScan-“路径名”"><a href="#ComponentScan-“路径名”" class="headerlink" title="@ComponentScan(“路径名”)"></a>@ComponentScan(“路径名”)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@ComponentScan(&quot;com.dhz&quot;) &#x2F;&#x2F;类注解，配置注解扫描路径</span><br><span class="line">&#x2F;&#x2F;相当于</span><br><span class="line">&#x2F;&#x2F;&lt;context:component-scan base-package&#x3D;&quot;com.dhz&quot;&gt;&lt;&#x2F;context:component-scan&gt;</span><br></pre></td></tr></table></figure><h4 id="PropertySource-“xxx”"><a href="#PropertySource-“xxx”" class="headerlink" title="@PropertySource(“xxx”)"></a>@PropertySource(“xxx”)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@PropertySource(&quot;classpath:jdbc.properties&quot;)&#x2F;&#x2F;类注解</span><br><span class="line">&#x2F;&#x2F;classpath：表示resources目录下</span><br></pre></td></tr></table></figure><h4 id="Import-xxx-class"><a href="#Import-xxx-class" class="headerlink" title="@Import({xxx.class})"></a>@Import({xxx.class})</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@Import(&#123;DataSourceConfiguration.class&#125;) &#x2F;&#x2F;类注解，引入其他配置类</span><br></pre></td></tr></table></figure><h2 id="常用标签"><a href="#常用标签" class="headerlink" title="常用标签"></a>常用标签</h2><h3 id="读取properties-EL表达式"><a href="#读取properties-EL表达式" class="headerlink" title="读取properties+EL表达式(${})"></a>读取properties+EL表达式(${})</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;context:property-placeholder location&#x3D;&quot;classpath:jdbc.properties&quot;&#x2F;&gt;</span><br><span class="line">&#x2F;&#x2F;classpath：表示resources目录下</span><br></pre></td></tr></table></figure><h2 id="搭建SpringJunitTest"><a href="#搭建SpringJunitTest" class="headerlink" title="搭建SpringJunitTest"></a>搭建SpringJunitTest</h2><h3 id="pom-xml-引入jar包"><a href="#pom-xml-引入jar包" class="headerlink" title="pom.xml 引入jar包"></a>pom.xml 引入jar包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-test&lt;&#x2F;artifactId&gt;</span><br><span class="line">            &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">        &lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="编写测试类"><a href="#编写测试类" class="headerlink" title="编写测试类"></a>编写测试类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@ContextConfiguration(classes &#x3D; &#123;SpringConfiguration.class&#125;)</span><br><span class="line">&#x2F;&#x2F;@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span><br><span class="line">&#x2F;&#x2F;或者直接加载配置文件</span><br><span class="line">public class SpringJunitTest &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        userService.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>注：Test方法必须是public</li></ul><h1 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h1><p>AOP 为 Aspect Oriented Programming 的缩写，意思为面向切面编程，是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</p><p>作用：在程序运行期间，在不修改源码的情况下对方法进行功能增强</p><p>优势：减少重复代码，提高开发效率，并且便于维护</p><p>底层实现：通过 Spring 提供的的动态代理技术实现的。</p><p>常用的动态代理技术</p><p>JDK 代理 : 基于接口的动态代理技术</p><p>cglib 代理：基于父类的动态代理技术</p><h2 id="自己实现aop"><a href="#自己实现aop" class="headerlink" title="自己实现aop"></a>自己实现aop</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p><img src="/2021/02/14/Java-Spring/image-20210216162441599.png" alt="image-20210216162441599"></p><p>TargetInterface.java</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package com.dhz.proxy.jdk;</span><br><span class="line"></span><br><span class="line">public interface TargetInterface &#123;</span><br><span class="line">    void save();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Advice.java</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">package com.dhz.proxy.cglib;</span><br><span class="line"></span><br><span class="line">public class Advice &#123;</span><br><span class="line">    void before()&#123;</span><br><span class="line">        System.out.println(&quot;before....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    void after()&#123;</span><br><span class="line">        System.out.println(&quot;after....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Target.java</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package com.dhz.proxy.cglib;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Target &#123;</span><br><span class="line">    public void save() &#123;</span><br><span class="line">        System.out.println(&quot;save....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="基于JDK"><a href="#基于JDK" class="headerlink" title="基于JDK"></a>基于JDK</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        final Target target&#x3D;new Target();</span><br><span class="line">        final Advice advice&#x3D;new Advice();</span><br><span class="line"></span><br><span class="line">        TargetInterface targetInterface&#x3D; (TargetInterface) Proxy.newProxyInstance(</span><br><span class="line">                target.getClass().getClassLoader(),&#x2F;&#x2F;目标对象的类加载器</span><br><span class="line">                target.getClass().getInterfaces(),&#x2F;&#x2F;目标对象的接口字节码对象数组</span><br><span class="line">                new InvocationHandler() &#123;</span><br><span class="line">                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line"></span><br><span class="line">                        advice.before();</span><br><span class="line">                        Object invoke &#x3D; method.invoke(target, args);</span><br><span class="line">                        advice.after();</span><br><span class="line">                        return invoke;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        targetInterface.save();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="基于cglib"><a href="#基于cglib" class="headerlink" title="基于cglib"></a>基于cglib</h3><p>目录结构中没有TargetInterface.java</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">    final Target target&#x3D;new Target();</span><br><span class="line">    final Advice advice&#x3D;new Advice();</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;1.创建增强器</span><br><span class="line">    Enhancer enhancer&#x3D;new Enhancer();</span><br><span class="line">    &#x2F;&#x2F;2.设置父类（目标）</span><br><span class="line">    enhancer.setSuperclass(Target.class);</span><br><span class="line">    &#x2F;&#x2F;3.设置回调</span><br><span class="line">    enhancer.setCallback(new MethodInterceptor() &#123;</span><br><span class="line">        public Object intercept(Object proxy, Method method, Object[] args, MethodProxy methodProxy) throws Throwable &#123;</span><br><span class="line">            advice.before();</span><br><span class="line">            Object invoke &#x3D; method.invoke(target, args);</span><br><span class="line">            advice.after();</span><br><span class="line">            return invoke;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    &#x2F;&#x2F;4.创建代理对象</span><br><span class="line">    Target target1 &#x3D; (Target) enhancer.create();</span><br><span class="line">    </span><br><span class="line">    target1.save();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="sprnig-AOP"><a href="#sprnig-AOP" class="headerlink" title="sprnig-AOP"></a>sprnig-AOP</h2><h3 id="目录结构-1"><a href="#目录结构-1" class="headerlink" title="目录结构"></a>目录结构</h3><p><img src="/2021/02/14/Java-Spring/image-20210216162754663.png" alt="image-20210216162754663"></p><h3 id="基于xml的AOP"><a href="#基于xml的AOP" class="headerlink" title="基于xml的AOP"></a>基于xml的AOP</h3><h4 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h4><p>①导入 AOP 相关坐标</p><p>②创建目标接口和目标类（内部有切点）</p><p>③创建切面类（内部有增强方法）</p><p>④将目标类和切面类的对象创建权交给 spring</p><p>⑤在 applicationContext.xml 中配置织入关系</p><p>⑥测试代码</p><ol><li><p>导入 AOP 相关坐标</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--导入spring的context坐标，context依赖aop--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-context&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;5.0.5.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;!-- aspectj的织入 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.aspectj&lt;&#x2F;groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;aspectjweaver&lt;&#x2F;artifactId&gt;</span><br><span class="line">  &lt;version&gt;1.8.13&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></li><li><p>创建目标接口和目标类（内部有切点）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public interface TargetInterface &#123;</span><br><span class="line">    void save();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Target implements TargetInterface&#123;</span><br><span class="line">    public void save() &#123;</span><br><span class="line">        System.out.println(&quot;save....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>创建切面类（内部有增强方法）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Myaspect &#123;</span><br><span class="line">    public void before()&#123;</span><br><span class="line">        System.out.println(&quot;before....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void after()&#123;</span><br><span class="line">        System.out.println(&quot;after....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>将目标类和切面类的对象创建权交给 spring</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id&#x3D;&quot;myaspect&quot; class&#x3D;&quot;com.dhz.aop.Myaspect&quot;&gt;&lt;&#x2F;bean&gt;</span><br><span class="line">&lt;bean id&#x3D;&quot;target&quot; class&#x3D;&quot;com.dhz.aop.Target&quot;&gt;&lt;&#x2F;bean&gt;</span><br></pre></td></tr></table></figure></li><li><p>在 applicationContext.xml 中配置织入关系</p><ol><li><p>导入aop命名空间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&quot;</span><br><span class="line">       xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class="line">       xmlns:context&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&quot;</span><br><span class="line">       xmlns:aop&#x3D;&quot;http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&quot;</span><br><span class="line">       xsi:schemaLocation&#x3D;&quot;</span><br><span class="line">        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context</span><br><span class="line">        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;context&#x2F;spring-context.xsd</span><br><span class="line">        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop</span><br><span class="line">        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;aop&#x2F;spring-aop.xsd</span><br><span class="line">        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans</span><br><span class="line">        http:&#x2F;&#x2F;www.springframework.org&#x2F;schema&#x2F;beans&#x2F;spring-beans.xsd&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>配置切点表达式和前置增强的织入关系</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:config&gt;</span><br><span class="line">        &lt;aop:aspect ref&#x3D;&quot;myaspect&quot;&gt;</span><br><span class="line">            &lt;aop:before method&#x3D;&quot;before&quot; pointcut&#x3D;&quot;execution(public void com.dhz.aop.Target.save())&quot;&gt;&lt;&#x2F;aop:before&gt;</span><br><span class="line">        &lt;&#x2F;aop:aspect&gt;</span><br><span class="line">    &lt;&#x2F;aop:config&gt;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>测试代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@ContextConfiguration(&quot;classpath:applicationContext.xml&quot;)</span><br><span class="line">public class AopTest &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private TargetInterface target;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test()&#123;</span><br><span class="line">        target.save();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>XML 配置 AOP 详解</p><h4 id="切点表达式的写法"><a href="#切点表达式的写法" class="headerlink" title="切点表达式的写法"></a>切点表达式的写法</h4><p>   表达式语法：</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution([修饰符] 返回值类型 包名.类名.方法名(参数))</span><br></pre></td></tr></table></figure><ul><li><p>访问修饰符可以省略</p></li><li><p>返回值类型、包名、类名、方法名可以使用星号*  代表任意</p></li><li><p>包名与类名之间一个点 . 代表当前包下的类，两个点 .. 表示当前包及其子包下的类</p></li><li><p>参数列表可以使用两个点 .. 表示任意个数，任意类型的参数列表</p><p>例如：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">execution(public void com.itheima.aop.Target.method())</span><br><span class="line">execution(void com.itheima.aop.Target.*(..))</span><br><span class="line">execution(* com.itheima.aop.*.*(..))</span><br><span class="line">execution(* com.itheima.aop..*.*(..))</span><br><span class="line">execution(* *..*.*(..))</span><br></pre></td></tr></table></figure><h4 id="通知的类型"><a href="#通知的类型" class="headerlink" title="通知的类型"></a>通知的类型</h4><p>通知的配置语法：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:通知类型</span> <span class="attr">method</span>=<span class="string">“切面类中方法名”</span> <span class="attr">pointcut</span>=<span class="string">“切点表达式</span>"&gt;</span><span class="tag">&lt;/<span class="name">aop:通知类型</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/2021/02/14/Java-Spring/%E5%9B%BE%E7%89%875-1613466781350.png" alt></p></li></ul><ul><li><p>注意环绕的方法如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ProceedingJoinPoint是正在执行的方法</span><br><span class="line">public Object around(ProceedingJoinPoint pjp) throws Throwable &#123;</span><br><span class="line">    System.out.println(&quot;前置。。。&quot;);</span><br><span class="line">    Object proceed &#x3D; pjp.proceed();</span><br><span class="line">    System.out.println(&quot;后置。。。&quot;);</span><br><span class="line">    return proceed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="切点表达式的抽取"><a href="#切点表达式的抽取" class="headerlink" title="切点表达式的抽取"></a>切点表达式的抽取</h4><p> 当多个增强的切点表达式相同时，可以将切点表达式进行抽取，在增强中使用 pointcut-ref 属性代替 pointcut 属性来引用抽取后的切点表达式。</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"myaspect"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"myPointCut"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.dhz.aop.*.*(..))"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">"around"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointCut"</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:around</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="基于注解的-AOP-开发"><a href="#基于注解的-AOP-开发" class="headerlink" title="基于注解的 AOP 开发"></a>基于注解的 AOP 开发</h3><h4 id="快速入门-1"><a href="#快速入门-1" class="headerlink" title="快速入门"></a>快速入门</h4><p>   基于注解的aop开发步骤：</p><p>   ①创建目标接口和目标类（内部有切点）</p><p>   ②创建切面类（内部有增强方法）</p><p>   ③将目标类和切面类的对象创建权交给 spring</p><p>   ④在切面类中使用注解配置织入关系</p><p>   ⑤在配置文件中开启组件扫描和 AOP 的自动代理</p><p>   ⑥测试</p><p>   ①创建目标接口和目标类（内部有切点）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public interface TargetInterface &#123;</span><br><span class="line">    void save();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class Target implements TargetInterface &#123;</span><br><span class="line">    public void save() &#123;</span><br><span class="line">        System.out.println(&quot;save....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>   ②创建切面类（内部有增强方法)</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Myaspect</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>   ③将目标类和切面类的对象创建权交给 spring</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"target"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Target</span> <span class="keyword">implements</span> <span class="title">TargetInterface</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Target running...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(<span class="string">"myAspect"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"前置代码增强....."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>   ④在切面类中使用注解配置织入关系</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"myaspect"</span>)</span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Myaspect</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"execution(* com.dhz.anno.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>   ⑤在配置文件中开启组件扫描和 AOP 的自动代理</p>   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima.aop"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--aop的自动代理--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>&gt;</span><span class="tag">&lt;/<span class="name">aop:aspectj-autoproxy</span>&gt;</span></span><br></pre></td></tr></table></figure><p>   ⑥测试代码</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line">@ContextConfiguration("classpath:applicationContext_anno.xml")</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TargetInterface target;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        target.save();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="注解配置-AOP-详解"><a href="#注解配置-AOP-详解" class="headerlink" title="注解配置 AOP 详解"></a>注解配置 AOP 详解</h4><h5 id="注解通知的类型"><a href="#注解通知的类型" class="headerlink" title="注解通知的类型"></a>注解通知的类型</h5><p>   通知的配置语法：@通知注解(“切点表达式”)</p><p>   <img src="/2021/02/14/Java-Spring/%E5%9B%BE%E7%89%877-1613466781351.png" alt></p><h5 id="切点表达式的抽取-1"><a href="#切点表达式的抽取-1" class="headerlink" title="切点表达式的抽取"></a>切点表达式的抽取</h5><p>   同 xml配置<br>   aop 一样，我们可以将切点表达式抽取。抽取方式是在切面内定义方法，在该方法上使用@Pointcut注解定义切点表达式，然后在在增强注解中进行引用。具体如下：</p>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"myaspect"</span>)</span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Myaspect</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"execution(* com.dhz.anno.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"before...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"pointcut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"after...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"Myaspect.pointcut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"前置。。。"</span>);</span><br><span class="line">        Object proceed = pjp.proceed();</span><br><span class="line">        System.out.println(<span class="string">"后置。。。"</span>);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* com.dhz.anno.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointcut</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>目标检测</title>
      <link href="2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/"/>
      <url>2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="R-CNN"><a href="#R-CNN" class="headerlink" title="R-CNN"></a>R-CNN</h2><h3 id="算法流程"><a href="#算法流程" class="headerlink" title="算法流程"></a>算法流程</h3><ol><li>一张图像生成1K~2K个候选区域(使用Selective Search方法)  </li><li>对每个候选区域，缩放后(277<em>277)使用*</em>AlexNet CNN网络**提取特征向量 (4096维)，最终得到2k * 4096大小矩阵</li><li>特征送入每一类(共20类)的SVM 分类器， 判别是否属于该类 ，得到2k * 20矩阵<ul><li>对每一列进行非极大值抑制<ul><li>寻找得分最高的目标</li><li>计算其他目标与该目标的iou值</li><li>删除所有iou值大于给定阈值的目标  </li></ul></li></ul></li><li>使用回归器精细修正候选框位置  </li></ol><h3 id="算法框架"><a href="#算法框架" class="headerlink" title="算法框架"></a>算法框架</h3><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208102803793.png" alt="image-20210208102803793"></p><h3 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h3><ol><li><h4 id="测试速度慢"><a href="#测试速度慢" class="headerlink" title="测试速度慢"></a>测试速度慢</h4><p>测试一张图片约53s(CPU)。 用Selective Search算法提取候选框用时约2秒， 一张图像内候选框之间存在大量重叠， 提取特征操作冗余。  </p></li><li><h4 id="训练速度慢"><a href="#训练速度慢" class="headerlink" title="训练速度慢"></a>训练速度慢</h4></li><li><h4 id="训练所需空间大"><a href="#训练所需空间大" class="headerlink" title="训练所需空间大"></a>训练所需空间大</h4><p>对于SVM和bbox回归训练， 需要从每个图像中的每个目标候选框提取特征， 并写入磁盘。 对于非常深的网络， 如VGG16， 从VOC07训练集上的5k图像上提取的特征需要数百GB的存储空间。  </p></li></ol><h2 id="Fast-R-CNN"><a href="#Fast-R-CNN" class="headerlink" title="Fast R-CNN"></a>Fast R-CNN</h2><h3 id="算法流程-1"><a href="#算法流程-1" class="headerlink" title="算法流程"></a>算法流程</h3><ol><li><p>一张图像生成1K~2K个候选区域(使用Selective Search方法)  </p></li><li><p>整幅图像输入到网络得到特征图，将筛选后64个候选框投影到特征图后得到64个特征矩阵</p></li><li><p>特征矩阵通过ROI pooling层缩放到7x7大小的特征图，展平得到特征向量 </p></li><li><p>特征向量并联分类器和边界框回归器</p></li></ol><h3 id="主要组件"><a href="#主要组件" class="headerlink" title="主要组件"></a>主要组件</h3><h4 id="分类器"><a href="#分类器" class="headerlink" title="分类器"></a>分类器</h4><ul><li>N+1个节点(N个类别+1个背景)</li></ul><ul><li>经过softmax处理</li></ul><h4 id="边界框回归器"><a href="#边界框回归器" class="headerlink" title="边界框回归器"></a>边界框回归器</h4><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208123531241.png" alt="image-20210208123531241"></p><ul><li>(N+1)*4个节点(每个类别对应4个边界框回归参数(dx, dy, dw, dh) )</li><li>Px, Py, Pw, Ph 分别为候选框的中心x y坐标，以及宽高</li><li>Gˆx,Gˆ y,Gˆw,Gˆh 分别为最终预测的边界框中心x y坐标，以及宽高  </li></ul><h4 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h4><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208123743975.png" alt="image-20210208123743975"></p><ul><li>p : 分类器输出的softmax输出</li><li>u : 真实类别标签</li></ul><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208124340751.png" alt="image-20210208124340751"></p><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/D:%5Cprogramming%5Cblog%5Cdonghuangzhong%5Csource_posts%5C%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%5Cimage-20210208124515230.png" alt="image-20210208124515230"></p><h3 id="算法框架-1"><a href="#算法框架-1" class="headerlink" title="算法框架"></a>算法框架</h3><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208124647879.png" alt="image-20210208124647879"></p><h2 id="Faster-R-CNN"><a href="#Faster-R-CNN" class="headerlink" title="Faster R-CNN"></a>Faster R-CNN</h2><p>实际就是RPN + Fast R-CNN  </p><h3 id="算法流程-2"><a href="#算法流程-2" class="headerlink" title="算法流程"></a>算法流程</h3><ol><li>将图像输入网络得到相应的特征图  </li><li>使用RPN结构生成候选框， 将RPN生成的候选框投影到特征图上获得相应的特征矩阵  </li><li>将每个特征矩阵通过ROI pooling层缩放到7x7大小的特征图，接着将特征图展平通过一系列全连接层得到预测结果  </li></ol><h3 id="RPN"><a href="#RPN" class="headerlink" title="RPN"></a>RPN</h3><p>RPN在特征图的基础上用3*3的窗口(padding=1,步距为1)进行滑动，将3 * 3窗口的中心通过比例变换得到原图中的像素，以这个像素为中心生成9个anchor。去除跨越边界的anchor，对每一个anchor得到6个输出(2个表示是不是前景，后边四个表示回归参数)，采用非极大值抑制保留少数的候选框</p><h2 id="YOLO-v1"><a href="#YOLO-v1" class="headerlink" title="YOLO v1"></a>YOLO v1</h2><h3 id="算法思想"><a href="#算法思想" class="headerlink" title="算法思想"></a>算法思想</h3><ol><li>将一幅图像分成SxS个网格，如果某个类别真实候选框的中心落在这个网格中， 则这个网格就负责预测这个候选框。  </li><li>每个网格要预测<strong>B个候选框和C个类别</strong>，候选框包含预测位置(x,y,w,h)和confidence值。<ul><li>x,y,w,h都是相对值(相对于原图像)，都在0~1之间</li></ul></li></ol><h3 id="网络结构"><a href="#网络结构" class="headerlink" title="网络结构"></a>网络结构</h3><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208172244880.png" alt="image-20210208172244880"></p><h3 id="损失函数-1"><a href="#损失函数-1" class="headerlink" title="损失函数"></a>损失函数</h3><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210209075651508.png" alt="image-20210209075651508"></p><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ol><li>群体性小目标检测效果不好(原论文7*7个网格，每个网格预测两个框)</li><li>目标出现新的尺寸比例的时候效果差(直接预测位置和宽高，而像R-CNN和SSD系列预测回归参数)</li></ol><h2 id="YOLO-v2"><a href="#YOLO-v2" class="headerlink" title="YOLO v2"></a>YOLO v2</h2><h3 id="算法尝试和创新"><a href="#算法尝试和创新" class="headerlink" title="算法尝试和创新"></a>算法尝试和创新</h3><ol><li>每个卷积层后加BN(Batch Normalization)层</li><li>更大的输入图片尺寸(更高分辨率)</li><li>基于Anchor Boxes，用K-means聚类得到anchor尺寸</li><li><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208182050827.png" alt="image-20210208182050827">用sigmoid函数限制变换后的位置</li><li>高层特征和底层特征(包含细节信息，解决v1小目标效果不好)结合<ul><li>用4x4方格将宽高变为一半，深度变为4倍，与高层特征在深度上拼接</li></ul></li><li>多尺度训练，解决输入图像尺寸固定的弊端，每迭代10个batch，随机选择图片尺寸</li></ol><h3 id="网络结构-1"><a href="#网络结构-1" class="headerlink" title="网络结构"></a>网络结构</h3><h4 id="darknet-19"><a href="#darknet-19" class="headerlink" title="darknet-19"></a>darknet-19</h4><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208182949454.png" alt="image-20210208182949454"></p><h4 id="总结构"><a href="#总结构" class="headerlink" title="总结构"></a>总结构</h4><p><img src="/2021/02/08/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B/image-20210208183128674.png" alt="image-20210208183128674"></p><h2 id="YOLO-v3"><a href="#YOLO-v3" class="headerlink" title="YOLO v3"></a>YOLO v3</h2><h3 id="创新点"><a href="#创新点" class="headerlink" title="创新点"></a>创新点</h3><ol><li>在三个尺度对目标进行检测</li><li></li></ol><h3 id="网络结构-2"><a href="#网络结构-2" class="headerlink" title="网络结构"></a>网络结构</h3><h4 id="DarkNet-53"><a href="#DarkNet-53" class="headerlink" title="DarkNet-53"></a>DarkNet-53</h4><p><img src="https://img-blog.csdn.net/20180726102742325?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3NTQxMDk3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p><h4 id="总结构-1"><a href="#总结构-1" class="headerlink" title="总结构"></a>总结构</h4><p><img src="https://img-blog.csdnimg.cn/2019040211084050.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3NTQxMDk3,size_16,color_FFFFFF,t_70" alt="img">)<img src="https://img-blog.csdnimg.cn/2019040211084050.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3NTQxMDk3,size_16,color_FFFFFF,t_70" alt="img"></p><p><img src="https://img-blog.csdnimg.cn/20190713210846716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3NTQxMDk3,size_16,color_FFFFFF,t_70" alt="img"></p><h3 id="损失函数-2"><a href="#损失函数-2" class="headerlink" title="损失函数"></a>损失函数</h3><p><img src="https://img-blog.csdnimg.cn/20190714105230564.png" alt="img"></p><h4 id="目标置信度损失"><a href="#目标置信度损失" class="headerlink" title="目标置信度损失"></a>目标置信度损失</h4><p>目标置信度损失<img src="https://private.codecogs.com/gif.latex?%5Cdpi%7B100%7D%20%5Csmall%20L_%7Bconf%7D%28o%2Cc%29" alt="\small L_{conf}(o,c)">采用的是二值交叉熵损失(Binary Cross Entropy)，其中<img src="https://private.codecogs.com/gif.latex?%5Cdpi%7B100%7D%20%5Csmall%20o_%7Bi%7D%5Cin%20%5C%7B0%2C1%5C%7D" alt="\small o_{i}\in \{0,1\}">,表示预测目标边界框i中是否真实存在目标，0表示不存在，1表示存在。<img src="https://private.codecogs.com/gif.latex?%5Cdpi%7B100%7D%20%5Csmall%20%5Chat%7Bc_%7Bi%7D%7D" alt="\small \hat{c_{i}}">表示预测目标矩形框i内是否存在目标的Sigmoid概率（将预测值<img src="https://private.codecogs.com/gif.latex?%5Cdpi%7B100%7D%20%5Csmall%20c_%7Bi%7D" alt="\small c_{i}">通过sigmoid函数得到）。</p><p><img src="https://img-blog.csdnimg.cn/20190714105742653.png" alt="img"></p><h4 id="目标类别损失"><a href="#目标类别损失" class="headerlink" title="目标类别损失"></a>目标类别损失</h4>]]></content>
      
      
      <categories>
          
          <category> 目标检测 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 目标检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="2021/02/07/test/"/>
      <url>2021/02/07/test/</url>
      
        <content type="html"><![CDATA[<h2 id><a href="#" class="headerlink" title></a></h2><h3 id="-1"><a href="#-1" class="headerlink" title></a></h3><h4 id="-2"><a href="#-2" class="headerlink" title></a></h4><h5 id="-3"><a href="#-3" class="headerlink" title></a></h5><h2 id="-4"><a href="#-4" class="headerlink" title></a></h2>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux_WSL</title>
      <link href="2021/02/07/Linux-WSL/"/>
      <url>2021/02/07/Linux-WSL/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="版本相关"><a href="#版本相关" class="headerlink" title="版本相关"></a>版本相关</h3><h4 id="linux查看当前操作系统发行信息"><a href="#linux查看当前操作系统发行信息" class="headerlink" title="linux查看当前操作系统发行信息"></a>linux查看当前操作系统发行信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;etc&#x2F;issue</span><br></pre></td></tr></table></figure><h3 id="更新阿里源"><a href="#更新阿里源" class="headerlink" title="更新阿里源"></a>更新阿里源</h3><ol><li><p>备份原先的源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo.backup</span><br></pre></td></tr></table></figure></li><li><p>下载新的阿里源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;CentOS-Base.repo https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;repo&#x2F;Centos-8.repo</span><br></pre></td></tr></table></figure></li><li><p>运行 yum makecache 生成缓存</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache</span><br></pre></td></tr></table></figure></li><li><p>更新</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y update</span><br></pre></td></tr></table></figure></li></ol><h2 id="安装常用软件"><a href="#安装常用软件" class="headerlink" title="安装常用软件"></a>安装常用软件</h2><ul><li>软件地址：</li><li>安装之前上传到usr/local文件夹</li></ul><h3 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h3><ol><li><p>查看jdk版本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java –version</span><br></pre></td></tr></table></figure></li><li><p>查看安装的jdk信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep java</span><br></pre></td></tr></table></figure></li><li><p>卸载jdk</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -e --nodeps java-1.6.0-openjdk-1.6.0.35-1.13.7.1.el6_6.i686</span><br><span class="line">rpm -e --nodeps java-1.7.0-openjdk-1.7.0.79-2.5.5.4.el6.i686</span><br></pre></td></tr></table></figure></li><li><p>进入usr/local解压JDK，通常将软件安装到/usr/local</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar –xvf  jdk.tar.gz  -C 目标路径</span><br></pre></td></tr></table></figure></li><li><p>配置JDK的环境变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;profile</span><br><span class="line"></span><br><span class="line">在末尾行添加</span><br><span class="line">#set java environment</span><br><span class="line">JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;jdk&#x2F;jdk1.7.0_71</span><br><span class="line">CLASSPATH&#x3D;.:$JAVA_HOME&#x2F;lib.tools.jar</span><br><span class="line">PATH&#x3D;$JAVA_HOME&#x2F;bin:$PATH</span><br><span class="line">export JAVA_HOME CLASSPATH PATH</span><br><span class="line">保存退出</span><br></pre></td></tr></table></figure></li></ol><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><ol><li><p>上传后解压</p><p><img src="/2021/02/07/Linux-WSL/wps1.jpg" alt="img"></p></li><li><p>将系统自带的mysql卸载</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm –qa | grep mysql </span><br><span class="line"></span><br><span class="line">rpm -e --nodeps 名字</span><br></pre></td></tr></table></figure></li><li><p>安装MYSQL服务端</p><p><img src="/2021/02/07/Linux-WSL/wps2.jpg" alt="img"></p><p>会在/root/.mysql_secret中生成root用户的密码</p></li><li><p>安装MYSQL客户端</p><p><img src="/2021/02/07/Linux-WSL/wps3.jpg" alt="img"></p></li><li><p>查看生成的root密码</p><p><img src="/2021/02/07/Linux-WSL/wps4.jpg" alt="img"></p></li><li><p>开启mysql服务</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure></li><li><p>设置root用户的密码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password&#x3D;password(&#39;root&#39;)</span><br></pre></td></tr></table></figure></li><li><p>设置mysql远程访问</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to &#39;root&#39; @&#39;%&#39; identified by &#39;root&#39;;</span><br><span class="line"></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></li><li><p>防火墙设置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在linux中很防火墙打开3306端口</span><br><span class="line">&#x2F;sbin&#x2F;iptables -I INPUT -p tcp --dport 3306 -j ACCEPT</span><br><span class="line">&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;iptables save</span><br><span class="line">&#x2F;etc&#x2F;init.d&#x2F;iptables status</span><br><span class="line">学习阶段我们也可以直接将防火墙关闭</span><br><span class="line">service iptables stop;</span><br><span class="line">多软件的端口都被”防火墙”限止，我们需要将防火墙关闭</span><br></pre></td></tr></table></figure></li></ol><h3 id="安装tomcat"><a href="#安装tomcat" class="headerlink" title="安装tomcat"></a>安装tomcat</h3><ol><li>上传解压至usr/local</li><li>在tomcat/bin目录下执行 startup.sh</li></ol><h3 id="安装Redis"><a href="#安装Redis" class="headerlink" title="安装Redis"></a>安装Redis</h3><p>redis是C语言开发，安装redis需要先将官网下载的源码进行编译，编译依赖gcc环境。</p><ol><li><p>安装c语言环境</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc-c++</span><br></pre></td></tr></table></figure></li><li><p>下载redis</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:&#x2F;&#x2F;download.redis.io&#x2F;releases&#x2F;redis-3.0.4.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>解压</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf redis-3.0.4.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>编译</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd redis-3.0.4</span><br><span class="line">make</span><br></pre></td></tr></table></figure></li><li><p>安装</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;redis install</span><br></pre></td></tr></table></figure></li><li><p>复制配置文件到/usr/local/redis/bin目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd redis-3.0.4</span><br><span class="line"></span><br><span class="line">cp redis.conf &#x2F;usr&#x2F;local&#x2F;redis&#x2F;bin</span><br></pre></td></tr></table></figure></li><li><p>启动redis</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd redis&#x2F;bin</span><br><span class="line"></span><br><span class="line">指定配置文件启动服务端</span><br><span class="line">.&#x2F;redis-server redis.conf</span><br><span class="line"></span><br><span class="line">启动客户端</span><br><span class="line">.&#x2F;redis-cli</span><br></pre></td></tr></table></figure></li></ol><h3 id="安装Nginx"><a href="#安装Nginx" class="headerlink" title="安装Nginx"></a>安装Nginx</h3><ol><li><p>安装gcc环境</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc-c++</span><br></pre></td></tr></table></figure></li><li><p>安装第三方的开发包</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br><span class="line">yum install -y zlib zlib-devel</span><br><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure></li><li><p>上传解压安装包到usr/local</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.8.0.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>进入解压目录生成makeFile 文件，然后make</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cd nginx-1.8.0&#x2F;</span><br><span class="line"></span><br><span class="line">.&#x2F;configure \</span><br><span class="line">--prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx \</span><br><span class="line">--pid-path&#x3D;&#x2F;var&#x2F;run&#x2F;nginx&#x2F;nginx.pid \</span><br><span class="line">--lock-path&#x3D;&#x2F;var&#x2F;lock&#x2F;nginx.lock \</span><br><span class="line">--error-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log \</span><br><span class="line">--http-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log \</span><br><span class="line">--with-http_gzip_static_module \</span><br><span class="line">--http-client-body-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;client \</span><br><span class="line">--http-proxy-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;proxy \</span><br><span class="line">--http-fastcgi-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;fastcgi \</span><br><span class="line">--http-uwsgi-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;uwsgi \</span><br><span class="line">--http-scgi-temp-path&#x3D;&#x2F;var&#x2F;temp&#x2F;nginx&#x2F;scgi</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;注：四条命令都要执行，最后会生成一个usr&#x2F;local&#x2F;nginx文件夹</span><br></pre></td></tr></table></figure></li><li><p>安装完成，创建临时目录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;var&#x2F;temp&#x2F;nginx&#x2F;client -p</span><br></pre></td></tr></table></figure></li><li><p>启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd sbin&#x2F;</span><br><span class="line"></span><br><span class="line">.&#x2F;nginx</span><br></pre></td></tr></table></figure></li><li><p>关闭、刷新命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;nginx -s quit &#x2F;&#x2F;正常关闭</span><br><span class="line">.&#x2F;nginx -s stop &#x2F;&#x2F;杀进程</span><br><span class="line">.&#x2F;nginx -s reload &#x2F;&#x2F;刷新</span><br></pre></td></tr></table></figure></li></ol><h2 id="安装Centos8"><a href="#安装Centos8" class="headerlink" title="安装Centos8"></a>安装Centos8</h2><h3 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="用命令行安装"><a href="#用命令行安装" class="headerlink" title="用命令行安装"></a>用命令行安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">windows命令行(管理员)：</span><br><span class="line">wsl  --import &lt;分发版&gt; &lt;安装位置&gt; &lt;文件名&gt; [选项]</span><br><span class="line">wsl --import CentOS D:\CentOS D:\文件路径\centos8.tar</span><br></pre></td></tr></table></figure><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl -d Centos</span><br></pre></td></tr></table></figure><h2 id="迁移"><a href="#迁移" class="headerlink" title="迁移"></a>迁移</h2><h3 id="查看当前用户名"><a href="#查看当前用户名" class="headerlink" title="查看当前用户名"></a>查看当前用户名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br><span class="line">&#x2F;&#x2F;我的用户名是 DongHuangZhong</span><br></pre></td></tr></table></figure><p><img src="/2021/02/07/Linux-WSL/image-20210207181935281.png" alt="image-20210207181935281"></p><h3 id="在迁移目标磁盘创建一个文件夹-，并设置权限"><a href="#在迁移目标磁盘创建一个文件夹-，并设置权限" class="headerlink" title="在迁移目标磁盘创建一个文件夹 ，并设置权限"></a>在迁移目标磁盘创建一个文件夹 ，并设置权限</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">icacls E:\bianchenggongju\Kali.windows &#x2F;grant &quot;DongHuangZhong:(OI)(CI)(F)&quot;</span><br><span class="line"></span><br><span class="line">.\lxrunoffline move -n kali-linux -d E:\bianchenggongju\Kali.windows</span><br></pre></td></tr></table></figure><h3 id="下载解压-LxRunOffline"><a href="#下载解压-LxRunOffline" class="headerlink" title="下载解压 LxRunOffline"></a>下载解压 LxRunOffline</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">网址:https:&#x2F;&#x2F;github.com&#x2F;DDoSolitary&#x2F;LxRunOffline&#x2F;releases</span><br></pre></td></tr></table></figure><ul><li>解压后，在此目录中按shift+鼠标右键，在此处打开powershell</li></ul><h3 id="查看已安装的Linux发行版本"><a href="#查看已安装的Linux发行版本" class="headerlink" title="查看已安装的Linux发行版本"></a>查看已安装的Linux发行版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\lxrunoffline list</span><br></pre></td></tr></table></figure><p><img src="/2021/02/07/Linux-WSL/image-20210207182647743.png" alt="image-20210207182647743"></p><h3 id="用命令迁移"><a href="#用命令迁移" class="headerlink" title="用命令迁移"></a>用命令迁移</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\lxrunoffline move -n kali-linux -d E:\bianchenggongju\Kali.windows</span><br></pre></td></tr></table></figure><h3 id="确认迁移完成"><a href="#确认迁移完成" class="headerlink" title="确认迁移完成"></a>确认迁移完成</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;LxRunOffline.exe get-dir -n kali-linux</span><br></pre></td></tr></table></figure><p><img src="/2021/02/07/Linux-WSL/image-20210207182820621.png" alt="image-20210207182820621"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python_pandas</title>
      <link href="2021/01/28/python-pandas/"/>
      <url>2021/01/28/python-pandas/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><p>主体数据类型：DataFrame</p><table><thead><tr><th>名称</th><th>功能</th><th>参数</th><th>返回值</th></tr></thead><tbody><tr><td>pd.read_csv()</td><td>读取csv</td><td>路径字符串</td><td>DataFrame</td></tr><tr><td>pd.DataFrame(np.zeros(shape=[1000, 20]), columns=move_class)</td><td>创建DataFarame</td><td>ndarry，列标签</td><td>DataFrame</td></tr><tr><td>DataFrame.sum(axis)</td><td>对行或列求和</td><td>axis，0列求和，1行求和</td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pandas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python_ndarray</title>
      <link href="2021/01/28/python-ndarray/"/>
      <url>2021/01/28/python-ndarray/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="1-ndarray创建"><a href="#1-ndarray创建" class="headerlink" title="1.ndarray创建"></a>1.ndarray创建</h1><h2 id="1-通过list创建"><a href="#1-通过list创建" class="headerlink" title="1.通过list创建"></a>1.通过list创建</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; np.array([[1, 2, 3], [4, 5, 6]], dtype &#x3D; np.float32)</span><br></pre></td></tr></table></figure><h1 id="2-ndarray的属性"><a href="#2-ndarray的属性" class="headerlink" title="2.ndarray的属性"></a>2.ndarray的属性</h1><table><thead><tr><th>属性</th><th>含义</th><th>类型</th></tr></thead><tbody><tr><td>shape</td><td>形状</td><td>元组</td></tr><tr><td>ndim</td><td>维度</td><td>整数</td></tr><tr><td>size</td><td>数组中元素个数</td><td>整数</td></tr><tr><td>itemsize</td><td>元素的字节数</td><td>整数</td></tr><tr><td>dtype</td><td>元素类型</td><td>“int32”</td></tr></tbody></table><h1 id="3-ndarray的方法"><a href="#3-ndarray的方法" class="headerlink" title="3.ndarray的方法"></a>3.ndarray的方法</h1><h2 id="1-reshape-amp-amp-resize"><a href="#1-reshape-amp-amp-resize" class="headerlink" title="1.reshape() &amp;&amp; resize()"></a>1.reshape() &amp;&amp; resize()</h2><p>reshape()不改变数据，只改变逻辑上的维数</p><p>resize()会改变数据</p><h2 id="2-stock-change-stock-change-gt-0-5-1-1"><a href="#2-stock-change-stock-change-gt-0-5-1-1" class="headerlink" title="2.stock_change[stock_change &gt; 0.5] = 1.1"></a>2.stock_change[stock_change &gt; 0.5] = 1.1</h2><p>将stock_change元素中&gt;0.5的置为1.1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(score.shape)</span><br><span class="line">print(score.ndim)</span><br><span class="line">print(score.size)</span><br><span class="line">print(score.itemsize)</span><br><span class="line">print(score.dtype)</span><br><span class="line"></span><br><span class="line">score2 &#x3D; score.reshape(6, 5)</span><br></pre></td></tr></table></figure><h1 id="4-numpy的方法"><a href="#4-numpy的方法" class="headerlink" title="4.numpy的方法"></a>4.numpy的方法</h1><h2 id="1-np-random-uniform-low-high-size"><a href="#1-np-random-uniform-low-high-size" class="headerlink" title="1.np.random.uniform(low,high,size)"></a>1.np.random.uniform(low,high,size)</h2><p>均匀分布[low,high)中随机采样size次得到一维数组</p><h2 id="2-np-unique-ndarray"><a href="#2-np-unique-ndarray" class="headerlink" title="2.np.unique(ndarray)"></a>2.np.unique(ndarray)</h2><p>返回去重后的数组</p><h2 id="3-numpy-random-normal-loc-scale-size"><a href="#3-numpy-random-normal-loc-scale-size" class="headerlink" title="3.numpy.random.normal(loc,scale,size)"></a>3.numpy.random.normal(loc,scale,size)</h2><p>loc：均值    scale：方差    size：个数</p><h2 id="4-np-hstack-a-b"><a href="#4-np-hstack-a-b" class="headerlink" title="4.np.hstack(a,b)"></a>4.np.hstack(a,b)</h2><p>在水平方向上连接a数组和b数组</p><h2 id="5-np-concatenate-a-b-axis-0"><a href="#5-np-concatenate-a-b-axis-0" class="headerlink" title="5.np.concatenate((a,b),axis=0)"></a>5.np.concatenate((a,b),axis=0)</h2><p>axis=1表示对应行的数组进行拼接</p><p>axis=0表示对应列的数组进行拼接</p><h2 id="6-np-split"><a href="#6-np-split" class="headerlink" title="6.np.split()"></a>6.np.split()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x &#x3D; np.arange(9)</span><br><span class="line">print(x)</span><br><span class="line">print(np.split(x, 3))</span><br><span class="line">print(np.split(x, [3, 5, 7, 8]))</span><br><span class="line"></span><br><span class="line">[0 1 2 3 4 5 6 7 8]</span><br><span class="line">[array([0, 1, 2]), array([3, 4, 5]), array([6, 7, 8])]</span><br><span class="line">[array([0, 1, 2]), array([3, 4]), array([5, 6]), array([7]), array([8])]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> numpy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python_pyplot</title>
      <link href="2021/01/28/python-pyplot/"/>
      <url>2021/01/28/python-pyplot/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="1-图形属性"><a href="#1-图形属性" class="headerlink" title="1.图形属性"></a>1.图形属性</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.title(&quot;matplotlib demo&quot;)</span><br><span class="line">plt.figure(figsize&#x3D;(20, 8), dpi&#x3D;80)  &#x2F;&#x2F;dpi每英寸像素数</span><br><span class="line">plt.show()&#x2F;&#x2F;最后都要加才能显示</span><br></pre></td></tr></table></figure><h1 id="2-其他图"><a href="#2-其他图" class="headerlink" title="2.其他图"></a>2.其他图</h1><h2 id="1-二维函数图"><a href="#1-二维函数图" class="headerlink" title="1.二维函数图"></a>1.二维函数图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plt.xlabel(&quot;x axis&quot;)</span><br><span class="line">plt.ylabel(&quot;y axis&quot;)</span><br><span class="line">plt.plot(x, y)</span><br></pre></td></tr></table></figure><h2 id="2-散点图"><a href="#2-散点图" class="headerlink" title="2.散点图"></a>2.散点图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.scatter(x, y)</span><br></pre></td></tr></table></figure><h2 id="3-柱状图"><a href="#3-柱状图" class="headerlink" title="3.柱状图"></a>3.柱状图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.bar(x_lebel, y, color&#x3D;[&#39;b&#39;, &#39;r&#39;, &#39;g&#39;, &#39;y&#39;, &#39;c&#39;, &#39;m&#39;, &#39;y&#39;, &#39;k&#39;, &#39;c&#39;])</span><br></pre></td></tr></table></figure><h2 id="4-饼图"><a href="#4-饼图" class="headerlink" title="4.饼图"></a>4.饼图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.pie(tickets, labels&#x3D;movie_names, colors&#x3D;[&#39;b&#39;, &#39;r&#39;, &#39;g&#39;, &#39;y&#39;],autopct&#x3D;&quot;%1.2f&quot;)</span><br><span class="line">&#x2F;&#x2F;autopct :控制饼图内百分比设置,可以使用format字符串或者format function</span><br><span class="line">        &#39;%1.1f&#39;指小数点前后位数(没有用空格补齐)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;显示图例对应关系</span><br><span class="line">plt.legend()</span><br></pre></td></tr></table></figure><h2 id="5-直方图"><a href="#5-直方图" class="headerlink" title="5.直方图"></a>5.直方图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plt.hist(y,  bins&#x3D;10)</span><br><span class="line">&#x2F;&#x2F;bins：有几条柱子</span><br><span class="line"></span><br><span class="line">plt.xticks(range(min(time), max(time), distance))</span><br><span class="line">&#x2F;&#x2F;x轴的开始结束和步距</span><br></pre></td></tr></table></figure><h1 id="3-中文乱码问题"><a href="#3-中文乱码问题" class="headerlink" title="3.中文乱码问题"></a>3.中文乱码问题</h1><ol><li><h5 id="百度安装simhei-ttf字体"><a href="#百度安装simhei-ttf字体" class="headerlink" title="百度安装simhei.ttf字体"></a>百度安装simhei.ttf字体</h5></li><li><h5 id="打开python安装目录下python-Lib-site-packages-matplotlib-mpl-data-matplotlibrc"><a href="#打开python安装目录下python-Lib-site-packages-matplotlib-mpl-data-matplotlibrc" class="headerlink" title="打开python安装目录下python\Lib\site-packages\matplotlib\mpl-data\matplotlibrc"></a>打开python安装目录下python\Lib\site-packages\matplotlib\mpl-data\matplotlibrc</h5></li><li><h5 id="搜索font-sans-serif-，去掉注释，在冒号后添加SimHei"><a href="#搜索font-sans-serif-，去掉注释，在冒号后添加SimHei" class="headerlink" title="搜索font.sans-serif ，去掉注释，在冒号后添加SimHei"></a>搜索font.sans-serif ，去掉注释，在冒号后添加SimHei</h5></li><li><h5 id="搜索axes-unicode-minus，注释去掉，Ture改为False"><a href="#搜索axes-unicode-minus，注释去掉，Ture改为False" class="headerlink" title="搜索axes.unicode_minus，注释去掉，Ture改为False"></a>搜索axes.unicode_minus，注释去掉，Ture改为False</h5></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pyplot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSP&amp;&amp;EL&amp;JSTL</title>
      <link href="2021/01/22/JSP-EL-JSTL/"/>
      <url>2021/01/22/JSP-EL-JSTL/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ol><li><p>JSP:</p><ol><li>指令</li><li>注释</li><li>内置对象</li></ol></li><li><p>MVC开发模式</p></li><li><p>EL表达式</p></li><li><p>JSTL标签</p></li><li><p>三层架构</p></li></ol><a id="more"></a><h1 id="1-JSP"><a href="#1-JSP" class="headerlink" title="1.JSP"></a>1.JSP</h1><h2 id="1-指令"><a href="#1-指令" class="headerlink" title="1.指令"></a>1.指令</h2><ul><li><h3 id="作用：用于配置JSP页面，导入资源文件"><a href="#作用：用于配置JSP页面，导入资源文件" class="headerlink" title="作用：用于配置JSP页面，导入资源文件"></a>作用：用于配置JSP页面，导入资源文件</h3></li><li><h3 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ 指令名称 属性名1&#x3D;属性值1 属性名2&#x3D;属性值2 ... %&gt;</span><br></pre></td></tr></table></figure></li><li><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ol><li><h4 id="page"><a href="#page" class="headerlink" title="page"></a>page</h4><ul><li><h5 id="contentType：等同于response-setContentType"><a href="#contentType：等同于response-setContentType" class="headerlink" title="contentType：等同于response.setContentType()"></a>contentType：等同于response.setContentType()</h5><ol><li>设置响应体的mime类型以及字符集</li><li>设置当前jsp页面的编码（只能是高级的IDE才能生效，如果使用低级工具，则需要设置pageEncoding属性设置当前页面的字符集）</li></ol></li><li><h5 id="import：导包"><a href="#import：导包" class="headerlink" title="import：导包"></a>import：导包</h5></li><li><h5 id="errorPage：当前页面发生异常后，会自动跳转到指定的错误页面"><a href="#errorPage：当前页面发生异常后，会自动跳转到指定的错误页面" class="headerlink" title="errorPage：当前页面发生异常后，会自动跳转到指定的错误页面"></a>errorPage：当前页面发生异常后，会自动跳转到指定的错误页面</h5></li><li><h5 id="isErrorPage：标识当前也是是否是错误页面。"><a href="#isErrorPage：标识当前也是是否是错误页面。" class="headerlink" title="isErrorPage：标识当前也是是否是错误页面。"></a>isErrorPage：标识当前也是是否是错误页面。</h5><ol><li>true：是，可以使用内置对象exception</li><li>false：否。默认值。不可以使用内置对象exception</li></ol></li></ul></li><li><h4 id="include-页面包含的。导入页面的资源文件"><a href="#include-页面包含的。导入页面的资源文件" class="headerlink" title="include   页面包含的。导入页面的资源文件"></a>include   页面包含的。导入页面的资源文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@include file&#x3D;&quot;top.jsp&quot;%&gt;</span><br></pre></td></tr></table></figure></li><li><h4 id="taglib-导入资源"><a href="#taglib-导入资源" class="headerlink" title="taglib     导入资源"></a>taglib     导入资源</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix&#x3D;&quot;c&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;core&quot; %&gt;</span><br><span class="line">&#x2F;&#x2F;prefix：前缀，自定义的</span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="2-注释"><a href="#2-注释" class="headerlink" title="2.注释"></a>2.注释</h2><ol><li><h3 id="html注释"><a href="#html注释" class="headerlink" title="html注释"></a>html注释</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- --&gt;     &#x2F;&#x2F;只能注释html代码片段</span><br></pre></td></tr></table></figure></li><li><h3 id="jsp注释：推荐使用"><a href="#jsp注释：推荐使用" class="headerlink" title="jsp注释：推荐使用"></a>jsp注释：推荐使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%-- --%&gt;    &#x2F;&#x2F;可以注释所有</span><br></pre></td></tr></table></figure></li></ol><h2 id="3-内置对象"><a href="#3-内置对象" class="headerlink" title="3.内置对象"></a>3.内置对象</h2><p>在jsp页面中不需要创建，直接使用的对象，一共有如下9个。</p><table><thead><tr><th>变量名</th><th>真实类型</th><th>作用</th></tr></thead><tbody><tr><td>pageContext</td><td>PageContext</td><td>当前页面共享数据，还可以获取其他八个内置对象</td></tr><tr><td>request</td><td>HttpServletRequest</td><td>一次请求访问的多个资源(转发)</td></tr><tr><td>session</td><td>HttpSession</td><td>一次会话的多个请求间</td></tr><tr><td>application</td><td>ServletContext</td><td>所有用户间共享数据</td></tr><tr><td>response</td><td>HttpServletResponse</td><td>响应对象</td></tr><tr><td>page</td><td>Object</td><td>当前页面(Servlet)的对象this</td></tr><tr><td>out</td><td>JspWriter</td><td>输出对象，数据输出到页面上</td></tr><tr><td>config</td><td>ServletConfig</td><td>Servlet的配置对象</td></tr><tr><td>exception</td><td>Throwable</td><td>异常对象</td></tr></tbody></table><h1 id="2-MVC：开发模式"><a href="#2-MVC：开发模式" class="headerlink" title="2.MVC：开发模式"></a>2.MVC：开发模式</h1><h2 id="1-jsp演变历史"><a href="#1-jsp演变历史" class="headerlink" title="1.jsp演变历史"></a>1.jsp演变历史</h2><ol><li>早期只有servlet，只能使用response输出标签数据，非常麻烦</li><li>后来又jsp，简化了Servlet的开发，如果过度使用jsp，在jsp中即写大量的java代码，有写html表，造成难于维护，难于分工协作</li><li>再后来，java的web开发，借鉴mvc开发模式，使得程序的设计更加合理性</li></ol><h2 id="2-MVC"><a href="#2-MVC" class="headerlink" title="2.MVC"></a>2.MVC</h2><ol><li><h4 id="M：Model，模型。JavaBean"><a href="#M：Model，模型。JavaBean" class="headerlink" title="M：Model，模型。JavaBean"></a>M：Model，模型。JavaBean</h4><ul><li>完成具体的业务操作，如：查询数据库，封装对象</li></ul></li><li><h4 id="V：View，视图。JSP"><a href="#V：View，视图。JSP" class="headerlink" title="V：View，视图。JSP"></a>V：View，视图。JSP</h4><ul><li>展示数据</li></ul></li><li><h4 id="C：Controller，控制器。Servlet"><a href="#C：Controller，控制器。Servlet" class="headerlink" title="C：Controller，控制器。Servlet"></a>C：Controller，控制器。Servlet</h4><ul><li>获取用户的输入</li><li>调用模型</li><li>将数据交给视图进行展示</li></ul></li><li><h4 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h4><ul><li>优点<ol><li>耦合性低，方便维护，可以利于分工协作</li><li>重用性高</li></ol></li><li>缺点：使得项目架构变得复杂，对开发人员要求高</li></ul></li></ol><h1 id="3-EL表达式"><a href="#3-EL表达式" class="headerlink" title="3.EL表达式"></a>3.EL表达式</h1><p><strong>不用声明语句，直接在jsp中使用即可</strong></p><h2 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h2><p>Expression Language 表达式语言</p><h2 id="2-作用"><a href="#2-作用" class="headerlink" title="2.作用"></a>2.作用</h2><p>替换和简化jsp页面中java代码的编写</p><h2 id="3-语法"><a href="#3-语法" class="headerlink" title="3.语法"></a>3.语法</h2><p>${表达式}</p><h2 id="4-忽略el表达式"><a href="#4-忽略el表达式" class="headerlink" title="4.忽略el表达式"></a>4.忽略el表达式</h2><p>jsp默认支持el表达式的。如果要忽略el表达式</p><ol><li>设置jsp中page指令中：isELIgnored=”true” 忽略当前jsp页面中所有的el表达式</li><li>\${表达式} ：忽略当前这个el表达式</li></ol><h2 id="5-使用"><a href="#5-使用" class="headerlink" title="5.使用"></a>5.使用</h2><ol><li><h3 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h3><ol><li>算数运算符： + - * /(div) %(mod)</li><li>比较运算符： &gt; &lt; &gt;= &lt;= == !=</li><li>逻辑运算符： &amp;&amp;(and) ||(or) !(not)</li><li>空运算符： empty<ul><li>功能：用于判断字符串、集合、数组对象是否为null或者长度是否为0</li><li>${empty list}:判断字符串、集合、数组对象是否为null或者长度为0</li><li>${not empty str}:表示判断字符串、集合、数组对象是否不为null 并且 长度&gt;0</li></ul></li></ol></li><li><h3 id="获取值"><a href="#获取值" class="headerlink" title="获取值"></a>获取值</h3><ol><li><h4 id="el表达式只能从域对象中获取值"><a href="#el表达式只能从域对象中获取值" class="headerlink" title="el表达式只能从域对象中获取值"></a>el表达式只能从域对象中获取值</h4></li><li><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><ol><li><h5 id="域名称-键名-：从指定域中获取指定键的值"><a href="#域名称-键名-：从指定域中获取指定键的值" class="headerlink" title="${域名称.键名}：从指定域中获取指定键的值"></a>${域名称.键名}：从指定域中获取指定键的值</h5><ul><li><p>域名称</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. pageScope--&gt; pageContext</span><br><span class="line">2. requestScope --&gt; request</span><br><span class="line">3. sessionScope --&gt; session</span><br><span class="line">4. applicationScope --&gt; application（ServletContext）</span><br></pre></td></tr></table></figure></li><li><p>举例：在request域中存储了name=张三</p></li><li><p>获取：${requestScope.name}</p></li></ul></li><li><h5 id="键名-：表示依次从最小的域中查找是否有该键对应的值，直到找到为止。"><a href="#键名-：表示依次从最小的域中查找是否有该键对应的值，直到找到为止。" class="headerlink" title="${键名}：表示依次从最小的域中查找是否有该键对应的值，直到找到为止。"></a>${键名}：表示依次从最小的域中查找是否有该键对应的值，直到找到为止。</h5></li><li><h5 id="获取对象、List集合、Map集合的值"><a href="#获取对象、List集合、Map集合的值" class="headerlink" title="获取对象、List集合、Map集合的值"></a>获取对象、List集合、Map集合的值</h5><ol><li>对象：${域名称.键名.属性名}       本质上会去调用对象的getter方法</li><li>List集合：${域名称.键名[索引]}</li><li>Map集合<ul><li>${域名称.键名.key名称}</li><li>${域名称.键名[“key名称”]}</li></ul></li></ol></li></ol></li></ol></li><li><h3 id="隐式对象"><a href="#隐式对象" class="headerlink" title="隐式对象"></a>隐式对象</h3><ol><li><h4 id="el表达式中有11个隐式对象"><a href="#el表达式中有11个隐式对象" class="headerlink" title="el表达式中有11个隐式对象"></a>el表达式中有11个隐式对象</h4></li><li><h4 id="pageContext"><a href="#pageContext" class="headerlink" title="pageContext"></a>pageContext</h4><ol><li>获取jsp其他八个内置对象</li><li>${pageContext.request.contextPath}：动态获取虚拟目录</li></ol></li></ol></li></ol><h1 id="4-JSTL"><a href="#4-JSTL" class="headerlink" title="4.JSTL"></a>4.JSTL</h1><h2 id="1-概念-1"><a href="#1-概念-1" class="headerlink" title="1.概念"></a>1.概念</h2><ol><li>JavaServer Pages Tag Library  JSP标准标签库</li><li>是由Apache组织提供的开源的免费的jsp标签        &lt;标签&gt;</li></ol><h2 id="2-作用-1"><a href="#2-作用-1" class="headerlink" title="2.作用"></a>2.作用</h2><p>用于简化和替换jsp页面上的java代码</p><h2 id="3-使用步骤"><a href="#3-使用步骤" class="headerlink" title="3.使用步骤"></a>3.使用步骤</h2><ol><li><p>导入jstl相关jar包</p></li><li><p>引入标签库：taglib指令：  &lt;%@ taglib %&gt;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix&#x3D;&quot;c&quot; uri&#x3D;&quot;http:&#x2F;&#x2F;java.sun.com&#x2F;jsp&#x2F;jstl&#x2F;core&quot; %&gt;</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li>使用标签</li></ol><h2 id="4-常用的JSTL标签"><a href="#4-常用的JSTL标签" class="headerlink" title="4.常用的JSTL标签"></a>4.常用的JSTL标签</h2><ol><li><h3 id="if-相当于java代码的if语句"><a href="#if-相当于java代码的if语句" class="headerlink" title="if:相当于java代码的if语句"></a>if:相当于java代码的if语句</h3><ol><li>test为必须属性，接受boolean表达式</li><li>如果表达式为true，则显示if标签体内容，如果为false，则不显示标签体内容</li><li>一般情况下，test属性值会结合el表达式一起使用</li><li>c:if标签没有else情况，想要else情况，则可以在定义一个c:if标签</li></ol><ul><li><p>示例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> &lt;%</span><br><span class="line">        request.setAttribute(&quot;number&quot;,4);</span><br><span class="line">  %&gt;</span><br><span class="line">&lt;c:if test&#x3D;&quot;$&#123;number % 2 !&#x3D; 0&#125;&quot;&gt;</span><br><span class="line"></span><br><span class="line">            $&#123;number&#125;为奇数</span><br><span class="line">&lt;&#x2F;c:if&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><h3 id="choose-相当于java代码的switch语句"><a href="#choose-相当于java代码的switch语句" class="headerlink" title="choose:相当于java代码的switch语句"></a>choose:相当于java代码的switch语句</h3><ol><li>使用choose标签声明                                  相当于switch声明</li><li>使用when标签做判断                                  相当于case</li><li>使用otherwise标签做其他情况的声明        相当于default</li></ol><ul><li><p>示例</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">        request.setAttribute(&quot;number&quot;,51);</span><br><span class="line">  %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;c:choose&gt;</span><br><span class="line">        &lt;c:when test&#x3D;&quot;$&#123;number &#x3D;&#x3D; 1&#125;&quot;&gt;星期一&lt;&#x2F;c:when&gt;</span><br><span class="line">        &lt;c:when test&#x3D;&quot;$&#123;number &#x3D;&#x3D; 2&#125;&quot;&gt;星期二&lt;&#x2F;c:when&gt;</span><br><span class="line">        &lt;c:when test&#x3D;&quot;$&#123;number &#x3D;&#x3D; 3&#125;&quot;&gt;星期三&lt;&#x2F;c:when&gt;</span><br><span class="line">        &lt;c:when test&#x3D;&quot;$&#123;number &#x3D;&#x3D; 4&#125;&quot;&gt;星期四&lt;&#x2F;c:when&gt;</span><br><span class="line">        &lt;c:when test&#x3D;&quot;$&#123;number &#x3D;&#x3D; 5&#125;&quot;&gt;星期五&lt;&#x2F;c:when&gt;</span><br><span class="line">        &lt;c:when test&#x3D;&quot;$&#123;number &#x3D;&#x3D; 6&#125;&quot;&gt;星期六&lt;&#x2F;c:when&gt;</span><br><span class="line">        &lt;c:when test&#x3D;&quot;$&#123;number &#x3D;&#x3D; 7&#125;&quot;&gt;星期天&lt;&#x2F;c:when&gt;</span><br><span class="line"></span><br><span class="line">        &lt;c:otherwise&gt;数字输入有误&lt;&#x2F;c:otherwise&gt;</span><br><span class="line">    &lt;&#x2F;c:choose&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ol><ol start="3"><li><h3 id="foreach-相当于java代码的for语句"><a href="#foreach-相当于java代码的for语句" class="headerlink" title="foreach:相当于java代码的for语句"></a>foreach:相当于java代码的for语句</h3><ol><li><h4 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h4><ol><li>begin：开始值</li><li>end：结束值</li><li>var：临时变量</li><li>items:容器对象  普通for循环不用，增强for用</li><li>step：步长</li><li>varStatus:循环状态对象<ol><li>index:容器中元素的索引，从0开始</li><li>count:循环次数，从1开始</li></ol></li></ol></li><li><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><ol><li><p>普通for</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach begin&#x3D;&quot;1&quot; end&#x3D;&quot;10&quot; var&#x3D;&quot;i&quot; step&#x3D;&quot;2&quot; varStatus&#x3D;&quot;s&quot;&gt;</span><br><span class="line">    $&#123;i&#125; &lt;h3&gt;$&#123;s.index&#125;&lt;h3&gt; &lt;h4&gt; $&#123;s.count&#125; &lt;&#x2F;h4&gt;&lt;br&gt;</span><br><span class="line">&lt;&#x2F;c:forEach&gt;</span><br></pre></td></tr></table></figure></li><li><p>增强for</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach items&#x3D;&quot;$&#123;requestScope.users&#125;&quot; var&#x3D;&quot;user&quot; varStatus&#x3D;&quot;s&quot;&gt;</span><br><span class="line">       &lt;tr&gt;</span><br><span class="line">           &lt;td&gt;$&#123;s.count&#125;&lt;&#x2F;td&gt;</span><br><span class="line">           &lt;td&gt;$&#123;user.name&#125;&lt;&#x2F;td&gt;</span><br><span class="line">           &lt;td&gt;$&#123;user.gender&#125;&lt;&#x2F;td&gt;</span><br><span class="line">           &lt;td&gt;$&#123;user.age&#125;&lt;&#x2F;td&gt;</span><br><span class="line">           &lt;td&gt;$&#123;user.address&#125;&lt;&#x2F;td&gt;</span><br><span class="line">           &lt;td&gt;$&#123;user.qq&#125;&lt;&#x2F;td&gt;</span><br><span class="line">           &lt;td&gt;$&#123;user.email&#125;&lt;&#x2F;td&gt;</span><br><span class="line">       &lt;&#x2F;tr&gt;</span><br><span class="line">       &lt;&#x2F;c:forEach&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习_keras</title>
      <link href="2021/01/17/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-keras/"/>
      <url>2021/01/17/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-keras/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="1-函数式编程组件"><a href="#1-函数式编程组件" class="headerlink" title="1.函数式编程组件"></a>1.函数式编程组件</h1><h2 id="1-keras-layers-Conv2D"><a href="#1-keras-layers-Conv2D" class="headerlink" title="1.keras.layers.Conv2D"></a>1.keras.layers.Conv2D</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tf.keras.layers.Conv2D(</span><br><span class="line">    filters, kernel_size, strides&#x3D;(1, 1), padding&#x3D;&#39;valid&#39;,</span><br><span class="line">    data_format&#x3D;None, dilation_rate&#x3D;(1, 1), groups&#x3D;1, activation&#x3D;None,</span><br><span class="line">    use_bias&#x3D;True, kernel_initializer&#x3D;&#39;glorot_uniform&#39;,</span><br><span class="line">    bias_initializer&#x3D;&#39;zeros&#39;, kernel_regularizer&#x3D;None,</span><br><span class="line">    bias_regularizer&#x3D;None, activity_regularizer&#x3D;None, kernel_constraint&#x3D;None,</span><br><span class="line">    bias_constraint&#x3D;None, **kwargs</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>函数式编程后边必须是四维的[batch,width,height,chanel]</p><h3 id="1-增加维度"><a href="#1-增加维度" class="headerlink" title="1.增加维度"></a>1.增加维度</h3><ul><li><h4 id="后增"><a href="#后增" class="headerlink" title="后增"></a>后增</h4></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x_train &#x3D; x_train[:, tf.newaxis]</span><br></pre></td></tr></table></figure><ul><li><h4 id="前增"><a href="#前增" class="headerlink" title="前增"></a>前增</h4></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x_train &#x3D; x_train[tf.newaxis,:]</span><br></pre></td></tr></table></figure><h2 id="2-keras-preprocessing-image-ImageDataGenerator"><a href="#2-keras-preprocessing-image-ImageDataGenerator" class="headerlink" title="2.keras.preprocessing.image.ImageDataGenerator"></a>2.keras.preprocessing.image.ImageDataGenerator</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tf.keras.preprocessing.image.ImageDataGenerator(</span><br><span class="line">    featurewise_center&#x3D;False, samplewise_center&#x3D;False,</span><br><span class="line">    featurewise_std_normalization&#x3D;False, samplewise_std_normalization&#x3D;False,</span><br><span class="line">    zca_whitening&#x3D;False, zca_epsilon&#x3D;1e-06, rotation_range&#x3D;0, width_shift_range&#x3D;0.0,</span><br><span class="line">    height_shift_range&#x3D;0.0, brightness_range&#x3D;None, shear_range&#x3D;0.0, zoom_range&#x3D;0.0,</span><br><span class="line">    channel_shift_range&#x3D;0.0, fill_mode&#x3D;&#39;nearest&#39;, cval&#x3D;0.0,</span><br><span class="line">    horizontal_flip&#x3D;False, vertical_flip&#x3D;False, rescale&#x3D;None,</span><br><span class="line">    preprocessing_function&#x3D;None, data_format&#x3D;None, validation_split&#x3D;0.0, dtype&#x3D;None</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ol><li>featurewise_center：布尔值，使输入数据集去中心化（均值为0）, 按feature执行。</li><li>samplewise_center：布尔值，使输入数据的每个样本均值为0。</li><li>featurewise_std_normalization：布尔值，将输入除以数据集的标准差以完成标准化, 按feature执行。</li><li>samplewise_std_normalization：布尔值，将输入的每个样本除以其自身的标准差。</li><li>zca_whitening：布尔值，对输入数据施加ZCA白化。</li><li>rotation_range：整数，数据提升时图片随机转动的角度。随机选择图片的角度，是一个0<del>180的度数，取值为0</del>180。</li><li>width_shift_range：浮点数，图片宽度的某个比例，数据提升时图片随机水平偏移的幅度。</li><li>height_shift_range：浮点数，图片高度的某个比例，数据提升时图片随机竖直偏移的幅度。<br>height_shift_range和width_shift_range是用来指定水平和竖直方向随机移动的程度，这是两个0~1之间的比例。</li><li>shear_range：浮点数，剪切强度（逆时针方向的剪切变换角度）。是用来进行剪切变换的程度。</li><li>zoom_range：浮点数或形如[lower,upper]的列表，随机缩放的幅度，若为浮点数，则相当于[lower,upper] = [1 - zoom_range, 1+zoom_range]。用来进行随机的放大。</li><li>channel_shift_range：浮点数，随机通道偏移的幅度。</li><li>fill_mode：‘constant’，‘nearest’，‘reflect’或‘wrap’之一，当进行变换时超出边界的点将根据本参数给定的方法进行处理</li><li>cval：浮点数或整数，当fill_mode=constant时，指定要向超出边界的点填充的值。</li><li>horizontal_flip：布尔值，进行随机水平翻转。随机的对图片进行水平翻转，这个参数适用于水平翻转不影响图片语义的时候。</li><li>vertical_flip：布尔值，进行随机竖直翻转。</li><li>rescale: 值将在执行其他处理前乘到整个图像上，我们的图像在RGB通道都是0<del>255的整数，这样的操作可能使图像的值过高或过低，所以我们将这个值定为0</del>1之间的数。</li><li>preprocessing_function: 将被应用于每个输入的函数。该函数将在任何其他修改之前运行。该函数接受一个参数，为一张图片（秩为3的numpy array），并且输出一个具有相同shape的numpy array</li><li>data_format：字符串，“channel_first”或“channel_last”之一，代表图像的通道维的位置。该参数是Keras 1.x中的image_dim_ordering，“channel_last”对应原本的“tf”，“channel_first”对应原本的“th”。以128x128的RGB图像为例，“channel_first”应将数据组织为（3,128,128），而“channel_last”应将数据组织为（128,128,3）。该参数的默认值是~/.keras/keras.json中设置的值，若从未设置过，则为“channel_last”。</li></ol><h3 id="1-归一化"><a href="#1-归一化" class="headerlink" title="1.归一化"></a>1.归一化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImageDataGenerator(rescale&#x3D;1. &#x2F; 255)</span><br></pre></td></tr></table></figure><h3 id="2-flow-from-directory"><a href="#2-flow-from-directory" class="headerlink" title="2.flow_from_directory"></a>2.flow_from_directory</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def flow_from_directory(self,</span><br><span class="line">                            directory,</span><br><span class="line">                            target_size&#x3D;(256, 256),</span><br><span class="line">                            color_mode&#x3D;&#39;rgb&#39;,</span><br><span class="line">                            classes&#x3D;None,</span><br><span class="line">                            class_mode&#x3D;&#39;categorical&#39;,</span><br><span class="line">                            batch_size&#x3D;32,</span><br><span class="line">                            shuffle&#x3D;True,</span><br><span class="line">                            seed&#x3D;None,</span><br><span class="line">                            save_to_dir&#x3D;None,</span><br><span class="line">                            save_prefix&#x3D;&#39;&#39;,</span><br><span class="line">                            save_format&#x3D;&#39;png&#39;,</span><br><span class="line">                            follow_links&#x3D;False,</span><br><span class="line">                            subset&#x3D;None,</span><br><span class="line">                            interpolation&#x3D;&#39;nearest&#39;):</span><br></pre></td></tr></table></figure><ul><li><p>directory: 目标文件夹路径,此文件夹下包含分类图片的文件夹，然后再是图片，比如此文件夹名为flower,下面含有[daisy,dandelion,roses,sunflowers,tulips]5个文件夹，roses文件夹下是玫瑰花的图片</p></li><li><p>target_size: 整数tuple,默认为(256, 256). 图像将被resize成该尺寸</p></li><li><p>batch_size: batch数据的大小,默认32</p></li><li><p>shuffle: 是否打乱数据,默认为True</p></li><li><p>class_mode: “categorical”, “binary”, “sparse”或None之一. 默认为”categorical. 该参数决定了返回的标签数组的形式, “categorical”会返回2D的one-hot编码标签,”binary”返回1D的二值标签.”sparse”返回1D的整数标签,如果为None则不返回任何标签, 生成器将仅仅生成batch数据, 这种情况在使用<code>model.predict_generator()</code>和<code>model.evaluate_generator()</code>等函数时会用到.</p></li></ul><ul><li>color_mode: 颜色模式,为”grayscale”,”rgb”之一,默认为”rgb”.代表这些图片是否会被转换为单通道或三通道的图片.</li><li>classes: 可选参数,为子文件夹的列表,如[‘dogs’,’cats’]默认为None. 若未提供,则该类别列表将从<code>directory</code>下的子文件夹名称/结构自动推断。每一个子文件夹都会被认为是一个新的类。(类别的顺序将按照字母表顺序映射到标签值)。通过属性<code>class_indices</code>可获得文件夹名与类的序号的对应字典。</li><li>seed: 可选参数,打乱数据和进行变换时的随机数种子</li><li>save_to_dir: None或字符串，该参数能让你将提升后的图片保存起来，用以可视化</li><li>save_prefix：字符串，保存提升后图片时使用的前缀, 仅当设置了<code>save_to_dir</code>时生效</li><li>save_format：”png”或”jpeg”之一，指定保存图片的数据格式,默认”jpeg”</li><li>flollow_links: 是否访问子文件夹中的软链接</li></ul><ul><li>.n属性可以获得数量 </li></ul><h1 id="2-model"><a href="#2-model" class="headerlink" title="2.model"></a>2.model</h1><h2 id="loss"><a href="#loss" class="headerlink" title="loss"></a>loss</h2><h3 id="1-categorical-crossentropy-one-hot"><a href="#1-categorical-crossentropy-one-hot" class="headerlink" title="1.categorical_crossentropy:one-hot"></a>1.categorical_crossentropy:one-hot</h3><h3 id="2-SparseCategoricalCrossentropy-数字编码"><a href="#2-SparseCategoricalCrossentropy-数字编码" class="headerlink" title="2.SparseCategoricalCrossentropy():数字编码"></a>2.SparseCategoricalCrossentropy():数字编码</h3><h2 id="1-steps-per-epoch"><a href="#1-steps-per-epoch" class="headerlink" title="1.steps_per_epoch"></a>1.steps_per_epoch</h2><p>一个step就是一个batch_size</p><h1 id="3-搭建网络流程"><a href="#3-搭建网络流程" class="headerlink" title="3.搭建网络流程"></a>3.搭建网络流程</h1><h2 id="1-列好网络中各层的网络参数"><a href="#1-列好网络中各层的网络参数" class="headerlink" title="1.列好网络中各层的网络参数"></a>1.列好网络中各层的网络参数</h2><h2 id="2-api编程搭建model"><a href="#2-api编程搭建model" class="headerlink" title="2.api编程搭建model"></a>2.api编程搭建model</h2><h2 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h2><h1 id="存在的问题"><a href="#存在的问题" class="headerlink" title="存在的问题"></a>存在的问题</h1><h2 id="1-jupyter显存占用"><a href="#1-jupyter显存占用" class="headerlink" title="1.jupyter显存占用"></a>1.jupyter显存占用</h2><ul><li>每次运行完都重启一下服务</li></ul><p><img src="/2021/01/17/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-keras/D:%5Cprogramming%5Cblog%5Cdonghuangzhong%5Csource_posts%5C%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-keras%5Cimage-20210117122638870.png" alt="image-20210117122638870"></p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> _keras </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习</title>
      <link href="2021/01/16/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
      <url>2021/01/16/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h1 id="1-AlexNet概述"><a href="#1-AlexNet概述" class="headerlink" title="1.AlexNet概述"></a>1.AlexNet概述</h1><h2 id="1-亮点"><a href="#1-亮点" class="headerlink" title="1.亮点"></a>1.亮点</h2><ol><li>首次使用GPU加速</li><li>使用ReLu激活函数，非传统Sigmoid或Tanh</li><li>LRN局部响应归一化</li><li>全连接层前两层使用Dropout随机失活神经元减少过拟合</li></ol><h2 id="2-8层结构"><a href="#2-8层结构" class="headerlink" title="2.8层结构"></a>2.8层结构</h2><h3 id="卷积层公式"><a href="#卷积层公式" class="headerlink" title="卷积层公式"></a>卷积层公式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">output&#x3D;(W-F+2P)&#x2F;S+1</span><br><span class="line">W:输入图片的大小(一般Width&#x3D;Height)F:卷积核大小S:步长P:Padding的像素数</span><br></pre></td></tr></table></figure><table><thead><tr><th>层数\参数</th><th>input_size</th><th>kernels</th><th>kernel_size</th><th>padding</th><th>stride</th><th>output_size</th></tr></thead><tbody><tr><td>Conv1</td><td>[224, 224, 3]</td><td>48 * 2 = 96</td><td>11</td><td>[1, 2]</td><td>4</td><td>[55, 55, 96]</td></tr><tr><td>Maxpool1</td><td>[55, 55, 96]</td><td>None</td><td>3</td><td>0</td><td>2</td><td>[27, 27, 96]</td></tr><tr><td>Conv2</td><td>[27, 27, 96]</td><td>256</td><td>5</td><td>[2, 2]</td><td>1</td><td>[27,27, 256]</td></tr><tr><td>Maxpool2</td><td>[27, 27, 256]</td><td>None</td><td>3</td><td>0</td><td>2</td><td>[13, 13, 256]</td></tr><tr><td>Conv3</td><td>[13, 13, 256]</td><td>192*2= 384</td><td>3</td><td>[1, 1]</td><td>1</td><td>[13, 13, 384]</td></tr><tr><td>Conv4</td><td>[13, 13, 384]</td><td>192*2= 384</td><td>3</td><td>[1, 1]</td><td>1</td><td>[13, 13, 384]</td></tr><tr><td>Conv5</td><td>[13, 13, 384]</td><td>128*2= 256</td><td>3</td><td>[1, 1]</td><td>1</td><td>[13, 13, 256]</td></tr><tr><td>Maxpool3</td><td>[13, 13, 256]</td><td>None</td><td>3</td><td>0</td><td>2</td><td>[6, 6, 256]</td></tr><tr><td>Fc1</td><td>2048</td><td>None</td><td>None</td><td>None</td><td>None</td><td>None</td></tr><tr><td>Fc2</td><td>2048</td><td>None</td><td>None</td><td>None</td><td>None</td><td>None</td></tr><tr><td>Fc3</td><td>1000</td><td>None</td><td>None</td><td>None</td><td>None</td><td>None</td></tr></tbody></table><h1 id="2-VGG网络"><a href="#2-VGG网络" class="headerlink" title="2.VGG网络"></a>2.VGG网络</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h2><p>VGG 在2014年由牛津大学著名研究组 <strong>VGG</strong>（<strong>Visual Geometry Group</strong>）提出，斩获该年 ImageNet 竞赛中 Localization Task（定位任务）第一名和 Classification Task（分类任务）第二名。</p><h2 id="2-亮点"><a href="#2-亮点" class="headerlink" title="2.亮点"></a>2.亮点</h2><ul><li><h3 id="创新点"><a href="#创新点" class="headerlink" title="创新点"></a>创新点</h3><p>通过堆叠多个小卷积核来替代大尺度卷积核，可以减少训练参数，同时能保证相同的感受野。<br>论文中提到，可以通过堆叠两个3×3的卷积核替代5x5的卷积核，堆叠三个3×3的卷积核替代7x7的卷积核。</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在卷积神经网络中，决定某一层输出结果中一个元素所对应的输入层的区域大小，被称作感受野（receptive field）。</span><br></pre></td></tr></table></figure><ul><li><h3 id="计算公式：F-i-F-i-1-−1-×Stride-Ksize"><a href="#计算公式：F-i-F-i-1-−1-×Stride-Ksize" class="headerlink" title="计算公式：F(i)=(F(i+1)−1)×Stride +Ksize"></a>计算公式：<em>F</em>(<em>i</em>)=(<em>F</em>(<em>i</em>+1)−1)×Stride +Ksize</h3></li><li><p><em>F</em>(<em>i</em>) 为第 i 层感受野</p></li><li><p>Stride为第 i 层的步距</p></li><li><p>Ksize 为 卷积核 或 池化核 尺寸</p></li></ul><h2 id="3-结构"><a href="#3-结构" class="headerlink" title="3.结构"></a>3.结构</h2><p><img src="/2021/01/16/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/D:%5Cprogramming%5Cblog%5Cdonghuangzhong%5Csource_posts%5C%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%5Cimage-20210119102655362.png" alt="image-20210119102655362"></p><h1 id="3-GoogLeNet"><a href="#3-GoogLeNet" class="headerlink" title="3.GoogLeNet"></a>3.GoogLeNet</h1><h2 id="1-概述-1"><a href="#1-概述-1" class="headerlink" title="1.概述"></a>1.概述</h2><p>GoogLeNet在2014年由Google团队提出（与VGG网络同年，注意GoogLeNet中的L大写是为了致敬LeNet），斩获当年ImageNet竞赛中Classification Task (分类任务) 第一名。</p><h2 id="2-亮点-1"><a href="#2-亮点-1" class="headerlink" title="2.亮点"></a>2.亮点</h2><h3 id="创新点-1"><a href="#创新点-1" class="headerlink" title="创新点"></a>创新点</h3><ul><li>引入了 <strong>Inception</strong> 结构（融合不同尺度的特征信息）</li><li>使用1x1的卷积核进行降维以及映射处理 （虽然VGG网络中也有，但该论文介绍的更详细）</li><li>添加两个辅助分类器帮助训练</li><li>丢弃全连接层，使用平均池化层（大大减少模型参数，除去两个辅助分类器，网络大小只有vgg的1/20）</li></ul><h3 id="inception"><a href="#inception" class="headerlink" title="inception"></a>inception</h3><ul><li><p>将特征矩阵<strong>同时输入到多个分支</strong>进行处理，并将输出的特征矩阵<strong>按深度进行拼接</strong>，得到最终输出。</p></li><li><p>作用：增加网络深度和宽度的同时减少参数。</p></li></ul><h2 id="3-结构-1"><a href="#3-结构-1" class="headerlink" title="3.结构"></a>3.结构</h2><p><img src="/2021/01/16/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/D:%5Cprogramming%5Cblog%5Cdonghuangzhong%5Csource_posts%5C%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%5Cimage-20210119120437177.png" alt="image-20210119120437177"></p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AlexNet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jupyter</title>
      <link href="2021/01/16/jupyter/"/>
      <url>2021/01/16/jupyter/</url>
      
        <content type="html"><![CDATA[<p>单独的python安装jupyter</p><a id="more"></a><h1 id="1-pip安装"><a href="#1-pip安装" class="headerlink" title="1.pip安装"></a>1.pip安装</h1><p>最好使用中科大的源</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -i https:&#x2F;&#x2F;pypi.mirrors.ustc.edu.cn&#x2F;simple jupyter</span><br></pre></td></tr></table></figure><h1 id="2-打开"><a href="#2-打开" class="headerlink" title="2.打开"></a>2.打开</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook</span><br></pre></td></tr></table></figure><h1 id="3-可能出现的问题"><a href="#3-可能出现的问题" class="headerlink" title="3.可能出现的问题"></a>3.可能出现的问题</h1><h2 id="1-kernel-error-FileNotFoundError-WinError-2-系统找不到指定的文件"><a href="#1-kernel-error-FileNotFoundError-WinError-2-系统找不到指定的文件" class="headerlink" title="1.kernel error FileNotFoundError: [WinError 2] 系统找不到指定的文件"></a>1.kernel error FileNotFoundError: [WinError 2] 系统找不到指定的文件</h2><p>解决方法</p><ol><li><p>查看内核安装位置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter kernelspec list</span><br></pre></td></tr></table></figure></li><li><p>在1中的路径打开kernel.jason查看Python编译器的路径是否正确</p></li><li><p>如果不正确，运行下面这天代码自动修正路径</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m ipykernel install --user</span><br></pre></td></tr></table></figure></li></ol><h1 id="4-改默认路径"><a href="#4-改默认路径" class="headerlink" title="4.改默认路径"></a>4.改默认路径</h1><h2 id="1-生成config文件"><a href="#1-生成config文件" class="headerlink" title="1.生成config文件"></a>1.生成config文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter notebook --generate-config</span><br></pre></td></tr></table></figure><h2 id="2-打开配置文件，搜索notebook-dir，删去-号修改即可"><a href="#2-打开配置文件，搜索notebook-dir，删去-号修改即可" class="headerlink" title="2.打开配置文件，搜索notebook_dir，删去#号修改即可"></a>2.打开配置文件，搜索notebook_dir，删去#号修改即可</h2><h2 id="3-重启jupyter"><a href="#3-重启jupyter" class="headerlink" title="3.重启jupyter"></a>3.重启jupyter</h2><h1 id="5-代码补全"><a href="#5-代码补全" class="headerlink" title="5.代码补全"></a>5.代码补全</h1><h2 id="1-进入Anaconda-Prompt，依次运行以下代码"><a href="#1-进入Anaconda-Prompt，依次运行以下代码" class="headerlink" title="1.进入Anaconda Prompt，依次运行以下代码"></a>1.进入Anaconda Prompt，依次运行以下代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;1.安装nbextensions </span><br><span class="line">pip install jupyter_contrib_nbextensions -i https:&#x2F;&#x2F;pypi.mirrors.ustc.edu.cn&#x2F;simple</span><br><span class="line">jupyter contrib nbextension install --user</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;2.安装nbextensions_configurator</span><br><span class="line">pip install --user jupyter_nbextensions_configurator </span><br><span class="line">jupyter nbextensions_configurator enable --user</span><br></pre></td></tr></table></figure><h2 id="2-重启jupyter"><a href="#2-重启jupyter" class="headerlink" title="2.重启jupyter"></a>2.重启jupyter</h2><p>可以看到增加了一个Nbextensions标签页，在这个页面里，勾选Hinterland</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jupyter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python</title>
      <link href="2021/01/15/python/"/>
      <url>2021/01/15/python/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><h1 id="1-设置延时"><a href="#1-设置延时" class="headerlink" title="1.设置延时"></a>1.设置延时</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip --default-timeout&#x3D;200 install XXX</span><br></pre></td></tr></table></figure><h1 id="2-清楚模块-包-缓存"><a href="#2-清楚模块-包-缓存" class="headerlink" title="2.清楚模块(包)缓存"></a>2.清楚模块(包)缓存</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">路径：C:\Users\用户名\AppData\Local\pip</span><br></pre></td></tr></table></figure><h1 id="3-换源"><a href="#3-换源" class="headerlink" title="3.换源"></a>3.换源</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">中科大：https:&#x2F;&#x2F;pypi.mirrors.ustc.edu.cn&#x2F;simple&#x2F;</span><br><span class="line">清华：https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br><span class="line">原始官方源：https:&#x2F;&#x2F;pypi.Python.org&#x2F;simple&#x2F;</span><br></pre></td></tr></table></figure><h2 id="1-永久换源"><a href="#1-永久换源" class="headerlink" title="1.永久换源"></a>1.永久换源</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br></pre></td></tr></table></figure><ul><li>原始的源</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config set global.index-url https:&#x2F;&#x2F;pypi.Python.org&#x2F;simple&#x2F;</span><br></pre></td></tr></table></figure><h2 id="2-单次换源"><a href="#2-单次换源" class="headerlink" title="2.单次换源"></a>2.单次换源</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -i https:&#x2F;&#x2F;pypi.mirrors.ustc.edu.cn&#x2F;simple XXX</span><br></pre></td></tr></table></figure><h1 id="4-卸载所有模块"><a href="#4-卸载所有模块" class="headerlink" title="4.卸载所有模块"></a>4.卸载所有模块</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; python_modules.txt</span><br><span class="line">pip uninstall -r python_modules.txt -y</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Win10_GeForce940MX_TersorFlow</title>
      <link href="2021/01/15/Win10-GeForce940MX-TersorFlow/"/>
      <url>2021/01/15/Win10-GeForce940MX-TersorFlow/</url>
      
        <content type="html"><![CDATA[<p>win10下GeForce940MX显卡安装</p><p>概述</p><ol><li>安装</li></ol><a id="more"></a><h1 id="1-安装TensorFlow-GPU"><a href="#1-安装TensorFlow-GPU" class="headerlink" title="1.安装TensorFlow-GPU"></a>1.安装TensorFlow-GPU</h1><h2 id="1-安装环境"><a href="#1-安装环境" class="headerlink" title="1.安装环境"></a>1.安装环境</h2><ul><li>win10</li><li>GeForce940MX</li><li>自己安装的python3.7.4，非集成环境</li></ul><h2 id="2-pip命令安装tersorflow"><a href="#2-pip命令安装tersorflow" class="headerlink" title="2.pip命令安装tersorflow"></a>2.pip命令安装tersorflow</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip --timeout&#x3D;100 install -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple tensorflow</span><br></pre></td></tr></table></figure><ul><li><p><strong>必须设置timeout</strong>不然稍微网络不好就会报错，然后需要从头开始下载。</p></li><li><p>如果还是失败，手动去清华源下载whl文件，然后本地pip安装</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple&#x2F;</span><br></pre></td></tr></table></figure><ul><li>这里面有版本的问题，不建议安装最新版的tersorflow，我安装的2.x，运行不了，后来重新安装了1.5</li></ul><h2 id="3-安装CUDA"><a href="#3-安装CUDA" class="headerlink" title="3.安装CUDA"></a>3.安装CUDA</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;developer.nvidia.com&#x2F;cuda-toolkit-archive</span><br></pre></td></tr></table></figure><ul><li>运行import tersorflow，如果报错cudart64_100.dll找不到，需要将CUDA安装目录下bin添加到系统环境变量path中</li></ul><h2 id="4-安装cuDNN"><a href="#4-安装cuDNN" class="headerlink" title="4.安装cuDNN"></a>4.安装cuDNN</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;developer.nvidia.com&#x2F;cudnn</span><br></pre></td></tr></table></figure><p>是一个压缩包，解压放到任何一个目录下就行，然后把其中的<code>bin</code>目录路径添加到<code>Path</code>环境变量里。</p><ul><li><h2 id="最好也将cuDNN安装目录下bin添加到系统环境变量path中"><a href="#最好也将cuDNN安装目录下bin添加到系统环境变量path中" class="headerlink" title="最好也将cuDNN安装目录下bin添加到系统环境变量path中"></a>最好也将cuDNN安装目录下bin添加到系统环境变量path中</h2></li></ul><h2 id="5-测试运行"><a href="#5-测试运行" class="headerlink" title="5.测试运行"></a>5.测试运行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">print(&#39;Tensorflow Version:&#123;&#125;&#39;.format(tf.__version__))</span><br><span class="line">print(tf.test.is_gpu_available())</span><br></pre></td></tr></table></figure><p><img src="/2021/01/15/Win10-GeForce940MX-TersorFlow/image-20210115135413502.png" alt="image-20210115135413502"></p><h2 id="yolo"><a href="#yolo" class="headerlink" title="yolo"></a>yolo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python convert.py yolov3.cfg yolov3.weights model_data&#x2F;yolo.h5</span><br><span class="line">python convert.py -w yolov3-tiny.cfg yolov3-tiny.weights model_data&#x2F;tiny_yolo_weights.h5</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> TersorFlow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GeForce940MX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo便捷图片解决方案</title>
      <link href="2021/01/13/hexo%E4%BE%BF%E6%8D%B7%E5%9B%BE%E7%89%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>2021/01/13/hexo%E4%BE%BF%E6%8D%B7%E5%9B%BE%E7%89%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<ol><li><p>使图片在本地和网站上都能显示正常</p></li><li><p>win+s截图，在Typora上粘贴即可，不需要做任何操作</p><a id="more"></a></li></ol><h1 id="1-安装图片插件"><a href="#1-安装图片插件" class="headerlink" title="1.安装图片插件"></a>1.安装图片插件</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-asset-image --save</span><br></pre></td></tr></table></figure><h1 id="2-配置文件-config-yml-里post-asset-folder-选项设置为true"><a href="#2-配置文件-config-yml-里post-asset-folder-选项设置为true" class="headerlink" title="2.配置文件_config.yml 里post_asset_folder:选项设置为true"></a>2.配置文件<code>_config.yml</code> 里<code>post_asset_folder:</code>选项设置为<code>true</code></h1><p>这样每次hexo n “xxx”时就会一起生成同名文件夹</p><h1 id="3-更改Typora设置"><a href="#3-更改Typora设置" class="headerlink" title="3.更改Typora设置"></a>3.更改Typora设置</h1><h2 id="1-文件-gt-偏好设置-gt-图像"><a href="#1-文件-gt-偏好设置-gt-图像" class="headerlink" title="1.文件-&gt;偏好设置-&gt;图像"></a>1.文件-&gt;偏好设置-&gt;图像</h2><h2 id="2-点击下拉框，选择复制到指定路径，如下图设置"><a href="#2-点击下拉框，选择复制到指定路径，如下图设置" class="headerlink" title="2.点击下拉框，选择复制到指定路径，如下图设置"></a>2.点击下拉框，选择复制到指定路径，如下图设置</h2><p><img src="/2021/01/13/hexo%E4%BE%BF%E6%8D%B7%E5%9B%BE%E7%89%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/image-20210209203155898.png" alt="image-20210209203155898"></p><h2 id="3-随便截图，粘贴到Typora中即可"><a href="#3-随便截图，粘贴到Typora中即可" class="headerlink" title="3.随便截图，粘贴到Typora中即可"></a>3.随便截图，粘贴到Typora中即可</h2>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java_JDBC连接池&amp;JDBCTemplate</title>
      <link href="2021/01/13/Java-JDBC%E8%BF%9E%E6%8E%A5%E6%B1%A0-JDBCTemplate/"/>
      <url>2021/01/13/Java-JDBC%E8%BF%9E%E6%8E%A5%E6%B1%A0-JDBCTemplate/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>1.数据库连接池</p><p>2.C3p0</p><p>3.Druid</p><p>4.Spring JDBC : JDBC Template</p><a id="more"></a><h1 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>其实就是一个容器(集合)，存放数据库连接的容器。当系统初始化好后，容器被创建，容器中会申请一些连接对象，当用户来访问数据库时，从容器中获取连接对象，用户访问完之后，会将连接对象归还给容器。</p><h3 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h3><ul><li>节约资源</li><li>用户访问高效</li></ul><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="标准接口：DataSource-javax-sql包下的"><a href="#标准接口：DataSource-javax-sql包下的" class="headerlink" title="标准接口：DataSource   javax.sql包下的"></a>标准接口：DataSource   javax.sql包下的</h4><ul><li>获取连接：getConnection()</li><li>归还连接：Connection.close()。如果连接对象Connection是从连接池中获取的，那么调用Connection.close()方法，则不会再关闭连接了。而是归还连接</li></ul><h4 id="一般我们不去实现它，有数据库厂商来实现"><a href="#一般我们不去实现它，有数据库厂商来实现" class="headerlink" title="一般我们不去实现它，有数据库厂商来实现"></a>一般我们不去实现它，有数据库厂商来实现</h4><ul><li><p>C3P0：数据库连接池技术</p></li><li><p>Druid：数据库连接池实现技术，由阿里巴巴提供的</p></li></ul><h1 id="C3P0：数据库连接池技术"><a href="#C3P0：数据库连接池技术" class="headerlink" title="C3P0：数据库连接池技术"></a>C3P0：数据库连接池技术</h1><h2 id="硬编码方式"><a href="#硬编码方式" class="headerlink" title="硬编码方式"></a>硬编码方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ComboPooledDataSource cpds &#x3D; new ComboPooledDataSource();</span><br><span class="line">cpds.setDriverClass( &quot;org.postgresql.Driver&quot; ); &#x2F;&#x2F;loads the jdbc driver            </span><br><span class="line">cpds.setJdbcUrl( &quot;jdbc:postgresql:&#x2F;&#x2F;localhost&#x2F;testdb&quot; );</span><br><span class="line">cpds.setUser(&quot;dbuser&quot;);                                  </span><br><span class="line">cpds.setPassword(&quot;dbpassword&quot;);</span><br></pre></td></tr></table></figure><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="导入jar包-两个-和数据库驱动"><a href="#导入jar包-两个-和数据库驱动" class="headerlink" title="导入jar包 (两个) 和数据库驱动"></a>导入jar包 (两个) 和数据库驱动</h3><ul><li>c3p0-0.9.5.2.jar</li><li>mchange-commons-java-0.2.12.jar </li><li><strong>不要忘记导入数据库驱动jar包</strong></li></ul><h3 id="定义配置文件："><a href="#定义配置文件：" class="headerlink" title="定义配置文件："></a>定义配置文件：</h3><ul><li>名称： c3p0.properties 或者 c3p0-config.xml</li><li>路径：直接将文件放在src目录下即可。</li><li>c3p0-config.xml文件内容：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;c3p0-config&gt;</span><br><span class="line">  &lt;!-- 使用默认的配置读取连接池对象 --&gt;</span><br><span class="line">  &lt;default-config&gt;</span><br><span class="line">  &lt;!--  连接参数 --&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;jdbcUrl&quot;&gt;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;db3&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;user&quot;&gt;root&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;password&quot;&gt;root&lt;&#x2F;property&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 连接池参数 --&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;initialPoolSize&quot;&gt;5&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;maxPoolSize&quot;&gt;10&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;checkoutTimeout&quot;&gt;3000&lt;&#x2F;property&gt;</span><br><span class="line">  &lt;&#x2F;default-config&gt;</span><br><span class="line"></span><br><span class="line">  &lt;named-config name&#x3D;&quot;otherc3p0&quot;&gt; </span><br><span class="line">    &lt;!--  连接参数 --&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;driverClass&quot;&gt;com.mysql.jdbc.Driver&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;jdbcUrl&quot;&gt;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;day25&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;user&quot;&gt;root&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;password&quot;&gt;root&lt;&#x2F;property&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 连接池参数 --&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;initialPoolSize&quot;&gt;5&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;maxPoolSize&quot;&gt;8&lt;&#x2F;property&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;checkoutTimeout&quot;&gt;1000&lt;&#x2F;property&gt;</span><br><span class="line">  &lt;&#x2F;named-config&gt;</span><br><span class="line">&lt;&#x2F;c3p0-config&gt;</span><br></pre></td></tr></table></figure><h3 id="创建核心对象-数据库连接池对象-ComboPooledDataSource"><a href="#创建核心对象-数据库连接池对象-ComboPooledDataSource" class="headerlink" title="创建核心对象 数据库连接池对象 ComboPooledDataSource"></a>创建核心对象 数据库连接池对象 ComboPooledDataSource</h3><h3 id="获取连接：-getConnection"><a href="#获取连接：-getConnection" class="headerlink" title="获取连接： getConnection"></a>获取连接： getConnection</h3><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">public class c3p0 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Connection conn&#x3D;null;</span><br><span class="line">        PreparedStatement ps&#x3D;null;</span><br><span class="line">        ResultSet rs&#x3D;null;</span><br><span class="line">        try &#123;</span><br><span class="line">        &#x2F;&#x2F;主要是下面两句</span><br><span class="line">            ComboPooledDataSource ds &#x3D; new ComboPooledDataSource();</span><br><span class="line">            conn&#x3D;ds.getConnection();</span><br><span class="line">            ps&#x3D;conn.prepareStatement(&quot;select * from account where id&#x3D;?&quot;);</span><br><span class="line">            ps.setInt(1,5);</span><br><span class="line">            rs &#x3D; ps.executeQuery();</span><br><span class="line">            while(rs.next())</span><br><span class="line">            &#123;</span><br><span class="line">                int id &#x3D; rs.getInt(&quot;id&quot;);</span><br><span class="line">                String name &#x3D; rs.getString(&quot;NAME&quot;);</span><br><span class="line">                int balance &#x3D; rs.getInt(&quot;balance&quot;);</span><br><span class="line">                System.out.println(id+&quot;\t&quot;+name+&quot;\t&quot;+balance);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; catch (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        finally &#123;</span><br><span class="line">            &#x2F;&#x2F;关闭资源</span><br><span class="line">            if(conn!&#x3D;null) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; catch (SQLException throwables) &#123;</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(ps!&#x3D;null) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; catch (SQLException throwables) &#123;</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(rs!&#x3D;null) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; catch (SQLException throwables) &#123;</span><br><span class="line">                    throwables.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Druid：数据库连接池实现技术，由阿里巴巴提供的"><a href="#Druid：数据库连接池实现技术，由阿里巴巴提供的" class="headerlink" title="Druid：数据库连接池实现技术，由阿里巴巴提供的"></a>Druid：数据库连接池实现技术，由阿里巴巴提供的</h1><h2 id="步骤-1"><a href="#步骤-1" class="headerlink" title="步骤"></a>步骤</h2><h3 id="导入jar包-druid-1-0-9-jar"><a href="#导入jar包-druid-1-0-9-jar" class="headerlink" title="导入jar包 druid-1.0.9.jar"></a>导入jar包 druid-1.0.9.jar</h3><h3 id="在src目录下，定义properties配置文件"><a href="#在src目录下，定义properties配置文件" class="headerlink" title="在src目录下，定义properties配置文件"></a>在src目录下，定义properties配置文件</h3><h4 id="druid-properties"><a href="#druid-properties" class="headerlink" title="druid.properties:"></a>druid.properties:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">driverClassName&#x3D;com.mysql.jdbc.Driver</span><br><span class="line">url&#x3D;jdbc:mysql:&#x2F;&#x2F;127.0.0.1:3306&#x2F;db3</span><br><span class="line">username&#x3D;root</span><br><span class="line">password&#x3D;root</span><br><span class="line">initialSize&#x3D;5</span><br><span class="line">maxActive&#x3D;10</span><br><span class="line">maxWait&#x3D;3000</span><br></pre></td></tr></table></figure><h3 id="加载配置文件druid-properties"><a href="#加载配置文件druid-properties" class="headerlink" title="加载配置文件druid.properties"></a>加载配置文件druid.properties</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Properties pro &#x3D; new Properties();</span><br><span class="line">InputStream is &#x3D; DruidDemo.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;);</span><br><span class="line">pro.load(is);</span><br></pre></td></tr></table></figure><h3 id="获取数据库连接池对象：通过工厂来来获取-DruidDataSourceFactory"><a href="#获取数据库连接池对象：通过工厂来来获取-DruidDataSourceFactory" class="headerlink" title="获取数据库连接池对象：通过工厂来来获取  DruidDataSourceFactory"></a>获取数据库连接池对象：通过工厂来来获取  DruidDataSourceFactory</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataSource ds &#x3D; DruidDataSourceFactory.createDataSource(pro);</span><br></pre></td></tr></table></figure><h3 id="获取连接：getConnection"><a href="#获取连接：getConnection" class="headerlink" title="获取连接：getConnection"></a>获取连接：getConnection</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Connection conn &#x3D; ds.getConnection();</span><br></pre></td></tr></table></figure><h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Properties pro &#x3D; new Properties();</span><br><span class="line">pro.load(Druid.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;));</span><br><span class="line">DataSource ds &#x3D; DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line">Connection conn &#x3D; ds.getConnection();</span><br><span class="line">PreparedStatement pstm &#x3D; conn.prepareStatement(&quot;select * from account where id&#x3D;?;&quot;);</span><br><span class="line">pstm.setInt(1,5);</span><br><span class="line">ResultSet rs &#x3D; pstm.executeQuery();</span><br><span class="line">while(rs.next())&#123;</span><br><span class="line">    int id &#x3D; rs.getInt(&quot;id&quot;);</span><br><span class="line">    String name &#x3D; rs.getString(&quot;NAME&quot;);</span><br><span class="line">    int balance &#x3D; rs.getInt(&quot;balance&quot;);</span><br><span class="line">    System.out.println(id+&quot;\t&quot;+name+&quot;\t&quot;+balance);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="编写工具类"><a href="#编写工具类" class="headerlink" title="编写工具类"></a>编写工具类</h2><p>属性:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataSource ds;</span><br></pre></td></tr></table></figure><p>方法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">静态代码块:用于初始化获得DataSource</span><br><span class="line">getDataSource()&#x2F;&#x2F;获取连接池</span><br><span class="line">getConnection()</span><br><span class="line">close(ResultSet resultSet, Statement statement,Connection connection)</span><br></pre></td></tr></table></figure><p>代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">public class DruidUtils &#123;</span><br><span class="line">    private static DataSource ds;</span><br><span class="line">    static &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Properties pro &#x3D; new Properties();</span><br><span class="line">            pro.load(DruidUtils.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;));</span><br><span class="line">            ds &#x3D; DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public static DataSource getDataSource()&#123;</span><br><span class="line">        return ds;</span><br><span class="line">    &#125;</span><br><span class="line">    public static Connection getConnection() throws SQLException &#123;</span><br><span class="line">        return ds.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line">    public static void close(ResultSet resultSet, Statement statement,Connection connection)</span><br><span class="line">    &#123;</span><br><span class="line">        if (resultSet!&#x3D;null) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; catch (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (statement!&#x3D;null) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; catch (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if (connection!&#x3D;null) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; catch (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void close(Statement statement,Connection connection)</span><br><span class="line">    &#123;</span><br><span class="line">        close(null,statement,connection);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Spring-JDBC-配合Druid使用"><a href="#Spring-JDBC-配合Druid使用" class="headerlink" title="Spring JDBC(配合Druid使用)"></a>Spring JDBC(配合Druid使用)</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><p>Spring框架对JDBC的简单封装。提供了一个JDBCTemplate对象简化JDBC的开发</p><h2 id="步骤-2"><a href="#步骤-2" class="headerlink" title="步骤"></a>步骤</h2><h3 id="导入jar包（五个）"><a href="#导入jar包（五个）" class="headerlink" title="导入jar包（五个）"></a>导入jar包（五个）</h3><p><img src="/2021/01/13/Java-JDBC%E8%BF%9E%E6%8E%A5%E6%B1%A0-JDBCTemplate/springJDBC.jpg" alt></p><h3 id="创建JdbcTemplate对象。依赖于数据源DataSource"><a href="#创建JdbcTemplate对象。依赖于数据源DataSource" class="headerlink" title="创建JdbcTemplate对象。依赖于数据源DataSource"></a>创建JdbcTemplate对象。依赖于数据源DataSource</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JdbcTemplate template &#x3D; new JdbcTemplate(ds);</span><br></pre></td></tr></table></figure><h3 id="调用JdbcTemplate的方法来完成CRUD的操作"><a href="#调用JdbcTemplate的方法来完成CRUD的操作" class="headerlink" title="调用JdbcTemplate的方法来完成CRUD的操作"></a>调用JdbcTemplate的方法来完成CRUD的操作</h3><h4 id="update-执行DML语句。增、删、改语句"><a href="#update-执行DML语句。增、删、改语句" class="headerlink" title="update():执行DML语句。增、删、改语句"></a>update():执行DML语句。增、删、改语句</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">    public void updateTest()</span><br><span class="line">    &#123;</span><br><span class="line">        int count &#x3D; jdbcTemplate.update(&quot;insert into account values(?,?,?)&quot;, 100, &quot;刘能&quot;,2000);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="返回主键式insert"><a href="#返回主键式insert" class="headerlink" title="返回主键式insert"></a>返回主键式insert</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public Long save(final User user) &#123;</span><br><span class="line">       &#x2F;&#x2F;创建PreparedStatementCreator</span><br><span class="line">       PreparedStatementCreator creator &#x3D; new PreparedStatementCreator() &#123;</span><br><span class="line">           @Override</span><br><span class="line">           public PreparedStatement createPreparedStatement(Connection connection) throws SQLException &#123;</span><br><span class="line">               &#x2F;&#x2F;使用原始jdbc完成有个PreparedStatement的组建</span><br><span class="line">               PreparedStatement preparedStatement &#x3D; connection.prepareStatement(&quot;insert into sys_user values(?,?,?,?,?)&quot;, PreparedStatement.RETURN_GENERATED_KEYS);</span><br><span class="line">               preparedStatement.setObject(1,null);</span><br><span class="line">               preparedStatement.setString(2,user.getUsername());</span><br><span class="line">               preparedStatement.setString(3,user.getEmail());</span><br><span class="line">               preparedStatement.setString(4,user.getPassword());</span><br><span class="line">               preparedStatement.setString(5,user.getPhoneNum());</span><br><span class="line">               return preparedStatement;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       &#x2F;&#x2F;创建keyHolder</span><br><span class="line">       GeneratedKeyHolder keyHolder &#x3D; new GeneratedKeyHolder();</span><br><span class="line">       jdbcTemplate.update(creator,keyHolder);</span><br><span class="line">       &#x2F;&#x2F;获得生成的主键</span><br><span class="line">       long userId &#x3D; keyHolder.getKey().longValue();</span><br><span class="line">       return userId; &#x2F;&#x2F;返回当前保存用户的id 该id是数据库自动生成的</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="query-：查"><a href="#query-：查" class="headerlink" title="query()：查"></a>query()：查</h4><h5 id="queryForMap"><a href="#queryForMap" class="headerlink" title="queryForMap()"></a>queryForMap()</h5><p>查询结果将结果集封装为map集合，将列名作为key，将值作为value 将这条记录封装为一个map集合</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void queryForMapTest()</span><br><span class="line">&#123;</span><br><span class="line">    Map&lt;String, Object&gt; rs &#x3D; jdbcTemplate.queryForMap(&quot;select * from account where NAME&#x3D;?&quot;, &quot;刘能&quot;);</span><br><span class="line">    System.out.println(rs);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：这个方法查询的结果集长度只能是1！！！</strong></p><h5 id="queryForList"><a href="#queryForList" class="headerlink" title="queryForList()"></a>queryForList()</h5><p>查询结果将结果集封装为list集合</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void queryForListTest()</span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps &#x3D; jdbcTemplate.queryForList(&quot;select * from account where id&#x3D;?&quot;, 5);</span><br><span class="line">    System.out.println(maps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong>注意：将每一条记录封装为一个Map集合，再将Map集合装载到List集合中</strong></li></ul><h5 id="query"><a href="#query" class="headerlink" title="query()"></a>query()</h5><ul><li>查询结果，将结果封装为JavaBean对象列表</li></ul><ul><li>query的参数：sql，RowMapper，args…<ul><li>一般我们使用BeanPropertyRowMapper实现类。可以完成数据到JavaBean的自动封装</li><li>new BeanPropertyRowMapper&lt;类型&gt;(类型.class)</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void queryTest()</span><br><span class="line">&#123;</span><br><span class="line">    List&lt;Emp&gt; emps &#x3D; jdbcTemplate.query(&quot;select * from account where id&#x3D;?&quot;, new BeanPropertyRowMapper&lt;Emp&gt;(Emp.class), 5);</span><br><span class="line">    System.out.println(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="queryForObject"><a href="#queryForObject" class="headerlink" title="queryForObject()"></a>queryForObject()</h5><ul><li><p>参数：sql，返回类型的class，args…</p></li><li><p>查询结果，将结果封装为对象</p></li></ul><ul><li>一般用于聚合函数的查询</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void queryForObjectTest()</span><br><span class="line">&#123;</span><br><span class="line">    Long count &#x3D; jdbcTemplate.queryForObject(&quot;select count(NAME) from account where id&#x3D;?&quot;, Long.class, 5);</span><br><span class="line">    System.out.println(count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库连接池 </tag>
            
            <tag> SpringTemplate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VM虚拟机和物理机共享文件夹</title>
      <link href="2021/01/12/VM%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E7%89%A9%E7%90%86%E6%9C%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
      <url>2021/01/12/VM%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E7%89%A9%E7%90%86%E6%9C%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
      
        <content type="html"><![CDATA[<p>VM虚拟机和实体机共享文件夹</p><a id="more"></a><h1 id="1-在VM中安装VMware-Tools"><a href="#1-在VM中安装VMware-Tools" class="headerlink" title="1.在VM中安装VMware Tools"></a>1.在VM中安装VMware Tools</h1><p><img src="/2021/01/12/VM%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E7%89%A9%E7%90%86%E6%9C%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/115206.jpg" alt></p><p><strong>如果没反应，看下面的提示，按win+R,输入D:\setup.exe手动安装,之后可能需要重启</strong></p><h1 id="2-在虚拟机-gt-设置-gt-选项-gt-共享文件夹-gt-总是启用"><a href="#2-在虚拟机-gt-设置-gt-选项-gt-共享文件夹-gt-总是启用" class="headerlink" title="2.在虚拟机-&gt;设置-&gt;选项-&gt;共享文件夹-&gt;总是启用"></a>2.在虚拟机-&gt;设置-&gt;选项-&gt;共享文件夹-&gt;总是启用</h1><p><strong>在下方点添加-&gt;选路径-&gt;勾选映射为驱动器(这一步一定要做！！！)一直下一步，直至完成</strong></p><h1 id="3-然后就可以在虚拟机我的电脑里面看到共享的驱动器了"><a href="#3-然后就可以在虚拟机我的电脑里面看到共享的驱动器了" class="headerlink" title="3.然后就可以在虚拟机我的电脑里面看到共享的驱动器了"></a>3.然后就可以在虚拟机我的电脑里面看到共享的驱动器了</h1><p><img src="/2021/01/12/VM%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E7%89%A9%E7%90%86%E6%9C%BA%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/121747.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> VM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VM </tag>
            
            <tag> 共享文件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Img_test</title>
      <link href="2021/01/12/Img-test/"/>
      <url>2021/01/12/Img-test/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><p><img src="/2021/01/12/Img-test/image-20210209202528421.png" alt="image-20210209202528421"></p>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java_idea生成类和方法注释</title>
      <link href="2021/01/11/Java-idea%E7%94%9F%E6%88%90%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A/"/>
      <url>2021/01/11/Java-idea%E7%94%9F%E6%88%90%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A/</url>
      
        <content type="html"><![CDATA[<p>自定义Idea类和方法的内容和快捷键</p><a id="more"></a><p>只演示方法的，类的同样操作即可</p><h1 id="1-Ctrl-Alt-S打开Idea设置-找到Editor-gt-Live-Templates"><a href="#1-Ctrl-Alt-S打开Idea设置-找到Editor-gt-Live-Templates" class="headerlink" title="1.Ctrl+Alt+S打开Idea设置,找到Editor-&gt;Live Templates"></a>1.Ctrl+Alt+S打开Idea设置,找到Editor-&gt;Live Templates</h1><h1 id="2-点右上角加号先添加Template-Group-命名为UserDefine"><a href="#2-点右上角加号先添加Template-Group-命名为UserDefine" class="headerlink" title="2.点右上角加号先添加Template Group(命名为UserDefine)"></a>2.点右上角加号先添加Template Group(命名为UserDefine)</h1><h1 id="3-选中UserDefine再次点加号选Live-Template"><a href="#3-选中UserDefine再次点加号选Live-Template" class="headerlink" title="3.选中UserDefine再次点加号选Live Template"></a>3.选中UserDefine再次点加号选Live Template</h1><h1 id="4-Abbreviation处为快捷键-我设的a-Template-Text如下"><a href="#4-Abbreviation处为快捷键-我设的a-Template-Text如下" class="headerlink" title="4.Abbreviation处为快捷键(我设的a),Template Text如下"></a>4.Abbreviation处为快捷键(我设的a),Template Text如下</h1><ul><li><p>方法注释</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">**</span><br><span class="line">* @Description: $description$</span><br><span class="line">* @Param: $params$</span><br><span class="line">* @return: $returns$</span><br><span class="line">* @Author: 此处改为你自己的名字</span><br><span class="line">* @Date: $date$</span><br><span class="line">**&#x2F;</span><br></pre></td></tr></table></figure></li><li><p>类注释(弄好方法注释之后类的自然也会)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">**</span><br><span class="line">* @ClassName: $params$</span><br><span class="line">* @Description: $description$</span><br><span class="line">* @Author: Zhong ZhenJie</span><br><span class="line">* @Date: $date$</span><br><span class="line">* @Version: 1.0</span><br><span class="line">**&#x2F;</span><br></pre></td></tr></table></figure></li></ul><h1 id="5-Template-Text下方Define处点开全选"><a href="#5-Template-Text下方Define处点开全选" class="headerlink" title="5.Template Text下方Define处点开全选"></a>5.Template Text下方Define处点开全选</h1><h1 id="6-可以点击右侧Edit-Variables点击Expression选择这一项要显示的东西"><a href="#6-可以点击右侧Edit-Variables点击Expression选择这一项要显示的东西" class="headerlink" title="6.可以点击右侧Edit Variables点击Expression选择这一项要显示的东西"></a>6.可以点击右侧Edit Variables点击Expression选择这一项要显示的东西</h1><h1 id="7-最后点OK，最终的快捷键为-a-Abbreviation处设置的键-Tab，类注释一样设置"><a href="#7-最后点OK，最终的快捷键为-a-Abbreviation处设置的键-Tab，类注释一样设置" class="headerlink" title="7.最后点OK，最终的快捷键为/+a(Abbreviation处设置的键)+Tab，类注释一样设置"></a>7.最后点OK，最终的快捷键为/+a(Abbreviation处设置的键)+Tab，类注释一样设置</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Idea </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Idea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java_idea生成类和方法注释</title>
      <link href="2021/01/11/MySQL%E7%BA%A6%E6%9D%9F/"/>
      <url>2021/01/11/MySQL%E7%BA%A6%E6%9D%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><pre><code>1. DQL:查询语句    1. 排序查询    2. 聚合函数    3. 分组查询    4. 分页查询2. 约束3. 多表之间的关系4. 范式5. 数据库的备份和还原</code></pre><a id="more"></a><h1 id="DQL-查询语句"><a href="#DQL-查询语句" class="headerlink" title="DQL:查询语句"></a>DQL:查询语句</h1><pre><code>1. 排序查询    * 语法：order by 子句        * order by 排序字段1 排序方式1 ，  排序字段2 排序方式2...    * 排序方式：        * ASC：升序，默认的。        * DESC：降序。    * 注意：        * 如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件。2. 聚合函数：将一列数据作为一个整体，进行纵向的计算。    1. count：计算个数        1. 一般选择非空的列：主键        2. count(*)    2. max：计算最大值    3. min：计算最小值    4. sum：计算和    5. avg：计算平均值    * 注意：聚合函数的计算，排除null值。        解决方案：            1. 选择不包含非空的列进行计算            2. IFNULL函数3. 分组查询:    1. 语法：group by 分组字段；    2. 注意：        1. 分组之后查询的字段：分组字段、聚合函数        2. where 和 having 的区别？            1. where 在分组之前进行限定，如果不满足条件，则不参与分组。having在分组之后进行限定，如果不满足结果，则不会被查询出来            2. where 后不可以跟聚合函数，having可以进行聚合函数的判断。        -- 按照性别分组。分别查询男、女同学的平均分        SELECT sex , AVG(math) FROM student GROUP BY sex;        -- 按照性别分组。分别查询男、女同学的平均分,人数        SELECT sex , AVG(math),COUNT(id) FROM student GROUP BY sex;        --  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组        SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex;        --  按照性别分组。分别查询男、女同学的平均分,人数 要求：分数低于70分的人，不参与分组,分组之后。人数要大于2个人        SELECT sex , AVG(math),COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex HAVING COUNT(id) &gt; 2;        SELECT sex , AVG(math),COUNT(id) 人数 FROM student WHERE math &gt; 70 GROUP BY sex HAVING 人数 &gt; 2;</code></pre><p>​<br>​    4. 分页查询<br>​        1. 语法：limit 开始的索引,每页查询的条数;<br>​        2. 公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数<br>​            – 每页显示3条记录<br>​<br>​            SELECT * FROM student LIMIT 0,3; – 第1页<br>​<br>            SELECT * FROM student LIMIT 3,3; – 第2页</p><pre><code>    SELECT * FROM student LIMIT 6,3; -- 第3页3. limit 是一个MySQL&quot;方言&quot;</code></pre><h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><pre><code>* 概念： 对表中的数据进行限定，保证数据的正确性、有效性和完整性。    * 分类：    1. 主键约束：primary key    2. 非空约束：not null    3. 唯一约束：unique    4. 外键约束：foreign key* 非空约束：not null，值不能为null    1. 创建表时添加约束        CREATE TABLE stu(            id INT,            NAME VARCHAR(20) NOT NULL -- name为非空        );    2. 创建表完后，添加非空约束        ALTER TABLE stu MODIFY NAME VARCHAR(20) NOT NULL;    3. 删除name的非空约束        ALTER TABLE stu MODIFY NAME VARCHAR(20);</code></pre><p>​<br>​    * 唯一约束：unique，值不能重复<br>​        1. 创建表时，添加唯一约束<br>​            CREATE TABLE stu(<br>​                id INT,<br>​                phone_number VARCHAR(20) UNIQUE – 添加了唯一约束<br>​<br>​            );<br>​            * 注意mysql中，唯一约束限定的列的值可以有多个null</p><p>​<br>​        2. 删除唯一约束<br>​<br>​            ALTER TABLE stu DROP INDEX phone_number;<br>​<br>        3. 在创建表后，添加唯一约束<br>            ALTER TABLE stu MODIFY phone_number VARCHAR(20) UNIQUE;</p><pre><code>* 主键约束：primary key。    1. 注意：        1. 含义：非空且唯一        2. 一张表只能有一个字段为主键        3. 主键就是表中记录的唯一标识    2. 在创建表时，添加主键约束        create table stu(            id int primary key,-- 给id添加主键约束            name varchar(20)        );    3. 删除主键        -- 错误 alter table stu modify id int ;        ALTER TABLE stu DROP PRIMARY KEY;    4. 创建完表后，添加主键        ALTER TABLE stu MODIFY id INT PRIMARY KEY;    5. 自动增长：        1.  概念：如果某一列是数值类型的，使用 auto_increment 可以来完成值得自动增长        2. 在创建表时，添加主键约束，并且完成主键自增长        create table stu(            id int primary key auto_increment,-- 给id添加主键约束            name varchar(20)        );</code></pre><p>​<br>​            3. 删除自动增长<br>​            ALTER TABLE stu MODIFY id INT;<br>​            4. 添加自动增长<br>​            ALTER TABLE stu MODIFY id INT AUTO_INCREMENT;</p><pre><code>* 外键约束：foreign key,让表于表产生关系，从而保证数据的正确性。    1. 在创建表时，可以添加外键        * 语法：            create table 表名(                ....                外键列                constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称)            );    2. 删除外键        ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;    3. 创建表之后，添加外键        ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);</code></pre><p>​<br>​        4. 级联操作<br>​            1. 添加级联操作<br>​                语法：ALTER TABLE 表名 ADD CONSTRAINT 外键名称<br>​                        FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称) ON UPDATE CASCADE ON DELETE CASCADE  ;<br>​            2. 分类：<br>​                1. 级联更新：ON UPDATE CASCADE<br>​                2. 级联删除：ON DELETE CASCADE </p><h2 id="数据库的设计"><a href="#数据库的设计" class="headerlink" title="数据库的设计"></a>数据库的设计</h2><pre><code>1. 多表之间的关系    1. 分类：        1. 一对一(了解)：            * 如：人和身份证            * 分析：一个人只有一个身份证，一个身份证只能对应一个人        2. 一对多(多对一)：            * 如：部门和员工            * 分析：一个部门有多个员工，一个员工只能对应一个部门        3. 多对多：            * 如：学生和课程            * 分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择    2. 实现关系：        1. 一对多(多对一)：            * 如：部门和员工            * 实现方式：在多的一方建立外键，指向一的一方的主键。        2. 多对多：            * 如：学生和课程            * 实现方式：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键        3. 一对一(了解)：            * 如：人和身份证            * 实现方式：一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。</code></pre><p>​<br>​    2. 数据库设计的范式<br>​        * 概念：设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求<br>​<br>​            设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。<br>​            目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。<br>​<br>        * 分类：<br>            1. 第一范式（1NF）：每一列都是不可分割的原子数据项<br>            2. 第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）<br>                * 几个概念：<br>                    1. 函数依赖：A–&gt;B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A<br>                        例如：学号–&gt;姓名。  （学号，课程名称） –&gt; 分数<br>                    2. 完全函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值得确定需要依赖于A属性组中所有的属性值。<br>                        例如：（学号，课程名称） –&gt; 分数<br>                    3. 部分函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中某一些值即可。<br>                        例如：（学号，课程名称） – &gt; 姓名<br>                    4. 传递函数依赖：A–&gt;B, B – &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A<br>                        例如：学号–&gt;系名，系名–&gt;系主任<br>                    5. 码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码<br>                        例如：该表中码为：（学号，课程名称）<br>                        * 主属性：码属性组中的所有属性<br>                        * 非主属性：除过码属性组的属性</p><pre><code>3. 第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</code></pre><h2 id="数据库的备份和还原"><a href="#数据库的备份和还原" class="headerlink" title="数据库的备份和还原"></a>数据库的备份和还原</h2><pre><code>1. 命令行：    * 语法：        * 备份： mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径        * 还原：            1. 登录数据库            2. 创建数据库            3. 使用数据库            4. 执行文件。source 文件路径2. 图形化工具：</code></pre>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SQL约束 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SQL约束 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java_idea生成类和方法注释</title>
      <link href="2021/01/11/Java_JDBC/"/>
      <url>2021/01/11/Java_JDBC/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ol><li>JDBC基本概念</li><li>快速入门</li><li>对JDBC中各个接口和类详解</li></ol><a id="more"></a><h1 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h1><ul><li><p>Java DataBase Connectivity  Java 数据库连接， Java语言操作数据库</p></li><li><p>JDBC本质：其实是官方（sun公司）定义的一套操作所有关系型数据库的规则，即接口。各个数据库厂商去实现这套接口，提供数据库驱动jar包。我们可以使用这套接口（JDBC）编程，真正执行的代码是驱动jar包中的实现类。</p></li></ul><h1 id="2-快速入门"><a href="#2-快速入门" class="headerlink" title="2. 快速入门"></a>2. 快速入门</h1><h2 id="1-步骤："><a href="#1-步骤：" class="headerlink" title="1.步骤："></a>1.步骤：</h2><ol><li><p>导入驱动jar包 mysql-connector-java-5.1.37-bin.jar</p><pre><code>1.复制mysql-connector-java-5.1.37-bin.jar到项目的libs目录下2.右键--&gt;Add As Library</code></pre></li><li><p>注册驱动</p></li><li><p>获取数据库连接对象 Connection</p></li><li><p>定义sql</p></li><li><p>获取执行sql语句的对象 Statement</p></li><li><p>执行sql，接受返回结果</p></li><li><p>处理结果</p></li><li><p>释放资源</p></li></ol><h2 id="2-代码实现"><a href="#2-代码实现" class="headerlink" title="2. 代码实现"></a>2. 代码实现</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;1. 导入驱动jar包</span><br><span class="line">&#x2F;&#x2F;2.注册驱动</span><br><span class="line">Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">&#x2F;&#x2F;3.获取数据库连接对象</span><br><span class="line">Connection conn &#x3D; DriverManager.getConnection(&quot;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;db3&quot;, &quot;root&quot;, &quot;root&quot;);</span><br><span class="line">&#x2F;&#x2F;4.定义sql语句</span><br><span class="line">String sql &#x3D; &quot;update account set balance &#x3D; 500 where id &#x3D; 1&quot;;</span><br><span class="line">&#x2F;&#x2F;5.获取执行sql的对象 Statement</span><br><span class="line">Statement stmt &#x3D; conn.createStatement();</span><br><span class="line">&#x2F;&#x2F;6.执行sql</span><br><span class="line">int count &#x3D; stmt.executeUpdate(sql);</span><br><span class="line">&#x2F;&#x2F;7.处理结果</span><br><span class="line">System.out.println(count);</span><br><span class="line">&#x2F;&#x2F;8.释放资源</span><br><span class="line">stmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure><h1 id="3-详解各个对象"><a href="#3-详解各个对象" class="headerlink" title="3. 详解各个对象"></a>3. 详解各个对象</h1><h2 id="1-DriverManager：驱动管理对象"><a href="#1-DriverManager：驱动管理对象" class="headerlink" title="1.DriverManager：驱动管理对象"></a>1.DriverManager：驱动管理对象</h2><ol><li><h5 id="注册驱动：告诉程序该使用哪一个数据库驱动jar"><a href="#注册驱动：告诉程序该使用哪一个数据库驱动jar" class="headerlink" title="注册驱动：告诉程序该使用哪一个数据库驱动jar"></a>注册驱动：告诉程序该使用哪一个数据库驱动jar</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">static void registerDriver(Driver driver) :注册与给定的驱动程序 DriverManager 。 </span><br><span class="line">写代码使用：  Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">通过查看源码发现：在com.mysql.jdbc.Driver类中存在静态代码块</span><br><span class="line"> static &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            java.sql.DriverManager.registerDriver(new Driver());</span><br><span class="line">        &#125; catch (SQLException E) &#123;</span><br><span class="line">            throw new RuntimeException(&quot;Can&#39;t register driver!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>注意：mysql5之后的驱动jar包可以省略注册驱动的步骤。</li></ul></li><li><h5 id="获取数据库连接"><a href="#获取数据库连接" class="headerlink" title="获取数据库连接"></a>获取数据库连接</h5></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static Connection getConnection(String url, String user, String password)</span><br></pre></td></tr></table></figure><ol><li>url：指定连接的路径<ul><li>例子：jdbc:mysql://localhost:3306/db3</li><li>细节：如果连接的是本机mysql服务器，并且mysql服务默认端口是3306，则url可以简写为：jdbc:mysql:///数据库名称</li></ul></li><li>user：用户名</li><li>password：密码 </li></ol><h2 id="2-Statement：执行sql的对象"><a href="#2-Statement：执行sql的对象" class="headerlink" title="2. Statement：执行sql的对象"></a>2. Statement：执行sql的对象</h2><ol><li><h5 id="boolean-execute-String-sql"><a href="#boolean-execute-String-sql" class="headerlink" title="boolean execute(String sql)"></a>boolean execute(String sql)</h5><ul><li>可以执行任意的sql 了解 </li></ul></li><li><h5 id="int-executeUpdate-String-sql"><a href="#int-executeUpdate-String-sql" class="headerlink" title="int executeUpdate(String sql)"></a>int executeUpdate(String sql)</h5><ul><li>执行DML（insert、update、delete）语句、DDL(create，alter、drop)语句</li><li>返回值：影响的行数，可以通过这个影响的行数判断DML语句是否执行成功 返回值&gt;0的则执行成功，反之，则失败，</li></ul></li><li><h5 id="ResultSet-executeQuery-String-sql"><a href="#ResultSet-executeQuery-String-sql" class="headerlink" title="ResultSet executeQuery(String sql)"></a>ResultSet executeQuery(String sql)</h5><ul><li>执行DQL（select)语句</li></ul></li></ol><h2 id="3-PreparedStatement-防SQL注入、执行sql的对象"><a href="#3-PreparedStatement-防SQL注入、执行sql的对象" class="headerlink" title="3.PreparedStatement  防SQL注入、执行sql的对象"></a>3.PreparedStatement  防SQL注入、执行sql的对象</h2><ul><li>后期都会使用PreparedStatement来完成增删改查的所有操作<ol><li>可以防止SQL注入<ol start="2"><li>效率更高</li></ol></li></ol></li></ul><ol><li><h5 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h5><p>输入用户随便，输入密码：<code>a&#39; or &#39;a&#39; = &#39;a</code></p><p>sql：select * from user where username = ‘fhdsjkf’ and password = ‘a’ or ‘a’ = ‘a’ </p><p>在拼接sql时，有一些sql的特殊关键字参与字符串的拼接。会造成安全性问题</p></li><li><h5 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h5><ol><li><p>定义sql，”？”作为占位符</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如：String sql&#x3D;&quot;select * from user where username &#x3D; ? and password &#x3D; ?&quot;;</span><br></pre></td></tr></table></figure></li><li><p>获取执行sql语句的对象 PreparedStatement  Connection.prepareStatement(String sql) </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PreparedStatement  ps&#x3D;connection.prepareStatement(sql)</span><br></pre></td></tr></table></figure></li><li><p>给？赋值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setXxx(参数1,参数2)</span><br><span class="line">参数1：？的位置编号 从1 开始</span><br><span class="line">参数2：？的值</span><br><span class="line"></span><br><span class="line">ps.setString(1,&quot;张三&quot;)</span><br></pre></td></tr></table></figure></li><li><p>执行sql，接受返回结果，不需要传递sql语句</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ResultSet rs&#x3D;ps.executeQuery();</span><br></pre></td></tr></table></figure></li></ol></li></ol><h2 id="4-ResultSet：结果集对象-封装查询结果"><a href="#4-ResultSet：结果集对象-封装查询结果" class="headerlink" title="4.ResultSet：结果集对象,封装查询结果"></a>4.ResultSet：结果集对象,封装查询结果</h2><ol><li><h5 id="boolean-next"><a href="#boolean-next" class="headerlink" title="boolean next()"></a>boolean next()</h5><ul><li>游标向下移动一行，判断当前行是否是最后一行末尾(是否有数据)，如果是，则返回false，如果不是则返回true</li></ul></li><li><h5 id="getXxx-参数-获取数据"><a href="#getXxx-参数-获取数据" class="headerlink" title="getXxx(参数):获取数据"></a>getXxx(参数):获取数据</h5><ul><li>Xxx：代表数据类型   如： int getInt() ,    String getString()</li><li>参数：<ul><li>int：代表列的编号,从1开始   如： getString(1)</li><li>String：代表列名称。 如： getDouble(“balance”)</li></ul></li></ul></li><li><h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">while(rs.next())&#123;</span><br><span class="line">                &#x2F;&#x2F;获取数据</span><br><span class="line">                &#x2F;&#x2F;6.2 获取数据</span><br><span class="line">                int id &#x3D; rs.getInt(1);</span><br><span class="line">                String name &#x3D; rs.getString(&quot;name&quot;);</span><br><span class="line">                double balance &#x3D; rs.getDouble(3);</span><br><span class="line"></span><br><span class="line">                System.out.println(id + &quot;---&quot; + name + &quot;---&quot; + balance);</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="4-抽取JDBC工具类-：-JDBCUtils"><a href="#4-抽取JDBC工具类-：-JDBCUtils" class="headerlink" title="4.抽取JDBC工具类 ： JDBCUtils"></a>4.抽取JDBC工具类 ： JDBCUtils</h1><ul><li><strong>目的：简化书写</strong></li></ul><h2 id="1-分析"><a href="#1-分析" class="headerlink" title="1.分析"></a>1.分析</h2><ol><li><p>注册驱动也抽取</p></li><li><p>抽取一个方法获取连接对象</p><ul><li><p>需求：不想传递参数（麻烦），还得保证工具类的通用性。</p></li><li><p>解决：配置文件jdbc.properties</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url&#x3D;</span><br><span class="line">user&#x3D;</span><br><span class="line">password&#x3D;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>抽取一个方法释放资源</p></li></ol><h2 id="2-代码"><a href="#2-代码" class="headerlink" title="2.代码"></a>2.代码</h2><pre><code>public class JDBCUtils {    private static String url;    private static String user;    private static String password;    private static String driver;    static {        try {            ClassLoader classLoader = JDBCUtils.class.getClassLoader();            URL res = classLoader.getResource(&quot;jdbc.properties&quot;);            String path = res.getPath();            Properties pro = new Properties();            pro.load(new FileReader(path));            url = pro.getProperty(&quot;url&quot;);            user = pro.getProperty(&quot;user&quot;);            password = pro.getProperty(&quot;password&quot;);            driver = pro.getProperty(&quot;driver&quot;);            Class.forName(driver);        } catch (FileNotFoundException e) {            e.printStackTrace();        } catch (IOException e) {            e.printStackTrace();        } catch (ClassNotFoundException e) {            e.printStackTrace();        }    }    public static Connection getConnection() throws SQLException {        Connection connection = DriverManager.getConnection(url, user, password);        System.out.println(url+&quot;---数据库连接成功&quot;);        return connection;    }    public static void close(Statement statement,Connection connection)    {        if(statement!=null) {            try {                statement.close();            } catch (SQLException throwables) {                throwables.printStackTrace();            }        }        if(connection!=null) {            try {                statement.close();            } catch (SQLException throwables) {                throwables.printStackTrace();            }        }        System.out.println(url+&quot;---数据库关闭成功&quot;);    }    public static void close(ResultSet resultSet,Statement statement, Connection connection)    {        if(resultSet!=null) {            try {                statement.close();            } catch (SQLException throwables) {                throwables.printStackTrace();            }        }        if(statement!=null) {            try {                statement.close();            } catch (SQLException throwables) {                throwables.printStackTrace();            }        }        if(connection!=null) {            try {                statement.close();            } catch (SQLException throwables) {                throwables.printStackTrace();            }        }        System.out.println(url+&quot;---数据库关闭成功&quot;);    }}</code></pre><p>​                            </p><h1 id="5-JDBC控制事务："><a href="#5-JDBC控制事务：" class="headerlink" title="5.JDBC控制事务："></a>5.JDBC控制事务：</h1><p>事务：一个包含多个步骤的业务操作。如果这个业务操作被事务管理，则这多个步骤要么同时成功，要么同时失败。</p><h2 id="1-开启事务"><a href="#1-开启事务" class="headerlink" title="1. 开启事务"></a>1. 开启事务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setAutoCommit(boolean autoCommit) ：调用该方法设置参数为false，即开启事务</span><br></pre></td></tr></table></figure><ul><li>注意：在执行sql之前开启事务</li></ul><h2 id="2-提交事务"><a href="#2-提交事务" class="headerlink" title="2.提交事务"></a>2.提交事务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commit()        &#x2F;&#x2F;当所有sql都执行完提交事务</span><br></pre></td></tr></table></figure><h2 id="3-回滚事务"><a href="#3-回滚事务" class="headerlink" title="3.回滚事务"></a>3.回滚事务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rollback()     &#x2F;&#x2F;在catch中回滚事务</span><br></pre></td></tr></table></figure><h2 id="4-代码示例"><a href="#4-代码示例" class="headerlink" title="4.代码示例"></a>4.代码示例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">public class JDBCDemo10 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Connection conn &#x3D; null;</span><br><span class="line">        PreparedStatement pstmt1 &#x3D; null;</span><br><span class="line">        PreparedStatement pstmt2 &#x3D; null;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            &#x2F;&#x2F;1.获取连接</span><br><span class="line">            conn &#x3D; JDBCUtils.getConnection();</span><br><span class="line">            &#x2F;&#x2F;开启事务</span><br><span class="line">            conn.setAutoCommit(false);</span><br><span class="line"></span><br><span class="line">            &#x2F;&#x2F;2.定义sql</span><br><span class="line">            &#x2F;&#x2F;2.1 张三 - 500</span><br><span class="line">            String sql1 &#x3D; &quot;update account set balance &#x3D; balance - ? where id &#x3D; ?&quot;;</span><br><span class="line">            &#x2F;&#x2F;2.2 李四 + 500</span><br><span class="line">            String sql2 &#x3D; &quot;update account set balance &#x3D; balance + ? where id &#x3D; ?&quot;;</span><br><span class="line">            &#x2F;&#x2F;3.获取执行sql对象</span><br><span class="line">            pstmt1 &#x3D; conn.prepareStatement(sql1);</span><br><span class="line">            pstmt2 &#x3D; conn.prepareStatement(sql2);</span><br><span class="line">            &#x2F;&#x2F;4. 设置参数</span><br><span class="line">            pstmt1.setDouble(1,500);</span><br><span class="line">            pstmt1.setInt(2,1);</span><br><span class="line"></span><br><span class="line">            pstmt2.setDouble(1,500);</span><br><span class="line">            pstmt2.setInt(2,2);</span><br><span class="line">            &#x2F;&#x2F;5.执行sql</span><br><span class="line">            pstmt1.executeUpdate();</span><br><span class="line">            &#x2F;&#x2F; 手动制造异常</span><br><span class="line">            int i &#x3D; 3&#x2F;0;</span><br><span class="line"></span><br><span class="line">            pstmt2.executeUpdate();</span><br><span class="line">            &#x2F;&#x2F;提交事务</span><br><span class="line">            conn.commit();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            &#x2F;&#x2F;事务回滚</span><br><span class="line">            try &#123;</span><br><span class="line">                if(conn !&#x3D; null) &#123;</span><br><span class="line">                    conn.rollback();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (SQLException e1) &#123;</span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;finally &#123;</span><br><span class="line">            JDBCUtils.close(pstmt1,conn);</span><br><span class="line">            JDBCUtils.close(pstmt2,null);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><pre><code>1. 2. 操作：    1.    2. 提交事务    3. 回滚事务3. 使用Connection对象来管理事务    * 开启事务：setAutoCommit(boolean autoCommit) ：调用该方法设置参数为false，即开启事务        * 在执行sql之前开启事务    * 提交事务：commit()         * 当所有sql都执行完提交事务    * 回滚事务：rollback()         * 在catch中回滚事务4. 代码：</code></pre><p>​        </p><p>​            </p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java_propertise传递信息</title>
      <link href="2021/01/11/Java-propertise%E4%BC%A0%E9%80%92%E4%BF%A1%E6%81%AF/"/>
      <url>2021/01/11/Java-propertise%E4%BC%A0%E9%80%92%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p>用Java中的propertise传递信息(类似键值对)</p><a id="more"></a><h1 id="1-在src文件夹下新建xxx-propertise文件"><a href="#1-在src文件夹下新建xxx-propertise文件" class="headerlink" title="1.在src文件夹下新建xxx.propertise文件"></a>1.在src文件夹下新建xxx.propertise文件</h1><p>文件内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url&#x3D;urltest</span><br><span class="line">user&#x3D;usertest</span><br><span class="line">password&#x3D;passwordtest</span><br><span class="line">driver&#x3D;drivertest</span><br></pre></td></tr></table></figure><h1 id="2-用ClassLoder获取xxx-propertise的路径"><a href="#2-用ClassLoder获取xxx-propertise的路径" class="headerlink" title="2.用ClassLoder获取xxx.propertise的路径"></a>2.用ClassLoder获取xxx.propertise的路径</h1><p>不要写成绝对路径(没有通用性)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ClassLoader classLoader &#x3D; JDBCUtils.class.getClassLoader();</span><br><span class="line">URL res &#x3D; classLoader.getResource(&quot;xxx.properties&quot;);</span><br><span class="line">String path &#x3D; res.getPath();</span><br></pre></td></tr></table></figure><h1 id="3-利用Propertise类获取各个信息"><a href="#3-利用Propertise类获取各个信息" class="headerlink" title="3.利用Propertise类获取各个信息"></a>3.利用Propertise类获取各个信息</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Properties pro &#x3D; new Properties();</span><br><span class="line">pro.load(new FileReader(path));</span><br><span class="line">String url &#x3D; pro.getProperty(&quot;url&quot;);</span><br><span class="line">String user &#x3D; pro.getProperty(&quot;user&quot;);</span><br><span class="line">String password &#x3D; pro.getProperty(&quot;password&quot;);</span><br><span class="line">String driver &#x3D; pro.getProperty(&quot;driver&quot;);</span><br></pre></td></tr></table></figure><h1 id="4-完整代码"><a href="#4-完整代码" class="headerlink" title="4.完整代码"></a>4.完整代码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package primary_connect;</span><br><span class="line"></span><br><span class="line">import java.io.FileReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.net.URL;</span><br><span class="line">import java.util.Properties;</span><br><span class="line">public class JDBCUtils &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            ClassLoader classLoader &#x3D; JDBCUtils.class.getClassLoader();</span><br><span class="line">            URL res &#x3D; classLoader.getResource(&quot;jdbc.properties&quot;);</span><br><span class="line">            String path &#x3D; res.getPath();</span><br><span class="line">            Properties pro &#x3D; new Properties();</span><br><span class="line">            pro.load(new FileReader(path));</span><br><span class="line">            String url &#x3D; pro.getProperty(&quot;url&quot;);</span><br><span class="line">            String user &#x3D; pro.getProperty(&quot;user&quot;);</span><br><span class="line">            String password &#x3D; pro.getProperty(&quot;password&quot;);</span><br><span class="line">            String driver &#x3D; pro.getProperty(&quot;driver&quot;);</span><br><span class="line">            System.out.println(&quot;url&#x3D;&quot;+url);</span><br><span class="line">            System.out.println(&quot;user&#x3D;&quot;+user);</span><br><span class="line">            System.out.println(&quot;password&#x3D;&quot;+password);</span><br><span class="line">            System.out.println(&quot;driver&#x3D;&quot;+driver);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-可能出现的问题"><a href="#5-可能出现的问题" class="headerlink" title="5.可能出现的问题"></a>5.可能出现的问题</h1><h2 id="1-加载时出现空指针异常"><a href="#1-加载时出现空指针异常" class="headerlink" title="1.加载时出现空指针异常"></a>1.加载时出现空指针异常</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream is &#x3D; JedisUtils.class.getClassLoader().getResourceAsStream(&quot;jedis.properties&quot;);</span><br></pre></td></tr></table></figure><ul><li><p>解决办法</p><p>在src下新建resourse包，，将jedis.properties放进去，然后点File-&gt;project structure-&gt;mudules 右键resourse文件夹，点resource</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> 配置文件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Properties </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL基础</title>
      <link href="2021/01/11/MySQL%E5%9F%BA%E7%A1%80/"/>
      <url>2021/01/11/MySQL%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><ol><li>MySQL数据库软件</li></ol><ol start="2"><li><ol><li>安装<ol start="2"><li>卸载</li><li>配置</li></ol></li></ol></li><li><p>SQL</p></li></ol><h1 id="MySQL数据库软件"><a href="#MySQL数据库软件" class="headerlink" title="MySQL数据库软件"></a>MySQL数据库软件</h1><pre><code>1. 安装    * 参见《MySQL基础.pdf》2. 卸载    1. 去mysql的安装目录找到my.ini文件        * 复制 datadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;    2. 卸载MySQL    3. 删除C:/ProgramData目录下的MySQL文件夹。3. 配置    * MySQL服务启动        1. 手动。        2. cmd--&gt; services.msc 打开服务的窗口        3. 使用管理员打开cmd            * net start mysql : 启动mysql的服务            * net stop mysql:关闭mysql服务    * MySQL登录        1. mysql -uroot -p密码        2. mysql -hip -uroot -p连接目标的密码        3. mysql --host=ip --user=root --password=连接目标的密码    * MySQL退出        1. exit        2. quit    * MySQL目录结构        1. MySQL安装目录：basedir=&quot;D:/develop/MySQL/&quot;            * 配置文件 my.ini        2. MySQL数据目录：datadir=&quot;C:/ProgramData/MySQL/MySQL Server 5.5/Data/&quot;            * 几个概念                * 数据库：文件夹                * 表：文件                * 数据：数据</code></pre><h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><pre><code>1.什么是SQL？    Structured Query Language：结构化查询语言2.SQL通用语法    1. SQL 语句可以单行或多行书写，以分号结尾。    2. 可使用空格和缩进来增强语句的可读性。    3. MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。    4. 3 种注释        * 单行注释: -- 注释内容 或 # 注释内容(mysql 特有)         * 多行注释: /* 注释 */3. SQL分类    1) DDL(Data Definition Language)数据定义语言        用来定义数据库对象：数据库，表，列等。关键字：create, drop,alter 等    2) DML(Data Manipulation Language)数据操作语言        用来对数据库中表的数据进行增删改。关键字：insert, delete, update 等    3) DQL(Data Query Language)数据查询语言        用来查询数据库中表的记录(数据)。关键字：select, where 等    4) DCL(Data Control Language)数据控制语言(了解)        用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等</code></pre><h2 id="DDL-操作数据库、表"><a href="#DDL-操作数据库、表" class="headerlink" title="DDL:操作数据库、表"></a>DDL:操作数据库、表</h2><pre><code>1. 操作数据库：CRUD    1. C(Create):创建        * 创建数据库：            * create database 数据库名称;        * 创建数据库，判断不存在，再创建：            * create database if not exists 数据库名称;        * 创建数据库，并指定字符集            * create database 数据库名称 character set 字符集名;    2. R(Retrieve)：查询        * 查询所有数据库的名称:            * show databases;        * 查询某个数据库的字符集:查询某个数据库的创建语句            * show create database 数据库名称;    3. U(Update):修改        * 修改数据库的字符集            * alter database 数据库名称 character set 字符集名称;    4. D(Delete):删除        * 删除数据库            * drop database 数据库名称;        * 判断数据库存在，存在再删除            * drop database if exists 数据库名称;    5. 使用数据库        * 查询当前正在使用的数据库名称            * select database();        * 使用数据库            * use 数据库名称;2. 操作表    1. C(Create):创建        1. 语法：            create table 表名(                列名1 数据类型1,                列名2 数据类型2,                ....                列名n 数据类型n            );            * 注意：最后一列，不需要加逗号（,）            * 数据库类型：                1. int：整数类型                    * age int,                2. double:小数类型                    * score double(5,2)                3. date:日期，只包含年月日，yyyy-MM-dd                4. datetime:日期，包含年月日时分秒     yyyy-MM-dd HH:mm:ss                5. timestamp:时间错类型    包含年月日时分秒     yyyy-MM-dd HH:mm:ss                        * 如果将来不给这个字段赋值，或赋值为null，则默认使用当前的系统时间，来自动赋值                6. varchar：字符串                    * name varchar(20):姓名最大20个字符                    * zhangsan 8个字符  张三 2个字符        * 创建表            create table student(                id int,                name varchar(32),                age int ,                score double(4,1),                birthday date,                insert_time timestamp            );        * 复制表：            * create table 表名 like 被复制的表名;              2. R(Retrieve)：查询        * 查询某个数据库中所有的表名称            * show tables;        * 查询表结构            * desc 表名;    3. U(Update):修改        1. 修改表名            alter table 表名 rename to 新的表名;        2. 修改表的字符集            alter table 表名 character set 字符集名称;        3. 添加一列            alter table 表名 add 列名 数据类型;        4. 修改列名称 类型            alter table 表名 change 列名 新列别 新数据类型;            alter table 表名 modify 列名 新数据类型;        5. 删除列            alter table 表名 drop 列名;    4. D(Delete):删除        * drop table 表名;        * drop table  if exists 表名 ;</code></pre><ul><li>客户端图形化工具：SQLYog</li></ul><h2 id="DML：增删改表中数据"><a href="#DML：增删改表中数据" class="headerlink" title="DML：增删改表中数据"></a>DML：增删改表中数据</h2><pre><code>1. 添加数据：    * 语法：        * insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);    * 注意：        1. 列名和值要一一对应。        2. 如果表名后，不定义列名，则默认给所有列添加值            insert into 表名 values(值1,值2,...值n);        3. 除了数字类型，其他类型需要使用引号(单双都可以)引起来2. 删除数据：    * 语法：        * delete from 表名 [where 条件]    * 注意：        1. 如果不加条件，则删除表中所有记录。        2. 如果要删除所有记录            1. delete from 表名; -- 不推荐使用。有多少条记录就会执行多少次删除操作            2. TRUNCATE TABLE 表名; -- 推荐使用，效率更高 先删除表，然后再创建一张一样的表。3. 修改数据：    * 语法：        * update 表名 set 列名1 = 值1, 列名2 = 值2,... [where 条件];    * 注意：        1. 如果不加任何条件，则会将表中所有记录全部修改。</code></pre><h2 id="DQL：查询表中的记录"><a href="#DQL：查询表中的记录" class="headerlink" title="DQL：查询表中的记录"></a>DQL：查询表中的记录</h2><pre><code>* select * from 表名;1. 语法：    select        字段列表    from        表名列表    where        条件列表    group by        分组字段    having        分组之后的条件    order by        排序    limit        分页限定2. 基础查询    1. 多个字段的查询        select 字段名1，字段名2... from 表名；        * 注意：            * 如果查询所有字段，则可以使用*来替代字段列表。    2. 去除重复：        * distinct    3. 计算列        * 一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算）        * ifnull(表达式1,表达式2)：null参与的运算，计算结果都为null            * 表达式1：哪个字段需要判断是否为null            * 如果该字段为null后的替换值。    4. 起别名：        * as：as也可以省略3. 条件查询    1. where子句后跟条件    2. 运算符        * &gt; 、&lt; 、&lt;= 、&gt;= 、= 、&lt;&gt;        * BETWEEN...AND          * IN( 集合)         * LIKE：模糊查询            * 占位符：                * _:单个任意字符                * %：多个任意字符        * IS NULL          * and  或 &amp;&amp;        * or  或 ||         * not  或 !            -- 查询年龄大于20岁            SELECT * FROM student WHERE age &gt; 20;            SELECT * FROM student WHERE age &gt;= 20;            -- 查询年龄等于20岁            SELECT * FROM student WHERE age = 20;            -- 查询年龄不等于20岁            SELECT * FROM student WHERE age != 20;            SELECT * FROM student WHERE age &lt;&gt; 20;            -- 查询年龄大于等于20 小于等于30            SELECT * FROM student WHERE age &gt;= 20 &amp;&amp;  age &lt;=30;            SELECT * FROM student WHERE age &gt;= 20 AND  age &lt;=30;            SELECT * FROM student WHERE age BETWEEN 20 AND 30;            -- 查询年龄22岁，18岁，25岁的信息            SELECT * FROM student WHERE age = 22 OR age = 18 OR age = 25            SELECT * FROM student WHERE age IN (22,18,25);            -- 查询英语成绩为null            SELECT * FROM student WHERE english = NULL; -- 不对的。null值不能使用 = （!=） 判断            SELECT * FROM student WHERE english IS NULL;            -- 查询英语成绩不为null            SELECT * FROM student WHERE english  IS NOT NULL;            -- 查询姓马的有哪些？ like            SELECT * FROM student WHERE NAME LIKE &apos;马%&apos;;            -- 查询姓名第二个字是化的人            SELECT * FROM student WHERE NAME LIKE &quot;_化%&quot;;            -- 查询姓名是3个字的人            SELECT * FROM student WHERE NAME LIKE &apos;___&apos;;</code></pre><p>​<br>                – 查询姓名中包含德的人<br>                SELECT * FROM student WHERE NAME LIKE ‘%德%’;</p><p>​    </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Java_JDBC</title>
      <link href="2021/01/11/Java-JDBC/"/>
      <url>2021/01/11/Java-JDBC/</url>
      
        <content type="html"><![CDATA[<p>记录JDBC的流程和代码</p><a id="more"></a><h1 id="1-安装mysql和SQLyog"><a href="#1-安装mysql和SQLyog" class="headerlink" title="1.安装mysql和SQLyog"></a>1.安装mysql和SQLyog</h1><p>官网都有</p><h1 id="2-下载mysql的jar包"><a href="#2-下载mysql的jar包" class="headerlink" title="2.下载mysql的jar包"></a>2.下载mysql的jar包</h1><p>自行搜索</p><h1 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> JDBC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JDBC </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+github_pages+阿里云域名</title>
      <link href="2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/"/>
      <url>2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/</url>
      
        <content type="html"><![CDATA[<p>hexo+github_pages+阿里云域名，整理自B站视频:<a href="https://www.bilibili.com/video/BV1Yb411a7ty" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Yb411a7ty</a></p><a id="more"></a><h1 id="1-安装Node-js"><a href="#1-安装Node-js" class="headerlink" title="1.安装Node.js"></a>1.安装Node.js</h1><p>官网:<a href="https://nodejs.org/en/xia安装LTS版本即可" target="_blank" rel="noopener">https://nodejs.org/en/xia安装LTS版本即可</a></p><h1 id="2-安装-Git"><a href="#2-安装-Git" class="headerlink" title="2.安装 Git"></a>2.安装 Git</h1><p>官网:<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">https://git-scm.com/downloads</a></p><p>2个都安装完成如下：</p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/3656.png" alt></p><h1 id="3-安装hexo"><a href="#3-安装hexo" class="headerlink" title="3.安装hexo"></a>3.安装hexo</h1><h2 id="1-新建一个文件夹，右键空白处点Git-Bash-Here"><a href="#1-新建一个文件夹，右键空白处点Git-Bash-Here" class="headerlink" title="1.新建一个文件夹，右键空白处点Git Bash Here"></a>1.新建一个文件夹，右键空白处点Git Bash Here</h2><ul><li><p>关于博客的所有文件都在这个文件夹下面，我新建的名字是dipamkar。</p></li><li><p>验证node，npm 是否安装成功，没有成功的就重新安装node。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">键入node -v和npm -v。进行验证</span><br></pre></td></tr></table></figure><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/23010.jpg" alt></p></li></ul><h2 id="2-安装个cnpm提高速度，以后下载什么东西都用cnpm"><a href="#2-安装个cnpm提高速度，以后下载什么东西都用cnpm" class="headerlink" title="2.安装个cnpm提高速度，以后下载什么东西都用cnpm"></a>2.安装个cnpm提高速度，以后下载什么东西都用cnpm</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure><ul><li><p>验证cnpm是否安装成功，键入cnpm -v</p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/123349.jpg" alt></p></li></ul><h2 id="3-正式安装hexo"><a href="#3-正式安装hexo" class="headerlink" title="3.正式安装hexo"></a>3.正式安装hexo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install -g hexo-cli</span><br></pre></td></tr></table></figure><ul><li><p>验证hexo是否安装成功，键入hexo -v</p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/123526.jpg" alt></p></li></ul><h1 id="4-初始化hexo"><a href="#4-初始化hexo" class="headerlink" title="4.初始化hexo"></a>4.初始化hexo</h1><h2 id="1-本地初始化"><a href="#1-本地初始化" class="headerlink" title="1.本地初始化"></a>1.本地初始化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>在此文件夹就会出现一堆文件</p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/123825.jpg" alt></p><h2 id="2-运行测试"><a href="#2-运行测试" class="headerlink" title="2.运行测试"></a>2.运行测试</h2><p>常用命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean #用来清理缓存文件</span><br><span class="line">hexo g      #生成文件</span><br><span class="line">hexo  s     #运行本地服务器</span><br><span class="line">hexo  d   #上传到服务器</span><br></pre></td></tr></table></figure><ul><li><p>先运行hexo s。在浏览器中打开网址<code>localhost:4000</code>即可，得到下图表示成功</p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/124154.jpg" alt></p></li></ul><h1 id="5-部署到github"><a href="#5-部署到github" class="headerlink" title="5.部署到github"></a>5.部署到github</h1><h2 id="1-注册登录github"><a href="#1-注册登录github" class="headerlink" title="1.注册登录github"></a>1.注册登录github</h2><p>网址：github.com</p><h2 id="2-点击your-repositories然后点new-新建仓库"><a href="#2-点击your-repositories然后点new-新建仓库" class="headerlink" title="2.点击your repositories然后点new,新建仓库"></a>2.点击your repositories然后点new,新建仓库</h2><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/124713.jpg" alt></p><h2 id="3-Repository-name必须写github账号名-github-io"><a href="#3-Repository-name必须写github账号名-github-io" class="headerlink" title="3.Repository name必须写github账号名+github.io"></a>3.Repository name必须写github账号名+github.io</h2><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/124907.jpg" alt></p><p>填成上图即可点击create完成仓库创建</p><h2 id="4-安装部署插件"><a href="#4-安装部署插件" class="headerlink" title="4.安装部署插件"></a>4.安装部署插件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure><h2 id="5-修改配置文件-config-yml"><a href="#5-修改配置文件-config-yml" class="headerlink" title="5.修改配置文件_config.yml"></a>5.修改配置文件_config.yml</h2><ul><li><p>右键这个文件-&gt;编辑</p></li><li><p>或者用记事本打开</p><p>到此文件最后的位置，只改Deployment，改成下图</p><p><strong>注意：repo按照下图从仓库中复制过来，改完不要忘了保存</strong></p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/171216.jpg" alt></p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/repo.jpg" alt></p></li></ul><h2 id="6-绑定邮箱和账号名"><a href="#6-绑定邮箱和账号名" class="headerlink" title="6.绑定邮箱和账号名"></a>6.绑定邮箱和账号名</h2><p>键入以下命令，引号中的信息换成你自己的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;you@example.com&quot;</span><br><span class="line">git config --global user.name &quot;Your Name&quot;</span><br></pre></td></tr></table></figure><h2 id="7-用hexo-d正式部署到github"><a href="#7-用hexo-d正式部署到github" class="headerlink" title="7.用hexo d正式部署到github"></a>7.用<code>hexo d</code>正式部署到github</h2><ul><li><p>键入<code>hexo d</code>，然后会让你输入github账号密码，最后出现Deploy done表示成功</p><p><img src="/2021/01/02/hexo-github-pages-%E9%98%BF%E9%87%8C%E4%BA%91%E5%9F%9F%E5%90%8D/172834.jpg" alt></p></li></ul><ul><li>然后就可以用<code>github账号名.github.io</code>访问了</li></ul><h1 id="8-常用流程和命令"><a href="#8-常用流程和命令" class="headerlink" title="8.常用流程和命令"></a>8.常用流程和命令</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;新建文章(默认md文件)</span><br><span class="line">hexo n &quot;文章名称&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;本地调试</span><br><span class="line">hexo s</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;清理文件夹</span><br><span class="line">hexo clean</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;生成静态网页</span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;部署到github</span><br><span class="line">hexo d</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;必须先生成然后再部署，生成+部署可以简写成一条命令</span><br><span class="line">hexo g -d</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;一般先用hexo n “”生成md文件-&gt;写文章-&gt;hexo g -d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 个人博客 </category>
          
          <category> 博客搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> github_pages </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机图形学 MFC 鼠标绘制多边形并用指定数字填充</title>
      <link href="2020/12/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6-MFC-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B9%B6%E7%94%A8%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E5%A1%AB%E5%85%85/"/>
      <url>2020/12/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6-MFC-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B9%B6%E7%94%A8%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E5%A1%AB%E5%85%85/</url>
      
        <content type="html"><![CDATA[<p>边标志算法的实现 ，用鼠标左键单击绘制顶点最后一个顶点用双击输入，然后用任意的数字填充，用vc6.0软件做的</p><a id="more"></a><h2 id="1-新建MFC项目"><a href="#1-新建MFC项目" class="headerlink" title="1.新建MFC项目"></a>1.新建MFC项目</h2><p><img src="/2020/12/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6-MFC-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B9%B6%E7%94%A8%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E5%A1%AB%E5%85%85/image-20201231105023941.png" alt="image-20201231105023941"></p><p><img src="/2020/12/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6-MFC-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B9%B6%E7%94%A8%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E5%A1%AB%E5%85%85/image-20201231104704860.png" alt="image-20201231104704860"></p><p>然后点finish就行</p><h2 id="2-添加鼠标左键单击和双击的响应事件"><a href="#2-添加鼠标左键单击和双击的响应事件" class="headerlink" title="2.添加鼠标左键单击和双击的响应事件"></a>2.添加鼠标左键单击和双击的响应事件</h2><p><img src="/2020/12/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6-MFC-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B9%B6%E7%94%A8%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E5%A1%AB%E5%85%85/image-20201231105117258.png" alt="image-20201231105117258"></p><p><img src="/2020/12/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6-MFC-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B9%B6%E7%94%A8%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E5%A1%AB%E5%85%85/image-20201231105259049.png" alt="image-20201231105259049"></p><p><strong>Class name必须选View结尾的，选择WM_LBUTTONDOWN，然后必须先点Add Function，然后再点OK</strong></p><p>这样就可以在目录结构中看到添加的事件了</p><p><img src="/2020/12/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6-MFC-%E9%BC%A0%E6%A0%87%E7%BB%98%E5%88%B6%E5%A4%9A%E8%BE%B9%E5%BD%A2%E5%B9%B6%E7%94%A8%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E5%A1%AB%E5%85%85/image-20201231105551088.png" alt="image-20201231105551088"></p><p>同样可以添加双击的事件</p><h2 id="3-首先实现用鼠标绘制多边形的代码"><a href="#3-首先实现用鼠标绘制多边形的代码" class="headerlink" title="3.首先实现用鼠标绘制多边形的代码"></a>3.首先实现用鼠标绘制多边形的代码</h2><p>首先分析一个我们要干的事，用鼠标单击事件获取到点的坐标后需要，moveto和lineto来划线，<strong>但是第一个点的时候不用划线，只有第二个点的时候才需要和上一个点划线，之后我们还需要每一个边的起点终点的位置，所以必须把所有点保存下来，同时需要记录这个多边形对应的矩形区域</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">int max_x,max_y,min_x,min_y;&#x2F;&#x2F;多边形的矩形区域</span><br><span class="line">bool flag1&#x3D;0,flag&#x3D;0;&#x2F;&#x2F;flag1控制只进行一次画多边形，flag控制存放起点</span><br><span class="line">CPoint p[100];&#x2F;&#x2F;保存顶点数组，填充需要</span><br><span class="line">int n&#x3D;0;&#x2F;&#x2F;表示多边形顶点的的个数</span><br><span class="line">void CShiyan2View::OnLButtonDown(UINT nFlags, CPoint point) </span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F; TODO: Add your message handler code here and&#x2F;or call default</span><br><span class="line">CDC* pDC&#x3D;GetDC();</span><br><span class="line">if(!flag1)&#x2F;&#x2F;如果多边形已经绘制完成，再次点击则不会响应</span><br><span class="line">&#123;</span><br><span class="line">if(!flag)&#123;</span><br><span class="line">max_x&#x3D;min_x&#x3D;point.x;&#x2F;&#x2F;初始化最开始的矩形区域为第一个点的横纵坐标</span><br><span class="line">max_y&#x3D;min_y&#x3D;point.y;</span><br><span class="line">flag&#x3D;1;</span><br><span class="line">p[n++]&#x3D;point;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">if(point.x&gt;max_x)&#x2F;&#x2F;更新矩形区域的坐标</span><br><span class="line">max_x&#x3D;point.x;</span><br><span class="line">if(point.x&lt;min_x)</span><br><span class="line">min_x&#x3D;point.x;</span><br><span class="line">if(point.y&gt;max_y)</span><br><span class="line">max_y&#x3D;point.y;</span><br><span class="line">if(point.y&lt;min_y)</span><br><span class="line">min_y&#x3D;point.y;</span><br><span class="line">pDC-&gt;MoveTo(p[n-1]);</span><br><span class="line">pDC-&gt;LineTo(point);</span><br><span class="line">p[n++]&#x3D;point;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReleaseDC(pDC);</span><br><span class="line">CView::OnLButtonDown(nFlags, point);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void CShiyan2View::OnLButtonDblClk(UINT nFlags, CPoint point) </span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F; TODO: Add your message handler code here and&#x2F;or call default</span><br><span class="line">CDC* pDC&#x3D;GetDC();</span><br><span class="line">if(!flag1)&#x2F;&#x2F;只有没有绘制完成才会对双击进行响应</span><br><span class="line">&#123;</span><br><span class="line">if(point.x&gt;max_x)&#x2F;&#x2F;此为最后一个顶点，同样需要更新矩形区域</span><br><span class="line">max_x&#x3D;point.x;</span><br><span class="line">if(point.x&lt;min_x)</span><br><span class="line">min_x&#x3D;point.x;</span><br><span class="line">if(point.y&gt;max_y)</span><br><span class="line">max_y&#x3D;point.y;</span><br><span class="line">if(point.y&lt;min_y)</span><br><span class="line">min_y&#x3D;point.y;</span><br><span class="line">pDC-&gt;MoveTo(p[n-1]);</span><br><span class="line">pDC-&gt;LineTo(point);</span><br><span class="line">pDC-&gt;MoveTo(point);</span><br><span class="line">pDC-&gt;LineTo(p[0]);</span><br><span class="line">flag1&#x3D;1;&#x2F;&#x2F;表示多边形已经绘制完成</span><br><span class="line">p[n++]&#x3D;point;</span><br><span class="line">p[n]&#x3D;p[0];</span><br><span class="line">&#125;</span><br><span class="line">ReleaseDC(pDC);</span><br><span class="line">CView::OnLButtonDblClk(nFlags, point);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-用边标志法实现多边形填充-先用纯色填充"><a href="#4-用边标志法实现多边形填充-先用纯色填充" class="headerlink" title="4.用边标志法实现多边形填充(先用纯色填充)"></a>4.用边标志法实现多边形填充(先用纯色填充)</h2><p>需要一个bool数组mask，初始全0，遍历每一条边上的点，将这个点右边的msak取反，最后得到的mask中为1的区域就是需要填充的区域。</p><p>从顶点数组p中获取每一条边的顶点信息，然后根据y计算x，对mask进行取反即可</p><p>要注意两点：</p><ol><li><strong>注意遍历点的时候要纵坐标优先，也就是纵坐标每次变化1，用纵坐标去计算横坐标</strong></li><li><strong>在顶点数组中，有可能出现起点的y比终点的y大的情况，这样就需要手动转换了</strong></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">void CShiyan2View::OnLButtonDblClk(UINT nFlags, CPoint point) </span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F; TODO: Add your message handler code here and&#x2F;or call default</span><br><span class="line">CDC* pDC&#x3D;GetDC();</span><br><span class="line">if(!flag1)&#x2F;&#x2F;只有没有绘制完成才会对双击进行响应</span><br><span class="line">&#123;</span><br><span class="line">if(point.x&gt;max_x)&#x2F;&#x2F;此为最后一个顶点，同样需要更新矩形区域</span><br><span class="line">max_x&#x3D;point.x;</span><br><span class="line">if(point.x&lt;min_x)</span><br><span class="line">min_x&#x3D;point.x;</span><br><span class="line">if(point.y&gt;max_y)</span><br><span class="line">max_y&#x3D;point.y;</span><br><span class="line">if(point.y&lt;min_y)</span><br><span class="line">min_y&#x3D;point.y;</span><br><span class="line">pDC-&gt;MoveTo(p[n-1]);</span><br><span class="line">pDC-&gt;LineTo(point);</span><br><span class="line">pDC-&gt;MoveTo(point);</span><br><span class="line">pDC-&gt;LineTo(p[0]);</span><br><span class="line">flag1&#x3D;1;&#x2F;&#x2F;表示多边形已经绘制完成</span><br><span class="line">p[n++]&#x3D;point;</span><br><span class="line">p[n]&#x3D;p[0];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;填充部分</span><br><span class="line">for(int i&#x3D;min_x;i&lt;&#x3D;max_x;i++)</span><br><span class="line">for(int j&#x3D;min_y;j&lt;&#x3D;max_y;j++)</span><br><span class="line">mask[i][j]&#x3D;0;&#x2F;&#x2F;将数组全置0</span><br><span class="line">for(i&#x3D;0;i&lt;n;i++)&#x2F;&#x2F;处理每一条边</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">int s&#x3D;p[i].y&lt;p[i+1].y?i:i+1;&#x2F;&#x2F;s保存的是较小y点的下标，e保存y较大的点的下标</span><br><span class="line">int e&#x3D;2*i+1-s;&#x2F;&#x2F;由于起点终点的下标一个是i,一个是i+1，和为2*i+1，所以可以通过s计算e</span><br><span class="line">double dx&#x3D;(p[e].x-p[s].x)&#x2F;double(p[e].y-p[s].y);&#x2F;&#x2F;保存dx&#x2F;dy。也就是y每变化1，x的变化值</span><br><span class="line">for(int y&#x3D;p[s].y;y&lt;p[e].y;y++)</span><br><span class="line">&#123;</span><br><span class="line">int x&#x3D;(y-p[s].y)*dx+p[s].x;&#x2F;&#x2F;通过y计算x。简单的直线方程</span><br><span class="line">for(int t&#x3D;x;t&lt;&#x3D;max_x;t++)</span><br><span class="line">mask[t][y]&#x3D;!mask[t][y];&#x2F;&#x2F;将此点右边的全取反</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(i&#x3D;min_x;i&lt;&#x3D;max_x;i++)</span><br><span class="line">for(int j&#x3D;min_y;j&lt;&#x3D;max_y;j++)</span><br><span class="line">if(mask[i][j])</span><br><span class="line">pDC-&gt;SetPixel(i,j,RGB(100,100,100));&#x2F;&#x2F;将数组中为1的区域涂色</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ReleaseDC(pDC);</span><br><span class="line">CView::OnLButtonDblClk(nFlags, point);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-用任意数字填充"><a href="#5-用任意数字填充" class="headerlink" title="5.用任意数字填充"></a>5.用任意数字填充</h2><p>首先要生成数字的点阵数组。然后就可以通过区域的周期性来画图。</p><ol><li><p>生成指定数字的点阵数组，利用0~9镜像对称的数组来实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">char a[10][8]&#x3D;</span><br><span class="line">&#123;</span><br><span class="line">    &#123;0x00,0x18,0x24,0x24,0x24,0x24,0x24,0x18&#125;, &#x2F;&#x2F;0</span><br><span class="line">    &#123;0x00,0x18,0x1c,0x18,0x18,0x18,0x18,0x18&#125;, &#x2F;&#x2F;1</span><br><span class="line">    &#123;0x00,0x1e,0x30,0x30,0x1c,0x06,0x06,0x3e&#125;, &#x2F;&#x2F;2</span><br><span class="line">    &#123;0x00,0x1e,0x30,0x30,0x1c,0x30,0x30,0x1e&#125;, &#x2F;&#x2F;3</span><br><span class="line">    &#123;0x00,0x30,0x38,0x34,0x32,0x3e,0x30,0x30&#125;, &#x2F;&#x2F;4</span><br><span class="line">    &#123;0x00,0x1e,0x02,0x1e,0x30,0x30,0x30,0x1e&#125;, &#x2F;&#x2F;5</span><br><span class="line">    &#123;0x00,0x1c,0x06,0x1e,0x36,0x36,0x36,0x1c&#125;, &#x2F;&#x2F;6</span><br><span class="line">    &#123;0x00,0x3f,0x30,0x18,0x18,0x0c,0x0c,0x0c&#125;, &#x2F;&#x2F;7</span><br><span class="line">    &#123;0x00,0x1c,0x36,0x36,0x1c,0x36,0x36,0x1c&#125;, &#x2F;&#x2F;8</span><br><span class="line">    &#123;0x00,0x1c,0x36,0x36,0x36,0x3c,0x30,0x1c&#125;, &#x2F;&#x2F;9</span><br><span class="line">&#125;;&#x2F;&#x2F;数字的镜像对称数组，每个数字用8行8列的01表示，每一行看做一个8位二进制</span><br><span class="line">void Creat_array(int n,bool dianzhen[8][32])&#x2F;&#x2F;得到要显示四个数字的点阵数组</span><br><span class="line">&#123;</span><br><span class="line">int num[4];</span><br><span class="line">for(int i&#x3D;3;i&gt;&#x3D;0;i--,n&#x2F;&#x3D;10)&#x2F;&#x2F;将这四位数放到数组中</span><br><span class="line">num[i]&#x3D;n%10;</span><br><span class="line">for(i&#x3D;0;i&lt;8;i++)&#x2F;&#x2F;一共8行，每行显示4*8&#x3D;32个0或1</span><br><span class="line">for(int j&#x3D;0;j&lt;4;j++)</span><br><span class="line">&#123;</span><br><span class="line">int x&#x3D;a[num[j]][i];&#x2F;&#x2F;得到num[j]对应的数字点阵的第i行二进制串</span><br><span class="line">for(int k&#x3D;0;k&lt;8;k++,x&#x2F;&#x3D;2)&#x2F;&#x2F;依次得到二进制串的每一位</span><br><span class="line">dianzhen[i][j*8+k]&#x3D;x%2?1:0;&#x2F;&#x2F;组合成指定数字的点阵数组</span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>利用区域的周期性填充区域</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(i&#x3D;min_x;i&lt;&#x3D;max_x;i++)</span><br><span class="line">for(int j&#x3D;min_y;j&lt;&#x3D;max_y;j++)</span><br><span class="line">if(mask[i][j])</span><br><span class="line">pDC-&gt;SetPixel(i,j,(dianzhen[j%8][i%32])?RGB(230,0,0):RGB(255,255,255));</span><br><span class="line">    &#x2F;&#x2F;将数组中为1的区域打印成点阵数字</span><br></pre></td></tr></table></figure></li></ol><h2 id="6-最终代码"><a href="#6-最终代码" class="headerlink" title="6.最终代码"></a>6.最终代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">int number&#x3D;1357;&#x2F;&#x2F;要显示的数字，必须填四位</span><br><span class="line">int max_x,max_y,min_x,min_y;&#x2F;&#x2F;多边形的矩形区域</span><br><span class="line">bool flag1&#x3D;0,flag&#x3D;0;&#x2F;&#x2F;flag1控制只进行一次画多边形，flag控制存放起点</span><br><span class="line">CPoint p[100];&#x2F;&#x2F;保存顶点数组，填充需要</span><br><span class="line">int n&#x3D;0;&#x2F;&#x2F;表示多边形顶点的的个数</span><br><span class="line">bool mask[1000][1000],dianzhen[8][32];</span><br><span class="line">char a[10][8]&#x3D;</span><br><span class="line">&#123;</span><br><span class="line">    &#123;0x00,0x18,0x24,0x24,0x24,0x24,0x24,0x18&#125;, &#x2F;&#x2F;0</span><br><span class="line">    &#123;0x00,0x18,0x1c,0x18,0x18,0x18,0x18,0x18&#125;, &#x2F;&#x2F;1</span><br><span class="line">    &#123;0x00,0x1e,0x30,0x30,0x1c,0x06,0x06,0x3e&#125;, &#x2F;&#x2F;2</span><br><span class="line">    &#123;0x00,0x1e,0x30,0x30,0x1c,0x30,0x30,0x1e&#125;, &#x2F;&#x2F;3</span><br><span class="line">    &#123;0x00,0x30,0x38,0x34,0x32,0x3e,0x30,0x30&#125;, &#x2F;&#x2F;4</span><br><span class="line">    &#123;0x00,0x1e,0x02,0x1e,0x30,0x30,0x30,0x1e&#125;, &#x2F;&#x2F;5</span><br><span class="line">    &#123;0x00,0x1c,0x06,0x1e,0x36,0x36,0x36,0x1c&#125;, &#x2F;&#x2F;6</span><br><span class="line">    &#123;0x00,0x3f,0x30,0x18,0x18,0x0c,0x0c,0x0c&#125;, &#x2F;&#x2F;7</span><br><span class="line">    &#123;0x00,0x1c,0x36,0x36,0x1c,0x36,0x36,0x1c&#125;, &#x2F;&#x2F;8</span><br><span class="line">    &#123;0x00,0x1c,0x36,0x36,0x36,0x3c,0x30,0x1c&#125;, &#x2F;&#x2F;9</span><br><span class="line">&#125;;&#x2F;&#x2F;数字的镜像对称数组，每个数字用8行8列的01表示，每一行看做一个8位二进制</span><br><span class="line">void CShiyan2View::OnLButtonDown(UINT nFlags, CPoint point) </span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F; TODO: Add your message handler code here and&#x2F;or call default</span><br><span class="line">CDC* pDC&#x3D;GetDC();</span><br><span class="line">if(!flag1)&#x2F;&#x2F;如果多边形已经绘制完成，再次点击则不会响应</span><br><span class="line">&#123;</span><br><span class="line">if(!flag)&#123;</span><br><span class="line">max_x&#x3D;min_x&#x3D;point.x;&#x2F;&#x2F;初始化最开始的矩形区域为第一个点的横纵坐标</span><br><span class="line">max_y&#x3D;min_y&#x3D;point.y;</span><br><span class="line">flag&#x3D;1;</span><br><span class="line">p[n++]&#x3D;point;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">if(point.x&gt;max_x)&#x2F;&#x2F;更新矩形区域的坐标</span><br><span class="line">max_x&#x3D;point.x;</span><br><span class="line">if(point.x&lt;min_x)</span><br><span class="line">min_x&#x3D;point.x;</span><br><span class="line">if(point.y&gt;max_y)</span><br><span class="line">max_y&#x3D;point.y;</span><br><span class="line">if(point.y&lt;min_y)</span><br><span class="line">min_y&#x3D;point.y;</span><br><span class="line">pDC-&gt;MoveTo(p[n-1]);</span><br><span class="line">pDC-&gt;LineTo(point);</span><br><span class="line">p[n++]&#x3D;point;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">ReleaseDC(pDC);</span><br><span class="line">CView::OnLButtonDown(nFlags, point);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void Creat_array(int n,bool dianzhen[8][32])&#x2F;&#x2F;得到要显示四个数字的点阵数组</span><br><span class="line">&#123;</span><br><span class="line">int num[4];</span><br><span class="line">for(int i&#x3D;3;i&gt;&#x3D;0;i--,n&#x2F;&#x3D;10)&#x2F;&#x2F;将这四位数放到数组中</span><br><span class="line">num[i]&#x3D;n%10;</span><br><span class="line">for(i&#x3D;0;i&lt;8;i++)&#x2F;&#x2F;一共8行，每行显示4*8&#x3D;32个0或1</span><br><span class="line">for(int j&#x3D;0;j&lt;4;j++)</span><br><span class="line">&#123;</span><br><span class="line">int x&#x3D;a[num[j]][i];&#x2F;&#x2F;得到num[j]对应的数字点阵的第i行二进制串</span><br><span class="line">for(int k&#x3D;0;k&lt;8;k++,x&#x2F;&#x3D;2)&#x2F;&#x2F;依次得到二进制串的每一位</span><br><span class="line">dianzhen[i][j*8+k]&#x3D;x%2?1:0;&#x2F;&#x2F;组合成指定数字的点阵数组</span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void CShiyan2View::OnLButtonDblClk(UINT nFlags, CPoint point) </span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F; TODO: Add your message handler code here and&#x2F;or call default</span><br><span class="line">CDC* pDC&#x3D;GetDC();</span><br><span class="line">if(!flag1)&#x2F;&#x2F;只有没有绘制完成才会对双击进行响应</span><br><span class="line">&#123;</span><br><span class="line">if(point.x&gt;max_x)&#x2F;&#x2F;此为最后一个顶点，同样需要更新矩形区域</span><br><span class="line">max_x&#x3D;point.x;</span><br><span class="line">if(point.x&lt;min_x)</span><br><span class="line">min_x&#x3D;point.x;</span><br><span class="line">if(point.y&gt;max_y)</span><br><span class="line">max_y&#x3D;point.y;</span><br><span class="line">if(point.y&lt;min_y)</span><br><span class="line">min_y&#x3D;point.y;</span><br><span class="line">pDC-&gt;MoveTo(p[n-1]);</span><br><span class="line">pDC-&gt;LineTo(point);</span><br><span class="line">pDC-&gt;MoveTo(point);</span><br><span class="line">pDC-&gt;LineTo(p[0]);</span><br><span class="line">flag1&#x3D;1;&#x2F;&#x2F;表示多边形已经绘制完成</span><br><span class="line">p[n++]&#x3D;point;</span><br><span class="line">p[n]&#x3D;p[0];&#x2F;&#x2F;此处将首尾相连，方便得到边的信息</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;填充部分</span><br><span class="line">for(int i&#x3D;min_x;i&lt;&#x3D;max_x;i++)</span><br><span class="line">for(int j&#x3D;min_y;j&lt;&#x3D;max_y;j++)</span><br><span class="line">mask[i][j]&#x3D;0;&#x2F;&#x2F;将数组全置0</span><br><span class="line">for(i&#x3D;0;i&lt;n;i++)&#x2F;&#x2F;处理每一条边</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">int s&#x3D;p[i].y&lt;p[i+1].y?i:i+1;&#x2F;&#x2F;s保存的是较小y点的下标，e保存y较大的点的下标</span><br><span class="line">int e&#x3D;2*i+1-s;&#x2F;&#x2F;由于起点终点的下标一个是i,一个是i+1，和为2*i+1，所以可以通过s计算e</span><br><span class="line">double dx&#x3D;(p[e].x-p[s].x)&#x2F;double(p[e].y-p[s].y);&#x2F;&#x2F;保存dx&#x2F;dy。也就是y每变化1，x的变化值</span><br><span class="line">for(int y&#x3D;p[s].y;y&lt;p[e].y;y++)</span><br><span class="line">&#123;</span><br><span class="line">int x&#x3D;(y-p[s].y)*dx+p[s].x;&#x2F;&#x2F;通过y计算x。简单的直线方程</span><br><span class="line">for(int t&#x3D;x+1;t&lt;&#x3D;max_x;t++)</span><br><span class="line">mask[t][y]&#x3D;!mask[t][y];&#x2F;&#x2F;将此点右边的全取反</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">Creat_array(number,dianzhen);</span><br><span class="line">for(i&#x3D;min_x;i&lt;&#x3D;max_x;i++)</span><br><span class="line">for(int j&#x3D;min_y;j&lt;&#x3D;max_y;j++)</span><br><span class="line">if(mask[i][j])</span><br><span class="line">pDC-&gt;SetPixel(i,j,(dianzhen[j%8][i%32])?RGB(230,0,0):RGB(255,255,255));</span><br><span class="line">    &#x2F;&#x2F;将数组中为1的区域打印成点阵数字</span><br><span class="line">ReleaseDC(pDC);</span><br><span class="line">CView::OnLButtonDblClk(nFlags, point);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 计算机图形学 </category>
          
          <category> 多边形填充 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机图形学 </tag>
            
            <tag> MFC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝桥杯2018第九届省赛解题报告</title>
      <link href="2020/04/14/%E8%93%9D%E6%A1%A5%E6%9D%AF2018%E7%AC%AC%E4%B9%9D%E5%B1%8A%E7%9C%81%E8%B5%9B%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/"/>
      <url>2020/04/14/%E8%93%9D%E6%A1%A5%E6%9D%AF2018%E7%AC%AC%E4%B9%9D%E5%B1%8A%E7%9C%81%E8%B5%9B%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="第一题-标题：分数"><a href="#第一题-标题：分数" class="headerlink" title="第一题        标题：分数"></a>第一题        标题：分数</h2><p>1/1 + 1/2 + 1/4 + 1/8 + 1/16 + …. 每项是前一项的一半，如果一共有20项,求这个和是多少，结果用分数表示出来。分子分母要求互质。</p><h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><p>求和找最大公约数</p><h3 id="答案："><a href="#答案：" class="headerlink" title="答案："></a>答案：</h3><p>1048575/524288 （选中或复制后查看，下同）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int gcd(int a,int b)</span><br><span class="line">&#123;</span><br><span class="line">return b&#x3D;&#x3D;0?a:gcd(b,a%b);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int factor&#x3D;gcd((1&lt;&lt;20)-1,1&lt;&lt;19); </span><br><span class="line">cout&lt;&lt;(((1&lt;&lt;20)-1)&#x2F;factor)&lt;&lt;&quot;&#x2F;&quot;&lt;&lt;(1&lt;&lt;19)&#x2F;factor&lt;&lt;endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第二题-标题：星期一"><a href="#第二题-标题：星期一" class="headerlink" title="第二题    标题：星期一"></a><strong>第二题    标题：星期一</strong></h2><p>整个20世纪（1901年1月1日至2000年12月31日之间），一共有多少个星期一？</p><h3 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h3><p>找最后一个周一(可以查日历也可以算)，剩余天数除以7。但是因为最后一天是周日，所以可以直接除以7，有几个完整的星期就有几个周一。</p><h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><p>5217  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int count_day(int year,int month,int day)</span><br><span class="line">&#123;</span><br><span class="line">int day_sum&#x3D;0;</span><br><span class="line">_for(i,1,month-1)</span><br><span class="line">&#123;</span><br><span class="line">if(i&#x3D;&#x3D;2)</span><br><span class="line">&#123;</span><br><span class="line">if((year%4&#x3D;&#x3D;0&amp;&amp;year%100!&#x3D;0)||year%400&#x3D;&#x3D;0)</span><br><span class="line">day_sum+&#x3D;29;</span><br><span class="line">else</span><br><span class="line">day_sum+&#x3D;28;</span><br><span class="line">&#125;</span><br><span class="line">else if(i&#x3D;&#x3D;4||i&#x3D;&#x3D;6||i&#x3D;&#x3D;9||i&#x3D;&#x3D;11)</span><br><span class="line">day_sum+&#x3D;30;</span><br><span class="line">else day_sum+&#x3D;31;</span><br><span class="line">&#125;</span><br><span class="line">return day_sum+day;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">int y,m,d;</span><br><span class="line">&#x2F;&#x2F;while(cin&gt;&gt;y&gt;&gt;m&gt;&gt;d&amp;&amp;y)</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;count_day(y,m,d);</span><br><span class="line">int sum_2001&#x3D;count_day(2020,4,5);</span><br><span class="line">_for(i,2001,2019)</span><br><span class="line">sum_2001+&#x3D;count_day(i,12,31);</span><br><span class="line">sum_2001%&#x3D;7;</span><br><span class="line">int zhou&#x3D;(0-sum_2001)%7+1;</span><br><span class="line">cout&lt;&lt;&quot;2001&#x2F;01&#x2F;01:&quot;&lt;&lt;zhou&lt;&lt;endl;</span><br><span class="line">int sum_21&#x3D;0;</span><br><span class="line">_for(i,1901,2000)</span><br><span class="line">sum_21+&#x3D;count_day(i,12,31);</span><br><span class="line">cout&lt;&lt;&quot;21 century:&quot;&lt;&lt;sum_21&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;&quot;answer:&quot;&lt;&lt;sum_21&#x2F;7&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第三题-标题：乘积尾零"><a href="#第三题-标题：乘积尾零" class="headerlink" title="第三题        标题：乘积尾零"></a>第三题        标题：乘积尾零</h2><p>如下的10行数据，每行有10个整数，请你求出它们的乘积的末尾有多少个零？</p><pre><code>5650 4542 3554 473 946 4114 3871 9073 90 4329 2758 7949 6113 5659 5245 7432 3051 4434 6704 3594 9937 1173 6866 3397 4759 7557 3070 2287 1453 9899 1486 5722 3135 1170 4014 5510 5120 729 2880 9019 2049 698 4582 4346 4427 646 9742 7340 1230 7683 5693 7015 6887 7381 4172 4341 2909 2027 7355 5649 6701 6645 1671 5978 2704 9926 295 3125 3878 6785 2066 4247 4800 1578 6652 4616 1113 6205 3264 2915 3966 5291 2904 1285 2193 1428 2265 8730 9436 7074 689 5510 8243 6114 337 4096 8199 7313 3685 211 </code></pre><p>注意：需要提交的是一个整数，表示末尾零的个数。不要填写任何多余内容。</p><h3 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h3><p>求因数中2和5的总数的最小值</p><h3 id="答案-1"><a href="#答案-1" class="headerlink" title="答案"></a>答案</h3><p>31 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,factor_2&#x3D;0,factor_5&#x3D;0;</span><br><span class="line">while(cin&gt;&gt;n)</span><br><span class="line">&#123;</span><br><span class="line">while(n%2&#x3D;&#x3D;0) n&#x2F;&#x3D;2,factor_2++;</span><br><span class="line">while(n%5&#x3D;&#x3D;0) n&#x2F;&#x3D;5,factor_5++;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;min(factor_2,factor_5);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第四题-标题：第几个幸运数"><a href="#第四题-标题：第几个幸运数" class="headerlink" title="第四题        标题：第几个幸运数"></a>第四题        标题：第几个幸运数</h2><p>到x星球旅行的游客都被发给一个整数，作为游客编号。<br>x星的国王有个怪癖，他只喜欢数字3,5和7。国王规定，游客的编号如果只含有因子：3,5,7,就可以获得一份奖品。</p><p>我们来看前10个幸运数字是：3 5 7 9 15 21 25 27 35 45。 因而第11个幸运数字是：49</p><p>小明领到了一个幸运数字 59084709587505，他去领奖的时候，人家要求他准确地说出这是第几个幸运数字，否则领不到奖品。</p><p>请你帮小明计算一下，59084709587505是第几个幸运数字。需要提交的是一个整数，请不要填写任何多余内容。</p><h3 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h3><p>三种思路，</p><h3 id="答案-2"><a href="#答案-2" class="headerlink" title="答案"></a>答案</h3><p>1905   </p>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1233 木棍加工</title>
      <link href="2020/04/07/%E6%B4%9B%E8%B0%B7-P1233-%E6%9C%A8%E6%A3%8D%E5%8A%A0%E5%B7%A5/"/>
      <url>2020/04/07/%E6%B4%9B%E8%B0%B7-P1233-%E6%9C%A8%E6%A3%8D%E5%8A%A0%E5%B7%A5/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P4933 大师</title>
      <link href="2020/04/06/%E6%B4%9B%E8%B0%B7-P4933-%E5%A4%A7%E5%B8%88/"/>
      <url>2020/04/06/%E6%B4%9B%E8%B0%B7-P4933-%E5%A4%A7%E5%B8%88/</url>
      
        <content type="html"><![CDATA[<p>DP关键的是设状态。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h3><p>建筑大师最近在跟着数学大师ljt12138学数学，今天他学了等差数列，ljt12138决定给他留一道练习题。</p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>ljt12138首先建了n个特斯拉电磁塔，这些电塔排成一排，从左到右依次标号为1到n，第i个电塔的高度为h[i]。</p><p>建筑大师需要从中选出一些电塔，然后这些电塔就会缩到地下去。这时候，如果留在地上的电塔的高度，从左向右构成了一个等差数列，那么这个选择方案就会被认为是美观的。</p><p>建筑大师需要求出，一共有多少种美观的选择方案，答案模998244353。</p><p>注意，如果地上只留了一个或者两个电塔，那么这种方案也是美观的。地上没有电塔的方案被认为是不美观的。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行一个正整数n。</p><p>第二行n个非负整数，第i个整数是第i个电塔的高度h[i]。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一个整数，表示美观的方案数模998244353的值。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8</span><br><span class="line">13 14 6 20 27 34 34 41</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">50</span><br></pre></td></tr></table></figure><p><strong>输入 #2</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">100</span><br><span class="line">90 1004 171 99 1835 108 81 117 141 126 135 144 81 153 193 81 962 162 1493 171 1780 864 297 180 532 1781 189 1059 198 333 1593 824 207 1877 216 270 225 1131 336 1875 362 234 81 288 1550 243 463 1755 252 406 261 270 279 288 1393 261 1263 297 135 333 872 234 881 180 198 81 225 306 180 90 315 81 81 198 252 81 297 1336 1140 1238 81 198 297 661 81 1372 469 1132 81 126 324 333 342 81 351 481 279 1770 1225 549</span><br></pre></td></tr></table></figure><p><strong>输出 #2</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">11153</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><p>我们用v表示最高的电塔高度。</p><p>对于前30%的数据，n&lt;=20。</p><p>对于前60%的数据，n&lt;=100，v&lt;=2000。</p><p>对于另外20%的数据，所有电塔的高度构成一个等差数列。</p><p>对于100%的数据，n&lt;=1000，v&lt;=20000。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>用<code>dp[i][a[i]-a[j]+20002]</code>表示以i点为结束公差为a[i]-a[j]的数列，加上20002是因为a[i]-a[j]最小为0-20000,为了避免出现负数，注意ans不可以加上<code>dp[i][a[i]-a[j]+20002]</code>，因为会出现相同塔高的塔，会重复加这些塔</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int dp[1001][40002];</span><br><span class="line">int a[1001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">long long ans&#x3D;0;</span><br><span class="line">_for(i,1,n)cin&gt;&gt;a[i];</span><br><span class="line">_for(i,2,n)</span><br><span class="line">for(int j&#x3D;i-1;j&gt;&#x3D;1;j--)</span><br><span class="line">&#123;</span><br><span class="line">dp[i][a[i]-a[j]+20002]&#x3D;(dp[i][a[i]-a[j]+20002]+dp[j][a[i]-a[j]+20002]+1)%998244353;</span><br><span class="line">ans&#x3D;(ans+dp[j][a[i]-a[j]+20002]+1)%998244353;</span><br><span class="line">&#125;</span><br><span class="line">ans&#x3D;(ans+n)%998244353;</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> W </tag>
            
            <tag> 设状态 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1040 加分二叉树</title>
      <link href="2020/04/06/%E6%B4%9B%E8%B0%B7-P1040-%E5%8A%A0%E5%88%86%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>2020/04/06/%E6%B4%9B%E8%B0%B7-P1040-%E5%8A%A0%E5%88%86%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>设计好状态就行，可以用dp也可以用记忆dfs</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>设一个n<em>n</em>个节点的二叉树tree的中序遍历为（1,2,3,…,n1,2,3,…,<em>n</em>），其中数字1,2,3,…,n1,2,3,…,<em>n</em>为节点编号。每个节点都有一个分数（均为正整数），记第i<em>i</em>个节点的分数为di,tree<em>d**i</em>,<em>t*</em>r<strong>e</strong>e<em>及它的每个子树都有一个加分，任一棵子树subtree</em>s<strong>u</strong>b<strong>t</strong>r<strong>e</strong>e<em>（也包含tree</em>t<strong>r</strong>e*<em>e</em>本身）的加分计算方法如下：</p><p>subtree<em>s*</em>u<strong>b</strong>t<strong>r</strong>e<strong>e<em>的左子树的加分× subtree</em>s</strong>u<strong>b</strong>t<strong>r</strong>e<strong>e<em>的右子树的加分＋subtree</em>s</strong>u<strong>b</strong>t<strong>r</strong>e*<em>e</em>的根的分数。</p><p>若某个子树为空，规定其加分为11，叶子的加分就是叶节点本身的分数。不考虑它的空子树。</p><p>试求一棵符合中序遍历为（1,2,3,…,n1,2,3,…,<em>n</em>）且加分最高的二叉树tree<em>t*</em>r<strong>e</strong>e*。要求输出；</p><p>（1）tree<em>t*</em>r<strong>e</strong>e*的最高加分</p><p>（2）tree<em>t*</em>r<strong>e</strong>e*的前序遍历</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第11行：11个整数n(n&lt;30)<em>n</em>(<em>n</em>&lt;30)，为节点个数。</p><p>第22行：n<em>n</em>个用空格隔开的整数，为每个节点的分数（分数&lt;100&lt;100）。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>第11行：11个整数，为最高加分（Ans \le 4,000,000,000≤4,000,000,000）。</p><p>第22行：n<em>n</em>个用空格隔开的整数，为该树的前序遍历。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5 7 1 2 10</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">145</span><br><span class="line">3 1 2 4 5</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="记忆dfs"><a href="#记忆dfs" class="headerlink" title="记忆dfs"></a>记忆dfs</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int n,a[31],root[31][31],mem[31][31];</span><br><span class="line">int dfs(int s,int e)</span><br><span class="line">&#123;</span><br><span class="line">if(mem[s][e]) return mem[s][e];</span><br><span class="line">if(s&gt;e) return 1; </span><br><span class="line">if(s&#x3D;&#x3D;e) return a[s];</span><br><span class="line">int maxx&#x3D;-1;</span><br><span class="line">_for(i,s,e)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;(dfs(s,i-1)*dfs(i+1,e)+a[i]);</span><br><span class="line">if(t&gt;maxx)</span><br><span class="line">&#123;</span><br><span class="line">maxx&#x3D;t;</span><br><span class="line">root[s][e]&#x3D;i;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">return mem[s][e]&#x3D;maxx;</span><br><span class="line">&#125; </span><br><span class="line">void p(int s,int e)</span><br><span class="line">&#123;</span><br><span class="line">if(s&gt;e) return ;</span><br><span class="line">if(s&#x3D;&#x3D;e)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;e&lt;&lt;&quot; &quot;;</span><br><span class="line">return ;</span><br><span class="line">&#125; </span><br><span class="line">cout&lt;&lt;root[s][e]&lt;&lt;&quot; &quot;;</span><br><span class="line">p(s,root[s][e]-1);</span><br><span class="line">p(root[s][e]+1,e);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">cin&gt;&gt;a[i];</span><br><span class="line">cout&lt;&lt;dfs(1,n)&lt;&lt;endl;</span><br><span class="line">p(1,n);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int n,a[31],root[31][31],dp[31][31];</span><br><span class="line">void p(int s,int e)</span><br><span class="line">&#123;</span><br><span class="line">if(s&gt;e) return ;</span><br><span class="line">if(s&#x3D;&#x3D;e)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;e&lt;&lt;&quot; &quot;;</span><br><span class="line">return ;</span><br><span class="line">&#125; </span><br><span class="line">cout&lt;&lt;root[s][e]&lt;&lt;&quot; &quot;;</span><br><span class="line">p(s,root[s][e]-1);</span><br><span class="line">p(root[s][e]+1,e);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">cin&gt;&gt;a[i];</span><br><span class="line">&#x2F;&#x2F;dp[i][j]&#x3D;max(dp[i][k-1]*dp[k+1][j]+a[i]);</span><br><span class="line">_for(i,1,n)&#123;dp[i][i]&#x3D;a[i];dp[i][i-1]&#x3D;1;&#125;</span><br><span class="line">for(int i&#x3D;n;i&gt;&#x3D;1;i--)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;i+1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">for(int k&#x3D;i;k&lt;&#x3D;j;k++)</span><br><span class="line">&#123;</span><br><span class="line">if(dp[i][j]&lt;dp[i][k-1]*dp[k+1][j]+a[k])</span><br><span class="line">&#123;</span><br><span class="line">dp[i][j]&#x3D;dp[i][k-1]*dp[k+1][j]+a[k];</span><br><span class="line">root[i][j]&#x3D;k;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;dp[1][n]&lt;&lt;endl;</span><br><span class="line">p(1,n);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 记忆化dfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P2758 编辑距离</title>
      <link href="2020/04/06/%E6%B4%9B%E8%B0%B7-P2758-%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/"/>
      <url>2020/04/06/%E6%B4%9B%E8%B0%B7-P2758-%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/</url>
      
        <content type="html"><![CDATA[<p>DP精髓：不确定性就是DP范围。其实DP就是记忆化递归。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>设A和B是两个字符串。我们要用最少的字符操作次数，将字符串A转换为字符串B。这里所说的字符操作共有三种：</p><p>1、删除一个字符；</p><p>2、插入一个字符；</p><p>3、将一个字符改为另一个字符；</p><p>！皆为小写字母！</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行为字符串A；第二行为字符串B；字符串A和B的长度均小于2000。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>只有一个正整数，为最少字符操作次数。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sfdqxbw</span><br><span class="line">gfdgw</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="普通二维数组"><a href="#普通二维数组" class="headerlink" title="普通二维数组"></a>普通二维数组</h3><p><code>dp[i][j]</code>表示的是将第一个串s1前i个字符变为第二个串s2的前j个字符的最少操作次数，那么如果s1[i]==s2[j]，那么无需对s1[i]操作，将s1前i字符转换为s2前j字符的操作次数就是将s1前i-1字符转换为s2前j-1字符的操作次数，即<code>dp[i][j]=dp[i-1][j-1]</code>。如果s1[i]!=s2[j]那么就需要对s1[i]进行操作，操作的目的是将第一个串s1前i个字符变为第二个串s2的前j个字符，操作有三种</p><p>1.删去s1[i]，将s1前i-1字符变为s2前j字符，<code>dp[i][j]=dp[i-1][j]+1</code></p><p>2.插入，将s1前i字符变为s2前j-1字符<code>dp[i][j]=dp[i][j-1]+1</code></p><p>3.替换，将s1前i-1字符变为s2前j-1字符 <code>dp[i][j]=dp[i-1][j]+1</code></p><p>取最小值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int dp[2001][2001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">string s1,s2;</span><br><span class="line">cin&gt;&gt;s1&gt;&gt;s2;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;s1.length();i++)   dp[i][0]&#x3D;i;</span><br><span class="line">    for(int j&#x3D;0;j&lt;&#x3D;s2.length();j++)   dp[0][j]&#x3D;j;</span><br><span class="line">_for(i,1,s1.length())</span><br><span class="line">_for(j,1,s2.length())</span><br><span class="line">&#123;</span><br><span class="line">if(s1[i-1]&#x3D;&#x3D;s2[j-1])</span><br><span class="line">dp[i][j]&#x3D;dp[i-1][j-1];</span><br><span class="line">else</span><br><span class="line">dp[i][j]&#x3D;min(min(dp[i-1][j]+1,dp[i][j-1]+1),dp[i-1][j-1]+1);</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;dp[s1.length()][s2.length()]&lt;&lt;endl;</span><br><span class="line">_for(i,0,s1.length())</span><br><span class="line">&#123;</span><br><span class="line">_for(j,0,s2.length())</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;dp[i][j]&lt;&lt;&quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="滚动数组"><a href="#滚动数组" class="headerlink" title="滚动数组"></a>滚动数组</h3><p>观察到计算i行只需要i、i-1行，所以可以改造成滚动数组</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int dp[2][2001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">string s1,s2;</span><br><span class="line">cin&gt;&gt;s1&gt;&gt;s2;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;s2.length();i++)   dp[0][i]&#x3D;i;</span><br><span class="line">    bool index;</span><br><span class="line">_for(i,1,s1.length())</span><br><span class="line">&#123;</span><br><span class="line">index&#x3D;i&amp;1;</span><br><span class="line">dp[index][0]&#x3D;i;</span><br><span class="line">_for(j,1,s2.length())</span><br><span class="line">&#123;</span><br><span class="line">if(s1[i-1]&#x3D;&#x3D;s2[j-1])</span><br><span class="line">dp[index][j]&#x3D;dp[1-index][j-1];</span><br><span class="line">else</span><br><span class="line">dp[index][j]&#x3D;min(min(dp[1-index][j]+1,dp[index][j-1]+1),dp[1-index][j-1]+1);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">cout&lt;&lt;dp[index][s2.length()];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 滚动数组 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1280 尼克的任务</title>
      <link href="2020/04/06/%E6%B4%9B%E8%B0%B7-P1280-%E5%B0%BC%E5%85%8B%E7%9A%84%E4%BB%BB%E5%8A%A1/"/>
      <url>2020/04/06/%E6%B4%9B%E8%B0%B7-P1280-%E5%B0%BC%E5%85%8B%E7%9A%84%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<p>当前时间点只有一个任务时，必须选择这个任务。当前时间点有多个任务时，选择哪个任务取决于哪个任务结束的时候有更多的空闲时间。假设当前有多个任务，开始的时间是s，结束的时间是e1,e2,e3。选择哪一个任务取决于开始时间是e1,e2,e3的时候一直到最后哪个剩余的空闲时间多。以所有的起点为基准，dp[i]表示以i为起点的时候剩余的空闲时间。那么dp[i]=max(end-start+dp[strat])，i是当前的起点，end是当前的终点，start是终点后面第一个起点。从后向前算，起点和终点好说，怎么找终点后面的第一个起点，遍历的话是k,二分查找的话是logn</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>尼克每天上班之前都连接上英特网，接收他的上司发来的邮件，这些邮件包含了尼克主管的部门当天要完成的全部任务，每个任务由一个开始时刻与一个持续时间构成。</p><p>尼克的一个工作日为 n<em>n</em> 分钟，从第 11 分钟开始到第 n<em>n</em> 分钟结束。当尼克到达单位后他就开始干活，公司一共有 k<em>k</em> 个任务需要完成。如果在同一时刻有多个任务需要完成，尼克可以任选其中的一个来做，而其余的则由他的同事完成，反之如果只有一个任务，则该任务必需由尼克去完成，假如某些任务开始时刻尼克正在工作，则这些任务也由尼克的同事完成。如果某任务于第 p<em>p</em> 分钟开始，持续时间为 t<em>t</em> 分钟，则该任务将在第 (p+t-1)(<em>p</em>+<em>t</em>−1) 分钟结束。</p><p>写一个程序计算尼克应该如何选取任务，才能获得最大的空暇时间。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入数据第一行含两个用空格隔开的整数 n<em>n</em> 和 k<em>k</em>。</p><p>接下来共有 k<em>k</em> 行，每一行有两个用空格隔开的整数 p<em>p</em> 和 t<em>t</em>，表示该任务从第 p<em>p</em> 分钟开始，持续时间为 t<em>t</em> 分钟。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出文件仅一行，包含一个整数，表示尼克可能获得的最大空暇时间。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">15 6</span><br><span class="line">1 2</span><br><span class="line">1 6</span><br><span class="line">4 11</span><br><span class="line">8 5</span><br><span class="line">8 1</span><br><span class="line">11 5</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><h4 id="数据规模与约定"><a href="#数据规模与约定" class="headerlink" title="数据规模与约定"></a>数据规模与约定</h4><ul><li>对于 100%100% 的数据，保证 1 \leq n \leq 10^4,1 \leq k \leq 10^4,1 \leq p \leq n,1 \leq p+t-1 \leq n1≤<em>n</em>≤104,1≤<em>k</em>≤104,1≤<em>p</em>≤<em>n</em>,1≤<em>p</em>+<em>t</em>−1≤<em>n</em>。</li></ul><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>为了方便把1看成一个起点为1终点为1的时间段</p><h3 id="vector-k-n"><a href="#vector-k-n" class="headerlink" title="vector(k*n)"></a>vector(k*n)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">struct Time&#123;</span><br><span class="line">int s,e;</span><br><span class="line">&#125;;</span><br><span class="line">vector&lt;Time&gt; v;</span><br><span class="line">int dp[10001];</span><br><span class="line">int n,k,end;</span><br><span class="line">int get(int e)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">_for(j,1,v.size()-1)</span><br><span class="line">&#123;</span><br><span class="line">if(v[j].s&gt;&#x3D;e)</span><br><span class="line">return v[j].s;</span><br><span class="line">&#125;</span><br><span class="line">return n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">n++;</span><br><span class="line">v.push_back(&#123;1,1&#125;); </span><br><span class="line">_for(i,1,k)</span><br><span class="line">&#123;</span><br><span class="line">int s,e;</span><br><span class="line">cin&gt;&gt;s&gt;&gt;e;</span><br><span class="line">v.push_back(&#123;s,e+s&#125;);</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;v.size()-1;i&gt;&#x3D;0;i--)</span><br><span class="line">&#123;</span><br><span class="line">int j&#x3D;i,maxx&#x3D;-1;</span><br><span class="line">while(v[j].s&#x3D;&#x3D;v[i].s)</span><br><span class="line">&#123;</span><br><span class="line">int start&#x3D;get(v[j].e);</span><br><span class="line">maxx&#x3D;max(maxx,start-v[j].e+dp[start]);</span><br><span class="line">j--;</span><br><span class="line">&#125;</span><br><span class="line">dp[v[i].s]&#x3D;maxx;</span><br><span class="line">i&#x3D;j+1;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;dp[1];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="结构体-二分查找-k-lgn"><a href="#结构体-二分查找-k-lgn" class="headerlink" title="结构体+二分查找(k*lgn)"></a>结构体+二分查找(k*lgn)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">struct Time&#123;</span><br><span class="line">int s,e;</span><br><span class="line">&#125; v[10005];</span><br><span class="line">int dp[10005];</span><br><span class="line">int a[10005];</span><br><span class="line">int n,k,end;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;k;</span><br><span class="line">n++;</span><br><span class="line">int len&#x3D;0;</span><br><span class="line">v[0].s&#x3D;1;</span><br><span class="line">v[0].e&#x3D;1;</span><br><span class="line">_for(i,1,k)</span><br><span class="line">&#123;</span><br><span class="line">int s,t;</span><br><span class="line">cin&gt;&gt;s&gt;&gt;t;</span><br><span class="line">v[i].s&#x3D;s;</span><br><span class="line">v[i].e&#x3D;s+t;</span><br><span class="line">if(s!&#x3D;a[len])</span><br><span class="line">&#123;</span><br><span class="line">a[++len]&#x3D;s;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">a[++len]&#x3D;n;</span><br><span class="line">for(int i&#x3D;k;i&gt;&#x3D;0;i--)</span><br><span class="line">&#123;</span><br><span class="line">int j&#x3D;i,maxx&#x3D;-1;</span><br><span class="line">while(v[j].s&#x3D;&#x3D;v[i].s)</span><br><span class="line">&#123;</span><br><span class="line">int start&#x3D;*lower_bound(a+1,a+len+1,v[j].e);</span><br><span class="line">maxx&#x3D;max(maxx,start-v[j].e+dp[start]);</span><br><span class="line">j--;</span><br><span class="line">&#125;</span><br><span class="line">dp[v[i].s]&#x3D;maxx;</span><br><span class="line">i&#x3D;j+1;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;dp[1];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 二分查找(大小于) </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1439 【模板】最长公共子序列</title>
      <link href="2020/04/06/%E6%B4%9B%E8%B0%B7-P1439-%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97/"/>
      <url>2020/04/06/%E6%B4%9B%E8%B0%B7-P1439-%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>可以用通用m*n算法。由于这两个序列都是全排列的一种，假设这两串数字分别是s1,s2。将s1的元素从第一个开始全部表示为a,b,c……。将s2中对应的数字也变为字母。比如s1:3,2,1，s2:2,3,1。将3替换为a，2替换为b，1替换为c。s1变为a,b,c。s2变为b,a,c。最长公共子序列的长度不变，现在的问题就变成了求a,b,c和b,c,a中的最长公共子序列。于是就可以转换为求最长递增子序列的长度。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给出 1,2,\ldots,n1,2,…,<em>n</em> 的两个排列 P_1<em>P</em>1 和 P_2<em>P</em>2 ，求它们的最长公共子序列。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行是一个数 n<em>n</em>。</p><p>接下来两行，每行为 n<em>n</em> 个数，为自然数 1,2,\ldots,n1,2,…,<em>n</em> 的一个排列。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>一个数，即最长公共子序列的长度。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">5 </span><br><span class="line">3 2 1 4 5</span><br><span class="line">1 2 3 4 5</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><ul><li>对于 50%50% 的数据， n \le 10^3<em>n</em>≤103；</li><li>对于 100%100% 的数据， n \le 10^5<em>n</em>≤105。</li></ul><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="通用算法m-n"><a href="#通用算法m-n" class="headerlink" title="通用算法m*n"></a>通用算法m*n</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">#define N 10001</span><br><span class="line">using namespace std;</span><br><span class="line">int lcs[N][N];</span><br><span class="line">int a[N];</span><br><span class="line">int b[N];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">&#x2F;&#x2F;lcs[i][j]&#x3D;lcs[i-1][j-1]+1; a[i]&#x3D;&#x3D;b[i]</span><br><span class="line">&#x2F;&#x2F;lcs[i][j]&#x3D;max(lcs[i][j-1],lcs[i-1][j]);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">cin&gt;&gt;a[i];</span><br><span class="line">_for(i,1,n)</span><br><span class="line">cin&gt;&gt;b[i];</span><br><span class="line">_for(i,1,n)</span><br><span class="line">_for(j,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(a[i]&#x3D;&#x3D;b[i])</span><br><span class="line">lcs[i][j]&#x3D;lcs[i-1][j-1]+1;</span><br><span class="line">else</span><br><span class="line">lcs[i][j]&#x3D;max(lcs[i][j-1],lcs[i-1][j]);</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;lcs[n][n];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="最长上升子序列nlogn"><a href="#最长上升子序列nlogn" class="headerlink" title="最长上升子序列nlogn"></a>最长上升子序列nlogn</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">#define N 100001</span><br><span class="line">int a[N],b[N],c[N];</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;a[i];</span><br><span class="line">c[a[i]]&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_for(i,1,n)</span><br><span class="line">cin&gt;&gt;a[i];</span><br><span class="line">int len&#x3D;0;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(c[a[i]]&gt;b[len])</span><br><span class="line">b[++len]&#x3D;c[a[i]];</span><br><span class="line">else </span><br><span class="line">*upper_bound(b+1,b+len+1,c[a[i]])&#x3D;c[a[i]];</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;len;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最长公共子序列 </tag>
            
            <tag> 最长上升子序列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1020 导弹拦截</title>
      <link href="2020/04/04/%E6%B4%9B%E8%B0%B7-P1020-%E5%AF%BC%E5%BC%B9%E6%8B%A6%E6%88%AA/"/>
      <url>2020/04/04/%E6%B4%9B%E8%B0%B7-P1020-%E5%AF%BC%E5%BC%B9%E6%8B%A6%E6%88%AA/</url>
      
        <content type="html"><![CDATA[<p>第一问一眼能看出是求最大单调非递增序列；第二问可以用Dilworth定理：最长x的子序列链的个数等于最长!X链的长度。或者这么考虑，问的是最少的导弹系统的个数，所以如果用x1,x2,……xn表示导弹系统1，2，……n现在可以到达的高度，其中x1,x2……xn互不相同，假设x1=1,x2=2,现在来了一个高度为1的导弹，肯定用x1来击落它，不会浪费高的导弹系统。所以它们互不相同。对于每一个新导弹系统击落的第一个导弹来说，x1,x2,……xn都比这个导弹的高度低(如果高的话就不会动用新的导弹系统)，<strong>所以最少导弹系统的个数一定是一个上升子序列的长度。</strong>考虑到如果存在一个最长的单调递增子序列，每个元素都需要一个新的导弹系统，<strong>所以新的导弹系统的个数最少是最长上升子序列的长度，又因为最少导弹系统的个数一定是一个上升子序列的长度，所以新的导弹系统的个数就是最长上升子序列的长度。</strong><br><strong><a id="more"></a></strong></p><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>题目描述</p><p>某国为了防御敌国的导弹袭击，发展出一种导弹拦截系统。但是这种导弹拦截系统有一个缺陷：虽然它的第一发炮弹能够到达任意的高度，但是以后每一发炮弹都不能高于前一发的高度。某天，雷达捕捉到敌国的导弹来袭。由于该系统还在试用阶段，所以只有一套系统，因此有可能不能拦截所有的导弹。</p><p>输入导弹依次飞来的高度（雷达给出的高度数据是\le 50000≤50000的正整数），计算这套系统最多能拦截多少导弹，如果要拦截所有导弹最少要配备多少套这种导弹拦截系统。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>11行，若干个整数（个数\le 100000≤100000）</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>22行，每行一个整数，第一个数字表示这套系统最多能拦截多少导弹，第二个数字表示如果要拦截所有导弹最少要配备多少套这种导弹拦截系统。</p><h4 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h4><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">389 207 155 300 299 170 158 65</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h4 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h4><p>为了让大家更好地测试n方算法，本题开启spj，n方100分，nlogn200分</p><p>每点两问，按问给分</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="DP（n2）"><a href="#DP（n2）" class="headerlink" title="DP（n2）"></a>DP（n2）</h3><p>a数组存数据，b[i]/r[i]表示以a[i]结尾(包括a[i])的最大非上升/上升子序列的长度</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int a[100001];</span><br><span class="line">int b[100001];</span><br><span class="line">int r[100001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int c&#x3D;0,ans&#x3D;0,rans&#x3D;0;</span><br><span class="line">while(cin&gt;&gt;a[c++])</span><br><span class="line">&#123;</span><br><span class="line">int he&#x3D;0;</span><br><span class="line">for(int i&#x3D;c-1;i&gt;&#x3D;0;i--)</span><br><span class="line">&#123;</span><br><span class="line">if(a[i]&gt;a[c-1])</span><br><span class="line">&#123;</span><br><span class="line">he&#x3D;max(he,b[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">b[c-1]&#x3D;he+1;</span><br><span class="line">ans&#x3D;max(ans,b[c-1]);</span><br><span class="line"></span><br><span class="line">he&#x3D;0;</span><br><span class="line">for(int i&#x3D;c-1;i&gt;&#x3D;0;i--)</span><br><span class="line">&#123;</span><br><span class="line">if(a[i]&lt;a[c-1])</span><br><span class="line">&#123;</span><br><span class="line">he&#x3D;max(he,r[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">r[c-1]&#x3D;he+1;</span><br><span class="line">rans&#x3D;max(rans,r[c-1]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;cout&lt;&lt;ans&lt;&lt;endl;cout&lt;&lt;rans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DP-二分查找"><a href="#DP-二分查找" class="headerlink" title="DP+二分查找"></a>DP+二分查找</h3><p>a数组存数据，b[i]/r[i]表示长度为i的最大非上升/上升序列的最后一个元素的最大/小值。bs函数可以当做模板，参数（待查找的数组，起点，终点，要比较的数字，op）,op为1/-1表示找小/大于num的第一个数的下标。当然二分查找的前提是数组已经排好序。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int a[100001];</span><br><span class="line">int b[100001];</span><br><span class="line">int r[100001];</span><br><span class="line">int bs(int s[],int start,int end,int num,int op)</span><br><span class="line">&#123;</span><br><span class="line">while(start&lt;&#x3D;end)</span><br><span class="line">&#123;</span><br><span class="line">int mid&#x3D;(start+end)&#x2F;2;</span><br><span class="line">if(op*num&lt;&#x3D;op*s[mid])</span><br><span class="line">start&#x3D;mid+1;</span><br><span class="line">else</span><br><span class="line">end&#x3D;mid-1;</span><br><span class="line">&#125;</span><br><span class="line">while(op&#x3D;&#x3D;-1&amp;&amp;s[start-1]&#x3D;&#x3D;num) start--;</span><br><span class="line">return start;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int c&#x3D;0,len_b&#x3D;0,len_r&#x3D;0;</span><br><span class="line">memset(b,0x3f,sizeof(b));</span><br><span class="line">while(cin&gt;&gt;a[c++])</span><br><span class="line">&#123;</span><br><span class="line">int b_index&#x3D;bs(b,0,len_b,a[c-1],1);</span><br><span class="line">b[b_index]&#x3D;a[c-1];</span><br><span class="line">if(b_index&gt;len_b) len_b&#x3D;b_index;</span><br><span class="line">int r_index&#x3D;bs(r,0,len_r,a[c-1],-1);</span><br><span class="line">r[r_index]&#x3D;a[c-1];</span><br><span class="line">if(r_index&gt;len_r) len_r&#x3D;r_index;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;len_b&lt;&lt;endl&lt;&lt;len_r;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="用STL里面的二分查找"><a href="#用STL里面的二分查找" class="headerlink" title="用STL里面的二分查找"></a>用STL里面的二分查找</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int a[100001];</span><br><span class="line">int b[100001];</span><br><span class="line">int r[100001];</span><br><span class="line">bool cmp(int a,int b)</span><br><span class="line">&#123;</span><br><span class="line">return a&gt;b;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int c&#x3D;0,len_b&#x3D;0,len_r&#x3D;0;</span><br><span class="line">b[0]&#x3D;0x3f3f3f3f;</span><br><span class="line">while(cin&gt;&gt;a[c++])</span><br><span class="line">&#123;</span><br><span class="line">if(a[c-1]&lt;&#x3D;b[len_b]) b[++len_b]&#x3D;a[c-1];</span><br><span class="line">else *upper_bound(b+1,b+len_b+1,a[c-1],cmp)&#x3D;a[c-1];</span><br><span class="line">if(a[c-1]&gt;r[len_r]) r[++len_r]&#x3D;a[c-1];</span><br><span class="line">else *lower_bound(r+1,r+1+len_r,a[c-1])&#x3D;a[c-1];</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;len_b&lt;&lt;endl&lt;&lt;len_r;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 二分查找(大小于) </tag>
            
            <tag> 最长(非)单调子序列 </tag>
            
            <tag> Dilworth定理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1002 过河卒</title>
      <link href="2020/04/03/%E6%B4%9B%E8%B0%B7-P1002-%E8%BF%87%E6%B2%B3%E5%8D%92/"/>
      <url>2020/04/03/%E6%B4%9B%E8%B0%B7-P1002-%E8%BF%87%E6%B2%B3%E5%8D%92/</url>
      
        <content type="html"><![CDATA[<p>注意初始化不能直接对起点操作，因为这样就不能判断起点是不是马的控制点。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>棋盘上 A<em>A</em> 点有一个过河卒，需要走到目标 B<em>B</em> 点。卒行走的规则：可以向下、或者向右。同时在棋盘上 C<em>C</em> 点有一个对方的马，该马所在的点和所有跳跃一步可达的点称为对方马的控制点。因此称之为“马拦过河卒”。</p><p>棋盘用坐标表示，A<em>A</em> 点 (0, 0)(0,0)、B<em>B</em> 点 (n, m)(<em>n</em>,<em>m</em>)，同样马的位置坐标是需要给出的。</p><p><img src="https://cdn.luogu.com.cn/upload/image_hosting/dqlo9i4w.png" alt="img"></p><p>现在要求你计算出卒从 A<em>A</em> 点能够到达 B<em>B</em> 点的路径的条数，假设马的位置是固定不动的，并不是卒走一步马走一步。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>一行四个正整数，分别表示 B<em>B</em> 点坐标和马的坐标。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>一个整数，表示所有的路径条数。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6 6 3 3</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><p>对于 100 %100% 的数据，1 \le n, m \le 201≤<em>n</em>,<em>m</em>≤20，0 \le0≤ 马的坐标 \le 20≤20。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m,horse_x,horse_y;</span><br><span class="line">long long map[22][22];</span><br><span class="line">int dir[8][2]&#x3D;&#123;1,2,1,-2,-1,2,-1,-2,2,1,2,-1,-2,1,-2,-1&#125;;</span><br><span class="line">bool judge(int x,int y)</span><br><span class="line">&#123;</span><br><span class="line">if(x&#x3D;&#x3D;horse_x&amp;&amp;y&#x3D;&#x3D;horse_y)</span><br><span class="line">return 0;</span><br><span class="line">_for(i,0,7)</span><br><span class="line">&#123;</span><br><span class="line">int xx&#x3D;horse_x+dir[i][0];</span><br><span class="line">int yy&#x3D;horse_y+dir[i][1];</span><br><span class="line">if(x&#x3D;&#x3D;xx&amp;&amp;y&#x3D;&#x3D;yy)</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">return 1;</span><br><span class="line">&#125; </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input1.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m&gt;&gt;horse_x&gt;&gt;horse_y;</span><br><span class="line">n++;m++;horse_x++;horse_y++;</span><br><span class="line">map[1][0]&#x3D;1;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">_for(j,1,m)</span><br><span class="line">if(judge(i,j))</span><br><span class="line">map[i][j]&#x3D;map[i-1][j]+map[i][j-1];</span><br><span class="line">cout&lt;&lt;map[n][m];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简单DP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1802 5倍经验日</title>
      <link href="2020/04/03/%E6%B4%9B%E8%B0%B7-P1802-5%E5%80%8D%E7%BB%8F%E9%AA%8C%E6%97%A5/"/>
      <url>2020/04/03/%E6%B4%9B%E8%B0%B7-P1802-5%E5%80%8D%E7%BB%8F%E9%AA%8C%E6%97%A5/</url>
      
        <content type="html"><![CDATA[<p>一个01可不装满背包的变形，注意循环必须[x,cost],然后[0,cost-1]，不然会重复！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h3><p>现在乐斗有活动了！每打一个人可以获得5倍经验！absi2011却无奈的看着那一些比他等级高的好友，想着能否把他们干掉。干掉能拿不少经验的。</p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>现在absi2011拿出了x个迷你装药物(嗑药打人可耻….)，准备开始与那些人打了</p><p>由于迷你装一个只能管一次，所以absi2011要谨慎的使用这些药，悲剧的是，没到达最少打败该人所用的属性药了他打人必输&gt;.&lt;所以他用2个药去打别人，别人却表明3个药才能打过，那么相当于你输了并且这两个属性药浪费了。</p><p>现在有n个好友，有输掉拿的经验、赢了拿的经验、要嗑几个药才能打过。求出最大经验（注意，最后要乘以5）</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行两个数，n和x</p><p>后面n行每行三个数，分别表示输了拿到的经验(lose[i])、赢了拿到的经验(win[i])、打过要至少使用的药数量(use[i])。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>一个整数，最多获得的经验</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">6 8</span><br><span class="line">21 52 1</span><br><span class="line">21 70 5</span><br><span class="line">21 48 2</span><br><span class="line">14 38 3</span><br><span class="line">14 36 1</span><br><span class="line">14 36 2</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1060</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><p>【Hint】</p><p>五倍经验活动的时候，absi2011总是吃体力药水而不是这种属性药&gt;.&lt;</p><p>【数据范围】</p><p>对于10%的数据，保证x=0</p><p>对于30%的数据，保证n&lt;=10,x&lt;=20</p><p>对于60%的数据，保证n&lt;=100,x&lt;=100, 10&lt;=lose[i], win[i]&lt;=100,use[i]&lt;=5</p><p>对于100%的数据，保证n&lt;=1000,x&lt;=1000,0&lt;lose[i]&lt;=win[i]&lt;=1000000,0&lt;=use[i]&lt;=1000</p><p>【题目来源】</p><p>fight.pet.qq.com</p><p>absi2011授权题目</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">long long bag[1001]; </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,x;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;x;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">long long lose,win,cost;</span><br><span class="line">cin&gt;&gt;lose&gt;&gt;win&gt;&gt;cost;</span><br><span class="line">for(int j&#x3D;x;j&gt;&#x3D;cost;j--)</span><br><span class="line">bag[j]&#x3D;max(bag[j-cost]+win,bag[j]+lose);</span><br><span class="line">_for(j,0,cost-1)</span><br><span class="line">bag[j]+&#x3D;lose;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;bag[x]*5;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 高阶01背包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1616 疯狂的采药</title>
      <link href="2020/04/02/%E6%B4%9B%E8%B0%B7-P1616-%E7%96%AF%E7%8B%82%E7%9A%84%E9%87%87%E8%8D%AF/"/>
      <url>2020/04/02/%E6%B4%9B%E8%B0%B7-P1616-%E7%96%AF%E7%8B%82%E7%9A%84%E9%87%87%E8%8D%AF/</url>
      
        <content type="html"><![CDATA[<p>无限物品的可不满背包</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h3><p>此题为NOIP2005普及组第三题的疯狂版。</p><p>此题为纪念LiYuxiang而生。</p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>LiYuxiang是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同种类的草药，采每一种都需要一些时间，每一种也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”</p><p>如果你是LiYuxiang，你能完成这个任务吗？</p><p>此题和原题的不同点：</p><p>1.每种草药可以无限制地疯狂采摘。</p><p>2.药的种类眼花缭乱，采药时间好长好长啊！师傅等得菊花都谢了！</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入第一行有两个整数T（1 &lt;= T &lt;= 100000）和M（1 &lt;= M &lt;= 10000），用一个空格隔开，T代表总共能够用来采药的时间，M代表山洞里的草药的数目。接下来的M行每行包括两个在1到10000之间（包括1和10000）的整数，分别表示采摘某种草药的时间和这种草药的价值。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出一行，这一行只包含一个整数，表示在规定的时间内，可以采到的草药的最大总价值。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">70 3</span><br><span class="line">71 100</span><br><span class="line">69 1</span><br><span class="line">1 2</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">140</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><p>对于30%的数据，M &lt;= 1000；</p><p>对于全部的数据，M &lt;= 10000，且M*T&lt;10000000(别数了，7个0)。</p><p>加油LiYuxiang，第一个AC留给你！</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">long long bag[100001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int t,m;</span><br><span class="line">cin&gt;&gt;t&gt;&gt;m;</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">int herb_t,herb_v;</span><br><span class="line">cin&gt;&gt;herb_t&gt;&gt;herb_v;</span><br><span class="line">for(int j&#x3D;herb_t;j&lt;&#x3D;t;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(bag[j-herb_t]+herb_v&gt;bag[j])</span><br><span class="line">bag[j]&#x3D;bag[j-herb_t]+herb_v;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;bag[t];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 无限背包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1048 采药</title>
      <link href="2020/04/02/%E6%B4%9B%E8%B0%B7-P1048-%E9%87%87%E8%8D%AF/"/>
      <url>2020/04/02/%E6%B4%9B%E8%B0%B7-P1048-%E9%87%87%E8%8D%AF/</url>
      
        <content type="html"><![CDATA[<p>简单可不装满的01背包，数组初始化全为0</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>辰辰是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同的草药，采每一株都需要一些时间，每一株也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”</p><p>如果你是辰辰，你能完成这个任务吗？</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行有 22 个整数 T<em>T</em>（1 \le T \le 10001≤<em>T</em>≤1000）和 M<em>M</em>（1 \le M \le 1001≤<em>M</em>≤100），用一个空格隔开，T<em>T</em> 代表总共能够用来采药的时间，M<em>M</em> 代表山洞里的草药的数目。</p><p>接下来的 M<em>M</em> 行每行包括两个在 11 到 100100 之间（包括 11 和 100100）的整数，分别表示采摘某株草药的时间和这株草药的价值。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出在规定的时间内可以采到的草药的最大总价值。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">70 3</span><br><span class="line">71 100</span><br><span class="line">69 1</span><br><span class="line">1 2</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><ul><li>对于 30%30% 的数据，M \le 10<em>M</em>≤10；</li><li>对于全部的数据，M \le 100<em>M</em>≤100。</li></ul><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int bag[1001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int t,m;</span><br><span class="line">cin&gt;&gt;t&gt;&gt;m;</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">int herb_t,herb_v;</span><br><span class="line">cin&gt;&gt;herb_t&gt;&gt;herb_v;</span><br><span class="line">for(int j&#x3D;t;j&gt;&#x3D;herb_t;j--)</span><br><span class="line">&#123;</span><br><span class="line">if(bag[j-herb_t]+herb_v&gt;bag[j])</span><br><span class="line">bag[j]&#x3D;bag[j-herb_t]+herb_v;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;bag[t];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 01可不满背包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P4017 最大食物链计数</title>
      <link href="2020/04/02/%E6%B4%9B%E8%B0%B7-P4017-%E6%9C%80%E5%A4%A7%E9%A3%9F%E7%89%A9%E9%93%BE%E8%AE%A1%E6%95%B0/"/>
      <url>2020/04/02/%E6%B4%9B%E8%B0%B7-P4017-%E6%9C%80%E5%A4%A7%E9%A3%9F%E7%89%A9%E9%93%BE%E8%AE%A1%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>本文用了三类方法，加上邻接表和vector的转换，一共写了五个方法，分别是优先队列，记忆dfs+vector，记忆dfs+邻接表，拓扑排序+二维数组，拓扑排序+邻接表</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h3><p>你知道食物链吗？Delia 生物考试的时候，数食物链条数的题目全都错了，因为她总是重复数了几条或漏掉了几条。于是她来就来求助你，然而你也不会啊！写一个程序来帮帮她吧。</p><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你一个食物网，你要求出这个食物网中最大食物链的数量。</p><p>（这里的“最大食物链”，指的是<strong>生物学意义上的食物链</strong>，即<strong>最左端是不会捕食其他生物的生产者，最右端是不会被其他生物捕食的消费者</strong>。）</p><p>Delia 非常急，所以你只有 11 秒的时间。</p><p>由于这个结果可能过大，你只需要输出总数模上 8011200280112002 的结果。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>第一行，两个正整数 n、m<em>n</em>、<em>m</em>，表示生物种类 n<em>n</em> 和吃与被吃的关系数 m<em>m</em>。</p><p>接下来 m<em>m</em> 行，每行两个正整数，表示被吃的生物A和吃A的生物B。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>一行一个整数，为最大食物链数量模上 8011200280112002 的结果。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5 7</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">2 3</span><br><span class="line">3 5</span><br><span class="line">2 5</span><br><span class="line">4 5</span><br><span class="line">3 4</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><p>各测试点满足以下约定：</p><p><img src="https://cdn.luogu.com.cn/upload/pic/12011.png" alt="img"></p><p>【补充说明】</p><p>数据中不会出现环，满足生物学的要求。（感谢 @AKEE ）</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="优先队列"><a href="#优先队列" class="headerlink" title="优先队列"></a>优先队列</h3><p>这是我第一个想到的方法，因为这个题目的分类在DP中，想到把边用优先队列按照起点从小到大排序，这样就能满足这样一个转移方程</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum[a.e]+&#x3D;(v[a.s]&#x3D;&#x3D;0)?1:sum[a.s];</span><br></pre></td></tr></table></figure><p>其中，v[i]=0表示纯起点，因为把边按照起点排序了，所以当前边终点的出度一定为0，起点又分为两种情况，一个是没有入度的(纯起点)，如果这样，sum[终点]应该加1。如果起点是既有入度又有出度的，sum[终点]+=sum[起点]。这个过程中还要改变点的状态，例如1-&gt;2,2标记为终点，然后1-&gt;3,3标记为终点，然后2-&gt;3,2标记为中转点，这样统计所有终点的sum值就可以得到结果。但是现实是残酷的，有500000个边，我估计队列都满了，并且时间效率也不好，失败的算法</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int sum[5001];</span><br><span class="line">int v[5001];&#x2F;&#x2F;0新起点，1终点，-1中转点 </span><br><span class="line">struct edge&#123;</span><br><span class="line">int s,e;</span><br><span class="line">&#125;;</span><br><span class="line">struct cmp&#123;</span><br><span class="line">bool operator()(edge a,edge b)</span><br><span class="line">&#123;</span><br><span class="line">return a.s&gt;b.s;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,m;</span><br><span class="line">priority_queue&lt;edge ,vector&lt;edge&gt;, cmp&gt; q;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">int s,e;</span><br><span class="line">cin&gt;&gt;s&gt;&gt;e;</span><br><span class="line">q.push(&#123;s,e&#125;);</span><br><span class="line">&#125;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">edge a&#x3D;q.top();</span><br><span class="line">q.pop();</span><br><span class="line">&#x2F;&#x2F;sum[a.e]&#x3D;(v[a.s]&#x3D;&#x3D;0)?(sum[a.e]+1):sum[a.s];</span><br><span class="line">if(v[a.s]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">sum[a.e]++;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">sum[a.e]+&#x3D;sum[a.s];</span><br><span class="line">if(v[a.s]&#x3D;&#x3D;1)</span><br><span class="line">v[a.s]&#x3D;-1;</span><br><span class="line">&#125;</span><br><span class="line">v[a.e]&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">int ans&#x3D;0;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(v[i]&#x3D;&#x3D;1)</span><br><span class="line">ans+&#x3D;sum[i];</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="记忆dfs"><a href="#记忆dfs" class="headerlink" title="记忆dfs"></a>记忆dfs</h3><p>如果我们能知道以终点上一个点为终点的食物链数，那么终点的食物链数就是这些点食物链数的和。例如，知道5是其中一个终点，并且已知只有2-&gt;5,4-&gt;5，那么以5位终点的食物链数等于以2为终点的食物链数+以4为终点的食物链数。<strong>怎么知道以5为终点的边的起点呢？需要邻接表或者vector</strong>，<strong>怎么知道5是不是终点呢？需要一个数组标记一下和邻接表或者vector联合判断</strong></p><h4 id="记忆dfs-邻接表"><a href="#记忆dfs-邻接表" class="headerlink" title="记忆dfs+邻接表"></a>记忆dfs+邻接表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">struct Edge&#123;</span><br><span class="line">int start,next;</span><br><span class="line">&#125; edge[5000005];</span><br><span class="line">int pre[5005];</span><br><span class="line">int num[5005];</span><br><span class="line">bool des[5005];</span><br><span class="line">int dfs(int e)</span><br><span class="line">&#123;</span><br><span class="line">if(!pre[e]) return 1;</span><br><span class="line">if(num[e]) return num[e];</span><br><span class="line">int summ&#x3D;0;</span><br><span class="line">for(int i&#x3D;pre[e];i;i&#x3D;edge[i].next)</span><br><span class="line">&#123;</span><br><span class="line">summ+&#x3D;dfs(edge[i].start);</span><br><span class="line">summ%&#x3D;80112002;</span><br><span class="line">&#125;</span><br><span class="line">return num[e]&#x3D;summ;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,m;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">int s,e;</span><br><span class="line">cin&gt;&gt;s&gt;&gt;e;</span><br><span class="line">edge[i].start&#x3D;s;</span><br><span class="line">edge[i].next&#x3D;pre[e];</span><br><span class="line">pre[e]&#x3D;i;</span><br><span class="line">des[s]&#x3D;1; </span><br><span class="line">&#125;</span><br><span class="line">int ans&#x3D;0;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(!des[i]&amp;&amp;pre[i])</span><br><span class="line">&#123;</span><br><span class="line">ans+&#x3D;dfs(i);</span><br><span class="line">ans%&#x3D;80112002;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="记忆dfs-vector"><a href="#记忆dfs-vector" class="headerlink" title="记忆dfs+vector"></a>记忆dfs+vector</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int num[5005];</span><br><span class="line">bool des[5005];</span><br><span class="line">vector&lt;int&gt; v[5005];</span><br><span class="line">int dfs(int e)</span><br><span class="line">&#123;</span><br><span class="line">if(!v[e].size()) return 1;</span><br><span class="line">if(num[e]) return num[e];</span><br><span class="line">int summ&#x3D;0;</span><br><span class="line">for(int i&#x3D;0;i&lt;v[e].size();i++)</span><br><span class="line">&#123;</span><br><span class="line">summ+&#x3D;dfs(v[e][i]);</span><br><span class="line">summ%&#x3D;80112002;</span><br><span class="line">&#125;</span><br><span class="line">return num[e]&#x3D;summ;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,m;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">int s,e;</span><br><span class="line">cin&gt;&gt;s&gt;&gt;e;</span><br><span class="line">v[e].push_back(s);</span><br><span class="line">des[s]&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">int ans&#x3D;0;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(!des[i]&amp;&amp;v[i].size())</span><br><span class="line">&#123;</span><br><span class="line">ans+&#x3D;dfs(i);</span><br><span class="line">ans%&#x3D;80112002;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="拓扑排序"><a href="#拓扑排序" class="headerlink" title="拓扑排序"></a>拓扑排序</h3><p>每次取入度为0的点，也就是起点，然后把这个这个起点能到达的终点+当前食物链数目，再找入度为0的点，继续。直到只剩下终点统计一下就可以，这个需要已知起点找终点，可以用二维数组或者邻接表或者vector</p><h4 id="拓扑-二维数组"><a href="#拓扑-二维数组" class="headerlink" title="拓扑+二维数组"></a>拓扑+二维数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m;</span><br><span class="line">int map[5005][5005];</span><br><span class="line">int in[5005],out[5005];</span><br><span class="line">int sum[5005];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">int s,e;</span><br><span class="line">cin&gt;&gt;s&gt;&gt;e;</span><br><span class="line">map[s][e]&#x3D;1;</span><br><span class="line">out[s]++;</span><br><span class="line">in[e]++;</span><br><span class="line">&#125;</span><br><span class="line">queue&lt;int&gt; q;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(!in[i])</span><br><span class="line">&#123;</span><br><span class="line">sum[i]&#x3D;1;</span><br><span class="line">q.push(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int summ&#x3D;0;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">int s&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(map[s][i])</span><br><span class="line">&#123;</span><br><span class="line">sum[i]+&#x3D;sum[s];</span><br><span class="line">sum[i]%&#x3D;80112002;</span><br><span class="line">in[i]--;</span><br><span class="line">if(!in[i])</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">if(!out[i])</span><br><span class="line">&#123;</span><br><span class="line">summ+&#x3D;sum[i];</span><br><span class="line">summ%&#x3D;80112002;</span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">q.push(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;summ;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="拓扑-邻接表"><a href="#拓扑-邻接表" class="headerlink" title="拓扑+邻接表"></a>拓扑+邻接表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;vector&gt; </span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">struct Edge&#123;</span><br><span class="line">int end,next;</span><br><span class="line">&#125; edge[5000005];</span><br><span class="line">int n,m;</span><br><span class="line">int pre[5005];</span><br><span class="line">int in[5005],out[5005];</span><br><span class="line">int sum[5005];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">int s,e;</span><br><span class="line">cin&gt;&gt;s&gt;&gt;e;</span><br><span class="line">edge[i].end&#x3D;e;</span><br><span class="line">edge[i].next&#x3D;pre[s];</span><br><span class="line">pre[s]&#x3D;i;</span><br><span class="line">out[s]++;</span><br><span class="line">in[e]++;</span><br><span class="line">&#125;</span><br><span class="line">queue&lt;int&gt; q;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">if(!in[i])</span><br><span class="line">&#123;</span><br><span class="line">sum[i]&#x3D;1;</span><br><span class="line">q.push(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int summ&#x3D;0;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">int s&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;pre[s];i;i&#x3D;edge[i].next)</span><br><span class="line">&#123;</span><br><span class="line">sum[edge[i].end]+&#x3D;sum[s];</span><br><span class="line">sum[edge[i].end]%&#x3D;80112002;</span><br><span class="line">in[edge[i].end]--;</span><br><span class="line">if(!in[edge[i].end])</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">if(!out[edge[i].end])</span><br><span class="line">&#123;</span><br><span class="line">summ+&#x3D;sum[edge[i].end];</span><br><span class="line">summ%&#x3D;80112002;</span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">q.push(edge[i].end);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;summ;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 食物链 </tag>
            
            <tag> 拓扑排序 </tag>
            
            <tag> 记忆化递归 </tag>
            
            <tag> 邻接表 </tag>
            
            <tag> 优先队列 </tag>
            
            <tag> vector </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P2196 挖地雷</title>
      <link href="2020/04/02/%E6%B4%9B%E8%B0%B7-P2196-%E6%8C%96%E5%9C%B0%E9%9B%B7/"/>
      <url>2020/04/02/%E6%B4%9B%E8%B0%B7-P2196-%E6%8C%96%E5%9C%B0%E9%9B%B7/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>在一个地图上有N<em>N</em>个地窖(N \le 20)(<em>N</em>≤20)，每个地窖中埋有一定数量的地雷。同时，给出地窖之间的连接路径。当地窖及其连接的数据给出之后，某人可以从任一处开始挖地雷，然后可以沿着指出的连接往下挖（仅能选择一条路径），当无连接时挖地雷工作结束。设计一个挖地雷的方案，使某人能挖到最多的地雷。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>有若干行。</p><p>第11行只有一个数字，表示地窖的个数N<em>N</em>。</p><p>第22行有N<em>N</em>个数，分别表示每个地窖中的地雷个数。</p><p>第33行至第N+1<em>N</em>+1行表示地窖之间的连接情况：</p><p>第33行有n-1<em>n</em>−1个数（00或11），表示第一个地窖至第22个、第33个、…、第n<em>n</em>个地窖有否路径连接。如第33行为1 1 0 0 0 … 011000…0，则表示第11个地窖至第22个地窖有路径，至第33个地窖有路径，至第44个地窖、第55个、…、第n<em>n</em>个地窖没有路径。</p><p>第44行有n-2<em>n</em>−2个数，表示第二个地窖至第33个、第44个、…、第n<em>n</em>个地窖有否路径连接。</p><p>… …</p><p>第n+1<em>n</em>+1行有11个数，表示第n-1<em>n</em>−1个地窖至第n<em>n</em>个地窖有否路径连接。（为00表示没有路径，为11表示有路径）。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>有两行</p><p>第一行表示挖得最多地雷时的挖地雷的顺序，各地窖序号间以一个空格分隔，不得有多余的空格。</p><p>第二行只有一个数，表示能挖到的最多地雷数。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">10 8 4 7 6</span><br><span class="line">1 1 1 0</span><br><span class="line">0 0 0</span><br><span class="line">1 1</span><br><span class="line">1</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 3 4 5</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>如果我们知道i点可以到达j点，并且知道到达i点时的最大值sum[i],那么我们就可以计算经过i点到达j点的最大值，与当前j点的最大值sum[j]做比较，取较大者。转移方程为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum[j]&#x3D;max(sum[i]+mines[j],sum[j])</span><br></pre></td></tr></table></figure><p>可行性分析：sum[i]必须是最优解，稍微分析一下能证明可行</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int mines[21]; </span><br><span class="line">int sum[21];</span><br><span class="line">int path[21];</span><br><span class="line">void print_path(int x)</span><br><span class="line">&#123;</span><br><span class="line">if(x&#x3D;&#x3D;0)</span><br><span class="line">return ;</span><br><span class="line">print_path(path[x]);</span><br><span class="line">cout&lt;&lt;x&lt;&lt;&quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n; </span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;mines[i];</span><br><span class="line">sum[i]&#x3D;mines[i];</span><br><span class="line">&#125; </span><br><span class="line">int ans&#x3D;-1;</span><br><span class="line">int index;</span><br><span class="line">_for(i,1,n-1)</span><br><span class="line">&#123;</span><br><span class="line">_for(j,i+1,n)</span><br><span class="line">&#123;</span><br><span class="line">bool connect;</span><br><span class="line">if(cin&gt;&gt;connect&amp;&amp;connect&amp;&amp;sum[i]+mines[j]&gt;sum[j])</span><br><span class="line">&#123;</span><br><span class="line">sum[j]&#x3D;sum[i]+mines[j];</span><br><span class="line">path[j]&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(sum[i]&gt;ans)</span><br><span class="line">&#123;</span><br><span class="line">ans&#x3D;sum[i];</span><br><span class="line">index&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(sum[n]&gt;ans)</span><br><span class="line">&#123;</span><br><span class="line">ans&#x3D;sum[n];</span><br><span class="line">index&#x3D;n;</span><br><span class="line">&#125;</span><br><span class="line">print_path(index);</span><br><span class="line">cout&lt;&lt;endl&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正向DP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1434_[SHOI2002]滑雪</title>
      <link href="2020/04/02/%E6%B4%9B%E8%B0%B7-P1434-SHOI2002-%E6%BB%91%E9%9B%AA/"/>
      <url>2020/04/02/%E6%B4%9B%E8%B0%B7-P1434-SHOI2002-%E6%BB%91%E9%9B%AA/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>Michael 喜欢滑雪。这并不奇怪，因为滑雪的确很刺激。可是为了获得速度，滑的区域必须向下倾斜，而且当你滑到坡底，你不得不再次走上坡或者等待升降机来载你。Michael 想知道在一个区域中最长的滑坡。区域由一个二维数组给出。数组的每个数字代表点的高度。下面是一个例子：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1   2   3   4   5</span><br><span class="line">16  17  18  19  6</span><br><span class="line">15  24  25  20  7</span><br><span class="line">14  23  22  21  8</span><br><span class="line">13  12  11  10  9</span><br></pre></td></tr></table></figure><p>一个人可以从某个点滑向上下左右相邻四个点之一，当且仅当高度会减小。在上面的例子中，一条可行的滑坡为 2424－1717－1616－11（从 2424 开始，在 11 结束）。当然 2525－2424－2323－\ldots…－33－22－11 更长。事实上，这是最长的一条。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>输入的第一行为表示区域的二维数组的行数 R<em>R</em> 和列数 C<em>C</em>。下面是 R<em>R</em> 行，每行有 C<em>C</em> 个数，代表高度(两个数字之间用 11 个空格间隔)。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>输出区域中最长滑坡的长度。</p><h3 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h3><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 5</span><br><span class="line">1 2 3 4 5</span><br><span class="line">16 17 18 19 6</span><br><span class="line">15 24 25 20 7</span><br><span class="line">14 23 22 21 8</span><br><span class="line">13 12 11 10 9</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">25</span><br></pre></td></tr></table></figure><h3 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h3><p>对于 100%100% 的数据，1\leq R,C\leq 1001≤<em>R</em>,<em>C</em>≤100。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="记忆化递归"><a href="#记忆化递归" class="headerlink" title="记忆化递归"></a>记忆化递归</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int map[101][101];</span><br><span class="line">int mem[101][101];</span><br><span class="line">int r,c;</span><br><span class="line">int dir[4][2]&#x3D;&#123;1,0,-1,0,0,1,0,-1&#125;;</span><br><span class="line">int dfs(int x,int y)</span><br><span class="line">&#123;</span><br><span class="line">if(mem[x][y]) return mem[x][y];</span><br><span class="line">int maxx&#x3D;0;</span><br><span class="line">_for(i,0,3)</span><br><span class="line">&#123;</span><br><span class="line">int xx&#x3D;x+dir[i][0];</span><br><span class="line">int yy&#x3D;y+dir[i][1];</span><br><span class="line">if(xx&gt;&#x3D;0&amp;&amp;xx&lt;r&amp;&amp;yy&gt;&#x3D;0&amp;&amp;yy&lt;c&amp;&amp;map[xx][yy]&lt;map[x][y])</span><br><span class="line">&#123;</span><br><span class="line">maxx&#x3D;max(maxx,dfs(xx,yy));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">return mem[x][y]&#x3D;maxx+1;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;r&gt;&gt;c;</span><br><span class="line">_for(i,0,r-1)</span><br><span class="line">_for(j,0,c-1)</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">int ans&#x3D;-1;</span><br><span class="line">_for(i,0,r-1)</span><br><span class="line">_for(j,0,c-1)</span><br><span class="line">ans&#x3D;max(ans,dfs(i,j));</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优先队列DP"><a href="#优先队列DP" class="headerlink" title="优先队列DP"></a>优先队列DP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;queue&gt; </span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">struct node&#123;</span><br><span class="line">int x,y,num;</span><br><span class="line">&#125;;</span><br><span class="line">struct cmp&#123;</span><br><span class="line">bool operator()(node a,node b)</span><br><span class="line">&#123;</span><br><span class="line">return a.num&gt;b.num;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">int r,c,map[101][101],step[101][101];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;r&gt;&gt;c;</span><br><span class="line">priority_queue&lt;node,vector&lt;node&gt;,cmp&gt; q;</span><br><span class="line">_for(i,1,r)</span><br><span class="line">_for(j,1,c)</span><br><span class="line">&#123;</span><br><span class="line">step[i][j]&#x3D;1;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">q.push(&#123;i,j,map[i][j]&#125;);</span><br><span class="line">&#125;</span><br><span class="line">int ans&#x3D;0;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">node t&#x3D;q.top();</span><br><span class="line">q.pop();</span><br><span class="line">if(t.num&gt;map[t.x+1][t.y]) step[t.x][t.y]&#x3D;max(step[t.x][t.y],step[t.x+1][t.y]+1);</span><br><span class="line">if(t.num&gt;map[t.x-1][t.y]) step[t.x][t.y]&#x3D;max(step[t.x][t.y],step[t.x-1][t.y]+1);</span><br><span class="line">if(t.num&gt;map[t.x][t.y+1]) step[t.x][t.y]&#x3D;max(step[t.x][t.y],step[t.x][t.y+1]+1);</span><br><span class="line">if(t.num&gt;map[t.x][t.y-1]) step[t.x][t.y]&#x3D;max(step[t.x][t.y],step[t.x][t.y-1]+1);</span><br><span class="line">ans&#x3D;max(ans,step[t.x][t.y]);</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>洛谷_P1216_数字三角形</title>
      <link href="2020/04/01/%E6%B4%9B%E8%B0%B7-P1216-%E6%95%B0%E5%AD%97%E4%B8%89%E8%A7%92%E5%BD%A2/"/>
      <url>2020/04/01/%E6%B4%9B%E8%B0%B7-P1216-%E6%95%B0%E5%AD%97%E4%B8%89%E8%A7%92%E5%BD%A2/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>观察下面的数字金字塔。</p><p>写一个程序来查找从最高点到底部任意处结束的路径，使路径经过数字的和最大。每一步可以走到左下方的点也可以到达右下方的点。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">        <span class="number">7</span> </span><br><span class="line">      <span class="number">3</span>   <span class="number">8</span> </span><br><span class="line">    <span class="number">8</span>   <span class="number">1</span>   <span class="number">0</span> </span><br><span class="line">  <span class="number">2</span>   <span class="number">7</span>   <span class="number">4</span>   <span class="number">4</span> </span><br><span class="line"><span class="number">4</span>   <span class="number">5</span>   <span class="number">2</span>   <span class="number">6</span>   <span class="number">5</span></span><br></pre></td></tr></table></figure><p>在上面的样例中,从 7 \to 3 \to 8 \to 7 \to 57→3→8→7→5 的路径产生了最大</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>第一个行一个正整数 r<em>r</em> ,表示行的数目。</p><p>后面每行为这个数字金字塔特定行包含的整数。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>单独的一行,包含那个可能得到的最大的和。</p><h4 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a>输入输出样例</h4><p><strong>输入 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">7</span><br><span class="line">3 8</span><br><span class="line">8 1 0</span><br><span class="line">2 7 4 4</span><br><span class="line">4 5 2 6 5</span><br></pre></td></tr></table></figure><p><strong>输出 #1</strong>复制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30</span><br></pre></td></tr></table></figure><h4 id="说明-提示"><a href="#说明-提示" class="headerlink" title="说明/提示"></a>说明/提示</h4><p>【数据范围】<br>对于 100%100% 的数据，1\le r \le 10001≤<em>r</em>≤1000，所有输入在 [0,100][0,100] 范围内。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="正向-计算起点到每个点的最大值"><a href="#正向-计算起点到每个点的最大值" class="headerlink" title="正向:计算起点到每个点的最大值"></a>正向:计算起点到每个点的最大值</h3><p>从上向下走，找正向的来源，注意不能影响下一个点的来源</p><h4 id="轴对称翻转代码"><a href="#轴对称翻转代码" class="headerlink" title="轴对称翻转代码"></a>轴对称翻转代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int num[1001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,number;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">for(int j&#x3D;i;j&gt;&#x3D;1;j--)</span><br><span class="line">cin&gt;&gt;number,num[j]&#x3D;max(num[j],num[j-1])+number;</span><br><span class="line">int ans&#x3D;num[1];</span><br><span class="line">_for(i,2,n)</span><br><span class="line">ans&#x3D;max(ans,num[i]);</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="右对齐代码"><a href="#右对齐代码" class="headerlink" title="右对齐代码"></a>右对齐代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int num[1002];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,number;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">for(int j&#x3D;n-i+1;j&lt;&#x3D;n;j++)</span><br><span class="line">cin&gt;&gt;number,num[j]&#x3D;max(num[j],num[j+1])+number;</span><br><span class="line">int ans&#x3D;num[1];</span><br><span class="line">_for(i,2,n)</span><br><span class="line">ans&#x3D;max(ans,num[i]);</span><br><span class="line">cout&lt;&lt;ans;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="反向：计算终点到每一个起点的最大值"><a href="#反向：计算终点到每一个起点的最大值" class="headerlink" title="反向：计算终点到每一个起点的最大值"></a>反向：计算终点到每一个起点的最大值</h3><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int map[1001][1001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input5.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,0,n-1)</span><br><span class="line">_for(j,0,i)</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">for(int i&#x3D;n-2;i&gt;&#x3D;0;i--)</span><br><span class="line">for(int j&#x3D;0;j&lt;&#x3D;i;j++)</span><br><span class="line">map[i][j]+&#x3D;max(map[i+1][j],map[i+1][j+1]);</span><br><span class="line">cout&lt;&lt;map[0][0];</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数塔 </tag>
            
            <tag> 正反向思考 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU_1024_Max Sum Plus Plus</title>
      <link href="2020/04/01/HDU-1024-Max-Sum-Plus-Plus/"/>
      <url>2020/04/01/HDU-1024-Max-Sum-Plus-Plus/</url>
      
        <content type="html"><![CDATA[<p>DP最重要的是找状态转移方程，也就是怎么通过已有的状态求未知的状态</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="Max-Sum-Plus-Plus"><a href="#Max-Sum-Plus-Plus" class="headerlink" title="Max Sum Plus Plus"></a>Max Sum Plus Plus</h3><p><strong><em>\</em>Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 48103  Accepted Submission(s): 17534<br>**</strong></p><h4 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h4><p>Now I think you have got an AC in Ignatius.L’s “Max Sum” problem. To be a brave ACMer, we always challenge ourselves to more difficult problems. Now you are faced with a more difficult problem.</p><p>Given a consecutive number sequence S<em>1</em>, S<em>2</em>, S<em>3</em>, S<em>4</em> … S<em>x</em>, … S<em>n</em> (1 ≤ x ≤ n ≤ 1,000,000, -32768 ≤ S<em>x</em> ≤ 32767). We define a function sum(i, j) = S<em>i</em> + … + S<em>j</em> (1 ≤ i ≤ j ≤ n).</p><p>Now given an integer m (m &gt; 0), your task is to find m pairs of i and j which make sum(i<em>1</em>, j<em>1</em>) + sum(i<em>2</em>, j<em>2</em>) + sum(i<em>3</em>, j<em>3</em>) + … + sum(i<em>m</em>, j<em>m</em>) maximal (i<em>x</em> ≤ i<em>y</em> ≤ j<em>x</em> or i<em>x</em> ≤ j<em>y</em> ≤ j<em>x</em> is not allowed).</p><p>But I`m lazy, I don’t want to write a special-judge module, so you don’t have to output m pairs of i and j, just output the maximal summation of sum(i<em>x</em>, j<em>x</em>)(1 ≤ x ≤ m) instead. ^_^</p><h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>Each test case will begin with two integers m and n, followed by n integers S<em>1</em>, S<em>2</em>, S<em>3</em> … S<em>n</em>.<br>Process to the end of file.</p><h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>Output the maximal summation described above in one line.</p><h4 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 3 1 2 3</span><br><span class="line">2 6 -1 4 -2 3 -2 3</span><br></pre></td></tr></table></figure><h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">8</span><br></pre></td></tr></table></figure><h4 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h4><p>输入m,n,然后输入n个数。求在这n个数中，分为m个区间，区间互不重叠，对每个区间求和得到sum1~m，再对这m个sum求和，求这个和的最大值</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>先从未优化的版本开始，<code>max_sum[i][j]</code>表示的是将[0,j]区间分为i个互不重叠子区间得到的最优解，那么状态转移方程就可以表示为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max_sum[i][j]&#x3D;max(max_sum[i][j-1],max_sum[i-1][k])      k属于[i-1,j-1]</span><br></pre></td></tr></table></figure><p>然后就可以发现，求解的时候只涉及max_sum数组的两行，第i行和第i-1行，因此可以用一个两行的滚动的数组表示DP数组。也就是用其中一行计算另一行，当另一行计算好了之后，转换角色。即</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max_sum[t][j]&#x3D;max(max_sum[t][j-1],max_sum[1-t][k])      k属于[i-1,j-1]</span><br></pre></td></tr></table></figure><p>然后就会发现，时间复杂度太高，主要是<code>max_sum[1-t][k]</code>耗时，于是将后面的<code>max_sum[1-t][k]</code>用单独一个数组max_pre[j-1]代替，并且这样做也可以舍弃max_sum的第一维了。于是就简化转移方程为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max_sum[j]&#x3D;max(max_sum[j-1],max_pre[j-1])+num[j];</span><br></pre></td></tr></table></figure><p>其中max_sum[j]表示的是[0,j]区间分为i个互不重叠小区间的最优解；max_pre[j-1]表示的是终点在[i,j-1]，并且分为i-1个区间的和的最大值，其实就是刚开始的<code>max_sum[i-1][k]  k属于[i-1,j-1]</code>的最大值，即</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max(max_sum[i-1][i-1],max_sum[i-1][i],max_sum[i-1][i+1],…………,max_sum[i-1][j-1])</span><br></pre></td></tr></table></figure><p>舍弃掉第一维，可以用循环次数决定max_sum数组表示的是分为几个小区间的状态，比如循环一次就表示分为1个小区间的各种状态，循环m次就表示循环m次的状态，并且当每次循环的时候需要更新max_pre，当第i次循环的时候计算max_sum[j]的时候，需要用到max_pre[j-1]，并且在第i次循环中只使用这一次，以后就用不到了，并且此时的max_pre需要更新的值已经出来了，就是<code>max_sum[x] x属于[0,j-1]</code>的最大值，所以我们只需要维护一个max_summ表示第i次<code>max_sum[x] x属于[0,j-1]</code>的最大值就能够实现这两个数组的同步更新。、</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">using namespace std;</span><br><span class="line">int num[1000001];</span><br><span class="line">int max_sum[1000001];</span><br><span class="line">int max_pre[1000001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input5.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int m,n,max_summ;</span><br><span class="line">while(cin&gt;&gt;m&gt;&gt;n)</span><br><span class="line">&#123;</span><br><span class="line">memset(max_sum,0,sizeof(max_sum));</span><br><span class="line">memset(max_pre,0,sizeof(max_pre));</span><br><span class="line">_for(i,1,n)</span><br><span class="line">cin&gt;&gt;num[i];</span><br><span class="line">_for(i,1,m)</span><br><span class="line">&#123;</span><br><span class="line">max_summ&#x3D;-MAX;</span><br><span class="line">_for(j,i,n)</span><br><span class="line">&#123;</span><br><span class="line">max_sum[j]&#x3D;max(max_sum[j-1],max_pre[j-1])+num[j];</span><br><span class="line">max_pre[j-1]&#x3D;max_summ;</span><br><span class="line">if(max_sum[j]&gt;max_summ)</span><br><span class="line">max_summ&#x3D;max_sum[j];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;max_summ&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 转移方程的构造 </tag>
            
            <tag> 极度优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法提高 秘密行动</title>
      <link href="2020/04/01/%E7%AE%97%E6%B3%95%E6%8F%90%E9%AB%98-%E7%A7%98%E5%AF%86%E8%A1%8C%E5%8A%A8/"/>
      <url>2020/04/01/%E7%AE%97%E6%B3%95%E6%8F%90%E9%AB%98-%E7%A7%98%E5%AF%86%E8%A1%8C%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<p>双数组DP</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法提高-秘密行动"><a href="#算法提高-秘密行动" class="headerlink" title="算法提高 秘密行动"></a>算法提高 秘密行动</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T581#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　小D接到一项任务，要求他爬到一座n层大厦的顶端与神秘人物会面。这座大厦有一个神奇的特点，每层的高度都不一样，同时，小D也拥有一项特殊能力，可以一次向上跳跃一层或两层，但是这项能力无法连续使用。已知向上1高度消耗的时间为1，跳跃不消耗时间。由于事态紧急，小D想知道他最少需要多少时间到达顶层。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行包含一个整数n，代表楼的高度。</p><p>　　接下来n行每行一个整数ai，代表i层的楼层高度（ai &lt;= 100）。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出1行，包含一个整数，表示所需的最短时间。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5<br>3<br>5<br>1<br>8<br>4</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>1</p><h4 id="数据规模和约定"><a href="#数据规模和约定" class="headerlink" title="数据规模和约定"></a>数据规模和约定</h4><p>　　对20%的数据,n&lt;=10<br>　　对40%的数据,n&lt;=100<br>　　对60%的数据,n&lt;=5000<br>　　对100%的数据,n&lt;=10000</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h4 id="通用做法-三个数组"><a href="#通用做法-三个数组" class="headerlink" title="通用做法(三个数组)"></a>通用做法(三个数组)</h4><p>三个数组，height[i]表示第i层楼的高度，climb[i]表示爬上第i层楼的最短时间，jump[i]表示跳到第i层楼的时间。显然，如果是爬到第i层楼，那它的起点只能是从第i-1层楼，所以如果知道到i-1层的最短时间就能知道爬到第i层楼的最短时间，到第i-1层楼的方式可能是爬，也可能是跳跃。所以就有了爬楼的转移方程</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">climb[i]&#x3D;min(climb[i-1],jump[i-1])+height[i]</span><br></pre></td></tr></table></figure><p>同理，跳跃的上一步只能是爬，因为题目说了不能连续跳跃，但是跳跃的起点有两个，所以转移方程为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jump[i]&#x3D;min(climb[i-1],climb[i-2])</span><br></pre></td></tr></table></figure><p>所以i要从2开始，同时要初始化好climb[0],climb[1]和jump[1]</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int jump[10001];</span><br><span class="line">int climb[10001];</span><br><span class="line">int height[10001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input5.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,1,n) cin&gt;&gt;height[i];</span><br><span class="line">climb[0]&#x3D;jump[0]&#x3D;0;</span><br><span class="line">climb[1]&#x3D;height[1];</span><br><span class="line">_for(i,2,n)</span><br><span class="line">&#123;</span><br><span class="line">climb[i]&#x3D;min(climb[i-1],jump[i-1])+height[i];</span><br><span class="line">jump[i]&#x3D;min(climb[i-1],climb[i-2]);</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;min(climb[n],jump[n]);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="两个数组的做法"><a href="#两个数组的做法" class="headerlink" title="两个数组的做法"></a>两个数组的做法</h4><p>观察转移方程，hight[i]可以直接输入，不用保存。也就是说输入第i层楼的高度的时候，climb[i]和jump[i]已经可以算出来了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int jump[10001];</span><br><span class="line">int climb[10001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input5.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">climb[0]&#x3D;jump[0]&#x3D;0;</span><br><span class="line">cin&gt;&gt;climb[1];</span><br><span class="line">_for(i,2,n)</span><br><span class="line">&#123;</span><br><span class="line">int height;</span><br><span class="line">cin&gt;&gt;height;</span><br><span class="line">climb[i]&#x3D;min(climb[i-1],jump[i-1])+height;</span><br><span class="line">jump[i]&#x3D;min(climb[i-1],climb[i-2]);</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;min(climb[n],jump[n]);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多数组DP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1114_Piggy-Bank</title>
      <link href="2020/04/01/HDU-1114-Piggy-Bank/"/>
      <url>2020/04/01/HDU-1114-Piggy-Bank/</url>
      
        <content type="html"><![CDATA[<p>简单背包</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="Piggy-Bank"><a href="#Piggy-Bank" class="headerlink" title="Piggy-Bank"></a>Piggy-Bank</h3><p><strong><em>\</em>Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 46180  Accepted Submission(s): 22736<br>**</strong></p><h4 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h4><p>Before ACM can do anything, a budget must be prepared and the necessary financial support obtained. The main income for this action comes from Irreversibly Bound Money (IBM). The idea behind is simple. Whenever some ACM member has any small money, he takes all the coins and throws them into a piggy-bank. You know that this process is irreversible, the coins cannot be removed without breaking the pig. After a sufficiently long time, there should be enough cash in the piggy-bank to pay everything that needs to be paid.</p><p>But there is a big problem with piggy-banks. It is not possible to determine how much money is inside. So we might break the pig into pieces only to find out that there is not enough money. Clearly, we want to avoid this unpleasant situation. The only possibility is to weigh the piggy-bank and try to guess how many coins are inside. Assume that we are able to determine the weight of the pig exactly and that we know the weights of all coins of a given currency. Then there is some minimum amount of money in the piggy-bank that we can guarantee. Your task is to find out this worst case and determine the minimum amount of cash inside the piggy-bank. We need your help. No more prematurely broken pigs! </p><h4 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h4><p>The input consists of T test cases. The number of them (T) is given on the first line of the input file. Each test case begins with a line containing two integers E and F. They indicate the weight of an empty pig and of the pig filled with coins. Both weights are given in grams. No pig will weigh more than 10 kg, that means 1 &lt;= E &lt;= F &lt;= 10000. On the second line of each test case, there is an integer number N (1 &lt;= N &lt;= 500) that gives the number of various coins used in the given currency. Following this are exactly N lines, each specifying one coin type. These lines contain two integers each, Pand W (1 &lt;= P &lt;= 50000, 1 &lt;= W &lt;=10000). P is the value of the coin in monetary units, W is it’s weight in grams.</p><h4 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h4><p>Print exactly one line of output for each test case. The line must contain the sentence “The minimum amount of money in the piggy-bank is X.” where X is the minimum amount of money that can be achieved using coins with the given total weight. If the weight cannot be reached exactly, print a line “This is impossible.”.</p><h4 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">10 110</span><br><span class="line">2</span><br><span class="line">1 1</span><br><span class="line">30 50</span><br><span class="line">10 110</span><br><span class="line">2</span><br><span class="line">1 1</span><br><span class="line">50 30</span><br><span class="line">1 6</span><br><span class="line">2</span><br><span class="line">10 3</span><br><span class="line">20 4</span><br></pre></td></tr></table></figure><h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The minimum amount of money in the piggy-bank is 60.</span><br><span class="line">The minimum amount of money in the piggy-bank is 100.</span><br><span class="line">This is impossible.</span><br></pre></td></tr></table></figure><h4 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h4><p>输入空的存钱罐的重量和装满钱的存钱罐的重量，然后再输入硬币的面值和重量，要求输出这个存钱罐恰好能够装的最小金钱的值</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int dp[10001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int t;</span><br><span class="line">cin&gt;&gt;t;</span><br><span class="line">while(t--)</span><br><span class="line">&#123;</span><br><span class="line">memset(dp,0x3f,sizeof(dp));</span><br><span class="line">dp[0]&#x3D;0;</span><br><span class="line">int empty_w,full_w;</span><br><span class="line">cin&gt;&gt;empty_w&gt;&gt;full_w;</span><br><span class="line">int w&#x3D;full_w-empty_w;</span><br><span class="line">int coin_n;</span><br><span class="line">cin&gt;&gt;coin_n;</span><br><span class="line">while(coin_n--)</span><br><span class="line">&#123;</span><br><span class="line">int v,coin_w;</span><br><span class="line">cin&gt;&gt;v&gt;&gt;coin_w;</span><br><span class="line">for(int i&#x3D;coin_w;i&lt;&#x3D;w;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(dp[i]&gt;dp[i-coin_w]+v)</span><br><span class="line">dp[i]&#x3D;dp[i-coin_w]+v;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(dp[w]&#x3D;&#x3D;0x3f3f3f3f)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;This is impossible.&quot;&lt;&lt;endl;</span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;The minimum amount of money in the piggy-bank is &quot;&lt;&lt;dp[w]&lt;&lt;&quot;.&quot;&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 水题 </tag>
            
            <tag> 背包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 小生物的逃逸</title>
      <link href="2020/03/31/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E5%B0%8F%E7%94%9F%E7%89%A9%E7%9A%84%E9%80%83%E9%80%B8/"/>
      <url>2020/03/31/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E5%B0%8F%E7%94%9F%E7%89%A9%E7%9A%84%E9%80%83%E9%80%B8/</url>
      
        <content type="html"><![CDATA[<p>水</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-小生物的逃逸"><a href="#算法训练-小生物的逃逸" class="headerlink" title="算法训练 小生物的逃逸"></a>算法训练 小生物的逃逸</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T550#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　空间中有n个球，这些球不相交也不相切。有m个可以视为质点的小生物，可能在某些球内，也可能在所有球之外，但不会在球面上。问这些生物从原来的地方逃逸到所有球外面的空间，至少要经过多少层球面。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行两个数n、m：表示球的数量和小生物的数量；<br>　　接下来n行每行四个整数Xi、Yi、Zi和Ri：表示一个球的三维坐标和半径；<br>　　接下来m行每行三个整数Xi、Yi、Zi：表示一个生物的坐标。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　一行m个数：表示每个小生物逃逸时至少经过的球面数。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>2 2<br>0 0 0 2<br>0 0 0 4<br>0 0 1<br>0 0 3</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>2 1</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m;</span><br><span class="line">struct aa&#123;</span><br><span class="line">int x,y,z,r;</span><br><span class="line">&#125;;</span><br><span class="line">aa a[101];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input10.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    _for(i,0,n-1)</span><br><span class="line">    cin&gt;&gt;a[i].x&gt;&gt;a[i].y&gt;&gt;a[i].z&gt;&gt;a[i].r;</span><br><span class="line">    _for(i,1,m)</span><br><span class="line">    &#123;</span><br><span class="line">int sum&#x3D;0;</span><br><span class="line">    long long x,y,z;</span><br><span class="line">    cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">_for(j,0,n-1)</span><br><span class="line">if((x-a[j].x)*(x-a[j].x)+(y-a[j].y)*(y-a[j].y)+(z-a[j].z)*(z-a[j].z)&lt;a[j].r*a[j].r)</span><br><span class="line">sum++;</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;&quot; &quot;;</span><br><span class="line">    &#125; </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 相邻字母</title>
      <link href="2020/03/31/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E7%9B%B8%E9%82%BB%E5%AD%97%E6%AF%8D/"/>
      <url>2020/03/31/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E7%9B%B8%E9%82%BB%E5%AD%97%E6%AF%8D/</url>
      
        <content type="html"><![CDATA[<p>简单水题</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-相邻字母"><a href="#算法训练-相邻字母" class="headerlink" title="算法训练 相邻字母"></a>算法训练 相邻字母</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T556#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a><strong>【问题描述】</strong></h4><p>　　从键盘输入一个英文字母，要求按字母的顺序打印出3个相邻的字母，指定的字母在中间。若指定的字母为Z，则打印YZA，若为A则打印ZAB。注意：需要区分大小写。</p><h4 id="【输入格式】"><a href="#【输入格式】" class="headerlink" title="【输入格式】"></a><strong>【输入格式】</strong></h4><p>　　一行，仅包含一个英文字母。</p><h4 id="【输出格式】"><a href="#【输出格式】" class="headerlink" title="【输出格式】"></a><strong>【输出格式】</strong></h4><p>　　一行，包含三个字母。</p><h4 id="【样例输入-1-】"><a href="#【样例输入-1-】" class="headerlink" title="【样例输入**1****】"></a><strong>【样例输入**</strong>1****】</h4><p>　　a</p><h4 id="【样例输出-1-】"><a href="#【样例输出-1-】" class="headerlink" title="【样例输出**1****】"></a><strong>【样例输出**</strong>1****】</h4><p>　　zab</p><h4 id="【样例输入-2-】"><a href="#【样例输入-2-】" class="headerlink" title="【样例输入**2****】"></a><strong>【样例输入**</strong>2****】</h4><p>　　B</p><h4 id="【样例输出-2-】"><a href="#【样例输出-2-】" class="headerlink" title="【样例输出**2****】"></a><strong>【样例输出**</strong>2****】</h4><p>　　ABC</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">char c;</span><br><span class="line">cin&gt;&gt;c;</span><br><span class="line">if(c&#x3D;&#x3D;&#39;a&#39;||c&#x3D;&#x3D;&#39;A&#39;) printf(&quot;%c&quot;,c+25);</span><br><span class="line">else printf(&quot;%c&quot;,c-1);</span><br><span class="line">cout&lt;&lt;c;</span><br><span class="line">if(c&#x3D;&#x3D;&#39;z&#39;||c&#x3D;&#x3D;&#39;Z&#39;) printf(&quot;%c&quot;,c-25);</span><br><span class="line">else printf(&quot;%c&quot;,c+1);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 逻辑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 水题 </tag>
            
            <tag> 字母 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 奇变的字符串</title>
      <link href="2020/03/31/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E5%A5%87%E5%8F%98%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>2020/03/31/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E5%A5%87%E5%8F%98%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-奇变的字符串"><a href="#算法训练-奇变的字符串" class="headerlink" title="算法训练 奇变的字符串"></a>算法训练 奇变的字符串</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T561#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　将一个字符串的奇数位（首位为第0位）取出，将其顺序弄反，再放回原字符串的原位置上。<br>　　如字符串”abcdefg”，奇数位为”bdf”，顺序弄反后为”fdb”，最后得到字符串”afcdebg”。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入共一行，为一个字符串，字符串中无空格。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出共一行，为一个字符串，即最后得到的字符串。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>abcdefg</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>afcdebg</p><h4 id="数据规模和约定"><a href="#数据规模和约定" class="headerlink" title="数据规模和约定"></a>数据规模和约定</h4><p>　　字符串长度不超过255.</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">string a;</span><br><span class="line">cin&gt;&gt;a;</span><br><span class="line">int l&#x3D;0,r&#x3D;a.length()-1;</span><br><span class="line">while(r&gt;l)</span><br><span class="line">&#123;</span><br><span class="line">if((l&amp;1)&#x3D;&#x3D;0)</span><br><span class="line">l++;</span><br><span class="line">if((r&amp;1)&#x3D;&#x3D;0)</span><br><span class="line">r--;</span><br><span class="line">swap(a[l],a[r]);</span><br><span class="line">l+&#x3D;2;</span><br><span class="line">r-&#x3D;2;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;a;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 字符串 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 水题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 自行车停放</title>
      <link href="2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E8%87%AA%E8%A1%8C%E8%BD%A6%E5%81%9C%E6%94%BE/"/>
      <url>2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E8%87%AA%E8%A1%8C%E8%BD%A6%E5%81%9C%E6%94%BE/</url>
      
        <content type="html"><![CDATA[<p>看数据规模，10的5次方，用数组的话大于是(n(n+1)/2)n^2级别的，实测12秒。只能转向双向链表！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-自行车停放"><a href="#算法训练-自行车停放" class="headerlink" title="算法训练 自行车停放"></a>算法训练 自行车停放</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T562#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　有n辆自行车依次来到停车棚，除了第一辆自行车外，每辆自行车都会恰好停放在已经在停车棚里的某辆自行车的左边或右边。(e.g.停车棚里已经有3辆自行车，从左到右编号为：3,5,1。现在编号为2的第4辆自行车要停在5号自行车的左边，所以现在停车棚里的自行车编号是：3,2,5,1)。给定n辆自行车的停放情况，按顺序输出最后停车棚里的自行车编号。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行一个整数n。<br>　　第二行一个整数x。表示第一辆自行车的编号。<br>　　以下n-1行，每行3个整数x,y,z。<br>　　z=0时，表示编号为x的自行车恰停放在编号为y的自行车的左边<br>　　z=1时，表示编号为x的自行车恰停放在编号为y的自行车的右边</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　从左到右输出停车棚里的自行车编号</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>4<br>3<br>1 3 1<br>2 1 0<br>5 2 1</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>3 2 5 1</p><h4 id="数据规模和约定"><a href="#数据规模和约定" class="headerlink" title="数据规模和约定"></a>数据规模和约定</h4><p>　　n&lt;=100000<br>　　自行车编号为不超过100000的正整数。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="数组版-12秒"><a href="#数组版-12秒" class="headerlink" title="数组版(12秒)"></a>数组版(12秒)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int a[100001],b[100001];</span><br><span class="line">void insert(int n,int num,int sum)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;memcpy(a+n+1,a+n,4*(sum-n));</span><br><span class="line">for(int i&#x3D;sum-1;i&gt;&#x3D;n;i--)</span><br><span class="line">&#123;</span><br><span class="line">a[i+1]&#x3D;a[i];</span><br><span class="line">b[a[i]]++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a[n]&#x3D;num;</span><br><span class="line">b[num]&#x3D;n;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">freopen(&quot;input5.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">int cc&#x3D;clock();</span><br><span class="line">cin&gt;&gt;n&gt;&gt;a[0];</span><br><span class="line">b[a[0]]&#x3D;0;</span><br><span class="line">int now_sum&#x3D;1;</span><br><span class="line">int t&#x3D;n-1;</span><br><span class="line"></span><br><span class="line">while(t--)</span><br><span class="line">&#123;</span><br><span class="line">int x,y,z,i;</span><br><span class="line">cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">i&#x3D;b[y];</span><br><span class="line">int index_move&#x3D;z?i+1:i;</span><br><span class="line">insert(index_move,x,now_sum++); </span><br><span class="line">&#125;</span><br><span class="line">_for(i,0,now_sum-1) cout&lt;&lt;a[i]&lt;&lt;&quot; &quot;;</span><br><span class="line">PP(&quot;time&#x3D;&quot;,clock()-cc);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="双向链表版"><a href="#双向链表版" class="headerlink" title="双向链表版"></a>双向链表版</h3><p>用的是带头结点和尾结点的双向链表，单纯是为了方便插入。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">struct L&#123;</span><br><span class="line">L * pre;</span><br><span class="line">int n;</span><br><span class="line">L *next;</span><br><span class="line">&#125;;</span><br><span class="line">L* d[100001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input5.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">L *head&#x3D;(L *)malloc(sizeof(L));</span><br><span class="line">L *t1&#x3D;(L *)malloc(sizeof(L));</span><br><span class="line">L * wei&#x3D;(L *)malloc(sizeof(L));</span><br><span class="line">head-&gt;next&#x3D;t1;</span><br><span class="line">t1-&gt;pre&#x3D;head;</span><br><span class="line">t1-&gt;next&#x3D;wei;</span><br><span class="line">wei-&gt;pre&#x3D;t1;</span><br><span class="line">wei-&gt;next&#x3D;NULL;</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;t1-&gt;n;</span><br><span class="line">d[t1-&gt;n]&#x3D;t1;</span><br><span class="line">int t&#x3D;n-1;</span><br><span class="line">while(t--)</span><br><span class="line">&#123;</span><br><span class="line">int x,y,z;</span><br><span class="line">cin&gt;&gt;x&gt;&gt;y&gt;&gt;z;</span><br><span class="line">L* node&#x3D;(L *)malloc(sizeof(L));</span><br><span class="line">node-&gt;n&#x3D;x;</span><br><span class="line">d[x]&#x3D;node;</span><br><span class="line">L* temp&#x3D;d[y];</span><br><span class="line">if(z)</span><br><span class="line">&#123;</span><br><span class="line">node-&gt;pre&#x3D;temp;</span><br><span class="line">node-&gt;next&#x3D;temp-&gt;next;</span><br><span class="line">temp-&gt;next-&gt;pre&#x3D;node;</span><br><span class="line">temp-&gt;next&#x3D;node;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">node-&gt;next&#x3D;temp;</span><br><span class="line">node-&gt;pre&#x3D;temp-&gt;pre;</span><br><span class="line">temp-&gt;pre-&gt;next&#x3D;node;</span><br><span class="line">temp-&gt;pre&#x3D;node;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">t1&#x3D;head-&gt;next;</span><br><span class="line">while(t1-&gt;next!&#x3D;NULL)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;t1-&gt;n&lt;&lt;&quot; &quot;;</span><br><span class="line">t1&#x3D;t1-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 双向链表 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 双向链表 </tag>
            
            <tag> 索引表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 数组逆序排列</title>
      <link href="2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E6%95%B0%E7%BB%84%E9%80%86%E5%BA%8F%E6%8E%92%E5%88%97/"/>
      <url>2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E6%95%B0%E7%BB%84%E9%80%86%E5%BA%8F%E6%8E%92%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-数组逆序排列"><a href="#算法训练-数组逆序排列" class="headerlink" title="算法训练 数组逆序排列"></a>算法训练 数组逆序排列</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T567#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a><strong>问题描述</strong></h4><p>　　编写一个程序，读入一组整数（不超过20个），并把它们保存在一个整型数组中。当用户输入0时，表示输入结束。然后程序将把这个数组中的值按逆序重新存放，并打印出来。要求：(1)只能定义一个数组；(2)在交换两个数组元素的值时，必须使用单独定义的一个函数swap。例如：假设用户输入了一组数据：7 19 -5 6 2 0，那么程序将会把前五个有效数据保存在一个数组中，即7 19 -5 6 2，然后把这个数组中的值按逆序重新存放，即变成了2 6 -5 19 7，然后把它们打印出来。<br>　　输入格式：输入只有一行，包括若干个整数，最后一个整数是0。<br>　　输出格式：输出只有一行，包括若干个整数，即逆序排列后的结果。</p><h4 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a><strong>输入输出样例</strong></h4><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>7 19 -5 6 2 0</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>2 6 -5 19 7</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int a[21];</span><br><span class="line">int index&#x3D;1;</span><br><span class="line">while(cin&gt;&gt;a[index++]&amp;&amp;a[index-1]);</span><br><span class="line">index-&#x3D;2;</span><br><span class="line">_for(i,1,index&#x2F;2)</span><br><span class="line">swap(a[i],a[index+1-i]);</span><br><span class="line">_for(i,1,index)</span><br><span class="line">cout&lt;&lt;a[i]&lt;&lt;&quot; &quot;;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 整除2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 字符串比较</title>
      <link href="2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83/"/>
      <url>2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%AF%94%E8%BE%83/</url>
      
        <content type="html"><![CDATA[<p>我也不知道怎么错的，测试用例都对了，但就是通不过！最后附上官方的代码！！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-字符串比较"><a href="#算法训练-字符串比较" class="headerlink" title="算法训练 字符串比较"></a>算法训练 字符串比较</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T568#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a><strong>问题描述</strong></h4><p>　　strncmp函数的原型为：int strncmp(char *s, char *t, int n);，其功能是比较字符串s和t的前n个字符。如果s&lt;t，返回-1；如果s=t，返回0；如果s&gt;t，返回1。请自己编程实现该函数，并编写一个程序来测试其正确性。<br>　　输入格式：输入有三行，第一行为字符串s，第二行为字符串t，第三行为整数n。<br>　　输出格式：输出只有一个整数，即比较结果。</p><h4 id="输入输出样例"><a href="#输入输出样例" class="headerlink" title="输入输出样例"></a><strong>输入输出样例</strong></h4><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>world<br>word<br>4</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>1</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>测试用例在win10 下都能通过，但在蓝桥就是错误</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int cmp(string a,string b,int n)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(i&#x3D;&#x3D;a.length()||i&#x3D;&#x3D;b.length())</span><br><span class="line">&#123;</span><br><span class="line">if(i!&#x3D;a.length())</span><br><span class="line">return -1;</span><br><span class="line">else if(i!&#x3D;b.length())</span><br><span class="line">return 1;</span><br><span class="line">else return 0;</span><br><span class="line">&#125;</span><br><span class="line">if(a[i]&gt;b[i])</span><br><span class="line">return 1;</span><br><span class="line">if(a[i]&lt;b[i])</span><br><span class="line">return -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;ios::sync_with_stdio(0);</span><br><span class="line">&#x2F;&#x2F;    cin.tie(0);</span><br><span class="line">&#x2F;&#x2F;    cout.tie(0);</span><br><span class="line">   freopen(&quot;input6.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">string a,b;</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;a&gt;&gt;b&gt;&gt;n;</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;cmp(a,b,n)&lt;&lt;endl;</span><br><span class="line">&#x2F;&#x2F;printf(&quot;%d&quot;,cmp(a,b,n));</span><br><span class="line">int c&#x3D;cmp(a,b,n);</span><br><span class="line">if(c&#x3D;&#x3D;0)</span><br><span class="line">cout&lt;&lt;&quot;0&quot;;</span><br><span class="line">else </span><br><span class="line">cout&lt;&lt;c;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个是官方版，但是我觉得错误太明显了，应该是题目叙述错了，有改动，比如a,b的大小关系和az和ba的关系应该是一样的，但是官方给的程序测试结果不一样</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">int main()&#123;</span><br><span class="line">char s[10000],t[10000];</span><br><span class="line">int i,n,a&#x3D;0,k&#x3D;1;</span><br><span class="line">scanf(&quot;%s&quot;,&amp;s);</span><br><span class="line">scanf(&quot;%s&quot;,&amp;t);</span><br><span class="line">scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line">for(i&#x3D;n-1;i&gt;&#x3D;0;i--)&#123;</span><br><span class="line">a&#x3D;a+s[i]*k-t[i]*k;</span><br><span class="line">k&#x3D;k*10;</span><br><span class="line">&#125;</span><br><span class="line">if(a&gt;0)&#123;</span><br><span class="line">printf(&quot;1&quot;);</span><br><span class="line">&#125;</span><br><span class="line">else if(a&lt;0)&#123;</span><br><span class="line">printf(&quot;-1&quot;);</span><br><span class="line">&#125;</span><br><span class="line">else&#123;</span><br><span class="line">printf(&quot;0&quot;);</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 字符串 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字符串比较 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 石子游戏</title>
      <link href="2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E7%9F%B3%E5%AD%90%E6%B8%B8%E6%88%8F/"/>
      <url>2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E7%9F%B3%E5%AD%90%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<p>分析时间复杂度n^2=10^6,一秒不会超时。这个题的样例还好，给出了要用long  long的暗示，并且给出这个测试用例摆明给你降低难度。这个题应该数组合sum全部用long long，因为a=b+c，先是计算b+c存到一个和b一样的数据类型中，如果a是long long，b,c是int，先计算b+c存到一个int的数据类型里，然后再赋值给c，如果溢出的话，b+c已经溢出了，此时在赋值给c还是溢出。所以需要全部置为long long!</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-石子游戏"><a href="#算法训练-石子游戏" class="headerlink" title="算法训练 石子游戏"></a>算法训练 石子游戏</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T573#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　石子游戏的规则如下：<br>　　地上有n堆石子，每次操作可选取两堆石子（石子个数分别为x和y）并将它们合并，操作的得分记为(x+1)×(y+1)，对地上的石子堆进行操作直到只剩下一堆石子时停止游戏。<br>　　请问在整个游戏过程中操作的总得分的最大值是多少？</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入数据的第一行为整数n，表示地上的石子堆数；第二行至第n+1行是每堆石子的个数。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　程序输出一行，为游戏总得分的最大值。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>10<br>5105<br>19400<br>27309<br>19892<br>27814<br>25129<br>19272<br>12517<br>25419<br>4053</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>15212676150</p><h4 id="数据规模和约定"><a href="#数据规模和约定" class="headerlink" title="数据规模和约定"></a>数据规模和约定</h4><p>　　1≤n≤1000，1≤一堆中石子数≤50000</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">long long a[1001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">    &#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">_for(i,0,n-1) cin&gt;&gt;a[i];</span><br><span class="line">long long sum&#x3D;0;</span><br><span class="line">_for(i,1,n-1)</span><br><span class="line">&#123;</span><br><span class="line">int index1&#x3D;a[0]&gt;a[1]?0:1;</span><br><span class="line">int index2&#x3D;1-index1;</span><br><span class="line">_for(j,2,n-1)</span><br><span class="line">&#123;</span><br><span class="line">if(a[j]&gt;a[index2])</span><br><span class="line">&#123;</span><br><span class="line">if(a[j]&gt;a[index1])</span><br><span class="line">&#123;</span><br><span class="line">index2&#x3D;index1;</span><br><span class="line">index1&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line">else index2&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">sum+&#x3D;(a[index1]+1)*(a[index2]+1);</span><br><span class="line">a[index1]+&#x3D;a[index2];</span><br><span class="line">a[index2]&#x3D;-1;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数陷阱 </tag>
            
            <tag> 溢出陷阱 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 最大获利</title>
      <link href="2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E6%9C%80%E5%A4%A7%E8%8E%B7%E5%88%A9/"/>
      <url>2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E6%9C%80%E5%A4%A7%E8%8E%B7%E5%88%A9/</url>
      
        <content type="html"><![CDATA[<p>看数据规模，计算中会超过10的9次方，所以应该选择long long。 </p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-最大获利"><a href="#算法训练-最大获利" class="headerlink" title="算法训练 最大获利"></a>算法训练 最大获利</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T574#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　Chakra是一位年轻有为的企业家，最近他在进军餐饮行业。他在各地开拓市场，共买下了N个饭店。在初期的市场调研中，他将一天划分为M个时间段，并且知道第i个饭店在第j个时间段内，会有Aij位服务员当值和Bij位客户光临。他还分析了不同饭店不同时间段客户的需求，得到第i个饭店在第j个时间段内，平均每位客户消费Cij元。为了创设品牌形象，Chakra决定每个饭店每天只选择一个时间段营业，每个服务员至多接待一位顾客（若顾客数多于服务员数，超过部分的顾客当天就无法在该店消费了）。<br>　　企业家的目的终究还是获利。请你安排营业时间，并告诉Chakra每天消费总额最多为多少。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行两个整数，N、M。<br>　　第二行开始依次给出三个矩阵A(N<em>M)、B(N</em>M)、C(N*M)。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　一行一个整数，最大消费总额。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>2 3<br>1 2 3<br>3 2 1<br>3 2 1<br>1 2 3<br>4 5 2<br>3 1 6</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>16</p><h4 id="数据规模和约定"><a href="#数据规模和约定" class="headerlink" title="数据规模和约定"></a>数据规模和约定</h4><p>　　1 &lt;= M,N &lt;= 100<br>　　1 &lt;= Aij, Bij &lt;= 5000<br>　　0 &lt;= Cij &lt;= 10^9</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>根据一位服务员只能服务一名顾客可以计算出，顾客人数矩阵，然后在根据顾客平均消费矩阵计算出总额矩阵，每行选一个求和。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">long long st[3][101][101];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">    &#x2F;&#x2F;freopen(&quot;input3.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,m;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">_for(j,0,2)</span><br><span class="line">_for(i,1,n) </span><br><span class="line">_for(k,1,m)</span><br><span class="line">cin&gt;&gt;st[j][i][k];</span><br><span class="line">_for(i,1,n) </span><br><span class="line">_for(k,1,m)</span><br><span class="line">if(st[0][i][k]&lt;st[1][i][k])</span><br><span class="line">st[1][i][k]&#x3D;st[0][i][k];</span><br><span class="line">_for(i,1,n) </span><br><span class="line">_for(k,1,m)</span><br><span class="line">st[2][i][k]*&#x3D;st[1][i][k];</span><br><span class="line">long long sum&#x3D;0;</span><br><span class="line">_for(i,1,n)</span><br><span class="line">&#123;</span><br><span class="line">long long max&#x3D;-1;</span><br><span class="line">_for(j,1,m)</span><br><span class="line">&#123;</span><br><span class="line">if(st[2][i][j]&gt;max)</span><br><span class="line">max&#x3D;st[2][i][j];</span><br><span class="line">&#125;</span><br><span class="line">sum+&#x3D;max;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 逻辑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 贪心 </tag>
            
            <tag> 数据规模 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 乘法次数</title>
      <link href="2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E4%B9%98%E6%B3%95%E6%AC%A1%E6%95%B0/"/>
      <url>2020/03/30/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-%E4%B9%98%E6%B3%95%E6%AC%A1%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>已知x^n次方的情况下获取x^(2n)的最少途径就是x^n*x^n。要求x^n的最小乘法次数，就是不断的求x^2,x^4,x^8……，找到小于x^n的那个x^y次方(y是2的幂），这样就解决了大头，至于剩下的小头，在重复上述操作。其实就是基于二进制优化的快速幂！！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="算法训练-乘法次数"><a href="#算法训练-乘法次数" class="headerlink" title="算法训练 乘法次数"></a>算法训练 乘法次数</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T579#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：999.4MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　给你一个非零整数，让你求这个数的n次方，每次相乘的结果可以在后面使用，求至少需要多少次乘。如24：2<em>2=22（第一次乘），22</em>22=24（第二次乘），所以最少共2次；</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行m表示有m(1&lt;=m&lt;=100)组测试数据；<br>　　每一组测试数据有一整数n（0&lt;n&lt;=100000000）;</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出每组测试数据所需次数s;</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>3<br>2<br>3<br>4</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>1<br>2<br>2</p><h4 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h4><p>在已知有一个数x的情况下，求x^n需要经过的最少的乘法次数。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">int n,c;</span><br><span class="line">cin&gt;&gt;c;</span><br><span class="line">while(c--)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">int t&#x3D;n;</span><br><span class="line">int count_1&#x3D;0;</span><br><span class="line">while(t)</span><br><span class="line">&#123;</span><br><span class="line">bool wei&#x3D;t&amp;1;</span><br><span class="line">if(wei)</span><br><span class="line">count_1++; </span><br><span class="line">t&gt;&gt;&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">int high_wei&#x3D;log(n)&#x2F;log(2);</span><br><span class="line">cout&lt;&lt;high_wei+count_1-1&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 快速幂 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 二进制优化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++坑点</title>
      <link href="2020/03/29/C-%E5%9D%91%E7%82%B9/"/>
      <url>2020/03/29/C-%E5%9D%91%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python爬虫爬取wallpapers壁纸</title>
      <link href="2020/03/28/python%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96wallpapers%E5%A3%81%E7%BA%B8/"/>
      <url>2020/03/28/python%E7%88%AC%E8%99%AB%E7%88%AC%E5%8F%96wallpapers%E5%A3%81%E7%BA%B8/</url>
      
        <content type="html"><![CDATA[<p>python爬虫爬取wallpapers最新壁纸</p><a id="more"></a><h2 id="详细教程请访问：https-www-bilibili-com-video-av58978561"><a href="#详细教程请访问：https-www-bilibili-com-video-av58978561" class="headerlink" title="详细教程请访问：https://www.bilibili.com/video/av58978561/"></a>详细教程请访问：<a href="https://www.bilibili.com/video/av58978561/" target="_blank" rel="noopener">https://www.bilibili.com/video/av58978561/</a></h2><h2 id="详细教程请访问：https-www-bilibili-com-video-av58978561-1"><a href="#详细教程请访问：https-www-bilibili-com-video-av58978561-1" class="headerlink" title="详细教程请访问：https://www.bilibili.com/video/av58978561/"></a>详细教程请访问：<a href="https://www.bilibili.com/video/av58978561/" target="_blank" rel="noopener">https://www.bilibili.com/video/av58978561/</a></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests <span class="comment">#这个包里有打开网页的包</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup <span class="comment">#这个包里有html解析器</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getimg</span><span class="params">(url,path,name)</span>:</span><span class="comment">#将步骤3封装成函数 参数（图片网址，路径，名字）</span></span><br><span class="line">    <span class="keyword">with</span> requests.get(url) <span class="keyword">as</span> resp:<span class="comment">#打开图片</span></span><br><span class="line">        <span class="keyword">with</span> open(path+<span class="string">'/'</span>+name+<span class="string">'.jpg'</span>,<span class="string">'wb'</span>) <span class="keyword">as</span> f:<span class="comment">#打开路径，准备写入图片</span></span><br><span class="line">            f.write(resp.content)<span class="comment">#将图片以传进来的名字以wb(w:写入 b:二进制方式)写入路径</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getdurl</span><span class="params">(url,l,w)</span>:</span><span class="comment">#步骤2 参数（每一页的网址，图片长度，图片宽度）</span></span><br><span class="line">    <span class="keyword">with</span> requests.get(url) <span class="keyword">as</span> resp:<span class="comment">#打开网址</span></span><br><span class="line">        html=resp.text<span class="comment">#获取html代码</span></span><br><span class="line">    soup=BeautifulSoup(html,<span class="string">'html.parser'</span>)<span class="comment">#将代码用bs4进行解析</span></span><br><span class="line">    h1=soup.select(<span class="string">'h1'</span>)<span class="comment">#找到html代码中标签为h1（html中h1代表标题）的赋值给变量h1 这样我们就找到了所有图片的名字，但是还有一个网页的标题Latest Wallpapers</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> h1:<span class="comment">#for循环</span></span><br><span class="line">        <span class="keyword">if</span> i.text==<span class="string">'Latest Wallpapers'</span>:</span><br><span class="line">            <span class="keyword">continue</span><span class="comment">#去掉网页标题</span></span><br><span class="line">        n=i.text</span><br><span class="line">        imgurl=<span class="string">'http://wallpaperswide.com/download/'</span>+n.replace(<span class="string">' '</span>,<span class="string">'_'</span>).lower()+<span class="string">'-'</span>+str(l)+<span class="string">'x'</span>+str(w)</span><br><span class="line">        <span class="comment">#拼接网址，将名字中空格换成下划线，所有字母换小写</span></span><br><span class="line">        <span class="comment"># print(imgurl)</span></span><br><span class="line">        print(<span class="string">'正在下载'</span>+n+<span class="string">'。。。'</span>)<span class="comment">#提示信息</span></span><br><span class="line">        getimg(imgurl,<span class="string">'D:\编程\python\wallpapers'</span>,n)<span class="comment">#调用步骤三函数循环下载</span></span><br><span class="line">        print(n+<span class="string">'下载完成。。。'</span>)<span class="comment">#提示信息</span></span><br><span class="line">        <span class="comment"># url='http://wallpaperswide.com/download/Cyberpunk2077-800x480'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:<span class="comment">#此程序作为主程序运行</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>):<span class="comment">#外循环，从第一页循环至第十页，这里的10可以改成别的</span></span><br><span class="line">        getdurl(<span class="string">'http://wallpaperswide.com/latest_wallpapers/page/'</span>+str(i+<span class="number">1</span>)+<span class="string">'.html'</span>,<span class="number">1366</span>,<span class="number">768</span>)<span class="comment">#拼接网址调用步骤二函数</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
          <category> 爬虫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> wallpapers </tag>
            
            <tag> 壁纸 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝桥模拟_第十题_晚会节目单</title>
      <link href="2020/03/27/%E8%93%9D%E6%A1%A5%E6%A8%A1%E6%8B%9F-%E7%AC%AC%E5%8D%81%E9%A2%98-%E6%99%9A%E4%BC%9A%E8%8A%82%E7%9B%AE%E5%8D%95/"/>
      <url>2020/03/27/%E8%93%9D%E6%A1%A5%E6%A8%A1%E6%8B%9F-%E7%AC%AC%E5%8D%81%E9%A2%98-%E6%99%9A%E4%BC%9A%E8%8A%82%E7%9B%AE%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<p>频繁的查询区间最值对于遍历来说开销非常大，所以产生了一种区间最值查询这种算法，本文只讲ST+RMQ，ST是稀疏矩阵的意思，这种方法要求数据必须是静态的不能变化的。</p><a id="more"></a><h2 id="问题引入"><a href="#问题引入" class="headerlink" title="问题引入"></a>问题引入</h2><p>有一个一位数组(长度为n)，频繁的查询[s,e]区间的最值。</p><h2 id="算法详解"><a href="#算法详解" class="headerlink" title="算法详解"></a>算法详解</h2><p>定义一个二维数组ST(大小[n,lgn])。<code>ST[i][j]</code>表示的是从i开始(包括i)向后2^j个元素区间的最值，即区间[i,i+2^j-1]的最值，那么很明显<code>ST[i][0]=a[i]</code>(因为[i,i]只有一个值)。现在我们开始推导递推式,[i,i+2^j-1]可以按照中间分为两个大小为2^(j-1)的区间[i,i+2^(j-1)-1]和[i+2^(j-1),i+2^j-1]，那么[i,i+2^j-1]的最值为这两个区间再求最值，即[i,i+2^j-1]=min/max([i,i+2^(j-1)-1],[i+2^(j-1),i+2^j-1])也就是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ST[i][j]&#x3D;min&#x2F;max(ST[i][j-1],ST[i+2^j][j-1])</span><br></pre></td></tr></table></figure><p>那么就可以发现第j列某个元素值的计算只跟它前一列的某两个值有关，并且刚刚我们已经算好了第一列，由第一列可以计算第二列，由第二列可以计算第三列……那么要算到哪一列呢？<code>ST[i][j]</code>表示的区间是[i,i+2^j-1]很明显i+2^j-1&lt;=n-1(n个元素，下标0~n-1)所以就有了建ST的模板：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">void cal(int a[],int n)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;n-1;i++)</span><br><span class="line">ST[i][0]&#x3D;a[i];</span><br><span class="line">for(int j&#x3D;1;(1&lt;&lt;(j))&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i+(1&lt;&lt;j)-1&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">st[i][j]&#x3D;max&#x2F;min(st[i][j-1],st[i+1&lt;&lt;(j-1)][j-1]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>说了半天有了这个表该怎么用呢？假如我们要计算区间[s,e]的最值该怎么算呢？我们能够利用的是<code>ST[此处可为任意数][此处必须为2的幂]</code>如果我们能够找到一个k，使得区间[s,e]变成[s,s+2^k-1]和<code>[s+2^k][e]</code>，我们就可以利用表了，但是你会发现第二个区间没法表示，我们只能表示长度为2的幂的区间。于是聪明人就会发现用e减去2的幂不就行了！于是将[s,e]变成[s,s+2^k-1]和[e-2^k+1,e]，这样区间<code>[s][e]</code>的最值就可以变为<code>min/max(ST[s][k],ST[e-2^K+1][e])</code>但是可能有人又会提出疑问了，如果这两个集合没有交集怎么办？比如[2,6]分为[2,3]和[5,6] (k=1)，这样得到话明显不对啊！所以我们需要找一个比较大的k值，[s,s+2^k-1]必须包含在<code>[s][e]</code>里面,也就是s+2^k-1&lt;=e 解得<br>$$<br>k&lt;=log_2(e-s+1),令k=log_2(e-s+1)<br>$$<br>并且(int)k去除了k的小数部分，也就是说0&lt;=k-(int)k&lt;1，所以k-1&lt;(int)k&lt;=k，代入原式：<br>$$<br>2^{k-1}-1&lt;2^{(int)k}-1&lt;=2^k-1将k=log_2(e-s+1)代入得<br>$$</p><p>$$<br>(e-s)/2-1/2&lt;2^{(int)k}-1，此处2^{(int)k}-1是整数，所以(e-s)/2=&lt;2^{(int)k}-1<br>$$</p><p>$$<br>所以s+2^{(int)k}-1&gt;=s+(e-s)/2=(e+s)/2(中点)且e-2^k+1&lt;=e-(e+s)/2=(e+s)/2(中点)<br>$$</p><p>所以当k=(int)(log2(e-s+1))时，<code>ST[s][k],ST[e-2^K+1][e]</code>表示的区间一定有交集。所以要求[s,e]区间最值只需要计算<code>min/max(ST[s][k],ST[e-2^K+1][e]),k=(int)(log2(e-s+1))</code></p><h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><h2 id="第十题-晚会节目单"><a href="#第十题-晚会节目单" class="headerlink" title="第十题 晚会节目单"></a>第十题 晚会节目单</h2><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>小明要组织一台晚会，总共准备了 n 个节目。然后晚会的时间有限，他只能最终选择其中的 m 个节目。<br>这 n 个节目是按照小明设想的顺序给定的，顺序不能改变。<br>小明发现，观众对于晚会的喜欢程度与前几个节目的好看程度有非常大的关系，他希望选出的第一个节目尽可能好看，在此前提下希望第二个节目尽可能好看，依次类推。<br>小明给每个节目定义了一个好看值，请你帮助小明选择出 m 个节目，满足他的要求。</p><h4 id="【输入格式】"><a href="#【输入格式】" class="headerlink" title="【输入格式】"></a>【输入格式】</h4><p>输入的第一行包含两个整数 n, m ，表示节目的数量和要选择的数量。<br>第二行包含 n 个整数，依次为每个节目的好看值。</p><h4 id="【输出格式】"><a href="#【输出格式】" class="headerlink" title="【输出格式】"></a>【输出格式】</h4><p>输出一行包含 m 个整数，为选出的节目的好看值。</p><h4 id="【样例输入】"><a href="#【样例输入】" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>5 3<br>3 1 2 5 4</p><h4 id="【样例输出】"><a href="#【样例输出】" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>3 5 4</p><h4 id="【样例说明】"><a href="#【样例说明】" class="headerlink" title="【样例说明】"></a>【样例说明】</h4><p>选择了第1, 4, 5个节目。</p><h4 id="【评测用例规模与约定】"><a href="#【评测用例规模与约定】" class="headerlink" title="【评测用例规模与约定】"></a>【评测用例规模与约定】</h4><p>对于 30% 的评测用例，1 &lt;= n &lt;= 20；<br>对于 60% 的评测用例，1 &lt;= n &lt;= 100；<br>对于所有评测用例，1 &lt;= n &lt;= 100000，0 &lt;= 节目的好看值 &lt;= 100000。</p><h3 id="思路-O-N-2"><a href="#思路-O-N-2" class="headerlink" title="思路 O(N^2)"></a>思路 O(N^2)</h3><p>ST+RMQ</p><h3 id="参考代码"><a href="#参考代码" class="headerlink" title="参考代码"></a>参考代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m;</span><br><span class="line">int a[100001];</span><br><span class="line">int tree[400001];</span><br><span class="line">int st[100001][20];</span><br><span class="line">int pow_2(int p) &#123;</span><br><span class="line">    return 1 &lt;&lt; p;</span><br><span class="line">&#125;</span><br><span class="line">void cal(int a[],int n)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;(1&lt;&lt;(j-1))&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i+(1&lt;&lt;j)-1&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">st[i][j]&#x3D;a[st[i][j-1]]&gt;a[st[i+pow_2(j-1)][j-1]]?st[i][j-1]:st[i+pow_2(j-1)][j-1];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int query(int s,int e)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;(int)(log(e-s+1)&#x2F;log(2));</span><br><span class="line">return a[st[s][t]]&gt;a[st[e-(1&lt;&lt;t)+1][t]]?st[s][t]:st[e-(1&lt;&lt;t)+1][t];</span><br><span class="line">&#125; </span><br><span class="line">void build_tree(int s,int e,int node)</span><br><span class="line">&#123;</span><br><span class="line">if(s&#x3D;&#x3D;e)</span><br><span class="line">&#123;</span><br><span class="line">tree[node]&#x3D;s;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">int mid&#x3D;(s+e)&#x2F;2;</span><br><span class="line">build_tree(s,mid,2*node+1);</span><br><span class="line">build_tree(mid+1,e,2*node+2);</span><br><span class="line">tree[node]&#x3D;a[tree[2*node+1]]&gt;a[tree[2*node+2]]?tree[2*node+1]:tree[2*node+2];</span><br><span class="line">&#125;</span><br><span class="line">int query_tree(int s,int e,int node,int l,int r)</span><br><span class="line">&#123;</span><br><span class="line">if(e&lt;l||s&gt;r) return 0;</span><br><span class="line">if(s&gt;&#x3D;l&amp;&amp;e&lt;&#x3D;r) return tree[node];</span><br><span class="line">int mid&#x3D;(s+e)&#x2F;2;</span><br><span class="line">int ln&#x3D;query_tree(s,mid,2*node+1,l,r);</span><br><span class="line">int rn&#x3D;query_tree(mid+1,e,2*node+2,l,r);</span><br><span class="line">return a[ln]&gt;a[rn]?ln:rn;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">    ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    _for(i,0,n-1)</span><br><span class="line">    &#123;</span><br><span class="line">    cin&gt;&gt;a[i];</span><br><span class="line">    st[i][0]&#x3D;i;</span><br><span class="line">    &#125;</span><br><span class="line">    int c&#x3D;clock();</span><br><span class="line">    cal(a,n);</span><br><span class="line">    int s&#x3D;0,k&#x3D;m;</span><br><span class="line">    while(k!&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">    int z&#x3D;query(s,n-1-k+1);</span><br><span class="line">    cout&lt;&lt;a[z]&lt;&lt;&quot; &quot;;</span><br><span class="line">    s&#x3D;z+1;</span><br><span class="line">    k--;</span><br><span class="line">    &#125; </span><br><span class="line">    P(&quot;&quot;);</span><br><span class="line">PP(&quot;time&#x3D;&quot;,clock()-c);</span><br><span class="line">    c&#x3D;clock();</span><br><span class="line">    build_tree(0,n-1,0);</span><br><span class="line">    cout&lt;&lt;&quot;tree:&quot;;</span><br><span class="line">     s&#x3D;0;k&#x3D;m;</span><br><span class="line">    while(k!&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">    int z&#x3D;query_tree(0,n-1,0,s,n-1-k+1);</span><br><span class="line">    cout&lt;&lt;a[z]&lt;&lt;&quot; &quot;;</span><br><span class="line">    s&#x3D;z+1;</span><br><span class="line">    k--;</span><br><span class="line">    &#125; </span><br><span class="line">cout&lt;&lt;endl&lt;&lt;&quot;time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> RMQ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ST </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++_string</title>
      <link href="2020/03/26/C-STL/"/>
      <url>2020/03/26/C-STL/</url>
      
        <content type="html"><![CDATA[<p>简要记录C家族有效方法</p><a id="more"></a><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="strlen"><a href="#strlen" class="headerlink" title="strlen()"></a>strlen()</h3><p>返回的是’\0’的位置加1</p><h3 id="sprintf"><a href="#sprintf" class="headerlink" title="sprintf"></a>sprintf</h3><p>sprintf(char a[],”%d”,10)  各种形式转换成字符数组，可以string str(a)转换成string,然后用string的方法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char s[5];</span><br><span class="line">sprintf(s, &quot;%d&quot;, i);</span><br><span class="line">string str(s);</span><br></pre></td></tr></table></figure><h2 id="string"><a href="#string" class="headerlink" title="string"></a>string</h2><h3 id="str-find"><a href="#str-find" class="headerlink" title="str.find()"></a>str.find()</h3><p>找字符参数:(字符，起点下标(缺省0))</p><p>找字符串参数：(字符串，起点坐标(缺省0)，找字符串的前n个字符串(缺省))</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">string s&#x3D;&quot;helollo&quot;;</span><br><span class="line">cout&lt;&lt;s.find(&#39;l&#39;,3)&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;s.find(&quot;ll&quot;,0,1)&lt;&lt;endl;</span><br><span class="line">&#x2F;&#x2F;4</span><br><span class="line">&#x2F;&#x2F;2</span><br></pre></td></tr></table></figure><h3 id="str-find-first-of"><a href="#str-find-first-of" class="headerlink" title="str.find_first_of"></a>str.find_first_of</h3><h2 id="宏定义"><a href="#宏定义" class="headerlink" title="宏定义"></a>宏定义</h2><h3 id="的用法"><a href="#的用法" class="headerlink" title="#的用法"></a>#的用法</h3><p>有时候我们想在打印变量前标明一下变量名字，如果一个一个手打非常的不方便，于是我们可以用宏定义中的#代表加引号的变量</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">print(s.find(&#39;l&#39;,3));</span><br><span class="line">&#x2F;&#x2F;s.find(&#39;l&#39;,3)&#x3D;4</span><br></pre></td></tr></table></figure><h2 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h2><h4 id="upper-bound-lower-bound"><a href="#upper-bound-lower-bound" class="headerlink" title="upper_bound lower_bound"></a>upper_bound lower_bound</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bool cmp(int a,int b) &#123;return a&gt;b&#125;;</span><br><span class="line">int a[];查找区间[a,a+len+1)</span><br><span class="line">upper_bound(a,a+len+1,x) &#x2F;&#x2F;默认升序 第一个大于x的地址</span><br><span class="line">lower_bound(a,a+len+1,x) &#x2F;&#x2F;默认升序 第一个大于等于x的地址</span><br><span class="line">upper_bound(a,a+len+1,x,cmp) &#x2F;&#x2F;降序 第一个小于x的地址</span><br><span class="line">lower_bound(a,a+len+1,x,cmp) &#x2F;&#x2F;降序 第一个小于等于x的地址</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> STL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>蓝桥杯2020三月模拟赛解题报告</title>
      <link href="2020/03/26/%E8%93%9D%E6%A1%A5%E6%9D%AF2020%E4%B8%89%E6%9C%88%E6%A8%A1%E6%8B%9F%E8%B5%9B%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/"/>
      <url>2020/03/26/%E8%93%9D%E6%A1%A5%E6%9D%AF2020%E4%B8%89%E6%9C%88%E6%A8%A1%E6%8B%9F%E8%B5%9B%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="第一题-单位变换"><a href="#第一题-单位变换" class="headerlink" title="第一题 单位变换"></a>第一题 单位变换</h2><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】"><a href="#【问题描述】" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>在计算机存储中，15.125GB是多少MB？</p><h4 id="【答案提交】"><a href="#【答案提交】" class="headerlink" title="【答案提交】"></a>【答案提交】</h4><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>1G=1024M</p><h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><p>15488</p><h2 id="第二题-约数个数"><a href="#第二题-约数个数" class="headerlink" title="第二题 约数个数"></a>第二题 约数个数</h2><h3 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-1"><a href="#【问题描述】-1" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>1200000有多少个约数（只计算正约数）。</p><h4 id="【答案提交】-1"><a href="#【答案提交】-1" class="headerlink" title="【答案提交】"></a>【答案提交】</h4><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>枚举+检查</p><h3 id="参考代码"><a href="#参考代码" class="headerlink" title="参考代码"></a>参考代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;memory&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input2.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int i&#x3D;1200000,sum&#x3D;0;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;i;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(i%j&#x3D;&#x3D;0)</span><br><span class="line">sum++;</span><br><span class="line">&#125; </span><br><span class="line">cout&lt;&lt;sum;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="答案-1"><a href="#答案-1" class="headerlink" title="答案"></a>答案</h3><p>96</p><h2 id="第三题-叶结点数"><a href="#第三题-叶结点数" class="headerlink" title="第三题 叶结点数"></a>第三题 叶结点数</h2><h3 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-2"><a href="#【问题描述】-2" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>一棵包含有2019个结点的二叉树，最多包含多少个叶结点？</p><h4 id="【答案提交】-2"><a href="#【答案提交】-2" class="headerlink" title="【答案提交】"></a>【答案提交】</h4><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h3><p>ni为出度为i的节点，二叉树只有三种节点，出度为0,1,2的三种。并且有下面的关系</p><p>n=n0+n1+n2</p><p>n0=n2+1</p><p><strong>证明法1：</strong>n个节点的二叉树共有n-1条边，n-1=2*n2+n1,带入1式得：n0=n2+1</p><p><strong>证明法2:</strong>n0为叶子节点的个数，每两个叶子节点经过一次合并产生一个n2，得到一个新的叶子节点，也就是说每两个叶子节点经过一次合并减少一个叶子节点，产生一个n2。所以需要n-1次合并产生n-1个n2得到根节点，所以n0=n2+1</p><p>为使叶子节点数（n0）最多，必须n1最小，设为0，而n0=n2+1，得n2=(2019-1)/2=1009所以n0=1010</p><h3 id="答案-2"><a href="#答案-2" class="headerlink" title="答案"></a>答案</h3><p>1010</p><h2 id="第四题-数字9"><a href="#第四题-数字9" class="headerlink" title="第四题 数字9"></a>第四题 数字9</h2><h3 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-3"><a href="#【问题描述】-3" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>在1至2019中，有多少个数的数位中包含数字9？<br>注意，有的数中的数位中包含多个9，这个数只算一次。例如，1999这个数包含数字9，在计算时只是算一个数。</p><h4 id="【答案提交】-3"><a href="#【答案提交】-3" class="headerlink" title="【答案提交】"></a>【答案提交】</h4><p>这是一道结果填空的题，你只需要算出结果后提交即可。本题的结果为一个整数，在提交答案时只填写这个整数，填写多余的内容将无法得分。</p><h3 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h3><p>两个方法</p><p>(1)分别计算各个位上的数字然后判断</p><p>(2)字符串</p><h4 id="伪代码"><a href="#伪代码" class="headerlink" title="伪代码"></a>伪代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for i from 9  to 2019</span><br><span class="line">if str(i).contains(&#39;9&#39;)</span><br><span class="line">ans++</span><br></pre></td></tr></table></figure><h4 id="参考代码："><a href="#参考代码：" class="headerlink" title="参考代码："></a>参考代码：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;memory&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">bool check(int i) &#123;</span><br><span class="line">    char s[5];</span><br><span class="line">    sprintf(s, &quot;%d&quot;, i);</span><br><span class="line">    string str(s);</span><br><span class="line">    return str.find(&#39;9&#39;) !&#x3D; string::npos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input2.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n&#x3D;2019,sum&#x3D;0;</span><br><span class="line">int a&#x3D;clock();</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">int g&#x3D;j%10;</span><br><span class="line">int s&#x3D;(j&#x2F;10)%10;</span><br><span class="line">int b&#x3D;(j&#x2F;100)%10;</span><br><span class="line">int q&#x3D;(j&#x2F;1000)%10;</span><br><span class="line">if(g&#x3D;&#x3D;9||s&#x3D;&#x3D;9||b&#x3D;&#x3D;9||q&#x3D;&#x3D;9)</span><br><span class="line">sum++;</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;q&lt;&lt;b&lt;&lt;s&lt;&lt;g&lt;&lt;endl;</span><br><span class="line">&#125; </span><br><span class="line">cout&lt;&lt;sum&lt;&lt;&quot;  用时:&quot;&lt;&lt;clock()-a&lt;&lt;endl;</span><br><span class="line">a&#x3D;clock();</span><br><span class="line">sum&#x3D;0;char s[10];</span><br><span class="line">    for (int i &#x3D; 1; i &lt;&#x3D; n; ++i) &#123;</span><br><span class="line">        sprintf(s,&quot;%d&quot;,i);</span><br><span class="line">        string str(s);;</span><br><span class="line">        if(str.find(&#39;9&#39;)!&#x3D;string::npos)</span><br><span class="line">        sum++;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; sum &lt;&lt;&quot;   用时:&quot;&lt;&lt;clock()-a&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="答案-3"><a href="#答案-3" class="headerlink" title="答案"></a>答案</h3><p>544</p><h2 id="第五题-数位递增的数"><a href="#第五题-数位递增的数" class="headerlink" title="第五题 数位递增的数"></a>第五题 数位递增的数</h2><h3 id="题目-4"><a href="#题目-4" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-4"><a href="#【问题描述】-4" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>一个正整数如果任何一个数位不大于右边相邻的数位，则称为一个数位递增的数，例如1135是一个数位递增的数，而1024不是一个数位递增的数。<br>给定正整数 n，请问在整数 1 至 n 中有多少个数位递增的数？</p><h4 id="【输入格式】"><a href="#【输入格式】" class="headerlink" title="【输入格式】"></a>【输入格式】</h4><p>输入的第一行包含一个整数 n。</p><h4 id="【输出格式】"><a href="#【输出格式】" class="headerlink" title="【输出格式】"></a>【输出格式】</h4><p>输出一行包含一个整数，表示答案。</p><h4 id="【样例输入】"><a href="#【样例输入】" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>30</p><h4 id="【样例输出】"><a href="#【样例输出】" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>26<br>【评测用例规模与约定】<br>对于 40% 的评测用例，1 &lt;= n &lt;= 1000。<br>对于 80% 的评测用例，1 &lt;= n &lt;= 100000。<br>对于所有评测用例，1 &lt;= n &lt;= 1000000。</p><h3 id="思路-O-kN"><a href="#思路-O-kN" class="headerlink" title="思路 O(kN)"></a>思路 O(kN)</h3><p>两个方法</p><p>(1)计算每一位，判断</p><p>(2)迭代1~n<br>    转换为字符串<br>    迭代字符串的每一位，判断是否满足要求</p><h3 id="参考代码-1"><a href="#参考代码-1" class="headerlink" title="参考代码"></a>参考代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;memory&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input2.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,sum&#x3D;0;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">int c&#x3D;clock();</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;i,lwei&#x3D;10,j;</span><br><span class="line">for(j&#x3D;1;j&lt;&#x3D;7;j++)</span><br><span class="line">&#123;</span><br><span class="line">int wei&#x3D;t%10;</span><br><span class="line">t&#x2F;&#x3D;10;</span><br><span class="line">if(wei&gt;lwei)</span><br><span class="line">break;</span><br><span class="line">lwei&#x3D;wei;</span><br><span class="line">&#125;</span><br><span class="line">if(j&gt;7)</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;&quot;    用时:&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">sum&#x3D;0;</span><br><span class="line">c&#x3D;clock();</span><br><span class="line">char a[7];</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int j;</span><br><span class="line">sprintf(a,&quot;%d&quot;,i);</span><br><span class="line">for(j&#x3D;1;j&lt;strlen(a);j++)</span><br><span class="line">if(a[j-1]&gt;a[j])</span><br><span class="line">break;</span><br><span class="line">if(j&#x3D;&#x3D;strlen(a))</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;&quot;    用时:&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第六题-递增三元组"><a href="#第六题-递增三元组" class="headerlink" title="第六题 递增三元组"></a>第六题 递增三元组</h2><h3 id="题目-5"><a href="#题目-5" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-5"><a href="#【问题描述】-5" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>在数列 a[1], a[2], …, a[n] 中，如果对于下标 i, j, k 满足 0&lt;i&lt;j&lt;k&lt;n+1 且 a[i]&lt;a[j]&lt;a[k]，则称 a[i], a[j], a[k] 为一组递增三元组，a[j]为递增三元组的中心。<br>给定一个数列，请问数列中有多少个元素可能是递增三元组的中心。</p><h4 id="【输入格式】-1"><a href="#【输入格式】-1" class="headerlink" title="【输入格式】"></a>【输入格式】</h4><p>输入的第一行包含一个整数 n。<br>第二行包含 n 个整数 a[1], a[2], …, a[n]，相邻的整数间用空格分隔，表示给定的数列。</p><h4 id="【输出格式】-1"><a href="#【输出格式】-1" class="headerlink" title="【输出格式】"></a>【输出格式】</h4><p>输出一行包含一个整数，表示答案。</p><h4 id="【样例输入】-1"><a href="#【样例输入】-1" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>5<br>1 2 5 3 5</p><h4 id="【样例输出】-1"><a href="#【样例输出】-1" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>2</p><h4 id="【样例说明】"><a href="#【样例说明】" class="headerlink" title="【样例说明】"></a>【样例说明】</h4><p>a[2] 和 a[4] 可能是三元组的中心。</p><h4 id="【评测用例规模与约定】"><a href="#【评测用例规模与约定】" class="headerlink" title="【评测用例规模与约定】"></a>【评测用例规模与约定】</h4><p>对于 50% 的评测用例，2 &lt;= n &lt;= 100，0 &lt;= 数列中的数 &lt;= 1000。<br>对于所有评测用例，2 &lt;= n &lt;= 1000，0 &lt;= 数列中的数 &lt;= 10000。</p><h3 id="思路-O-N-2"><a href="#思路-O-N-2" class="headerlink" title="思路 O(N^2)"></a>思路 O(N^2)</h3><p>枚举每个元素<br>    该元素与前面的元素比较，找到小的即可<br>    该元素与后面的元素比较，找到大的即可<br>    上面两项为真，即说明当前元素可以作为三元组的中心<br>O(N^2)，因为N最大为1000，所以1秒内可以解决战斗。</p><h3 id="参考代码-2"><a href="#参考代码-2" class="headerlink" title="参考代码"></a>参考代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;memory&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">int n,sum&#x3D;0,a[10000],j,k;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;0;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;a[i];</span><br><span class="line">&#125;</span><br><span class="line">int c&#x3D;clock();</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n-2;i++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">for(j&#x3D;0;j&lt;i;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(a[j]&lt;a[i])</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">if(j&#x3D;&#x3D;i) continue;</span><br><span class="line">for(k&#x3D;i+1;k&lt;n;k++)</span><br><span class="line">&#123;</span><br><span class="line">if(a[i]&lt;a[k])</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">if(k&#x3D;&#x3D;n)</span><br><span class="line">continue;</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;&quot;  用时:&quot;&lt;&lt;clock()-c;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第七题-音节判断"><a href="#第七题-音节判断" class="headerlink" title="第七题 音节判断"></a>第七题 音节判断</h2><h3 id="题目-6"><a href="#题目-6" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-6"><a href="#【问题描述】-6" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>小明对类似于 hello 这种单词非常感兴趣，这种单词可以正好分为四段，第一段由一个或多个辅音字母组成，第二段由一个或多个元音字母组成，第三段由一个或多个辅音字母组成，第四段由一个或多个元音字母组成。<br>给定一个单词，请判断这个单词是否也是这种单词，如果是请输出yes，否则请输出no。<br>元音字母包括 a, e, i, o, u，共五个，其他均为辅音字母。</p><h4 id="【输入格式】-2"><a href="#【输入格式】-2" class="headerlink" title="【输入格式】"></a>【输入格式】</h4><p>输入一行，包含一个单词，单词中只包含小写英文字母。</p><h4 id="【输出格式】-2"><a href="#【输出格式】-2" class="headerlink" title="【输出格式】"></a>【输出格式】</h4><p>输出答案，或者为yes，或者为no。</p><h4 id="【样例输入】-2"><a href="#【样例输入】-2" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>lanqiao</p><h4 id="【样例输出】-2"><a href="#【样例输出】-2" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>yes</p><h4 id="【样例输入】-3"><a href="#【样例输入】-3" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>world</p><h4 id="【样例输出】-3"><a href="#【样例输出】-3" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>no</p><h4 id="【评测用例规模与约定】-1"><a href="#【评测用例规模与约定】-1" class="headerlink" title="【评测用例规模与约定】"></a>【评测用例规模与约定】</h4><p>对于所有评测用例，单词中的字母个数不超过100。</p><h3 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h3><p>三个方法</p><p>(1)遍历字符串，如果是辅音就设y(bool)为0，直到找到元音，记录下标，继续遍历，找到第二个元音，然后判断第一个元音的下标是不是0，必须非0并且第二个元音之后的都是辅音</p><p>(2)逻辑和:遍历字符串，计算<code>(judge(s[i])+judge(s[i+1]))==1</code>的次数，如果最后次数==3，说明合题意</p><p>(3)字符串现成的方法</p><p>找到第一个元音的下标index1，必须大于0，且能找到<br>沿着index1继续找下一个非元音得到index2，必须能找到<br>沿着index2继续找下一个元音得到index3，必须能找到<br>最后判断index3-1位置的字符应该是从后往前第一个非元音（因为index3及以后的字符都必须是元音了）</p><h3 id="参考代码-3"><a href="#参考代码-3" class="headerlink" title="参考代码"></a>参考代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;qwrtypsdfghjklzxcvbnmaeiouuoieamnbvcxzlkjhgfdspytrwqaaeeiioouu</span><br><span class="line">&#x2F;&#x2F;yes  time&#x3D;0</span><br><span class="line">&#x2F;&#x2F;yes  time&#x3D;0</span><br><span class="line">&#x2F;&#x2F;yes  time&#x3D;0</span><br><span class="line"></span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;memory&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">bool judge(char c)</span><br><span class="line">&#123;</span><br><span class="line">if(c&#x3D;&#x3D;&#39;a&#39;||c&#x3D;&#x3D;&#39;e&#39;||c&#x3D;&#x3D;&#39;i&#39;||c&#x3D;&#x3D;&#39;o&#39;||c&#x3D;&#x3D;&#39;u&#39;)</span><br><span class="line">return 1;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">string s;</span><br><span class="line">int index[2];</span><br><span class="line">int in&#x3D;0,sum&#x3D;0,k;</span><br><span class="line">bool y&#x3D;0,flag&#x3D;0;</span><br><span class="line">cin&gt;&gt;s;</span><br><span class="line">int c&#x3D;clock();</span><br><span class="line">for(int i&#x3D;0;i&lt;s.length();i++)</span><br><span class="line">&#123;</span><br><span class="line">if(judge(s[i]))</span><br><span class="line">&#123;</span><br><span class="line">if(y&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">y&#x3D;1;</span><br><span class="line">index[in++]&#x3D;i;</span><br><span class="line">if(in&#x3D;&#x3D;2)</span><br><span class="line">&#123;</span><br><span class="line">if(index[0]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">flag&#x3D;0;</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">for(k&#x3D;index[1];k&lt;s.length();k++)</span><br><span class="line">&#123;</span><br><span class="line">if(!judge(s[k]))</span><br><span class="line">&#123;</span><br><span class="line">flag&#x3D;0;</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(k&#x3D;&#x3D;s.length())</span><br><span class="line">flag&#x3D;1;</span><br><span class="line">else</span><br><span class="line">break;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">y&#x3D;0;</span><br><span class="line">&#125;</span><br><span class="line">if(flag) cout&lt;&lt;&quot;yes&quot;;</span><br><span class="line">else cout&lt;&lt;&quot;no&quot;;</span><br><span class="line">cout&lt;&lt;&quot;  time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">c&#x3D;clock();</span><br><span class="line">int jiao&#x3D;0;</span><br><span class="line">for(int i&#x3D;0;i&lt;s.length()-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">if((judge(s[i])+judge(s[i+1]))&#x3D;&#x3D;1)</span><br><span class="line">jiao++;</span><br><span class="line">&#125;</span><br><span class="line">if(jiao&#x3D;&#x3D;3) cout&lt;&lt;&quot;yes&quot;;</span><br><span class="line">else cout&lt;&lt;&quot;no&quot;;</span><br><span class="line">cout&lt;&lt;&quot;  time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">c&#x3D;clock();</span><br><span class="line">int index1&#x3D;s.find_first_of(&quot;aeiou&quot;);</span><br><span class="line">if(!index1||index1&#x3D;&#x3D;string::npos)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;no&quot;;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int index2&#x3D;s.find_first_not_of(&quot;aeiou&quot;,index1+1);</span><br><span class="line">if(index2&#x3D;&#x3D;string::npos)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;no&quot;;</span><br><span class="line">cout&lt;&lt;&quot;  time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int index3&#x3D;s.find_first_of(&quot;aeiou&quot;,index2+1);</span><br><span class="line">if(index3&#x3D;&#x3D;string::npos)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;no&quot;;</span><br><span class="line">cout&lt;&lt;&quot;  time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int index4&#x3D;s.find_last_not_of(&quot;aeiou&quot;);</span><br><span class="line">if(index4!&#x3D;index3-1)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;no&quot;;</span><br><span class="line">cout&lt;&lt;&quot;  time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;yes&quot;;</span><br><span class="line">cout&lt;&lt;&quot;  time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第八题-长草"><a href="#第八题-长草" class="headerlink" title="第八题 长草"></a>第八题 长草</h2><h3 id="题目-7"><a href="#题目-7" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-7"><a href="#【问题描述】-7" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>小明有一块空地，他将这块空地划分为 n 行 m 列的小块，每行和每列的长度都为 1。<br>小明选了其中的一些小块空地，种上了草，其他小块仍然保持是空地。<br>这些草长得很快，每个月，草都会向外长出一些，如果一个小块种了草，则它将向自己的上、下、左、右四小块空地扩展，这四小块空地都将变为有草的小块。<br>请告诉小明，k 个月后空地上哪些地方有草。</p><h4 id="【输入格式】-3"><a href="#【输入格式】-3" class="headerlink" title="【输入格式】"></a>【输入格式】</h4><p>输入的第一行包含两个整数 n, m。<br>接下来 n 行，每行包含 m 个字母，表示初始的空地状态，字母之间没有空格。如果为小数点，表示为空地，如果字母为 g，表示种了草。<br>接下来包含一个整数 k。</p><h4 id="【输出格式】-3"><a href="#【输出格式】-3" class="headerlink" title="【输出格式】"></a>【输出格式】</h4><p>输出 n 行，每行包含 m 个字母，表示 k 个月后空地的状态。如果为小数点，表示为空地，如果字母为 g，表示长了草。</p><h4 id="【样例输入】-4"><a href="#【样例输入】-4" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>4 5<br>.g…<br>…..<br>..g..<br>…..<br>2</p><h4 id="【样例输出】-4"><a href="#【样例输出】-4" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>gggg.<br>gggg.<br>ggggg<br>.ggg.</p><h4 id="【评测用例规模与约定】-2"><a href="#【评测用例规模与约定】-2" class="headerlink" title="【评测用例规模与约定】"></a>【评测用例规模与约定】</h4><p>对于 30% 的评测用例，2 &lt;= n, m &lt;= 20。<br>对于 70% 的评测用例，2 &lt;= n, m &lt;= 100。<br>对于所有评测用例，2 &lt;= n, m &lt;= 1000，1 &lt;= k &lt;= 1000。</p><h3 id="思路-O-N-M"><a href="#思路-O-N-M" class="headerlink" title="思路 O(N*M)"></a>思路 O(N*M)</h3><p>(1)dfs有可能会超时</p><p>(2)典型的多入口bfs，基本是个模板题。时间复杂度最多为O(N*M)。</p><h3 id="参考代码-4"><a href="#参考代码-4" class="headerlink" title="参考代码"></a>参考代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#include&lt;memory&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int x,y,kk;</span><br><span class="line">&#125;;</span><br><span class="line">char map[1010][1010],save[1010][1010];</span><br><span class="line">int m,n,k;</span><br><span class="line">queue&lt;Point&gt; q; </span><br><span class="line">int dir[4][2]&#x3D;&#123;0,1,0,-1,1,0,-1,0&#125;;</span><br><span class="line">void manyan(int x,int y)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">int xx&#x3D;x+dir[i][0];</span><br><span class="line">int yy&#x3D;y+dir[i][1];</span><br><span class="line">if(xx&gt;&#x3D;0&amp;&amp;xx&lt;m&amp;&amp;yy&gt;&#x3D;0&amp;&amp;yy&lt;n)</span><br><span class="line">&#123; </span><br><span class="line">if(map[xx][yy]&#x3D;&#x3D;&#39;.&#39;)</span><br><span class="line">map[xx][yy]&#x3D;&#39;d&#39;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">void bfs()&#123;</span><br><span class="line">Point a,b;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">if(a.kk&#x3D;&#x3D;k)</span><br><span class="line">return ;</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+dir[i][0];</span><br><span class="line">b.y&#x3D;a.y+dir[i][1];</span><br><span class="line">if(b.x&gt;&#x3D;0&amp;&amp;b.x&lt;m&amp;&amp;b.y&gt;&#x3D;0&amp;&amp;b.y&lt;n&amp;&amp;map[b.x][b.y]&#x3D;&#x3D;&#39;.&#39;)</span><br><span class="line">&#123; </span><br><span class="line">b.kk&#x3D;a.kk+1;</span><br><span class="line">map[b.x][b.y]&#x3D;&#39;g&#39;;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">void show(char map[1010][1010])</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;map[i][j];</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;0;i&lt;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;g&#39;)</span><br><span class="line">q.push(&#123;i,j,0&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">memcpy(save,map,sizeof(map));</span><br><span class="line">cin&gt;&gt;k;</span><br><span class="line">int c&#x3D;clock();</span><br><span class="line">bfs();</span><br><span class="line">cout&lt;&lt;&quot;time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">show(map);</span><br><span class="line">memcpy(map,save,sizeof(map));</span><br><span class="line">c&#x3D;clock();</span><br><span class="line">for(int i&#x3D;0;i&lt;k;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int ii&#x3D;0;ii&lt;m;ii++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[ii][j]&#x3D;&#x3D;&#39;g&#39;)</span><br><span class="line">manyan(ii,j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int ii&#x3D;0;ii&lt;m;ii++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[ii][j]&#x3D;&#x3D;&#39;d&#39;)</span><br><span class="line">map[ii][j]&#x3D;&#39;g&#39;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl;</span><br><span class="line">show(map);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第九题-序列计数"><a href="#第九题-序列计数" class="headerlink" title="第九题 序列计数"></a>第九题 序列计数</h2><h3 id="题目-8"><a href="#题目-8" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-8"><a href="#【问题描述】-8" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>小明想知道，满足以下条件的正整数序列的数量：</p><ol><li><p>第一项为 n；</p></li><li><p>第二项不超过 n；</p></li><li><p>从第三项开始，每一项小于前两项的差的绝对值。<br> 请计算，对于给定的 n，有多少种满足条件的序列。</p><h4 id="【输入格式】-4"><a href="#【输入格式】-4" class="headerlink" title="【输入格式】"></a>【输入格式】</h4><p>输入一行包含一个整数 n。</p><h4 id="【输出格式】-4"><a href="#【输出格式】-4" class="headerlink" title="【输出格式】"></a>【输出格式】</h4><p>输出一个整数，表示答案。答案可能很大，请输出答案除以10000的余数。</p><h4 id="【样例输入】-5"><a href="#【样例输入】-5" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>4</p><h4 id="【样例输出】-5"><a href="#【样例输出】-5" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>7</p><h4 id="【样例说明】-1"><a href="#【样例说明】-1" class="headerlink" title="【样例说明】"></a>【样例说明】</h4><p>以下是满足条件的序列：<br>4 1<br>4 1 1<br>4 1 2<br>4 2<br>4 2 1<br>4 3<br>4 4</p><h4 id="【评测用例规模与约定】-3"><a href="#【评测用例规模与约定】-3" class="headerlink" title="【评测用例规模与约定】"></a>【评测用例规模与约定】</h4><p>对于 20% 的评测用例，1 &lt;= n &lt;= 5；<br>对于 50% 的评测用例，1 &lt;= n &lt;= 10；<br>对于 80% 的评测用例，1 &lt;= n &lt;= 100；<br>对于所有评测用例，1 &lt;= n &lt;= 1000。</p></li></ol><h3 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h3><h4 id="void-dfs1-当前选择的点，下一次选择的范围"><a href="#void-dfs1-当前选择的点，下一次选择的范围" class="headerlink" title="void dfs1(当前选择的点，下一次选择的范围)"></a>void dfs1(当前选择的点，下一次选择的范围)</h4><p>正向思维，注意这里每次都可以选择不向下找了，将后面补0，直接递归看做结束的条件(严重超时)</p><h4 id="int-dfs2-上上一个选择的数字-上一个选择的数据"><a href="#int-dfs2-上上一个选择的数字-上一个选择的数据" class="headerlink" title="int dfs2(上上一个选择的数字,上一个选择的数据)"></a>int dfs2(上上一个选择的数字,上一个选择的数据)</h4><p>逆向思维，和第一个半斤八两，初始化为1是因为本身就是一种情况</p><h4 id="记忆性递归-O-n-3-参数和第二个相同"><a href="#记忆性递归-O-n-3-参数和第二个相同" class="headerlink" title="记忆性递归(O(n^3)) 参数和第二个相同"></a>记忆性递归(O(n^3)) 参数和第二个相同</h4><p>从第一、二种中可以看出有可能重复，所以加上一个矩阵记录</p><h4 id="递归优化"><a href="#递归优化" class="headerlink" title="递归优化"></a>递归优化</h4><p>dfs4(i,j) 表示前一个点是i,后一个点是[1,j]这些可能性的总和，显然dfs4(i,j)=dfs4(i,j-1)+1+dfs4(j,|i-j|)，<strong>为什么要加1？</strong>问的好，因为1表示的是(i,j(后面没有了))这一种情况</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;cstdlib&gt;</span><br><span class="line">#include &lt;cstring&gt;</span><br><span class="line">#include &lt;ctime&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int mem[1001][1001],sum;</span><br><span class="line">void dfs1(int aa,int jue)</span><br><span class="line">&#123;</span><br><span class="line">if(aa&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">sum++;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">dfs1(0,aa);</span><br><span class="line">_for(i,1,jue-1)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;(aa&gt;&#x3D;i)?(aa-i):(i-aa);</span><br><span class="line">dfs1(i,t);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int dfs2(int a,int b)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;(a&gt;&#x3D;b?(a-b):(b-a));</span><br><span class="line">int ans&#x3D;1;</span><br><span class="line">_for(i,1,t-1)</span><br><span class="line">ans+&#x3D;dfs2(b,i);</span><br><span class="line">return ans%10000;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int dfs3(int a,int b)&#123;</span><br><span class="line">if(mem[a][b]) return mem[a][b];</span><br><span class="line">int cha&#x3D;a&gt;&#x3D;b?(a-b):(b-a);</span><br><span class="line">int ans&#x3D;1;</span><br><span class="line">_for(i,1,cha-1)</span><br><span class="line">ans+&#x3D;dfs3(b,i);</span><br><span class="line">ans%&#x3D;10000;</span><br><span class="line">mem[a][b]&#x3D;ans;</span><br><span class="line">return ans;</span><br><span class="line">&#125; </span><br><span class="line">int dfs4(int a,int b)</span><br><span class="line">&#123;</span><br><span class="line">if(b&lt;&#x3D;0) return 0;</span><br><span class="line">if(mem[a][b]) return mem[a][b];</span><br><span class="line">int t&#x3D;(a&gt;&#x3D;b?(a-b):(b-a));</span><br><span class="line">return mem[a][b]&#x3D;(dfs4(a,b-1)+1+dfs4(b,t-1))%10000;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">    int n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    int c&#x3D;clock();</span><br><span class="line">    sum&#x3D;0;</span><br><span class="line">    _for(j,1,n)</span><br><span class="line">    dfs1(j,n-j);</span><br><span class="line">P(sum%10000);</span><br><span class="line">    PP(&quot;time&quot;,clock()-c);</span><br><span class="line">    c&#x3D;clock();</span><br><span class="line">    sum&#x3D;0;</span><br><span class="line">    _for(i,1,n)</span><br><span class="line">    sum+&#x3D;dfs2(n,i);</span><br><span class="line">    P(sum%10000);</span><br><span class="line">    PP(&quot;time&quot;,clock()-c);</span><br><span class="line">    c&#x3D;clock();</span><br><span class="line">    sum&#x3D;0;</span><br><span class="line">    _for(i,1,n)</span><br><span class="line">    sum+&#x3D;dfs3(n,i);</span><br><span class="line">    P(sum%10000);</span><br><span class="line">    PP(&quot;time&quot;,clock()-c);</span><br><span class="line">    memset(mem,0,sizeof(mem));</span><br><span class="line">    c&#x3D;clock();</span><br><span class="line">    P(dfs4(n,n));</span><br><span class="line">    PP(&quot;time&quot;,clock()-c);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第十题-晚会节目单"><a href="#第十题-晚会节目单" class="headerlink" title="第十题 晚会节目单"></a>第十题 晚会节目单</h2><h3 id="题目-9"><a href="#题目-9" class="headerlink" title="题目"></a>题目</h3><h4 id="【问题描述】-9"><a href="#【问题描述】-9" class="headerlink" title="【问题描述】"></a>【问题描述】</h4><p>小明要组织一台晚会，总共准备了 n 个节目。然后晚会的时间有限，他只能最终选择其中的 m 个节目。<br>这 n 个节目是按照小明设想的顺序给定的，顺序不能改变。<br>小明发现，观众对于晚会的喜欢程度与前几个节目的好看程度有非常大的关系，他希望选出的第一个节目尽可能好看，在此前提下希望第二个节目尽可能好看，依次类推。<br>小明给每个节目定义了一个好看值，请你帮助小明选择出 m 个节目，满足他的要求。</p><h4 id="【输入格式】-5"><a href="#【输入格式】-5" class="headerlink" title="【输入格式】"></a>【输入格式】</h4><p>输入的第一行包含两个整数 n, m ，表示节目的数量和要选择的数量。<br>第二行包含 n 个整数，依次为每个节目的好看值。</p><h4 id="【输出格式】-5"><a href="#【输出格式】-5" class="headerlink" title="【输出格式】"></a>【输出格式】</h4><p>输出一行包含 m 个整数，为选出的节目的好看值。</p><h4 id="【样例输入】-6"><a href="#【样例输入】-6" class="headerlink" title="【样例输入】"></a>【样例输入】</h4><p>5 3<br>3 1 2 5 4</p><h4 id="【样例输出】-6"><a href="#【样例输出】-6" class="headerlink" title="【样例输出】"></a>【样例输出】</h4><p>3 5 4</p><h4 id="【样例说明】-2"><a href="#【样例说明】-2" class="headerlink" title="【样例说明】"></a>【样例说明】</h4><p>选择了第1, 4, 5个节目。</p><h4 id="【评测用例规模与约定】-4"><a href="#【评测用例规模与约定】-4" class="headerlink" title="【评测用例规模与约定】"></a>【评测用例规模与约定】</h4><p>对于 30% 的评测用例，1 &lt;= n &lt;= 20；<br>对于 60% 的评测用例，1 &lt;= n &lt;= 100；<br>对于所有评测用例，1 &lt;= n &lt;= 100000，0 &lt;= 节目的好看值 &lt;= 100000。</p><h4 id="错误思路"><a href="#错误思路" class="headerlink" title="错误思路"></a>错误思路</h4><p>如果用两次排序求解，那就错了。因为并不是要选出的方案的好看值总和最大，而是要从前往后尽量好看。即选出的M个数字典序最大</p><h4 id="思路-O-N-2-1"><a href="#思路-O-N-2-1" class="headerlink" title="思路 O(N^2)"></a>思路 O(N^2)</h4><p>ST+RMQ</p><h3 id="参考代码-5"><a href="#参考代码-5" class="headerlink" title="参考代码"></a>参考代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;cstdio&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;time.h&gt;</span><br><span class="line">#define PP(a,b) cout&lt;&lt;a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;b&lt;&lt;endl</span><br><span class="line">#define P(a) cout&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define print(a) cout&lt;&lt;#a&lt;&lt;&quot;&#x3D;&quot;&lt;&lt;a&lt;&lt;endl</span><br><span class="line">#define _for(i,s,e) for(int i&#x3D;s;i&lt;&#x3D;e;i++)</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m;</span><br><span class="line">int a[100001];</span><br><span class="line">int tree[400001];</span><br><span class="line">int st[100001][20];</span><br><span class="line">int pow_2(int p) &#123;</span><br><span class="line">    return 1 &lt;&lt; p;</span><br><span class="line">&#125;</span><br><span class="line">void cal(int a[],int n)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;(1&lt;&lt;(j-1))&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i+(1&lt;&lt;j)-1&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">st[i][j]&#x3D;a[st[i][j-1]]&gt;a[st[i+pow_2(j-1)][j-1]]?st[i][j-1]:st[i+pow_2(j-1)][j-1];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int query(int s,int e)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;(int)(log(e-s+1)&#x2F;log(2));</span><br><span class="line">return a[st[s][t]]&gt;a[st[e-(1&lt;&lt;t)+1][t]]?st[s][t]:st[e-(1&lt;&lt;t)+1][t];</span><br><span class="line">&#125; </span><br><span class="line">void build_tree(int s,int e,int node)</span><br><span class="line">&#123;</span><br><span class="line">if(s&#x3D;&#x3D;e)</span><br><span class="line">&#123;</span><br><span class="line">tree[node]&#x3D;s;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">int mid&#x3D;(s+e)&#x2F;2;</span><br><span class="line">build_tree(s,mid,2*node+1);</span><br><span class="line">build_tree(mid+1,e,2*node+2);</span><br><span class="line">tree[node]&#x3D;a[tree[2*node+1]]&gt;a[tree[2*node+2]]?tree[2*node+1]:tree[2*node+2];</span><br><span class="line">&#125;</span><br><span class="line">int query_tree(int s,int e,int node,int l,int r)</span><br><span class="line">&#123;</span><br><span class="line">if(e&lt;l||s&gt;r) return 0;</span><br><span class="line">if(s&gt;&#x3D;l&amp;&amp;e&lt;&#x3D;r) return tree[node];</span><br><span class="line">int mid&#x3D;(s+e)&#x2F;2;</span><br><span class="line">int ln&#x3D;query_tree(s,mid,2*node+1,l,r);</span><br><span class="line">int rn&#x3D;query_tree(mid+1,e,2*node+2,l,r);</span><br><span class="line">return a[ln]&gt;a[rn]?ln:rn;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;,&quot;r&quot;,stdin);</span><br><span class="line">    ios::sync_with_stdio(0);</span><br><span class="line">    cin.tie(0);</span><br><span class="line">    cout.tie(0);</span><br><span class="line">    cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    _for(i,0,n-1)</span><br><span class="line">    &#123;</span><br><span class="line">    cin&gt;&gt;a[i];</span><br><span class="line">    st[i][0]&#x3D;i;</span><br><span class="line">    &#125;</span><br><span class="line">    int c&#x3D;clock();</span><br><span class="line">    cal(a,n);</span><br><span class="line">    int s&#x3D;0,k&#x3D;m;</span><br><span class="line">    while(k!&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">    int z&#x3D;query(s,n-1-k+1);</span><br><span class="line">    cout&lt;&lt;a[z]&lt;&lt;&quot; &quot;;</span><br><span class="line">    s&#x3D;z+1;</span><br><span class="line">    k--;</span><br><span class="line">    &#125; </span><br><span class="line">    P(&quot;&quot;);</span><br><span class="line">PP(&quot;time&#x3D;&quot;,clock()-c);</span><br><span class="line">    c&#x3D;clock();</span><br><span class="line">    build_tree(0,n-1,0);</span><br><span class="line">    cout&lt;&lt;&quot;tree:&quot;;</span><br><span class="line">     s&#x3D;0;k&#x3D;m;</span><br><span class="line">    while(k!&#x3D;0)</span><br><span class="line">    &#123;</span><br><span class="line">    int z&#x3D;query_tree(0,n-1,0,s,n-1-k+1);</span><br><span class="line">    cout&lt;&lt;a[z]&lt;&lt;&quot; &quot;;</span><br><span class="line">    s&#x3D;z+1;</span><br><span class="line">    k--;</span><br><span class="line">    &#125; </span><br><span class="line">cout&lt;&lt;endl&lt;&lt;&quot;time&#x3D;&quot;&lt;&lt;clock()-c&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 解题报告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 蓝桥杯2020模拟赛 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UVA-1052-算法训练-Bit Compressor</title>
      <link href="2020/03/25/UVA-1052-%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-Bit-Compressor/"/>
      <url>2020/03/25/UVA-1052-%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-Bit-Compressor/</url>
      
        <content type="html"><![CDATA[<p><strong>dfs奥义:不确定性即可能性！并且有时候可能性可以没有顺序！</strong>本文的不确定性在于对于前面有1的0，不确定是分隔符还是二进制中的一部分。这就是不确定性，也就是可能性。本程序还利用了二进制的动态计算。</p><a id="more"></a><h3 id="试题-算法训练-Bit-Compressor"><a href="#试题-算法训练-Bit-Compressor" class="headerlink" title="试题 算法训练 Bit Compressor"></a>试题 算法训练 Bit Compressor</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T553#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：256.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　数据压缩的目的是为了减少存储和交换数据时出现的冗余。这增加了有效数据的比重并提高了传输速率。有一种压缩二进制串的方法是这样的：<br>　　将连续的n个1替换为n的二进制表示（注：替换发生当且仅当这种替换减少了二进制串的总长度）<br>　　（译者注：连续的n个1的左右必须是0或者是串的开头、结尾）<br>　　比如：11111111001001111111111111110011会被压缩成10000010011110011。原串长为32,被压缩后串长为17.<br>　　这种方法的弊端在于，有时候解压缩算法会得到不止一个可能的原串，使得我们无法确定原串究竟是什么。请你写一个程序来判定我们能否利用压缩后的信息来确定原串。给出原串长L，原串中1的个数N，以及压缩后的串。<br>　　L&lt;=16 Kbytes，压缩后的串长度&lt;=40 bits。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行两个整数L,N，含义同问题描述<br>　　第二行一个二进制串，表示压缩后的串</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出”YES”或”NO”或”NOT UNIQUE”（不包含引号）<br>　　分别表示：<br>　　YES：原串唯一<br>　　NO：原串不存在<br>　　NOT UNIQUE：原串存在但不唯一</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>样例1：<br>32 26<br>10000010011110011<br>样例2：<br>9 7<br>1010101<br>样例3：<br>14 14<br>111111</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>样例1：YES<br>样例2：NOT UNIQUE<br>样例3：NO</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>先说二进制的动态计算，你可能会说我还不会二进制转十进制吗？例如1101，分别计算1,11,110,1101。每一个的前面都是重复的，我们可以用到前面的计算结果，这样可以避免重复计算，提高效率。</p><p>dfs参数(要处理的位置下标，已经处理的原串中的字符个数，已经处理的原串中的1的个数)。后两个参数是为了剪枝的。如果碰到前面没有1的0直接跳过，因为肯定是原串中的0，<strong>对于每个前面有1的0我们提供两种选择，一是作为原串中的0(把前面的反编码成二进制个1)，二是作为二进制中的0。</strong>但是这样会出现一个棘手的问题，<strong>一是10不能反编码回去</strong>，因为反编码得到11，长度都是2，不合题意，你可能说1也不能反编码回去，但是1无论是反编码还是不反编码得到的都是一样的结果，既然这样为什么还认为1不能反编码增加额外代码量呢？也就是说原串中的11是不能编码成10的，所以<strong>编码后的串中如果出现11不能确定是原串中的是11还是111</strong>，也就是说按照碰到前面有1的0就提供两种可能性的策略，对于10不能进去，对于11少算了一个。对于少算的可以额外增加，因为可能性的顺序没关系。但是对于多算的我们要加条件过滤。于是代码就产生了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;cstring&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define maxn 50</span><br><span class="line">int n,m; </span><br><span class="line">string s;</span><br><span class="line">int answer&#x3D;0; </span><br><span class="line">void dfs(int pos,int len,int len_1)&#123;</span><br><span class="line">if(pos&#x3D;&#x3D;s.length()&amp;&amp;len&#x3D;&#x3D;n&amp;&amp;len_1&#x3D;&#x3D;m)</span><br><span class="line">&#123;</span><br><span class="line">answer++;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">if(pos&gt;&#x3D;s.length()||len&gt;n||len_1&gt;m)</span><br><span class="line">return ;</span><br><span class="line">if(s[pos]&#x3D;&#x3D;&#39;0&#39;)</span><br><span class="line">&#123;</span><br><span class="line">dfs(pos+1,len+1,len_1);</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">int t&#x3D;0;</span><br><span class="line">for(int i&#x3D;pos;i&lt;s.length();i++)</span><br><span class="line">&#123;</span><br><span class="line">t*&#x3D;2;</span><br><span class="line">t+&#x3D;s[i]-&#39;0&#39;;</span><br><span class="line">if(len_1+t&gt;m||len+t&gt;n)</span><br><span class="line">break;</span><br><span class="line">if(s[i+1]!&#x3D;&#39;1&#39;&amp;&amp;(t!&#x3D;2))</span><br><span class="line">dfs(i+1,len+t,len_1+t);</span><br><span class="line">&#125;</span><br><span class="line">if(s[pos+1]&#x3D;&#x3D;&#39;1&#39;&amp;&amp;s[pos+2]!&#x3D;&#39;1&#39;) dfs(pos+2,len+2,len_1+2);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int e&#x3D;1;</span><br><span class="line">while(cin&gt;&gt;n&gt;&gt;m&amp;&amp;n)&#123;</span><br><span class="line">answer&#x3D;0;</span><br><span class="line">cin&gt;&gt;s;</span><br><span class="line">dfs(0,0,0);</span><br><span class="line">printf(&quot;Case #%d: &quot;,e++);</span><br><span class="line">        if(answer&#x3D;&#x3D;0)</span><br><span class="line">            printf(&quot;NO\n&quot;);</span><br><span class="line">        else if(answer&#x3D;&#x3D;1)</span><br><span class="line">            printf(&quot;YES\n&quot;);</span><br><span class="line">        else</span><br><span class="line">            printf(&quot;NOT UNIQUE\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 高级dfs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 编码 </tag>
            
            <tag> 动态二进制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 cNteSahruPfefrlefe</title>
      <link href="2020/03/20/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-cNteSahruPfefrlefe/"/>
      <url>2020/03/20/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-cNteSahruPfefrlefe/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>算法训练 Sticks</title>
      <link href="2020/03/18/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-Sticks/"/>
      <url>2020/03/18/%E7%AE%97%E6%B3%95%E8%AE%AD%E7%BB%83-Sticks/</url>
      
        <content type="html"><![CDATA[<p>还记得dfs的入门题吗？输入n个数和一个结果m,问这n个数能不能组合成m。这个题就是在能凑成m的基础上再从头开始搜索，注意不能运行多次dfs，而是要递归调用，因为不能确定找到一个m就是其中的一个m，有可能不合法。dfs的代码风格有两种，一种是正序，一种是倒序</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-算法训练-Sticks"><a href="#试题-算法训练-Sticks" class="headerlink" title="试题 算法训练 Sticks"></a>试题 算法训练 Sticks</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T572#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：999.4MB</p><p>　　Sticks</p><table><thead><tr><th><strong>Time Limit:</strong> 1000MS</th><th></th><th><strong>Memory Limit:</strong> 10000K</th></tr></thead><tbody><tr><td><strong>Total Submissions:</strong> 113547</td><td></td><td><strong>Accepted:</strong> 26078</td></tr></tbody></table><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　George took sticks of the same length and cut them randomly until all parts became at most 50 units long. Now he wants to return sticks to the original state, but he forgot how many sticks he had originally and how long they were originally. Please help him and design a program which computes the smallest possible original length of those sticks. All lengths expressed in units are integers greater than zero.</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　The input contains blocks of 2 lines. The first line contains the number of sticks parts after cutting, there are at most 64 sticks. The second line contains the lengths of those parts separated by the space. The last line of the file contains zero.</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　The output should contains the smallest possible length of original sticks, one per line.</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>9<br>5 2 1 5 2 1 5 2 1<br>4<br>1 2 3 4<br>0</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>5<br>6</p><h4 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h4><p>多个测试用例，第一行输入木棒的个数n，下一行输入n个数代表不同木棒的长度，这些木棒可以组成m个长度为k的长木棒，输出k的最小值</p>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> dfs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 高级dfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 字符串对比</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E6%AF%94/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AF%B9%E6%AF%94/</url>
      
        <content type="html"><![CDATA[<p>首先1很好判断，并且1和234对立(一组if else)，再看2，需要全部对比完才能；而34只要一个不满足就可以输出，所以34的判断在2的前面，根据题目逻辑，4要在三的前面。于是逻辑就清楚了。</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-字符串对比"><a href="#试题-基础练习-字符串对比" class="headerlink" title="试题 基础练习 字符串对比"></a>试题 基础练习 字符串对比</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T56#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　给定两个仅由大写字母或小写字母组成的字符串(长度介于1到10之间)，它们之间的关系是以下4中情况之一：<br>　　1：两个字符串长度不等。比如 Beijing 和 Hebei<br>　　2：两个字符串不仅长度相等，而且相应位置上的字符完全一致(区分大小写)，比如 Beijing 和 Beijing<br>　　3：两个字符串长度相等，相应位置上的字符仅在不区分大小写的前提下才能达到完全一致（也就是说，它并不满足情况2）。比如 beijing 和 BEIjing<br>　　4：两个字符串长度相等，但是即使是不区分大小写也不能使这两个字符串一致。比如 Beijing 和 Nanjing<br>　　编程判断输入的两个字符串之间的关系属于这四类中的哪一类，给出所属的类的编号。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　包括两行，每行都是一个字符串</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　仅有一个数字，表明这两个字符串的关系编号</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>BEIjing</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">beiJing</span><br></pre></td></tr></table></figure><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>3</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">char a[10],b[10];</span><br><span class="line">cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">if(strlen(a)!&#x3D;strlen(b))</span><br><span class="line">cout&lt;&lt;&quot;1&quot;;</span><br><span class="line">else&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;strlen(a);i++)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;a[i]-b[i];</span><br><span class="line">if(!(t&#x3D;&#x3D;32||t&#x3D;&#x3D;-32||t&#x3D;&#x3D;0))</span><br><span class="line">&#123;cout&lt;&lt;&quot;4&quot;;return 0;</span><br><span class="line">&#125;</span><br><span class="line">else if(t!&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;3&quot;;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;2&quot;;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 逻辑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 判断条件的先后 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 完美的代价</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%AE%8C%E7%BE%8E%E7%9A%84%E4%BB%A3%E4%BB%B7/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%AE%8C%E7%BE%8E%E7%9A%84%E4%BB%A3%E4%BB%B7/</url>
      
        <content type="html"><![CDATA[<p>注意交换方式是相邻互换，每次处理的范围都是[i,j]，k=j,k&gt;=i,k–。从j往前找和i一样的字符，找到了就k,j交换，记录交换次数，j–,i++；找不到则判断总数奇偶，偶则直接输出不可能，奇则做一个标记(因为总数是奇数可以允许一个字符不成对，但这个字符必须在中间)，然后记录将i移动到中间的步数(注意只是记录而不移动，因为移动了也会被再次打乱)，i++，继续从下一个找,如果有遇到一个找不到的，直接输出不可能</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-完美的代价"><a href="#试题-基础练习-完美的代价" class="headerlink" title="试题 基础练习 完美的代价"></a>试题 基础练习 完美的代价</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T60#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　回文串，是一种特殊的字符串，它从左往右读和从右往左读是一样的。小龙龙认为回文串才是完美的。现在给你一个串，它不一定是回文的，请你计算最少的交换次数使得该串变成一个完美的回文串。<br>　　交换的定义是：交换两个相邻的字符<br>　　例如mamad<br>　　第一次交换 ad : mamda<br>　　第二次交换 md : madma<br>　　第三次交换 ma : madam (回文！完美！)</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行是一个整数N，表示接下来的字符串的长度(N &lt;= 8000)<br>　　第二行是一个字符串，长度为N.只包含小写字母</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　如果可能，输出最少的交换次数。<br>　　否则输出Impossible</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5<br>mamad</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>3</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">int n;</span><br><span class="line">char s[8001];</span><br><span class="line">cin&gt;&gt;n&gt;&gt;s;</span><br><span class="line">int j&#x3D;n-1,sum&#x3D;0;</span><br><span class="line">bool flag&#x3D;0;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;j;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int k&#x3D;j;k&gt;&#x3D;i;k--)</span><br><span class="line">&#123;</span><br><span class="line">if(i&#x3D;&#x3D;k)</span><br><span class="line">&#123;</span><br><span class="line">if(flag||(n&amp;1)&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; &quot;Impossible&quot;;</span><br><span class="line">                    return 0;</span><br><span class="line">&#125;</span><br><span class="line">flag&#x3D;1;</span><br><span class="line">sum+&#x3D;n&#x2F;2-i;</span><br><span class="line">&#125;</span><br><span class="line">else if(s[i]&#x3D;&#x3D;s[k])</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;k;i&lt;&#x3D;j-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">swap(s[i],s[i+1]);</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line">j--;</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 回文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 移动成回文最短 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 数的读法</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E6%95%B0%E7%9A%84%E8%AF%BB%E6%B3%95/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E6%95%B0%E7%9A%84%E8%AF%BB%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>先看题目的规模，最大到十亿的单位。中文的数字单位有个特点，个十百千一组，万一组，亿一组。也就是读一个数先读亿前面的个十百千读法，然后加上亿，然后再读亿到万的个十百千读法，然后再读万，然后再读个十百千。比如12 3456 7890，先读亿前面的数字，十二，然后加上亿，在读亿和万之间的数字，三千四百五十六，然后加上万，然后读七千八百九十，最终读十二亿三千四百五十六万七千八百九十。还有一些其他的一些细节。</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-数的读法"><a href="#试题-基础练习-数的读法" class="headerlink" title="试题 基础练习 数的读法"></a>试题 基础练习 数的读法</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T61#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　Tom教授正在给研究生讲授一门关于基因的课程，有一件事情让他颇为头疼：一条染色体上有成千上万个碱基对，它们从0开始编号，到几百万，几千万，甚至上亿。<br>　　比如说，在对学生讲解第1234567009号位置上的碱基时，光看着数字是很难准确的念出来的。<br>　　所以，他迫切地需要一个系统，然后当他输入12 3456 7009时，会给出相应的念法：<br>　　十二亿三千四百五十六万七千零九<br>　　用汉语拼音表示为<br>　　shi er yi san qian si bai wu shi liu wan qi qian ling jiu<br>　　这样他只需要照着念就可以了。<br>　　你的任务是帮他设计这样一个系统：给定一个阿拉伯数字串，你帮他按照中文读写的规范转为汉语拼音字串，相邻的两个音节用一个空格符格开。<br>　　注意必须严格按照规范，比如说“10010”读作“yi wan ling yi shi”而不是“yi wan ling shi”，“100000”读作“shi wan”而不是“yi shi wan”，“2000”读作“er qian”而不是“liang qian”。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　有一个数字串，数值大小不超过2,000,000,000。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　是一个由小写英文字母，逗号和空格组成的字符串，表示该数的英文读法。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>1234567009</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>shi er yi san qian si bai wu shi liu wan qi qian ling jiu</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>知道了大概的读法之后就可以写了，于是就需要一个数组存数字的读法，一个数组存单位的读法，这里不需要个位，将个位置空就行，因为我们平时也不读个位。然后判断输入的规模到亿了吗？如果到亿(倒数第九位)了就将单位数组和亿对齐，并将个位置<code>“yi”</code>,到万(倒数第五位)则跟万对齐，个位置<code>“wan”</code>，否则对齐最后一位,个位置空。例如</p><p>12 3456 7890</p><p>10</p><p>​    3210</p><p>​               3210</p><p>第二三四行代表数组单位的下标，此时的对齐的标准是亿，个位置<code>“yi”</code>,然后读一个数字读一个单位，读出<code>&quot;yi shi er yi&quot;</code>，注意此时的个位置<code>&quot;yi&quot;</code>，所以读出<code>&quot;yi&quot;</code>。这样就可以读出数来了，然而还是存在一些问题，比如，12(仅限开头，412中的1还是要读的)应读作”shi er”而不是“yi shi er”,这个问题很好解决，加一个判断的条件，开头为1单位是“shi”的时候不读yi”。102应读作“yi bai ling er”而不是“yi  bai  ling shi er”,这个问题也很好解决，零的时候数字和单位都不读，如果遇到非零数字的上一个数字是零就多读一个“ling ”。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">char s[11];</span><br><span class="line">cin&gt;&gt;s;</span><br><span class="line">string shu[10]&#x3D;&#123;&quot;ling&quot;,&quot;yi&quot;,&quot;er&quot;,&quot;san&quot;,&quot;si&quot;,&quot;wu&quot;,&quot;liu&quot;,&quot;qi&quot;,&quot;ba&quot;,&quot;jiu&quot;&#125;;</span><br><span class="line">string d[6]&#x3D;&#123;&quot;&quot;,&quot;shi&quot;,&quot;bai&quot;,&quot;qian&quot;,&quot;wan&quot;,&quot;yi&quot;&#125;;</span><br><span class="line">int len&#x3D;strlen(s);</span><br><span class="line">int p;</span><br><span class="line">for(int i&#x3D;0;i&lt;strlen(s);i++)</span><br><span class="line">&#123;</span><br><span class="line">if(strlen(s)-i&gt;&#x3D;9)</span><br><span class="line">p&#x3D;9;</span><br><span class="line">else if(strlen(s)-i&gt;&#x3D;5)</span><br><span class="line">p&#x3D;5;</span><br><span class="line">else</span><br><span class="line">p&#x3D;1;</span><br><span class="line">int j&#x3D;strlen(s)-p-i;</span><br><span class="line">if(s[i]!&#x3D;&#39;0&#39;)</span><br><span class="line">&#123;</span><br><span class="line">if(p&#x3D;&#x3D;9) d[0]&#x3D;&quot;yi &quot;;</span><br><span class="line">else if(p&#x3D;&#x3D;5) d[0]&#x3D;&quot;wan &quot;;</span><br><span class="line">else d[0]&#x3D;&quot;&quot;;</span><br><span class="line">if(i&gt;&#x3D;1&amp;&amp;s[i-1]&#x3D;&#x3D;&#39;0&#39;) cout&lt;&lt;&quot;ling&quot;&lt;&lt;&quot; &quot;;</span><br><span class="line">if(!(i&#x3D;&#x3D;0&amp;&amp;s[i]&#x3D;&#x3D;&#39;1&#39;&amp;&amp;j&#x3D;&#x3D;1))</span><br><span class="line">cout&lt;&lt;shu[s[i]-&#39;0&#39;]&lt;&lt;&quot; &quot;;</span><br><span class="line">if(j!&#x3D;0)</span><br><span class="line">cout&lt;&lt;d[j]&lt;&lt;&quot; &quot;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">if(j&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;d[0];</span><br><span class="line">d[0]&#x3D;&quot;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 逻辑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读数字 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 时间转换</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E6%97%B6%E9%97%B4%E8%BD%AC%E6%8D%A2/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E6%97%B6%E9%97%B4%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<p>十进制转六十进制的倒数第三位</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="试题-基础练习-时间转换"><a href="#试题-基础练习-时间转换" class="headerlink" title="试题 基础练习 时间转换"></a>试题 基础练习 时间转换</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T54#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　给定一个以秒为单位的时间t，要求用“<H>:<M>:<S>”的格式来表示这个时间。<H>表示时间，<M>表示分钟，而<S>表示秒，它们都是整数且没有前导的“0”。例如，若t=0，则应输出是“0:0:0”；若t=3661，则输出“1:1:1”。</S></M></H></S></M></H></p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入只有一行，是一个整数t（0&lt;=t&lt;=86399）。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出只有一行，是以“<H>:<M>:<S>”的格式所表示的时间，不包括引号。</S></M></H></p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>0</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>0:0:0</p><h4 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h4><p>5436</p><h4 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h4><p>1:30:36</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int t;</span><br><span class="line">cin&gt;&gt;t;</span><br><span class="line">int h&#x3D;t&#x2F;(60*60);</span><br><span class="line">t-&#x3D;h*(60*60);</span><br><span class="line">int m&#x3D;t&#x2F;60;</span><br><span class="line">t-&#x3D;m*60;</span><br><span class="line">cout&lt;&lt;h&lt;&lt;&quot;:&quot;&lt;&lt;m&lt;&lt;&quot;:&quot;&lt;&lt;t;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 进制 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 水题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 矩阵乘法</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>整数的乘法初始化为1，矩阵的乘法初始化为大小相同单位矩阵(只有对角线全是1)。必须由第三个变量保存结果。for循环不仅控制次数还控制积和被乘数每次的变换。</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-矩阵乘法"><a href="#试题-基础练习-矩阵乘法" class="headerlink" title="试题 基础练习 矩阵乘法"></a>试题 基础练习 矩阵乘法</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T58#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　给定一个N阶矩阵A，输出A的M次幂（M是非负整数）<br>　　例如：<br>　　A =<br>　　1 2<br>　　3 4<br>　　A的2次幂<br>　　7 10<br>　　15 22</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　第一行是一个正整数N、M（1&lt;=N&lt;=30, 0&lt;=M&lt;=5），表示矩阵A的阶数和要求的幂数<br>　　接下来N行，每行N个绝对值不超过10的非负整数，描述矩阵A的值</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出共N行，每行N个整数，表示A的M次幂所对应的矩阵。相邻的数之间用一个空格隔开</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>2 2<br>1 2<br>3 4</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>7 10<br>15 22</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int juzhen[30][30],jieguo[2][30][30],nn&#x3D;0;</span><br><span class="line">int n,m;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">for(int i&#x3D;0;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;juzhen[i][j];</span><br><span class="line">jieguo[0][i][j]&#x3D;i&#x3D;&#x3D;j?1:0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">nn&#x3D;i&amp;1?0:1;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">for(int k&#x3D;0;k&lt;n;k++)</span><br><span class="line">&#123;</span><br><span class="line">int sum&#x3D;0;</span><br><span class="line">for(int l&#x3D;0;l&lt;n;l++)</span><br><span class="line">&#123;</span><br><span class="line">sum+&#x3D;jieguo[1-nn][j][l]*juzhen[l][k];</span><br><span class="line">&#125;</span><br><span class="line">jieguo[nn][j][k]&#x3D;sum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">for(int k&#x3D;0;k&lt;n;k++)</span><br><span class="line">cout&lt;&lt;jieguo[nn][j][k]&lt;&lt;&quot; &quot;;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 矩阵乘法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 妙用下标和 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 矩形面积交</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E7%9F%A9%E5%BD%A2%E9%9D%A2%E7%A7%AF%E4%BA%A4/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E7%9F%A9%E5%BD%A2%E9%9D%A2%E7%A7%AF%E4%BA%A4/</url>
      
        <content type="html"><![CDATA[<p>如果判断一个线段跟另一个线段相交的长度的话，起点就是两个线段起点的最大值，终点就是两个线段的终点的最小值。然后判断一下终点是不是比起点大，如果终点比起点小的话就不相交。但因为我们通常不知道线段的起点和终点，所以要进行比较。所以这个方法也可以推广到n维。</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-矩形面积交"><a href="#试题-基础练习-矩形面积交" class="headerlink" title="试题 基础练习 矩形面积交"></a>试题 基础练习 矩形面积交</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T59#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　平面上有两个矩形，它们的边平行于直角坐标系的X轴或Y轴。对于每个矩形，我们给出它的一对相对顶点的坐标，请你编程算出两个矩形的交的面积。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入仅包含两行，每行描述一个矩形。<br>　　在每行中，给出矩形的一对相对顶点的坐标，每个点的坐标都用两个绝对值不超过10^7的实数表示。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出仅包含一个实数，为交的面积，保留到小数后两位。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>1 1 3 3<br>2 2 4 4</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>1.00</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">double a[8];</span><br><span class="line">for(int i&#x3D;0;i&lt;8;i++)</span><br><span class="line">cin&gt;&gt;a[i];</span><br><span class="line">double xmin&#x3D;max(min(a[0],a[2]),min(a[4],a[6]));</span><br><span class="line">double xmax&#x3D;min(max(a[0],a[2]),max(a[4],a[6]));</span><br><span class="line">double ymin&#x3D;max(min(a[1],a[3]),min(a[5],a[7]));</span><br><span class="line">double ymax&#x3D;min(max(a[1],a[3]),max(a[5],a[7]));</span><br><span class="line">if(xmin&lt;xmax&amp;&amp;ymin&lt;ymax)</span><br><span class="line">printf(&quot;%.2f&quot;,(xmax-xmin)*(ymax-ymin));</span><br><span class="line">else</span><br><span class="line">cout&lt;&lt;&quot;0.00&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 线段交 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> n维交 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 分解质因数</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%88%86%E8%A7%A3%E8%B4%A8%E5%9B%A0%E6%95%B0/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%88%86%E8%A7%A3%E8%B4%A8%E5%9B%A0%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>有好多种做法，最快的应该是从小到大打印素数表，然后挨个除。但是我觉得打印素数表太麻烦，于是就从2开始挨个除然后输出。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="试题-基础练习-分解质因数"><a href="#试题-基础练习-分解质因数" class="headerlink" title="试题 基础练习 分解质因数"></a>试题 基础练习 分解质因数</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T57#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　求出区间[a,b]中所有整数的质因数分解。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入两个整数a，b。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　每行输出一个数的分解，形如k=a1<em>a2</em>a3…(a1&lt;=a2&lt;=a3…，k也是从小到大的)(具体可看样例)</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>3 10</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>3=3<br>4=2<em>2<br>5=5<br>6=2</em>3<br>7=7<br>8=2<em>2</em>2<br>9=3<em>3<br>10=2</em>5</p><p>提示</p><p>　　先筛出所有素数，然后再分解。</p><p>数据规模和约定</p><p>　　2&lt;=a&lt;=b&lt;=10000</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">void zhiyinshu(int n)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;2;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(n%i&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">n&#x2F;&#x3D;i;</span><br><span class="line">if(n&#x3D;&#x3D;1)</span><br><span class="line">cout&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">else</span><br><span class="line">cout&lt;&lt;i&lt;&lt;&quot;*&quot;;</span><br><span class="line">i--;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int m,n;</span><br><span class="line">cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;m;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;i&lt;&lt;&quot;&#x3D;&quot;;</span><br><span class="line">zhiyinshu(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 质因数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分解质因数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 Sine之舞</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-Sine%E4%B9%8B%E8%88%9E/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-Sine%E4%B9%8B%E8%88%9E/</url>
      
        <content type="html"><![CDATA[<p>仔细观察，嵌套方式，然后写出来就行</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-Sine之舞"><a href="#试题-基础练习-Sine之舞" class="headerlink" title="试题 基础练习 Sine之舞"></a>试题 基础练习 Sine之舞</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T62#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　最近FJ为他的奶牛们开设了数学分析课，FJ知道若要学好这门课，必须有一个好的三角函数基本功。所以他准备和奶牛们做一个“Sine之舞”的游戏，寓教于乐，提高奶牛们的计算能力。<br>　　不妨设<br>　　An=sin(1–sin(2+sin(3–sin(4+…sin(n))…)<br>　　Sn=(…(A1+n)A2+n-1)A3+…+2)An+1<br>　　FJ想让奶牛们计算Sn的值，请你帮助FJ打印出Sn的完整表达式，以方便奶牛们做题。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　仅有一个数：N&lt;201。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　请输出相应的表达式Sn，以一个换行符结束。输出中不得含有多余的空格或换行、回车符。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>3</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>((sin(1)+3)sin(1–sin(2))+2)sin(1–sin(2+sin(3)))+1</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">void p(int s,int e)</span><br><span class="line">&#123;</span><br><span class="line">if(s&#x3D;&#x3D;e) &#123;</span><br><span class="line">printf(&quot;sin(%d)&quot;,e);</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">char c&#x3D;s&amp;1?&#39;-&#39;:&#39;+&#39;;</span><br><span class="line">printf(&quot;sin(%d%c&quot;,s,c);</span><br><span class="line">p(s+1,e);</span><br><span class="line">cout&lt;&lt;&quot;)&quot;;</span><br><span class="line">&#125;</span><br><span class="line">void pp(int an,int nn)</span><br><span class="line">&#123;</span><br><span class="line">if(an&#x3D;&#x3D;1)</span><br><span class="line">&#123;</span><br><span class="line">p(1,an);</span><br><span class="line">cout&lt;&lt;&quot;+&quot;&lt;&lt;nn;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;(&quot;;</span><br><span class="line">pp(an-1,nn+1);</span><br><span class="line">cout&lt;&lt;&quot;)&quot;;</span><br><span class="line">p(1,an);</span><br><span class="line">cout&lt;&lt;&quot;+&quot;&lt;&lt;nn;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">pp(n,1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 递归 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 逻辑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 FJ的字符串</title>
      <link href="2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-FJ%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
      <url>2020/03/14/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-FJ%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
      
        <content type="html"><![CDATA[<p>仔细观察就是二叉树的中序遍历</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="试题-基础练习-FJ的字符串"><a href="#试题-基础练习-FJ的字符串" class="headerlink" title="试题 基础练习 FJ的字符串"></a>试题 基础练习 FJ的字符串</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T63#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　FJ在沙盘上写了这样一些字符串：<br>　　A1 = “A”<br>　　A2 = “ABA”<br>　　A3 = “ABACABA”<br>　　A4 = “ABACABADABACABA”<br>　　… …<br>　　你能找出其中的规律并写所有的数列AN吗？</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　仅有一个数：N ≤ 26。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　请输出相应的字符串AN，以一个换行符结束。输出中不得含有多余的空格或换行、回车符。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>3</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>ABACABA</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">void p(char c)</span><br><span class="line">&#123;</span><br><span class="line">if(c&#x3D;&#x3D;&#39;A&#39;)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;c;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">p(c-1);</span><br><span class="line">cout&lt;&lt;c;</span><br><span class="line">p(c-1);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">int n;</span><br><span class="line">while(cin&gt;&gt;n)</span><br><span class="line">&#123;</span><br><span class="line">p(&#39;A&#39;-1+n);</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 递归 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 逻辑 </tag>
            
            <tag> 中序遍历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++ to_string编写</title>
      <link href="2020/03/13/C-to-string%E7%BC%96%E5%86%99/"/>
      <url>2020/03/13/C-to-string%E7%BC%96%E5%86%99/</url>
      
        <content type="html"><![CDATA[<p>dev c++ 中不能用<code>to_string</code>函数，于是就自己用泛型写了一个。函数模板是函数的模板，需要经过编译两次，第一次检查错误，第二次生成具体的函数。</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string&gt;</span><br><span class="line">#include&lt;sstream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">template &lt;typename T &gt;</span><br><span class="line">string to_string(T i)</span><br><span class="line">&#123;</span><br><span class="line">stringstream s;</span><br><span class="line">s&lt;&lt;i;</span><br><span class="line">return s.str();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 泛型编程 </tag>
            
            <tag> 函数模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 芯片测试</title>
      <link href="2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E8%8A%AF%E7%89%87%E6%B5%8B%E8%AF%95/"/>
      <url>2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E8%8A%AF%E7%89%87%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> category1 </category>
          
          <category> category2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tag1 </tag>
            
            <tag> tag2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 龟兔赛跑预测</title>
      <link href="2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E9%BE%9F%E5%85%94%E8%B5%9B%E8%B7%91%E9%A2%84%E6%B5%8B/"/>
      <url>2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E9%BE%9F%E5%85%94%E8%B5%9B%E8%B7%91%E9%A2%84%E6%B5%8B/</url>
      
        <content type="html"><![CDATA[<p>结果一定是一个整数，题中说是两个速度的公倍数。必须一秒一秒的走，当兔子领先t米时，后退v1*s米就行，这样再经过s秒之后回到后退前的位置</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="试题-基础练习-龟兔赛跑预测"><a href="#试题-基础练习-龟兔赛跑预测" class="headerlink" title="试题 基础练习 龟兔赛跑预测"></a>试题 基础练习 龟兔赛跑预测</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T65#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　话说这个世界上有各种各样的兔子和乌龟，但是研究发现，所有的兔子和乌龟都有一个共同的特点——喜欢赛跑。于是世界上各个角落都不断在发生着乌龟和兔子的比赛，小华对此很感兴趣，于是决定研究不同兔子和乌龟的赛跑。他发现，兔子虽然跑比乌龟快，但它们有众所周知的毛病——骄傲且懒惰，于是在与乌龟的比赛中，一旦任一秒结束后兔子发现自己领先t米或以上，它们就会停下来休息s秒。对于不同的兔子，t，s的数值是不同的，但是所有的乌龟却是一致——它们不到终点决不停止。<br>　　然而有些比赛相当漫长，全程观看会耗费大量时间，而小华发现只要在每场比赛开始后记录下兔子和乌龟的数据——兔子的速度v1（表示每秒兔子能跑v1米），乌龟的速度v2，以及兔子对应的t，s值，以及赛道的长度l——就能预测出比赛的结果。但是小华很懒，不想通过手工计算推测出比赛的结果，于是他找到了你——清华大学计算机系的高才生——请求帮助，请你写一个程序，对于输入的一场比赛的数据v1，v2，t，s，l，预测该场比赛的结果。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入只有一行，包含用空格隔开的五个正整数v1，v2，t，s，l，其中(v1,v2&lt;=100;t&lt;=300;s&lt;=10;l&lt;=10000且为v1,v2的公倍数)</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出包含两行，第一行输出比赛结果——一个大写字母“T”或“R”或“D”，分别表示乌龟获胜，兔子获胜，或者两者同时到达终点。<br>　　第二行输出一个正整数，表示获胜者（或者双方同时）到达终点所耗费的时间（秒数）。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>10 5 5 2 20</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>D<br>4</p><h4 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h4><p>10 5 5 1 20</p><h4 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h4><p>R<br>3</p><h4 id="样例输入-2"><a href="#样例输入-2" class="headerlink" title="样例输入"></a>样例输入</h4><p>10 5 5 3 20</p><h4 id="样例输出-2"><a href="#样例输出-2" class="headerlink" title="样例输出"></a>样例输出</h4><p>T<br>4</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">void shuchu(int , int , int , int , int );</span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    int v1,v2,t,s,l;</span><br><span class="line">    scanf(&quot;%d%d%d%d%d&quot;, &amp;v1 , &amp;v2 , &amp;t , &amp;s , &amp;l );</span><br><span class="line">    shuchu( v1 ,  v2 , t , s  , l );</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">void shuchu(int v1 , int v2 , int t , int s , int  l )</span><br><span class="line">&#123;</span><br><span class="line">int s1&#x3D; 0 , s2 &#x3D; 0  ,i &#x3D; 0;</span><br><span class="line">while(s1 &lt; l &amp;&amp; s2 &lt; l)</span><br><span class="line">    &#123;</span><br><span class="line">        s1 +&#x3D;v1 ;</span><br><span class="line">        s2 +&#x3D;v2 ;</span><br><span class="line">        i ++ ;</span><br><span class="line">        if( s1 &#x3D;&#x3D; l || s2 &#x3D;&#x3D; l)</span><br><span class="line">&#123;</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line">        if(s1-s2 &gt;&#x3D; t)</span><br><span class="line">&#123;</span><br><span class="line">s1-&#x3D; v1 * s;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;i&lt;&lt;&quot; &quot;&lt;&lt;s1&lt;&lt;&quot; &quot;&lt;&lt;s2&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    if(s1 &gt; s2 )     </span><br><span class="line">&#123;</span><br><span class="line">printf(&quot;R\n&quot;);</span><br><span class="line">&#125; </span><br><span class="line">    if( s2 &gt; s1) </span><br><span class="line">&#123;</span><br><span class="line">printf(&quot;T\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line">    if(s1 &#x3D;&#x3D; s2)          </span><br><span class="line">&#123;</span><br><span class="line">printf(&quot;D\n&quot;);</span><br><span class="line">&#125; </span><br><span class="line">    printf(&quot;%d&quot;, i );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 逻辑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 龟兔赛跑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 回形取数</title>
      <link href="2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%9B%9E%E5%BD%A2%E5%8F%96%E6%95%B0/"/>
      <url>2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E5%9B%9E%E5%BD%A2%E5%8F%96%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>将一个方向的点遍历并输出，直到碰壁，然后改变方向，然后再输出……。不能用dfs因为需要的是碰壁再换方向，而不是每次都改变方向。</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-回形取数"><a href="#试题-基础练习-回形取数" class="headerlink" title="试题 基础练习 回形取数"></a>试题 基础练习 回形取数</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T66#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　回形取数就是沿矩阵的边取数，若当前方向上无数可取或已经取过，则左转90度。一开始位于矩阵左上角，方向向下。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入第一行是两个不超过200的正整数m, n，表示矩阵的行和列。接下来m行每行n个整数，表示这个矩阵。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出只有一行，共mn个数，为输入矩阵回形取数得到的结果。数之间用一个空格分隔，行末不要有多余的空格。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>3 3<br>1 2 3<br>4 5 6<br>7 8 9</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>1 4 7 8 9 6 3 2 5</p><h4 id="样例输入-1"><a href="#样例输入-1" class="headerlink" title="样例输入"></a>样例输入</h4><p>3 2<br>1 2<br>3 4<br>5 6</p><h4 id="样例输出-1"><a href="#样例输出-1" class="headerlink" title="样例输出"></a>样例输出</h4><p>1 3 5 6 4 2</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">&#x2F;&#x2F;#include&lt;map&gt;</span><br><span class="line">#define PI 3.14159265358979323</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">using namespace std;</span><br><span class="line">int map[210][210],m,n,sum&#x3D;1,x,y;</span><br><span class="line">int dir[4][2]&#x3D;&#123;1,0,0,1,-1,0,0,-1&#125;;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input2.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;0;i&lt;m;i++)</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">x&#x3D;y&#x3D;0;</span><br><span class="line">cout&lt;&lt;map[0][0];</span><br><span class="line">map[x][y]&#x3D;-1;</span><br><span class="line">while(sum!&#x3D;m*n)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">int xx&#x3D;x+dir[i][0];</span><br><span class="line">int yy&#x3D;y+dir[i][1];</span><br><span class="line">while(xx&gt;&#x3D;0&amp;&amp;xx&lt;m&amp;&amp;yy&gt;&#x3D;0&amp;&amp;yy&lt;n&amp;&amp;map[xx][yy]!&#x3D;-1)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot; &quot;&lt;&lt;map[xx][yy];</span><br><span class="line">map[xx][yy]&#x3D;-1;</span><br><span class="line">x&#x3D;xx;</span><br><span class="line">y&#x3D;yy;</span><br><span class="line">sum++;</span><br><span class="line">xx&#x3D;x+dir[i][0];</span><br><span class="line">yy&#x3D;y+dir[i][1];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 逻辑 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 回形取数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 报时助手</title>
      <link href="2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E6%8A%A5%E6%97%B6%E5%8A%A9%E6%89%8B/"/>
      <url>2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E6%8A%A5%E6%97%B6%E5%8A%A9%E6%89%8B/</url>
      
        <content type="html"><![CDATA[<p>由于0~23都有完整的字符串，所以20,30,40,50要连续存储，求他们的十位数加上一个偏移量</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-报时助手"><a href="#试题-基础练习-报时助手" class="headerlink" title="试题 基础练习 报时助手"></a>试题 基础练习 报时助手</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T67#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　给定当前的时间，请用英文的读法将它读出来。<br>　　时间用时h和分m表示，在英文的读法中，读一个时间的方法是：<br>　　如果m为0，则将时读出来，然后加上“o’clock”，如3:00读作“three o’clock”。<br>　　如果m不为0，则将时读出来，然后将分读出来，如5:30读作“five thirty”。<br>　　时和分的读法使用的是英文数字的读法，其中0~20读作：<br>　　0:zero, 1: one, 2:two, 3:three, 4:four, 5:five, 6:six, 7:seven, 8:eight, 9:nine, 10:ten, 11:eleven, 12:twelve, 13:thirteen, 14:fourteen, 15:fifteen, 16:sixteen, 17:seventeen, 18:eighteen, 19:nineteen, 20:twenty。<br>　　30读作thirty，40读作forty，50读作fifty。<br>　　对于大于20小于60的数字，首先读整十的数，然后再加上个位数。如31首先读30再加1的读法，读作“thirty one”。<br>　　按上面的规则21:54读作“twenty one fifty four”，9:07读作“nine seven”，0:15读作“zero fifteen”。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入包含两个非负整数h和m，表示时间的时和分。非零的数字前没有前导0。h小于24，m小于60。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出时间时刻的英文。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>0 15</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>zero fifteen</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#include&lt;map&gt;</span><br><span class="line">#define PI 3.14159265358979323</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">string yingshe[]&#x3D;&#123;&quot;zero&quot;,&quot;one&quot;,&quot;two&quot;,&quot;three&quot;,&quot;four&quot;,&quot;five&quot;,&quot;six&quot;,&quot;seven&quot;,&quot;eight&quot;,&quot;nine&quot;,&quot;ten&quot;,&quot;eleven&quot;,&quot;twelve&quot;,&quot;thirteen&quot;,&quot;fourteen&quot;,&quot;fifteen&quot;,&quot;sixteen&quot;,&quot;seventeen&quot;,&quot;eighteen&quot;,&quot;nineteen&quot;,&quot;twenty&quot;,&quot;twenty one&quot;,&quot;twenty two&quot;,&quot;twenty three&quot;,&quot;twenty&quot;,&quot;thirty&quot;,&quot;forty&quot;,&quot;fifty&quot;&#125;; </span><br><span class="line">int h,m;</span><br><span class="line">cin&gt;&gt;h&gt;&gt;m;</span><br><span class="line">cout&lt;&lt;yingshe[h]&lt;&lt;&quot; &quot;;</span><br><span class="line">if(m&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;o&#39;clock&quot;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">else if(m&gt;0&amp;&amp;m&lt;&#x3D;23)</span><br><span class="line">cout&lt;&lt;yingshe[m];</span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">int s&#x3D;m&#x2F;10+2;</span><br><span class="line">int g&#x3D;m%10;</span><br><span class="line">cout&lt;&lt;yingshe[20+s]&lt;&lt;&quot; &quot;&lt;&lt;yingshe[g];</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字符串数组 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 2n皇后问题</title>
      <link href="2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-2n%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98/"/>
      <url>2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-2n%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>不能用dfs并行运算，会重复，可以举例2*2的棋盘，必须分开算</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-Huffuman树"><a href="#试题-基础练习-Huffuman树" class="headerlink" title="试题 基础练习 Huffuman树"></a>试题 基础练习 Huffuman树</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T69#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　Huffman树在编码中有着广泛的应用。在这里，我们只关心Huffman树的构造过程。<br>　　给出一列数{<em>pi</em>}={<em>p</em>0, <em>p</em>1, …, <em>pn</em>-1}，用这列数构造Huffman树的过程如下：<br>　　1. 找到{<em>pi</em>}中最小的两个数，设为<em>pa<em>和</em>pb<em>，将</em>pa<em>和</em>pb<em>从{</em>pi</em>}中删除掉，然后将它们的和加入到{<em>pi</em>}中。这个过程的费用记为<em>pa</em> + <em>pb<em>。<br>　　2. 重复步骤1，直到{</em>pi</em>}中只剩下一个数。<br>　　在上面的操作过程中，把所有的费用相加，就得到了构造Huffman树的总费用。<br>　　本题任务：对于给定的一个数列，现在请你求出用该数列构造Huffman树的总费用。</p><p>　　例如，对于数列{<em>pi</em>}={5, 3, 8, 2, 9}，Huffman树的构造过程如下：<br>　　1. 找到{5, 3, 8, 2, 9}中最小的两个数，分别是2和3，从{<em>pi</em>}中删除它们并将和5加入，得到{5, 8, 9, 5}，费用为5。<br>　　2. 找到{5, 8, 9, 5}中最小的两个数，分别是5和5，从{<em>pi</em>}中删除它们并将和10加入，得到{8, 9, 10}，费用为10。<br>　　3. 找到{8, 9, 10}中最小的两个数，分别是8和9，从{<em>pi</em>}中删除它们并将和17加入，得到{10, 17}，费用为17。<br>　　4. 找到{10, 17}中最小的两个数，分别是10和17，从{<em>pi</em>}中删除它们并将和27加入，得到{27}，费用为27。<br>　　5. 现在，数列中只剩下一个数27，构造过程结束，总费用为5+10+17+27=59。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入的第一行包含一个正整数<em>n</em>（<em>n</em>&lt;=100）。<br>　　接下来是<em>n</em>个正整数，表示<em>p</em>0, <em>p</em>1, …, <em>pn</em>-1，每个数不超过1000。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出用这些数构造Huffman树的总费用。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5<br>5 3 8 2 9</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>59</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#define PI 3.14159265358979323</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">using namespace std;</span><br><span class="line">int lieh[9],lieb[9];</span><br><span class="line">int map[9][9],n,sum&#x3D;0;</span><br><span class="line">bool judgeh(int x,int y)</span><br><span class="line">&#123;</span><br><span class="line">if(map[x][y]&#x3D;&#x3D;0) return 0;</span><br><span class="line">if(lieh[y]!&#x3D;0) return 0;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(lieh[i]!&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">double t&#x3D;(i-y)&#x2F;double(lieh[i]-x);</span><br><span class="line">if(t&#x3D;&#x3D;1||t&#x3D;&#x3D;-1)</span><br><span class="line">&#123;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">bool judgeb(int x,int y)</span><br><span class="line">&#123;</span><br><span class="line">if(map[x][y]&#x3D;&#x3D;0) return 0;</span><br><span class="line">if(lieb[y]!&#x3D;0||lieh[y]&#x3D;&#x3D;x) return 0;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(lieb[i]!&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">double t&#x3D;(i-y)&#x2F;double(lieb[i]-x);</span><br><span class="line">if(t&#x3D;&#x3D;1||t&#x3D;&#x3D;-1)</span><br><span class="line">&#123;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 1;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">void dfsb(int h)</span><br><span class="line">&#123;</span><br><span class="line">if(h&#x3D;&#x3D;n+1)</span><br><span class="line">&#123;</span><br><span class="line">sum++;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(judgeb(h,i))</span><br><span class="line">&#123;</span><br><span class="line">lieb[i]&#x3D;h;</span><br><span class="line">dfsb(h+1);</span><br><span class="line">lieb[i]&#x3D;0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">void dfsh(int h)</span><br><span class="line">&#123;</span><br><span class="line">if(h&#x3D;&#x3D;n+1)</span><br><span class="line">&#123;</span><br><span class="line">dfsb(1);</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(judgeh(h,i))</span><br><span class="line">&#123;</span><br><span class="line">lieh[i]&#x3D;h;</span><br><span class="line">dfsh(h+1);</span><br><span class="line">lieh[i]&#x3D;0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">memset(lieh,0,sizeof(lieh));</span><br><span class="line">memset(lieb,0,sizeof(lieb));</span><br><span class="line">dfsh(1);</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> dfs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 八皇后问题 </tag>
            
            <tag> 黑白子 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 Huffuman树</title>
      <link href="2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-Huffuman%E6%A0%91/"/>
      <url>2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-Huffuman%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>用两个变量保存最小值，用两个变量保存两个最小值的下标，然后相加放入其中一个变量，另一个变量置无穷大，n个变量需要n-1步操作变成最后的一个变量，记录他们的和</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="试题-基础练习-Huffuman树"><a href="#试题-基础练习-Huffuman树" class="headerlink" title="试题 基础练习 Huffuman树"></a>试题 基础练习 Huffuman树</h3><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T69#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>　　Huffman树在编码中有着广泛的应用。在这里，我们只关心Huffman树的构造过程。<br>　　给出一列数{<em>pi</em>}={<em>p</em>0, <em>p</em>1, …, <em>pn</em>-1}，用这列数构造Huffman树的过程如下：<br>　　1. 找到{<em>pi</em>}中最小的两个数，设为<em>pa<em>和</em>pb<em>，将</em>pa<em>和</em>pb<em>从{</em>pi</em>}中删除掉，然后将它们的和加入到{<em>pi</em>}中。这个过程的费用记为<em>pa</em> + <em>pb<em>。<br>　　2. 重复步骤1，直到{</em>pi</em>}中只剩下一个数。<br>　　在上面的操作过程中，把所有的费用相加，就得到了构造Huffman树的总费用。<br>　　本题任务：对于给定的一个数列，现在请你求出用该数列构造Huffman树的总费用。</p><p>　　例如，对于数列{<em>pi</em>}={5, 3, 8, 2, 9}，Huffman树的构造过程如下：<br>　　1. 找到{5, 3, 8, 2, 9}中最小的两个数，分别是2和3，从{<em>pi</em>}中删除它们并将和5加入，得到{5, 8, 9, 5}，费用为5。<br>　　2. 找到{5, 8, 9, 5}中最小的两个数，分别是5和5，从{<em>pi</em>}中删除它们并将和10加入，得到{8, 9, 10}，费用为10。<br>　　3. 找到{8, 9, 10}中最小的两个数，分别是8和9，从{<em>pi</em>}中删除它们并将和17加入，得到{10, 17}，费用为17。<br>　　4. 找到{10, 17}中最小的两个数，分别是10和17，从{<em>pi</em>}中删除它们并将和27加入，得到{27}，费用为27。<br>　　5. 现在，数列中只剩下一个数27，构造过程结束，总费用为5+10+17+27=59。</p><h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><p>　　输入的第一行包含一个正整数<em>n</em>（<em>n</em>&lt;=100）。<br>　　接下来是<em>n</em>个正整数，表示<em>p</em>0, <em>p</em>1, …, <em>pn</em>-1，每个数不超过1000。</p><h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><p>　　输出用这些数构造Huffman树的总费用。</p><h4 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h4><p>5<br>5 3 8 2 9</p><h4 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h4><p>59</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;map&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#define PI 3.14159265358979323</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">using namespace std;</span><br><span class="line">int main()&#123;</span><br><span class="line">int hf[100];</span><br><span class="line">int n,minn1,minn2,index1,index2,sum&#x3D;0;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;0;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;hf[i];</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">minn1&#x3D;MAX;</span><br><span class="line">minn2&#x3D;MAX;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(hf[j]&lt;minn2)</span><br><span class="line">&#123;</span><br><span class="line">if(hf[j]&lt;minn1)</span><br><span class="line">&#123;</span><br><span class="line">minn2&#x3D;minn1;</span><br><span class="line">index2&#x3D;index1;</span><br><span class="line">minn1&#x3D;hf[j];</span><br><span class="line">index1&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">&#123;minn2&#x3D;hf[j];</span><br><span class="line">index2&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">hf[index1]&#x3D;minn1+minn2;</span><br><span class="line">sum+&#x3D;hf[index1];</span><br><span class="line">hf[index2]&#x3D;MAX;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Huffuman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 两个最小值 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基础练习 阶乘计算</title>
      <link href="2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E9%98%B6%E4%B9%98%E8%AE%A1%E7%AE%97/"/>
      <url>2020/03/12/%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0-%E9%98%B6%E4%B9%98%E8%AE%A1%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<p>m位数乘以n位数的最大位数是（m+1）*n（n&lt;m）</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h2 id="试题-基础练习-阶乘计算"><a href="#试题-基础练习-阶乘计算" class="headerlink" title="试题 基础练习 阶乘计算"></a>试题 基础练习 阶乘计算</h2><p><a href="http://lx.lanqiao.cn/problem.page?gpid=T71#submitpanel" target="_blank" rel="noopener">提交此题</a> </p><p>资源限制</p><p>时间限制：1.0s  内存限制：512.0MB</p><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p>　　输入一个正整数<em>n</em>，输出<em>n</em>!的值。<br>　　其中<em>n</em>!=1<em>2</em>3<em>…*</em>n*。</p><h3 id="算法描述"><a href="#算法描述" class="headerlink" title="算法描述"></a>算法描述</h3><p>　　<em>n</em>!可能很大，而计算机能表示的整数范围有限，需要使用高精度计算的方法。使用一个数组<em>A</em>来表示一个大整数<em>a</em>，<em>A</em>[0]表示<em>a</em>的个位，<em>A</em>[1]表示<em>a</em>的十位，依次类推。<br>　　将<em>a</em>乘以一个整数<em>k</em>变为将数组<em>A</em>的每一个元素都乘以<em>k</em>，请注意处理相应的进位。<br>　　首先将<em>a</em>设为1，然后乘2，乘3，当乘到<em>n</em>时，即得到了<em>n</em>!的值。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h3><p>　　输入包含一个正整数<em>n</em>，<em>n</em>&lt;=1000。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p>　　输出<em>n</em>!的准确值。</p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><p>10</p><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><p>3628800</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>累乘，每次除10，求出i的位数，用len保存当前结果的位数，(len+1)*i的位数就是新结果的最大范围，依次更新并记录结果的实际位数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;map&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#define PI 3.14159265358979323</span><br><span class="line">using namespace std;</span><br><span class="line">int a[2600];</span><br><span class="line">int main()&#123;</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">memset(a,0,sizeof(a));</span><br><span class="line">a[1]&#x3D;1;</span><br><span class="line">int jinwei&#x3D;0;</span><br><span class="line">int len&#x3D;1;</span><br><span class="line">for(int i&#x3D;2;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int tlen&#x3D;len,t&#x3D;i;</span><br><span class="line">int wei&#x3D;0;</span><br><span class="line">while(t!&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">t&#x2F;&#x3D;10;</span><br><span class="line">wei++;</span><br><span class="line">&#125;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;(len+1)+wei;j++)</span><br><span class="line">&#123;</span><br><span class="line">a[j]&#x3D;i*a[j]+jinwei;</span><br><span class="line">if(a[j]&gt;&#x3D;10)</span><br><span class="line">&#123;</span><br><span class="line">jinwei&#x3D;a[j]&#x2F;10;</span><br><span class="line">a[j]&#x3D;a[j]%10;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">jinwei&#x3D;0;</span><br><span class="line">if(j&gt;tlen&amp;&amp;a[j])</span><br><span class="line">tlen&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line">len&#x3D;tlen;</span><br><span class="line">&#125;</span><br><span class="line">while(len)</span><br><span class="line">cout&lt;&lt;a[len--];</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 大数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数阶乘 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-1511-Invitation Cards</title>
      <link href="2020/03/10/POJ-1511-Invitation-Cards/"/>
      <url>2020/03/10/POJ-1511-Invitation-Cards/</url>
      
        <content type="html"><![CDATA[<p>这个用Bellman一直超时，后来用了spfa，邻接表简直就是为spfa量身打造的，不过此题中的指针换成了变得索引，此题中由于要翻转边，所以需要把边的信息全部记下来，spfa开始的时候翻转，然后交换边的起点和终点，然后再调用一次spfa</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="邀请卡"><a href="#邀请卡" class="headerlink" title="邀请卡"></a>邀请卡</h3><table><thead><tr><th><strong>时限：</strong> 8000MS</th><th></th><th><strong>内存限制：</strong> 262144K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 39132</td><td></td><td><strong>接受的：</strong> 12664</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>在电视时代，很少有人参加戏剧表演。Malidinesia的古董喜剧演员知道这一事实。他们想传播戏剧，最重要的是传播古董喜剧。他们印有所有必要信息和计划的邀请卡。雇用了许多学生在人们中间分发这些邀请。每个学生志愿者都恰好分配了一个公交车站，他或她整天都呆在那里，并向乘公共汽车旅行的人发出邀请。开设了一门特殊的课程，让学生学习如何影响人以及影响力和抢劫之间的区别。</p><p>运输系统非常特殊：所有线路都是单向的，并且恰好连接两个站。公交车每半小时便有客流驶离始发站。到达目的地站后，他们返回到出发站为空，直到下一个完整的半小时，例如X：00或X：30，其中“ X”表示小时。两站之间的运输费用由特别表提供，应当场支付。线路的规划方式是，每次往返（即在同一站开始和结束的旅程）都要经过中央检查站（CCS），每位乘客都必须通过包括身体扫描在内的全面检查。</p><p>所有ACM学生成员每天早晨都离开CCS。每个志愿者将移动到一个预定的站点以邀请乘客。志愿人员的数量与站点的数量一样多。最终，所有学生都返回了CCS。您要编写一个计算机程序，以帮助ACM最大限度地减少每天支付给其员工的运输费用。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>输入包含N个案例。输入的第一行仅包含正整数N。然后遵循这些情况。每种情况均始于一条直线，该直线恰好包含两个整数P和Q，1 &lt;= P，Q &lt;=1000000。P是包含CCS的站点数，而Q是总线的数量。然后有Q条线，每条线描述一条总线。每行均包含三个数字-起始止损，目的地止损和价格。CCS由数字1表示。价格是正整数，其总和小于1000000000。您还可以假设始终可以从任何停靠点到达任何其他停靠点。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>对于每种情况，请打印一行，其中包含ACM每天为其志愿者支付的差旅费用的最低金额。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">2 2</span><br><span class="line">1 2 13</span><br><span class="line">2 1 33</span><br><span class="line">4 6</span><br><span class="line">1 2 10</span><br><span class="line">2 1 60</span><br><span class="line">1 3 20</span><br><span class="line">3 4 10</span><br><span class="line">2 4 5</span><br><span class="line">4 1 50</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">46</span><br><span class="line">210</span><br></pre></td></tr></table></figure><h3 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h3><p>第一行输入测试用例，第二行分别输入顶点的个数和边的个数，剩下的行输入边的信息，起点终点费用</p><p>求来回的最小距离</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;map&gt;</span><br><span class="line">#include&lt;queue&gt;</span><br><span class="line">#define N 1000005</span><br><span class="line">using namespace std;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int start,end,price;</span><br><span class="line">&#125; route[N];</span><br><span class="line">int s,n,m,p[N],v[N],d[N],nextt[N];</span><br><span class="line">long long sum;</span><br><span class="line">void spfa()</span><br><span class="line">&#123;</span><br><span class="line">memset(p,0,(n+1)*sizeof(int));</span><br><span class="line">memset(v,0,(n+1)*sizeof(int));</span><br><span class="line">memset(d,0x3f,(n+1)*sizeof(int));</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">nextt[i]&#x3D;p[route[i].start];</span><br><span class="line">p[route[i].start]&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">d[1]&#x3D;0;</span><br><span class="line">queue&lt;int&gt; q;</span><br><span class="line">q.push(1);</span><br><span class="line">v[1]&#x3D;1;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">int a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">v[a]&#x3D;0;</span><br><span class="line">int next&#x3D;p[a];</span><br><span class="line">while(next!&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">if(d[route[next].end]&gt;d[a]+route[next].price)</span><br><span class="line">&#123;</span><br><span class="line">d[route[next].end]&#x3D;d[a]+route[next].price;</span><br><span class="line">if(v[route[next].end]&#x3D;&#x3D;0)</span><br><span class="line">&#123;v[route[next].end]&#x3D;1;</span><br><span class="line">q.push(route[next].end);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">next&#x3D;nextt[next];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;d[i]&lt;&lt;&quot; &quot;;</span><br><span class="line">sum+&#x3D;d[i];</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">void turn()</span><br><span class="line">&#123;</span><br><span class="line">    for (int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        int temp&#x3D;route[i].start;</span><br><span class="line">        route[i].start&#x3D;route[i].end;</span><br><span class="line">        route[i].end&#x3D;temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int t;</span><br><span class="line">&#x2F;&#x2F;cin&gt;&gt;t;</span><br><span class="line">scanf(&quot;%d&quot;,&amp;t);</span><br><span class="line">while(t--)</span><br><span class="line">&#123;</span><br><span class="line">sum&#x3D;0;</span><br><span class="line">&#x2F;&#x2F;cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">scanf(&quot;%d%d&quot;,&amp;n,&amp;m);</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;cin&gt;&gt;route[i].start&gt;&gt;route[i].end&gt;&gt;route[i].price;</span><br><span class="line">scanf(&quot;%d%d%d&quot;,&amp;route[i].start,&amp;route[i].end,&amp;route[i].price);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">spfa();</span><br><span class="line">turn();</span><br><span class="line">spfa();</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> SPFA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 翻转边 </tag>
            
            <tag> 来回总和最短 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1217-POJ-2240-Arbitrage</title>
      <link href="2020/03/09/HDU-1217-POJ-2240-Arbitrage/"/>
      <url>2020/03/09/HDU-1217-POJ-2240-Arbitrage/</url>
      
        <content type="html"><![CDATA[<p>HDU和POJ的数据都很水，这个题没说第一个货币一定在环中，但以第一种货币一定在环中的算法却都能AC，不信试试我给的测试数据，不得不说Bellman真的强，本文给出这个题的严谨证明和算法！！！不可转载谢谢！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="套利"><a href="#套利" class="headerlink" title="套利"></a>套利</h3><p><strong><em>\</em>时间限制：2000/1000 MS（Java /其他）内存限制：65536/32768 K（Java /其他）<br>提交总数：12754接受提交：5785<br>**</strong></p><h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>套利是利用货币汇率差异将一种货币单位转换成一种以上相同货币单位。例如，假设1美元买入0.5英镑，1英镑买入10.0法国法郎，而1法国法郎买入0.21美元。然后，通过转换货币，一个聪明的交易者可以从1美元开始，买入0.5 * 10.0 * 0.21 = 1.05美元，获利5％。</p><p>您的工作是编写一个程序，该程序将货币汇率列表作为输入，然后确定是否可以进行套利。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>输入文件将包含一个或多个测试用例。在每个测试用例的第一行中，有一个整数n（1 &lt;= n &lt;= 30），代表不同货币的数量。接下来的n行分别包含一种货币的名称。名称中不会出现空格。下一行包含一个整数m，代表要跟随的表的长度。最后的m行分别包含源货币的名称ci，代表从ci到cj的汇率的实数rij和目标货币的名称cj。没有出现在表中的交换是不可能的。<br>测试用例之间用空白行隔开。输入以n的零（0）值终止。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>对于每个测试用例，分别以“案例：是”和“案例：否”的格式打印一行，说明是否可以套利。</p><h4 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">USDollar</span><br><span class="line">BritishPound</span><br><span class="line">FrenchFranc</span><br><span class="line">3</span><br><span class="line">USDollar 0.5 BritishPound</span><br><span class="line">BritishPound 10.0 FrenchFranc</span><br><span class="line">FrenchFranc 0.21 USDollar</span><br><span class="line"></span><br><span class="line">3</span><br><span class="line">USDollar</span><br><span class="line">BritishPound</span><br><span class="line">FrenchFranc</span><br><span class="line">6</span><br><span class="line">USDollar 0.5 BritishPound</span><br><span class="line">USDollar 4.9 FrenchFranc</span><br><span class="line">BritishPound 10.0 FrenchFranc</span><br><span class="line">BritishPound 1.99 USDollar</span><br><span class="line">FrenchFranc 0.09 BritishPound</span><br><span class="line">FrenchFranc 0.19 USDollar</span><br><span class="line"></span><br><span class="line">0</span><br></pre></td></tr></table></figure><h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Case 1: Yes</span><br><span class="line">Case 2: No</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>先给出不严谨的算法(第一种货币一定在环中)，这个就不用证明了吧，这个在HDU、POJ都能AC！</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;map&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m; </span><br><span class="line">map&lt;string,int&gt; y;</span><br><span class="line">struct &#123;</span><br><span class="line">int x,y;</span><br><span class="line">double h;</span><br><span class="line">&#125;  bian[5000];</span><br><span class="line">double d[5000];</span><br><span class="line">int c&#x3D;1;</span><br><span class="line">bool Bellman()&#123;</span><br><span class="line">d[1]&#x3D;1;</span><br><span class="line">bool flag;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">flag&#x3D;0; </span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;m;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[bian[j].y]&lt;d[bian[j].x]*bian[j].h)</span><br><span class="line">&#123;</span><br><span class="line">d[bian[j].y]&#x3D;d[bian[j].x]*bian[j].h;</span><br><span class="line">flag&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(flag&#x3D;&#x3D;0)</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;m;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[bian[j].y]&lt;d[bian[j].x]*bian[j].h)</span><br><span class="line">&#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(~scanf(&quot;%d&quot;,&amp;n) &amp;&amp; n)</span><br><span class="line">&#123;char a[100];</span><br><span class="line">double hui;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;d[i]&#x3D;1;</span><br><span class="line">d[i]&#x3D;0;</span><br><span class="line">scanf(&quot;%s&quot;,a);</span><br><span class="line">y[a]&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">cin&gt;&gt;m;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">scanf(&quot;%s%lf&quot;,a,&amp;hui);</span><br><span class="line">bian[i].x&#x3D;y[a];</span><br><span class="line">bian[i].h&#x3D;hui;</span><br><span class="line">scanf(&quot;%s&quot;,a);</span><br><span class="line">bian[i].y&#x3D;y[a];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;Case &quot;&lt;&lt;c++&lt;&lt;&quot;: &quot;;</span><br><span class="line">if(Bellman()) cout&lt;&lt;&quot;Yes&quot;&lt;&lt;endl;</span><br><span class="line">else cout&lt;&lt;&quot;No&quot;&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试数据"><a href="#测试数据" class="headerlink" title="测试数据"></a>测试数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">3</span><br><span class="line">b 0.5 c</span><br><span class="line">c 1 d</span><br><span class="line">d 10 b</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>这个数据将第一个点孤立了，b-&gt;c-&gt;d-&gt;b为正环，按照题目逻辑应该输出Yes,但是上述不严谨算法输出No，可见HDU、POJ数据太水了，上述不严谨算法都AC了</p><p>再给出严谨的算法，有人说遍历所有起点，多次调用Bellman，NoNoNo！还是太小看Bellman的算法，本题中如果指定第一种货币为起点则应该<strong>d[1]=1,其余全为0</strong>。<strong>严谨的做法应该是d全为1即可，但也不要生搬硬套，此题为乘法类，所以为1,如果是加法类就应该为0。</strong>如果d全为0，则起点在正负边(比如b-&gt;c为0.5倍，这是负边；d-&gt;b为10倍，为正边)交界的顶点，有人说正正边交界的顶点也是起点，那只能说你不明白Bellman算法。将正负交界的顶点放在一个集合S中，下面我来证明，一定有一个顶点q属于S,这个点到所有点都为正边(为什么要证明这个，因为碰到负边会走不下去)，现在的问题就变成了：</p><p>已知一个正环，S为正负边交界的顶点的集合，证明：一定存在点q属于S，q到此正环所有顶点的的边都为正边</p><p>将此正环相邻的相同符号的边看做一条边，即相邻的正边看做一条正边，相邻的负边看做一条负边，如下</p><p><img src="/2020/03/09/HDU-1217-POJ-2240-Arbitrage/MG_20200309_113222.jpg" alt="11"></p><p>这个是个有向图，顺时针，忘了画方向。相邻的正负(先正后负)边看做一个整体，比如上图有两部分，ad和da。这个图就有两组这样的正负边，一个正环可能有n组正负边，当n==2时，由于是一个正环，则这两组边有两种情况</p><p>1.都是正边，则结论得证</p><p>2.一正一负，那么从正的那组正负边的起点作为起点，结论得证</p><p>现在我要用数学归纳法，k==2时结论成立(k为正负边的组数，就是上面的n)，当k==k+1时,又有两种情况</p><p>1.都是正边，结论得证</p><p>2.存在负边，则将负边中任意一组去掉，变成k-1组正负边组合+一个负的正负边组合。因为整个环为正环，所以这k-1组也可以组成一个正环，k-1组正负边组成的正环符合结论，结论得证</p><p>所以可以证明，Bellman选择的起点集合中一定有一个点可以走遍整个环，附上代码，就改了d的初值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include&lt;map&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m; </span><br><span class="line">map&lt;string,int&gt; y;</span><br><span class="line">struct &#123;</span><br><span class="line">int x,y;</span><br><span class="line">double h;</span><br><span class="line">&#125;  bian[5000];</span><br><span class="line">double d[5000];</span><br><span class="line">int c&#x3D;1;</span><br><span class="line">bool Bellman()&#123;</span><br><span class="line">&#x2F;&#x2F;d[1]&#x3D;1;</span><br><span class="line">bool flag;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">flag&#x3D;0; </span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;m;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[bian[j].y]&lt;d[bian[j].x]*bian[j].h)</span><br><span class="line">&#123;</span><br><span class="line">d[bian[j].y]&#x3D;d[bian[j].x]*bian[j].h;</span><br><span class="line">flag&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(flag&#x3D;&#x3D;0)</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;m;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[bian[j].y]&lt;d[bian[j].x]*bian[j].h)</span><br><span class="line">&#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(~scanf(&quot;%d&quot;,&amp;n) &amp;&amp; n)</span><br><span class="line">&#123;char a[100];</span><br><span class="line">double hui;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">d[i]&#x3D;1;</span><br><span class="line">&#x2F;&#x2F;d[i]&#x3D;0;</span><br><span class="line">scanf(&quot;%s&quot;,a);</span><br><span class="line">y[a]&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">cin&gt;&gt;m;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">scanf(&quot;%s%lf&quot;,a,&amp;hui);</span><br><span class="line">bian[i].x&#x3D;y[a];</span><br><span class="line">bian[i].h&#x3D;hui;</span><br><span class="line">scanf(&quot;%s&quot;,a);</span><br><span class="line">bian[i].y&#x3D;y[a];</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;Case &quot;&lt;&lt;c++&lt;&lt;&quot;: &quot;;</span><br><span class="line">if(Bellman()) cout&lt;&lt;&quot;Yes&quot;&lt;&lt;endl;</span><br><span class="line">else cout&lt;&lt;&quot;No&quot;&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Bellman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正环 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-3660-Cow Contest</title>
      <link href="2020/03/07/POJ-3660-Cow-Contest/"/>
      <url>2020/03/07/POJ-3660-Cow-Contest/</url>
      
        <content type="html"><![CDATA[<p>技巧：<code>map[i][j]=map[i][j]||(map[i][k]&amp;&amp;map[k][j]);</code>利用逻辑短路，如果<code>map[i][i]==1</code>说明i到j已经存在通路，直接返回1,否则判断<code>map[i][k]&amp;&amp;map[k][j]==1</code>，可达为1,不可达为0。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="牛比赛"><a href="#牛比赛" class="headerlink" title="牛比赛"></a>牛比赛</h3><table><thead><tr><th><strong>时限：</strong> 1000MS</th><th></th><th><strong>内存限制：</strong> 65536K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 20550</td><td></td><td><strong>接受的：</strong> 11394</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p><em>Ñ</em>（1≤ <em>ñ</em> ≤100）牛，方便地编号为1 .. <em>Ñ</em>，正在参与编程竞赛。众所周知，有些母牛的编码要好于其他母牛。每头母牛都有一定的恒定技能等级，这在竞争者中是独一无二的。</p><p>比赛分几个头对头进行，每回合在两头母牛之间进行。如果牛<em>阿</em>具有更大的技能水平比牛<em>乙</em>（1≤ <em>甲</em> ≤ <em>Ñ</em> ; 1≤ <em>乙</em> ≤ <em>Ñ</em> ; <em>甲</em> ≠ <em>乙</em>），然后牛<em>甲</em>总是打牛<em>乙</em>。</p><p>农夫约翰试图按技能水平对母牛进行排名。给定一个列表的结果<em>中号*（1≤ *中号</em> ≤4500）二牛回合，确定奶牛他们的职级从结果可以精确地确定的数量。可以保证回合的结果不会矛盾。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p><em>第1行：两个以空格分隔的整数：<em>N</em>和*M</em><br><em>第2行*。M</em> +1：每行包含两个以空格分隔的整数，这些整数描述单个选手的竞争者和结果（第一个整数<em>A</em>是获胜者）一轮比赛：<em>A</em>和<em>B</em></p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>*第1行：一个整数，代表可以确定其等级的母牛的数量　</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 5</span><br><span class="line">4 3</span><br><span class="line">4 2</span><br><span class="line">3 2</span><br><span class="line">1 2</span><br><span class="line">2 5</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h3><p>给出m个胜负关系对n个点进行排名，第一行输入n,m。剩下m行输入a,b。表示a胜过b。求通过胜负关系能确定几个点的名次。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>用图(<code>bool</code>型，1表示可达，0表示不可达)的知识，Floyd算法，得到全图的可达关系，要判断第i个点能不能判断名次，去决议该点的入度和出度和是否为n-1。由于题目的输入必须有逻辑，即不能2胜1同时1胜2,所以<strong><code>map[i][j]</code>与<code>map[j][i]</code>不能同时为1</strong>，并且不存在环(1-&gt;2-&gt;3-&gt;1)，所以<strong><code>map[i][i]</code>必为0</strong>，所以可以用<code>if(map[j][i]||map[i][j]) z++;</code>统计次数</p><h4 id="优化后bool图"><a href="#优化后bool图" class="headerlink" title="优化后bool图"></a>优化后bool图</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define N 101</span><br><span class="line">int n,m;</span><br><span class="line">bool map[N][N];</span><br><span class="line">void floyd()&#123;</span><br><span class="line">for(int k&#x3D;1;k&lt;&#x3D;n;k++)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">map[i][j]&#x3D;map[i][j]||(map[i][k]&amp;&amp;map[k][j]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">memset(map,0,sizeof(0));</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">int a,b;</span><br><span class="line">cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">map[a][b]&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">floyd();</span><br><span class="line">int s&#x3D;0;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int z&#x3D;0;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[j][i]||map[i][j])</span><br><span class="line">&#123;</span><br><span class="line">z++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(z&#x3D;&#x3D;n-1)</span><br><span class="line">s++;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;s&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="传统Floyd"><a href="#传统Floyd" class="headerlink" title="传统Floyd"></a>传统Floyd</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define N 101</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">int map[N][N],n,m;</span><br><span class="line">void floyd()&#123;</span><br><span class="line">for(int k&#x3D;1;k&lt;&#x3D;n;k++)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[i][k]+map[k][j]&lt;map[i][j])</span><br><span class="line">&#123;</span><br><span class="line">map[i][j]&#x3D;map[i][k]+map[k][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">map[i][j]&#x3D;MAX;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">int a,b;</span><br><span class="line">cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">map[a][b]&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">floyd();</span><br><span class="line">int z&#x3D;0;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int l&#x3D;0;</span><br><span class="line">int q&#x3D;0;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[j][i]!&#x3D;MAX)</span><br><span class="line">&#123;</span><br><span class="line">l++;</span><br><span class="line">&#125;</span><br><span class="line">if(map[i][j]!&#x3D;MAX)</span><br><span class="line">q++;</span><br><span class="line">&#125;</span><br><span class="line">if(l+q&#x3D;&#x3D;n-1)</span><br><span class="line">z++;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;z&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Floyd </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 排名 </tag>
            
            <tag> 逻辑路径 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-1502-MPI Maelstrom</title>
      <link href="2020/03/07/POJ-1502-MPI-Maelstrom/"/>
      <url>2020/03/07/POJ-1502-MPI-Maelstrom/</url>
      
        <content type="html"><![CDATA[<p><code>atoi(char *)</code>把字符串转换成整形，还有一个string参数的方法是<code>stoi</code>但是在帮助文档里搜不到，但可以用<code>s.c_str()</code>将string转换成<code>char *</code>,当然也可用字符数组，但是我觉得字符数组有长度限制不大好。dij算法中邻接矩阵<code>map[i][i]</code>不用管，只需<code>d[起点]=0</code>，因为不可能访问到<code>d[i][i]</code>。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="MPI大漩涡"><a href="#MPI大漩涡" class="headerlink" title="MPI大漩涡"></a>MPI大漩涡</h3><table><thead><tr><th><strong>时限：</strong> 1000MS</th><th></th><th><strong>内存限制：</strong> 10000K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 15467</td><td></td><td><strong>接受：</strong> 9422</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>BIT最近接受了他们的新超级计算机的交付，该超级计算机是具有分层通信子系统的32处理器Apollo Odyssey分布式共享内存计算机。Valentine McKee的研究顾问Jack Swigert要求她对新系统进行基准测试。<br>瓦伦丁对斯维格特说：<code>由于阿波罗是一台分布式共享存储机器，因此存储访问和通信时间并不统一。&#39;&#39;</code>共享同一内存子系统的处理器之间的通信速度很快，但是不在同一子系统上的处理器之间的通信速度却较慢。阿波罗与我们实验室中的机器之间的通讯速度还慢一些。”“</p><p>阿波罗的消息传递接口（MPI）的端口如何工作？”斯维格特问。</p><p><code>不太好，&#39;&#39;瓦伦丁回答。</code>要将消息从一个处理器广播到所有其他n-1个处理器，它们只是执行一系列n-1发送。这确实使事情序列化并破坏了性能</p><p>.````有什么可以解决的吗？’’</p><p><code>是的，&#39;&#39;情人微笑。</code>有。一旦第一个处理器将消息发送到另一个，这两个处理器就可以同时将消息发送到另外两个主机。然后将有四个可以发送的主机，以此类推</p><p>.````啊，所以您可以像二叉树一样进行广播！’’</p><p>``不是真正的二叉树-我们应该利用我们网络的某些特殊功能。我们拥有的接口卡允许每个处理器同时将消息发送到与其连接的任意数量的其他处理器。但是，消息不一定要同时到达目的地-涉及通信成本。总的来说，我们需要考虑网络拓扑中每个链接的通信成本，并做出相应的计划以最大程度地减少广播所需的总时间。’’</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>输入将描述连接n个处理器的网络的拓扑。输入的第一行将是n，即处理器的数量，因此1 &lt;= n &lt;=100</p><p>。其余的输入定义邻接矩阵A。邻接矩阵是正方形，大小为nx n。它的每个条目都是整数或字符x。A（i，j）的值表示直接从节点i向节点j发送消息的开销。A（i，j）的x值表示无法将消息直接从节点i发送到节点j。</p><p>请注意，对于节点向其自身发送消息的不需要网络通信，因此对于1 &lt;= i &lt;= n，A（i，i）= 0。另外，您可能会假定网络是无向的（消息可以以相同的开销在任一方向上传播），因此A（i，j）= A（j，i）。因此，将仅提供A的（严格）下部三角形部分上的条目。</p><p>程序的输入将是A的下部三角形部分。也就是说，输入的第二行将包含一个条目A（2,1）。下一行将包含两个条目A（3,1）和A（3,2），依此类推。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>您的程序应输出从第一个处理器向所有其他处理器广播消息所需的最短通信时间。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">50</span><br><span class="line">30 5</span><br><span class="line">100 20 50</span><br><span class="line">10 xx 10</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">35</span><br></pre></td></tr></table></figure><h3 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h3><p>第一行输入点的数量，剩下输入邻接矩阵(双向边)的下三角，x表示不可达</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;stdlib.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">using namespace std;</span><br><span class="line">int d[101],n;</span><br><span class="line">int map[101][101];</span><br><span class="line">bool v[101];</span><br><span class="line">void dij()&#123;</span><br><span class="line">int index;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">v[i]&#x3D;0;</span><br><span class="line">d[i]&#x3D;map[1][i];</span><br><span class="line">&#125;</span><br><span class="line">v[1]&#x3D;1;</span><br><span class="line">d[1]&#x3D;0;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">int minn&#x3D;MAX;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(v[j]&#x3D;&#x3D;0&amp;&amp;d[j]&lt;minn)</span><br><span class="line">&#123;</span><br><span class="line">minn&#x3D;d[j];</span><br><span class="line">index&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">v[index]&#x3D;1;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(v[j]&#x3D;&#x3D;0&amp;&amp;(d[j]&gt;d[index]+map[index][j]))</span><br><span class="line">&#123;</span><br><span class="line">d[j]&#x3D;d[index]+map[index][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;map[i][i]&#x3D;0;  </span><br><span class="line">for(int j&#x3D;1;j&lt;i;j++)</span><br><span class="line">&#123;</span><br><span class="line">string s;</span><br><span class="line">cin&gt;&gt;s;</span><br><span class="line">if(s&#x3D;&#x3D;&quot;x&quot;)</span><br><span class="line">map[i][j]&#x3D;map[j][i]&#x3D;MAX;</span><br><span class="line">else</span><br><span class="line">map[i][j]&#x3D;map[j][i]&#x3D;atoi(s.c_str());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">dij();</span><br><span class="line">int maxx&#x3D;-1;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[i]&gt;maxx)</span><br><span class="line">&#123;</span><br><span class="line">maxx&#x3D;d[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">cout&lt;&lt;maxx&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> dij </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最短路径 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-3259-Wormholes</title>
      <link href="2020/03/07/POJ-3259-Wormholes/"/>
      <url>2020/03/07/POJ-3259-Wormholes/</url>
      
        <content type="html"><![CDATA[<p>负环，注意输入时输入的是正数，要变成负数存起来。这样可能两点之间存在三条边，但bellman对边没有要求，也可以只留两条边，但我觉得没有必要，还得搜索更改。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="虫洞"><a href="#虫洞" class="headerlink" title="虫洞"></a>虫洞</h3><table><thead><tr><th><strong>时限：</strong> 2000MS</th><th></th><th><strong>内存限制：</strong> 65536K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 79083</td><td></td><td><strong>接受：</strong> 29365</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>在探索他的许多农场时，农夫约翰发现了许多惊人的虫洞。虫洞非常特殊，因为它是一条单向路径，可在您进入虫洞之前将您送至目的地！每个FJ的农场包括<em>Ñ</em>（1≤ <em>ñ</em> ≤500）字段方便地编号为1 .. <em>Ñ</em>，<em>中号*（1≤ *中号</em> ≤2500）的路径，和<em>w ^*（1≤ *w ^</em> ≤200）虫洞。</p><p>由于FJ是一位狂热的时空旅行爱好者，因此他希望做到以下几点：从某个领域开始，经过一些路径和虫洞，并在他初次离开之前的某个时间返回开始领域。也许他将能够见到自己：）。</p><p>为了帮助FJ找出这是否可行与否，他将与完整的地图供你<em>˚F*（1≤ *˚F</em> ≤5）他的农场。路径行驶时间不会超过10,000秒，虫洞也不会使FJ的返回时间超过10,000秒。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>第1行：一个整数，<em>˚F<em>。</em>F<em>服务器场说明如下。<br>每个服务器场的第1行：三个空格分隔的整数：</em>N<em>，</em>M<em>和</em>W</em><br>第2行。每个服务器场的<em>M</em> +1：三个以空格分隔的数字（<em>S</em>，<em>E</em>，<em>T</em>），分别描述：双向路径在<em>S</em>和<em>E</em>之间需要经过<em>T</em>秒。两个字段可能通过一条以上的路径连接。<br>线<em>中号</em> 2 .. <em>中号</em> + <em>w ^</em>每个场的1：三个空间分隔的数字（<em>S</em>，<em>E</em>，<em>T</em>）分别描述：从<em>S</em>到<em>E的</em>单向路径，也将旅行者向后移动<em>T</em>秒。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>第1行<em>。F</em>：对于每个农场，如果FJ可以实现其目标，则输出“ YES”，否则输出“ NO”（不包括引号）。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3 3 1</span><br><span class="line">1 2 2</span><br><span class="line">1 3 4</span><br><span class="line">2 3 1</span><br><span class="line">3 1 3</span><br><span class="line">3 2 1</span><br><span class="line">1 2 3</span><br><span class="line">2 3 4</span><br><span class="line">3 1 8</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">没有</span><br><span class="line">是</span><br></pre></td></tr></table></figure><h3 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h3><p>第一行输入三个正整数，代表点的个数，双向正边数，单向负边数。下面每行输入三个数，起点，终点，花费的时间(注意输入负边时也是正数，需要变成负数存起来)。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">struct R&#123;</span><br><span class="line">int start,end,time;</span><br><span class="line">&#125; r[5201];</span><br><span class="line">int d[501];</span><br><span class="line">int n,m,w;</span><br><span class="line">bool bellman()</span><br><span class="line">&#123;</span><br><span class="line">memset(d,0x3f,sizeof(d));</span><br><span class="line">d[1]&#x3D;0;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;2*m+w;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[r[j].end]&gt;d[r[j].start]+r[j].time)</span><br><span class="line">&#123;</span><br><span class="line">d[r[j].end]&#x3D;d[r[j].start]+r[j].time;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;2*m+w;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[r[j].end]&gt;d[r[j].start]+r[j].time)</span><br><span class="line">&#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int t;</span><br><span class="line">cin&gt;&gt;t;</span><br><span class="line">while(t--)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m&gt;&gt;w;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;2*m;i+&#x3D;2)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;r[i].start&gt;&gt;r[i].end&gt;&gt;r[i].time;</span><br><span class="line">r[i+1].start&#x3D;r[i].end;</span><br><span class="line">r[i+1].end&#x3D;r[i].start;</span><br><span class="line">r[i+1].time&#x3D;r[i].time;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;2*m+1;i&lt;&#x3D;2*m+w;i++)</span><br><span class="line">&#123;</span><br><span class="line">int tt;</span><br><span class="line">cin&gt;&gt;r[i].start&gt;&gt;r[i].end&gt;&gt;tt;</span><br><span class="line">r[i].time&#x3D;-tt;</span><br><span class="line">&#125;</span><br><span class="line">if(bellman())</span><br><span class="line">cout&lt;&lt;&quot;YES&quot;&lt;&lt;endl;</span><br><span class="line">else</span><br><span class="line">cout&lt;&lt;&quot;NO&quot;&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Bellman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 负环 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-1860-Currency Exchange</title>
      <link href="2020/03/07/POJ-1860-Currency-Exchange/"/>
      <url>2020/03/07/POJ-1860-Currency-Exchange/</url>
      
        <content type="html"><![CDATA[<p>dij算法不能处理负边，因为如果有负边就不能确定最小的那个是最优解了。Bellman-<em>Ford</em>可以处理负边，但在结束之前都不是最优解，并且可以处理闭环，因为i次循环可以算出走i步的最优解，所以必须循环n-1次，才能得到最优解，如果要判断是不是有环，需要再循环一次，如果最终的结果有被更改，则代表有环。正负环的初始化不同。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="货币兑换"><a href="#货币兑换" class="headerlink" title="货币兑换"></a>货币兑换</h3><table><thead><tr><th><strong>时限：</strong> 1000MS</th><th></th><th><strong>内存限制：</strong> 30000K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 44848</td><td></td><td><strong>接受：</strong> 17312</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>我们城市有几个货币兑换点。让我们假设每个点专门研究两种特定货币，并且仅使用这些货币执行兑换操作。同一对货币可能有多个要点。每个点都有自己的汇率，A到B的汇率是您获得1A时B的数量。此外，每个兑换点都有一定的佣金，您必须为兑换操作支付的总金额。佣金始终以原始货币收取。<br>例如，如果您想在兑换点将100美元兑换成俄罗斯卢布，汇率为29.75，佣金为0.39，您将获得（100-0.39）* 29.75 = 2963.3975RUR。<br>您肯定知道我们城市可以处理N种不同的货币。让我们为每种货币分配从1到N的唯一整数。然后可以用6个数字描述每个兑换点：整数A和B-​​兑换的货币数量，以及实际R AB，C AB，R BA和C BA-分别将A兑换为B和B兑换为A时的汇率和佣金。<br>尼克拥有货币S的钱，并且想知道在进行一些兑换操作后，他是否可以以某种方式增加其资本。当然，他希望最后用S货币来存钱。帮助他回答这个难题。尼克在进行操作时必须始终拥有非负数的资金。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>输入的第一行包含四个数字：N-货币数量，M-兑换点数量，S-Nick拥有的货币数量，V-他拥有的货币单位数量。接下来的M行每行包含6个数字-相应交换点的描述-按上面指定的顺序进行。数字用一个或多个空格分隔。1 &lt;= S &lt;= N &lt;= 100，1 &lt;= M &lt;= 100，V是实数，0 &lt;= V &lt;= 10 3。<br>对于每个点的汇率和佣金是真实的，与小数点后至多两个数字，10给出-2 &lt;=速率&lt;= 10 2，0 &lt;=佣金&lt;= 10 2。<br>如果在此序列中不使用任何交换点以上，则将交换操作的某些序列称为简单序列。您可以假定在任何简单的交换操作序列的末尾和开始处，总和的数值之比小于10 4。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>如果Nick可以增加他的财富，则输出YES，否则输出NO到输出文件。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3 2 1 20.0</span><br><span class="line">1 2 1.00 1.00 1.00 1.00</span><br><span class="line">2 3 1.10 1.00 1.10 1.00</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">是</span><br></pre></td></tr></table></figure><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>第一行输入n,m,s,v分别表示货币的种数，货币转换的方式数，自己拥有的货币的种类，自己拥有货币的数量；接下来m行输入a,b,c,d,e,f表示a向b转换的汇率是c,手续费是d,b向a转换的汇率e,手续费是f.计算方式:<code>（a-d）*c</code></p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m,t;</span><br><span class="line">double s,d[101];</span><br><span class="line">struct &#123;</span><br><span class="line">int a,b;</span><br><span class="line">double huilv,tax;</span><br><span class="line">&#125; bian[201];</span><br><span class="line">bool bellman_ford()&#123;</span><br><span class="line">memset(d,0,sizeof(d));</span><br><span class="line">d[t]&#x3D;s;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;2*m;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[bian[j].b]&lt;(d[bian[j].a]-bian[j].tax)*bian[j].huilv)</span><br><span class="line">&#123;</span><br><span class="line">d[bian[j].b]&#x3D;(d[bian[j].a]-bian[j].tax)*bian[j].huilv;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;2*m;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(d[bian[j].b]&lt;(d[bian[j].a]-bian[j].tax)*bian[j].huilv)</span><br><span class="line">&#123;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m&gt;&gt;t&gt;&gt;s;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;2*m;i+&#x3D;2)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;bian[i].a&gt;&gt;bian[i].b&gt;&gt;bian[i].huilv&gt;&gt;bian[i].tax&gt;&gt;bian[i+1].huilv&gt;&gt;bian[i+1].tax;</span><br><span class="line">bian[i+1].a&#x3D;bian[i].b;</span><br><span class="line">bian[i+1].b&#x3D;bian[i].a;</span><br><span class="line">&#125;</span><br><span class="line">if(bellman_ford())</span><br><span class="line">cout&lt;&lt;&quot;YES&quot;&lt;&lt;endl;</span><br><span class="line">else</span><br><span class="line">cout&lt;&lt;&quot;NO&quot;&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Bellman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正环 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-3268-Silver Cow Party</title>
      <link href="2020/03/06/POJ-3268-Silver-Cow-Party/"/>
      <url>2020/03/06/POJ-3268-Silver-Cow-Party/</url>
      
        <content type="html"><![CDATA[<p>上来一看觉得这个题很简单，写出来测试结果也对，一提交，超时。于是我又把<code>cin</code>改成<code>scanf</code>,<code>cin</code>比<code>scanf</code>慢太多了，结果还是超时。这就不是细节问题了，是算法本身的问题，后来把矩阵翻转了一下就可以解决，复杂度从n^3变成n^2，这样一想刚开始的算法太愚蠢了！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="银牛党"><a href="#银牛党" class="headerlink" title="银牛党"></a>银牛党</h3><table><thead><tr><th><strong>时限：</strong> 2000MS</th><th></th><th><strong>内存限制：</strong> 65536K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 38727</td><td></td><td><strong>接受：</strong> 17305</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>从每一个牛<em>ñ</em>农场（1≤ <em>ñ</em> ≤1000）方便地编号为1 .. <em>ñ</em>是要参加大牛党在农场＃举行<em>X</em>（1≤ <em>X</em> ≤ <em>ñ</em>）。共<em>中号*（1≤ *中号</em> ≤100,000）农场单向（单向道路所连接对;道路<em>我</em>需要<em>Ť 我*（1≤ *Ť 我</em> ≤100）的时间到横动单元。</p><p>每头母牛都必须走到聚会上，聚会结束后，要回到自己的农场。每头母牛都是懒惰的，因此选择了最短时间的最佳路线。由于道路是单向的，所以母牛的回程路线可能与原先到达聚会的路线有所不同。</p><p>在所有奶牛中，奶牛步行去聚会和返回所花费的最长时间是多少？</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>分别三空格隔开的整数，：1线<em>Ñ</em>，<em>中号<em>，和</em>X</em><br>线2 .. <em>中号</em> 1：线<em>我</em> 1描述了道路<em>我</em>有三个空格隔开的整数：<em>甲我</em>，<em>乙我</em>和<em>Ť 我</em>。所描述的道路从农场<em>A i</em>到农场<em>B i</em>延伸，需要经过<em>T i个</em>时间单位。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>第1行：一个整数：任何一头母牛必须行走的最长时间。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">4 8 2</span><br><span class="line">1 2 4</span><br><span class="line">1 3 2</span><br><span class="line">1 4 7</span><br><span class="line">2 1 1</span><br><span class="line">2 3 5</span><br><span class="line">3 1 2</span><br><span class="line">3 4 4</span><br><span class="line">4 2 3</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10</span><br></pre></td></tr></table></figure><h3 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h3><p>输出三个数，n,m,x。n代表点的个数，m代表有向边的个数，x代表集会地点，下面m行:x,y,s。表示x点到y点的有向边的长度是s。要求输出某个点到x,再从x回家的最长距离</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#define N 1001</span><br><span class="line">#define MAX 0x3f3f3f3f</span><br><span class="line">using namespace std;</span><br><span class="line">int n,m,x,map[N][N],d[N],v[N],bd[N];</span><br><span class="line">void dij(int start)&#123;</span><br><span class="line">int index,minn;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">v[i]&#x3D;0;</span><br><span class="line">d[i]&#x3D;map[start][i];</span><br><span class="line">&#125;</span><br><span class="line">v[start]&#x3D;1;</span><br><span class="line">for(int k&#x3D;2;k&lt;&#x3D;n;k++)</span><br><span class="line">&#123;</span><br><span class="line">minn&#x3D;MAX;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">if(v[i]&#x3D;&#x3D;0&amp;&amp;d[i]&lt;minn)</span><br><span class="line">&#123;</span><br><span class="line">minn&#x3D;d[i];</span><br><span class="line">index&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">v[index]&#x3D;1;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(v[i]&#x3D;&#x3D;0&amp;&amp;d[i]&gt;d[index]+map[index][i])</span><br><span class="line">&#123;</span><br><span class="line">d[i]&#x3D;d[index]+map[index][i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;d[end]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">int main()&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m&gt;&gt;x;</span><br><span class="line">&#x2F;&#x2F;memset(map,0x3f,sizeof(map));</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">map[i][j]&#x3D;MAX;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">int x,y;</span><br><span class="line">cin&gt;&gt;x&gt;&gt;y;</span><br><span class="line">cin&gt;&gt;map[x][y];</span><br><span class="line">&#125;</span><br><span class="line">dij(x);</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">bd[i]&#x3D;d[i];</span><br><span class="line">for(int j&#x3D;i+1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;map[i][j];</span><br><span class="line">map[i][j]&#x3D;map[j][i];</span><br><span class="line">map[j][i]&#x3D;t;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">dij(x);</span><br><span class="line">int jieguo&#x3D;-1;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(i!&#x3D;x&amp;&amp;d[i]!&#x3D;MAX&amp;&amp;bd[i]!&#x3D;MAX&amp;&amp;d[i]+bd[i]&gt;jieguo)</span><br><span class="line">jieguo&#x3D;d[i]+bd[i];</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;jieguo&lt;&lt;endl;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> dij </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 有向图绕圈 </tag>
            
            <tag> 翻转矩阵 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-1797-Heavy Transportation</title>
      <link href="2020/03/06/POJ-1797-Heavy-Transportation/"/>
      <url>2020/03/06/POJ-1797-Heavy-Transportation/</url>
      
        <content type="html"><![CDATA[<p>dij用途还是很广的，稍微分析一下可行性就可以。可行性主要表现在两部分，第一部分筛选最优解，第二部分更新当前状态。只要这两点可行就可以。注意不能图省事两个循环同时计算和求最优解。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="重型运输"><a href="#重型运输" class="headerlink" title="重型运输"></a>重型运输</h3><table><thead><tr><th><strong>时限：</strong> 3000MS</th><th></th><th><strong>内存限制：</strong> 30000K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 66100</td><td></td><td><strong>接受：</strong> 16246</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>背景<br>雨果重工很高兴。Cargolifter项目崩溃后，他现在可以扩展业务。但是他需要一个聪明的人，告诉他从客户建造巨型钢起重机的地方到所有街道都可以承载重量的地方是否真的有办法。<br>幸运的是，他已经制定了一个计划，包括所有街道，桥梁和所有允许的重量。不幸的是，他不知道如何找到最大重量来告诉客户起重机的重量。但是你当然知道。</p><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>系统会为您提供城市规划，由交叉口之间的街道（权重限制）描述，该街道编号为1到n。您的任务是找到从1号交叉口（Hugo的位置）到n号交叉口（客户的位置）可以运输的最大重量。您可以假设至少有一条路径。所有街道均可双向行驶。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>第一行包含方案（城市计划）的数量。对于每个城市，第一行给出的是路口交叉口数量n（1 &lt;= n &lt;= 1000）和街道数量m。接下来的m行包含整数的三元组，这些整数指定了道路的起点和终点交叉点以及允许的最大权重，该权重为正且不大于1000000。每对交叉点之间最多有一条街道。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>每个方案的输出都以包含“方案#i：”的行开头，其中i是从1开始的方案编号。然后打印一行，其中包含Hugo可以运输给客户的最大允许重量。用空白行终止方案的输出。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1个</span><br><span class="line">3 3</span><br><span class="line">1 2 3</span><br><span class="line">1 3 4</span><br><span class="line">2 3 5</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">方案1：</span><br><span class="line">4</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int map[1001][1001];</span><br><span class="line">int d[1001];</span><br><span class="line">bool v[1001];</span><br><span class="line">int q&#x3D;1;</span><br><span class="line">int n,index,m,maxx;</span><br><span class="line">void dij()&#123;</span><br><span class="line">int i,j;</span><br><span class="line">for(i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">v[i]&#x3D;0;</span><br><span class="line">d[i]&#x3D;map[1][i];</span><br><span class="line">&#125;</span><br><span class="line">v[1]&#x3D;1;</span><br><span class="line">while(v[n]!&#x3D;1)</span><br><span class="line">&#123;</span><br><span class="line">maxx&#x3D;-1;</span><br><span class="line">for(i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(v[i]&#x3D;&#x3D;0&amp;&amp;d[i]&gt;maxx)</span><br><span class="line">&#123;</span><br><span class="line">maxx&#x3D;d[i];</span><br><span class="line">index&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">v[index]&#x3D;1;</span><br><span class="line">for(i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int tt&#x3D;map[index][i]&lt;d[index]?map[index][i]:d[index];</span><br><span class="line">if(v[i]&#x3D;&#x3D;0&amp;&amp;(d[i]&lt;tt))</span><br><span class="line">&#123;</span><br><span class="line">d[i]&#x3D;tt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">printf(&quot;Scenario #%d:\n%d\n\n&quot;,q++,d[n]);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int t;</span><br><span class="line">cin&gt;&gt;t;</span><br><span class="line">while(t--)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;m;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">map[i][j]&#x3D;0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">int a,b,w;</span><br><span class="line">scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;w);</span><br><span class="line">map[a][b]&#x3D;map[b][a]&#x3D;w;</span><br><span class="line">&#125;</span><br><span class="line">dij();</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> dij </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最大最小距离 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-2253-Frogger</title>
      <link href="2020/03/05/POJ-2253-Frogger/"/>
      <url>2020/03/05/POJ-2253-Frogger/</url>
      
        <content type="html"><![CDATA[<p>跟dij算法的可行性一样，分为两个集合，一个是处理完的集合a(a中存在起点s),一个是待处理的集合b，取b中所求量(一般为最短型，可以是总路径，也可以是组内路径)最小的那个点c，那么s到c的最优解就能够确定下来，c的上一个点p，要么在a中，要么在b中，在b中不可能，因为b中除了c点别的点都要比c大(我们之前的取得C是最小的)，所以p点只能在a中。如果a中只有起点s，那么s到c的最小值就是s到c的距离，把c加入a集合，同时更新b集合中的点到s的距离，这样就能保证每次保留的都是b集合中每一个点到a集合的距离，再取最小值……</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="蛙人"><a href="#蛙人" class="headerlink" title="蛙人"></a>蛙人</h3><table><thead><tr><th><strong>时限：</strong> 1000MS</th><th></th><th><strong>内存限制：</strong> 65536K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 77942</td><td></td><td><strong>接受：</strong> 23692</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>弗雷迪·青蛙坐在湖中间的一块石头上。突然，他注意到坐在另一块石头上的菲奥娜·青蛙。他计划去探望她，但由于水很脏，到处都是游客的防晒霜，他想避免游泳，而是跳跳来到达她。<br>不幸的是，菲奥娜的石头不在他的跳跃范围内。因此，弗雷迪（Freddy）考虑使用其他石头作为中间停靠点，并通过几次小跳的顺序到达她。<br>为了执行给定的跳跃序列，青蛙的跳跃范围显然必须至少与序列中发生的最长跳跃一样长。<br>因此，将两块石头之间的青蛙距离（人类也称为最小最大距离）定义为两块石头之间所有可能路径上的最小必要跳跃范围。</p><p>您将获得弗雷迪石头，菲奥娜石头和湖中所有其他石头的坐标。您的工作是计算Freddy和Fiona的石头之间的青蛙距离。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>输入将包含一个或多个测试用例。每个测试用例的第一行将包含结石数量n（2 &lt;= n &lt;= 200）。接下来的n条线分别包含两个整数xi，yi（0 &lt;= xi，yi &lt;= 1000），它们表示石头#i的坐标。第1块石头是弗雷迪的石头，第2块石头是菲奥娜的石头，其他n-2块石头未被占用。每个测试用例后面都有一个空白行。输入以n的零（0）值终止。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>对于每个测试用例，打印一行“ Scenario #x”和一行“ Frog Distance = y”，其中x替换为测试用例编号（从1开始编号），y替换为适当的实数，打印到三位小数。在每个测试用例之后，甚至在最后一个测试用例之后，都应留一个空白行。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2 </span><br><span class="line">0 0 </span><br><span class="line">3 4 </span><br><span class="line"></span><br><span class="line">3 </span><br><span class="line">17 4 </span><br><span class="line">19 4 </span><br><span class="line">18 5 </span><br><span class="line"></span><br><span class="line">0</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">方案＃1 </span><br><span class="line">青蛙距离&#x3D; 5.000 </span><br><span class="line"></span><br><span class="line">方案＃2 </span><br><span class="line">青蛙距离&#x3D; 1.414</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int n,MAX&#x3D;0x3f3f3f3f;</span><br><span class="line">int x[201];</span><br><span class="line">int y[201];</span><br><span class="line">double d[201];</span><br><span class="line">bool v[201];</span><br><span class="line">double map[201][201];</span><br><span class="line">int index;</span><br><span class="line">int q&#x3D;1;</span><br><span class="line">double minn;</span><br><span class="line">void dij()</span><br><span class="line">&#123;</span><br><span class="line">memset(v,0,sizeof(v));</span><br><span class="line">d[1]&#x3D;0;</span><br><span class="line">v[1]&#x3D;1;</span><br><span class="line">int mubiao&#x3D;1;</span><br><span class="line">while(v[2]!&#x3D;1)</span><br><span class="line">&#123;</span><br><span class="line">minn&#x3D;MAX;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(v[i]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">if(max(d[mubiao],map[mubiao][i])&lt;d[i])</span><br><span class="line">&#123;</span><br><span class="line">d[i]&#x3D;max(d[mubiao],map[mubiao][i]);</span><br><span class="line">&#125;</span><br><span class="line">if(d[i]&lt;minn)</span><br><span class="line">&#123;</span><br><span class="line">minn&#x3D;d[i];</span><br><span class="line">index&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">v[index]&#x3D;1;</span><br><span class="line">mubiao&#x3D;index;</span><br><span class="line">&#125;</span><br><span class="line">printf(&quot;Scenario #%d\nFrog Distance &#x3D; %.3f\n\n&quot;,q++,d[2]);</span><br><span class="line">&#x2F;&#x2F;printf(&quot;%.3f\n&quot;,d[2]);</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(cin&gt;&gt;n&amp;&amp;n)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;x[i]&gt;&gt;y[i];</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;memset(map,0,sizeof(map));</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">map[i][i]&#x3D;0;</span><br><span class="line">d[i]&#x3D;MAX;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;i-1;j++)</span><br><span class="line">&#123;</span><br><span class="line">map[i][j]&#x3D;map[j][i]&#x3D;sqrt((x[i]-x[j])*(x[i]-x[j])+(y[i]-y[j])*(y[i]-y[j]));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">dij();</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> dij </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 组内最短路径 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-2387-Til the Cows Come Home</title>
      <link href="2020/03/05/POJ-2387-Til-the-Cows-Come-Home/"/>
      <url>2020/03/05/POJ-2387-Til-the-Cows-Come-Home/</url>
      
        <content type="html"><![CDATA[<p>dijkstra算法，非简单可达路径不要用DFS；如果要输出路径保存在标志数组中，递归输出；变与不变的情况最好不用三目运算符</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p><a href="http://poj.org/problem?id=2387" target="_blank" rel="noopener">http://poj.org/problem?id=2387</a></p><h3 id="直到母牛回家"><a href="#直到母牛回家" class="headerlink" title="直到母牛回家"></a>直到母牛回家</h3><table><thead><tr><th><strong>时限：</strong> 1000MS</th><th></th><th><strong>内存限制：</strong> 65536K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 100676</td><td></td><td><strong>接受的：</strong> 32539</td></tr></tbody></table><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>贝西（Bessie）在野外，想回到谷仓，以便在农夫约翰（Johner John）叫醒她早晨挤奶之前尽可能多地入睡。贝西需要美睡，所以她想尽快回来。</p><p>农夫约翰的田地中有N（2 &lt;= N &lt;= 1000）个地标，唯一编号为1..N。地标1是谷仓；Bessie整日站立的苹果树丛是地标N。奶牛使用地标之间长度各不相同的T（1 &lt;= T &lt;= 2000）双向奶牛场在田间旅行。贝西对自己的导航能力不抱有信心，因此，从开始到结束，她始终处在步道上。</p><p>给定地标之间的路径，确定Bessie返回谷仓必须行走的最小距离。可以保证存在这样的路由。</p><h4 id="输入值"><a href="#输入值" class="headerlink" title="输入值"></a>输入值</h4><p>*第1行：两个整数：T和N</p><p>*第2..T + 1行：每行将一个轨迹描述为三个以空格分隔的整数。前两个整数是小径在其间行进的地标。第三个整数是路径的长度，范围为1..100。</p><h4 id="输出量"><a href="#输出量" class="headerlink" title="输出量"></a>输出量</h4><p>*第1行：一个整数，Bessie从地标N到地标1所必须经过的最小距离。</p><h4 id="样本输入"><a href="#样本输入" class="headerlink" title="样本输入"></a>样本输入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5 5</span><br><span class="line">1 2 20</span><br><span class="line">2 3 30</span><br><span class="line">3 4 20</span><br><span class="line">4 5 20</span><br><span class="line">1 5 100</span><br></pre></td></tr></table></figure><h4 id="样本输出"><a href="#样本输出" class="headerlink" title="样本输出"></a>样本输出</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">90</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int N[1001];</span><br><span class="line">bool v[1001];</span><br><span class="line">int map[1001][1001];</span><br><span class="line">int n,x,index,mubiao; </span><br><span class="line">int MAX&#x3D;0x3f3f3f3f;</span><br><span class="line">void dij()&#123;</span><br><span class="line">N[x]&#x3D;0;</span><br><span class="line">v[x]&#x3D;1;</span><br><span class="line">int mubiao&#x3D;x;</span><br><span class="line">while(v[1]!&#x3D;1)</span><br><span class="line">&#123;</span><br><span class="line">int min&#x3D;MAX;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;x;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(v[i]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">int t&#x3D;N[mubiao]+map[mubiao][i];</span><br><span class="line">if(N[i]&gt;t)</span><br><span class="line">N[i]&#x3D;t;</span><br><span class="line">if(N[i]&lt;min)&#123;</span><br><span class="line">min&#x3D;N[i];</span><br><span class="line">index&#x3D;i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">v[index]&#x3D;1;</span><br><span class="line">mubiao&#x3D;index;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;N[1]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line"></span><br><span class="line">while(cin&gt;&gt;n&gt;&gt;x)</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;memset(map,0x3f,sizeof(map));</span><br><span class="line">&#x2F;&#x2F;memset(v,0,sizeof(v));</span><br><span class="line">&#x2F;&#x2F;memset(N,0x3f,sizeof(N));</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;x;i++)</span><br><span class="line">&#123;</span><br><span class="line">N[i]&#x3D;MAX;</span><br><span class="line">v[i]&#x3D;0;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;x;j++)</span><br><span class="line">&#123;</span><br><span class="line">map[i][j]&#x3D;MAX;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int j,k,dd;</span><br><span class="line">cin&gt;&gt;j&gt;&gt;k;</span><br><span class="line">cin&gt;&gt;dd;</span><br><span class="line">if(dd&lt;map[j][k])</span><br><span class="line">&#123;map[j][k]&#x3D;dd;</span><br><span class="line">map[k][j]&#x3D;dd;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">dij();</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> dij </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最短路径 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-2102-A计划</title>
      <link href="2020/03/03/HDU-2102-A%E8%AE%A1%E5%88%92/"/>
      <url>2020/03/03/HDU-2102-A%E8%AE%A1%E5%88%92/</url>
      
        <content type="html"><![CDATA[<p>两层迷宫，‘#’代表瞬时传送装置，如果传送后是墙则撞死，如果传送后是‘#’，则一直在传送，必须考虑这两种情况。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="A计划"><a href="#A计划" class="headerlink" title="A计划"></a>A计划</h3><p><strong><em>\</em>Time Limit: 3000/1000 MS (Java/Others)  Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 38233  Accepted Submission(s): 9470<br>**</strong></p><p>Problem Description</p><p>可怜的公主在一次次被魔王掳走一次次被骑士们救回来之后，而今，不幸的她再一次面临生命的考验。魔王已经发出消息说将在T时刻吃掉公主，因为他听信谣言说吃公主的肉也能长生不老。年迈的国王正是心急如焚，告招天下勇士来拯救公主。不过公主早已习以为常，她深信智勇的骑士LJ肯定能将她救出。<br>现据密探所报，公主被关在一个两层的迷宫里，迷宫的入口是S（0，0，0），公主的位置用P表示，时空传输机用#表示，墙用*表示，平地用.表示。骑士们一进入时空传输机就会被转到另一层的相对位置，但如果被转到的位置是墙的话，那骑士们就会被撞死。骑士们在一层中只能前后左右移动，每移动一格花1时刻。层间的移动只能通过时空传输机，且不需要任何时间。</p><p>Input</p><p>输入的第一行C表示共有C个测试数据，每个测试数据的前一行有三个整数N，M，T。 N，M迷宫的大小N<em>M（1 &lt;= N,M &lt;=10)。T如上所意。接下去的前N</em>M表示迷宫的第一层的布置情况，后N*M表示迷宫第二层的布置情况。</p><p>Output</p><p>如果骑士们能够在T时刻能找到公主就输出“YES”，否则输出“NO”。</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">5 5 14</span><br><span class="line">S*#*.</span><br><span class="line">.#...</span><br><span class="line">.....</span><br><span class="line">****.</span><br><span class="line">...#.</span><br><span class="line"></span><br><span class="line">..*.P</span><br><span class="line">#.*..</span><br><span class="line">***..</span><br><span class="line">...*.</span><br><span class="line">*.#..</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">YES</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">struct Point</span><br><span class="line">&#123;</span><br><span class="line">int x,y,z;</span><br><span class="line">&#125; a,b;</span><br><span class="line">int dir[4][2]&#x3D;&#123;1,0,-1,0,0,1,0,-1&#125;;</span><br><span class="line">int m,n,t,zx,zy,zz;</span><br><span class="line">char map[2][10][10];</span><br><span class="line">int v[2][10][10];</span><br><span class="line">void bfs()&#123;</span><br><span class="line">memset(v,0,sizeof(v));</span><br><span class="line">v[0][0][0]&#x3D;1;</span><br><span class="line">a.x&#x3D;0;a.y&#x3D;0;a.z&#x3D;0;</span><br><span class="line">queue&lt;Point&gt; q;</span><br><span class="line">q.push(a);</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x;</span><br><span class="line">b.y&#x3D;a.y+dir[i][0];</span><br><span class="line">b.z&#x3D;a.z+dir[i][1];</span><br><span class="line">if(b.y&gt;&#x3D;0&amp;&amp;b.y&lt;m&amp;&amp;b.z&gt;&#x3D;0&amp;&amp;b.z&lt;n&amp;&amp;map[b.x][b.y][b.z]!&#x3D;&#39;*&#39;&amp;&amp;v[b.x][b.y][b.z]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">v[b.x][b.y][b.z]&#x3D;v[a.x][a.y][a.z]+1;</span><br><span class="line">if(map[b.x][b.y][b.z]&#x3D;&#x3D;&#39;#&#39;)</span><br><span class="line">&#123;</span><br><span class="line">int tt&#x3D;v[b.x][b.y][b.z];</span><br><span class="line">b.x&#x3D;(b.x&#x3D;&#x3D;1?0:1);</span><br><span class="line">if(map[b.x][b.y][b.z]&#x3D;&#x3D;&#39;*&#39;||map[b.x][b.y][b.z]&#x3D;&#x3D;&#39;#&#39;) continue;</span><br><span class="line">v[b.x][b.y][b.z]&#x3D;tt;</span><br><span class="line">&#125;</span><br><span class="line">if(v[b.x][b.y][b.z]-1&gt;t)&#123;cout&lt;&lt;&quot;NO&quot;&lt;&lt;endl;return;&#125;</span><br><span class="line">if(map[b.x][b.y][b.z]&#x3D;&#x3D;&#39;P&#39;) &#123;cout&lt;&lt;&quot;YES&quot;&lt;&lt;endl; return;&#125;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;NO&quot;&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int c;</span><br><span class="line">cin&gt;&gt;c;</span><br><span class="line">while(c--)&#123;</span><br><span class="line">cin&gt;&gt;m&gt;&gt;n&gt;&gt;t;</span><br><span class="line">for(int k&#x3D;0;k&lt;2;k++)</span><br><span class="line">for(int i&#x3D;0;i&lt;m;i++)</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">cin&gt;&gt;map[k][i][j];</span><br><span class="line">bfs();</span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 易错题 </tag>
            
            <tag> 标志数组做记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-2181-哈密顿绕行问题</title>
      <link href="2020/03/03/HDU-2181-%E5%93%88%E5%AF%86%E9%A1%BF%E7%BB%95%E8%A1%8C%E9%97%AE%E9%A2%98/"/>
      <url>2020/03/03/HDU-2181-%E5%93%88%E5%AF%86%E9%A1%BF%E7%BB%95%E8%A1%8C%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>DFS遍历所有可能性</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="哈密顿绕行世界问题"><a href="#哈密顿绕行世界问题" class="headerlink" title="哈密顿绕行世界问题"></a>哈密顿绕行世界问题</h3><p><strong><em>\</em>Time Limit: 3000/1000 MS (Java/Others)  Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 10731  Accepted Submission(s): 6191<br>**</strong></p><p>Problem Description</p><p>一个规则的实心十二面体，它的 20个顶点标出世界著名的20个城市，你从一个城市出发经过每个城市刚好一次后回到出发的城市。</p><p>Input</p><p>前20行的第i行有3个数,表示与第i个城市相邻的3个城市.第20行以后每行有1个数m,m&lt;=20,m&gt;=1.m=0退出.</p><p>Output</p><p>输出从第m个城市出发经过每个城市1次又回到m的所有路线,如有多条路线,按字典序输出,每行1条路线.每行首先输出是第几条路线.然后个一个: 后列出经过的城市.参看Sample output</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">2 5 20</span><br><span class="line">1 3 12</span><br><span class="line">2 4 10</span><br><span class="line">3 5 8</span><br><span class="line">1 4 6</span><br><span class="line">5 7 19</span><br><span class="line">6 8 17</span><br><span class="line">4 7 9</span><br><span class="line">8 10 16</span><br><span class="line">3 9 11</span><br><span class="line">10 12 15</span><br><span class="line">2 11 13</span><br><span class="line">12 14 20</span><br><span class="line">13 15 18</span><br><span class="line">11 14 16</span><br><span class="line">9 15 17</span><br><span class="line">7 16 18</span><br><span class="line">14 17 19</span><br><span class="line">6 18 20</span><br><span class="line">1 13 19</span><br><span class="line">5</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">1:  5 1 2 3 4 8 7 17 18 14 15 16 9 10 11 12 13 20 19 6 5</span><br><span class="line">2:  5 1 2 3 4 8 9 10 11 12 13 20 19 18 14 15 16 17 7 6 5</span><br><span class="line">3:  5 1 2 3 10 9 16 17 18 14 15 11 12 13 20 19 6 7 8 4 5</span><br><span class="line">4:  5 1 2 3 10 11 12 13 20 19 6 7 17 18 14 15 16 9 8 4 5</span><br><span class="line">5:  5 1 2 12 11 10 3 4 8 9 16 15 14 13 20 19 18 17 7 6 5</span><br><span class="line">6:  5 1 2 12 11 15 14 13 20 19 18 17 16 9 10 3 4 8 7 6 5</span><br><span class="line">7:  5 1 2 12 11 15 16 9 10 3 4 8 7 17 18 14 13 20 19 6 5</span><br><span class="line">8:  5 1 2 12 11 15 16 17 18 14 13 20 19 6 7 8 9 10 3 4 5</span><br><span class="line">9:  5 1 2 12 13 20 19 6 7 8 9 16 17 18 14 15 11 10 3 4 5</span><br><span class="line">10:  5 1 2 12 13 20 19 18 14 15 11 10 3 4 8 9 16 17 7 6 5</span><br><span class="line">11:  5 1 20 13 12 2 3 4 8 7 17 16 9 10 11 15 14 18 19 6 5</span><br><span class="line">12:  5 1 20 13 12 2 3 10 11 15 14 18 19 6 7 17 16 9 8 4 5</span><br><span class="line">13:  5 1 20 13 14 15 11 12 2 3 10 9 16 17 18 19 6 7 8 4 5</span><br><span class="line">14:  5 1 20 13 14 15 16 9 10 11 12 2 3 4 8 7 17 18 19 6 5</span><br><span class="line">15:  5 1 20 13 14 15 16 17 18 19 6 7 8 9 10 11 12 2 3 4 5</span><br><span class="line">16:  5 1 20 13 14 18 19 6 7 17 16 15 11 12 2 3 10 9 8 4 5</span><br><span class="line">17:  5 1 20 19 6 7 8 9 10 11 15 16 17 18 14 13 12 2 3 4 5</span><br><span class="line">18:  5 1 20 19 6 7 17 18 14 13 12 2 3 10 11 15 16 9 8 4 5</span><br><span class="line">19:  5 1 20 19 18 14 13 12 2 3 4 8 9 10 11 15 16 17 7 6 5</span><br><span class="line">20:  5 1 20 19 18 17 16 9 10 11 15 14 13 12 2 3 4 8 7 6 5</span><br><span class="line">21:  5 4 3 2 1 20 13 12 11 10 9 8 7 17 16 15 14 18 19 6 5</span><br><span class="line">22:  5 4 3 2 1 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5</span><br><span class="line">23:  5 4 3 2 12 11 10 9 8 7 6 19 18 17 16 15 14 13 20 1 5</span><br><span class="line">24:  5 4 3 2 12 13 14 18 17 16 15 11 10 9 8 7 6 19 20 1 5</span><br><span class="line">25:  5 4 3 10 9 8 7 6 19 20 13 14 18 17 16 15 11 12 2 1 5</span><br><span class="line">26:  5 4 3 10 9 8 7 17 16 15 11 12 2 1 20 13 14 18 19 6 5</span><br><span class="line">27:  5 4 3 10 11 12 2 1 20 13 14 15 16 9 8 7 17 18 19 6 5</span><br><span class="line">28:  5 4 3 10 11 15 14 13 12 2 1 20 19 18 17 16 9 8 7 6 5</span><br><span class="line">29:  5 4 3 10 11 15 14 18 17 16 9 8 7 6 19 20 13 12 2 1 5</span><br><span class="line">30:  5 4 3 10 11 15 16 9 8 7 17 18 14 13 12 2 1 20 19 6 5</span><br><span class="line">31:  5 4 8 7 6 19 18 17 16 9 10 3 2 12 11 15 14 13 20 1 5</span><br><span class="line">32:  5 4 8 7 6 19 20 13 12 11 15 14 18 17 16 9 10 3 2 1 5</span><br><span class="line">33:  5 4 8 7 17 16 9 10 3 2 1 20 13 12 11 15 14 18 19 6 5</span><br><span class="line">34:  5 4 8 7 17 18 14 13 12 11 15 16 9 10 3 2 1 20 19 6 5</span><br><span class="line">35:  5 4 8 9 10 3 2 1 20 19 18 14 13 12 11 15 16 17 7 6 5</span><br><span class="line">36:  5 4 8 9 10 3 2 12 11 15 16 17 7 6 19 18 14 13 20 1 5</span><br><span class="line">37:  5 4 8 9 16 15 11 10 3 2 12 13 14 18 17 7 6 19 20 1 5</span><br><span class="line">38:  5 4 8 9 16 15 14 13 12 11 10 3 2 1 20 19 18 17 7 6 5</span><br><span class="line">39:  5 4 8 9 16 15 14 18 17 7 6 19 20 13 12 11 10 3 2 1 5</span><br><span class="line">40:  5 4 8 9 16 17 7 6 19 18 14 15 11 10 3 2 12 13 20 1 5</span><br><span class="line">41:  5 6 7 8 4 3 2 12 13 14 15 11 10 9 16 17 18 19 20 1 5</span><br><span class="line">42:  5 6 7 8 4 3 10 9 16 17 18 19 20 13 14 15 11 12 2 1 5</span><br><span class="line">43:  5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 1 2 3 4 5</span><br><span class="line">44:  5 6 7 8 9 16 17 18 19 20 1 2 12 13 14 15 11 10 3 4 5</span><br><span class="line">45:  5 6 7 17 16 9 8 4 3 10 11 15 14 18 19 20 13 12 2 1 5</span><br><span class="line">46:  5 6 7 17 16 15 11 10 9 8 4 3 2 12 13 14 18 19 20 1 5</span><br><span class="line">47:  5 6 7 17 16 15 11 12 13 14 18 19 20 1 2 3 10 9 8 4 5</span><br><span class="line">48:  5 6 7 17 16 15 14 18 19 20 13 12 11 10 9 8 4 3 2 1 5</span><br><span class="line">49:  5 6 7 17 18 19 20 1 2 3 10 11 12 13 14 15 16 9 8 4 5</span><br><span class="line">50:  5 6 7 17 18 19 20 13 14 15 16 9 8 4 3 10 11 12 2 1 5</span><br><span class="line">51:  5 6 19 18 14 13 20 1 2 12 11 15 16 17 7 8 9 10 3 4 5</span><br><span class="line">52:  5 6 19 18 14 15 11 10 9 16 17 7 8 4 3 2 12 13 20 1 5</span><br><span class="line">53:  5 6 19 18 14 15 11 12 13 20 1 2 3 10 9 16 17 7 8 4 5</span><br><span class="line">54:  5 6 19 18 14 15 16 17 7 8 9 10 11 12 13 20 1 2 3 4 5</span><br><span class="line">55:  5 6 19 18 17 7 8 4 3 2 12 11 10 9 16 15 14 13 20 1 5</span><br><span class="line">56:  5 6 19 18 17 7 8 9 16 15 14 13 20 1 2 12 11 10 3 4 5</span><br><span class="line">57:  5 6 19 20 1 2 3 10 9 16 15 11 12 13 14 18 17 7 8 4 5</span><br><span class="line">58:  5 6 19 20 1 2 12 13 14 18 17 7 8 9 16 15 11 10 3 4 5</span><br><span class="line">59:  5 6 19 20 13 12 11 10 9 16 15 14 18 17 7 8 4 3 2 1 5</span><br><span class="line">60:  5 6 19 20 13 14 18 17 7 8 4 3 10 9 16 15 11 12 2 1 5</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int nn,Case;</span><br><span class="line">bool v[21];</span><br><span class="line">int l[21];</span><br><span class="line">struct Point</span><br><span class="line">&#123;</span><br><span class="line">int xianglin[3];</span><br><span class="line">&#125; map[21];</span><br><span class="line">void dfs(int n)</span><br><span class="line">&#123;</span><br><span class="line">if(n&#x3D;&#x3D;21)&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;3;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[l[n-1]].xianglin[i]&#x3D;&#x3D;nn)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;Case++&lt;&lt;&quot;: &quot;;</span><br><span class="line">for(int j&#x3D;1;j&lt;21;j++)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot; &quot;&lt;&lt;l[j];</span><br><span class="line">&#125;</span><br><span class="line">            cout&lt;&lt;&quot; &quot;&lt;&lt;l[1];</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;3;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(v[map[l[n-1]].xianglin[i]]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">v[map[l[n-1]].xianglin[i]]&#x3D;1;</span><br><span class="line">l[n]&#x3D;map[l[n-1]].xianglin[i];</span><br><span class="line">dfs(n+1);</span><br><span class="line">v[map[l[n-1]].xianglin[i]]&#x3D;0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">for(int i &#x3D; 1; i &lt; 21; i++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i].xianglin[0]&gt;&gt;map[i].xianglin[1]&gt;&gt;map[i].xianglin[2];</span><br><span class="line">&#125;</span><br><span class="line">while(cin&gt;&gt;nn&amp;&amp;nn)&#123;</span><br><span class="line">Case&#x3D;1;</span><br><span class="line">memset(v,0,sizeof(v));</span><br><span class="line">v[nn]&#x3D;1;</span><br><span class="line">l[1]&#x3D;nn;</span><br><span class="line">dfs(2);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 遍历所有可能性 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-2612</title>
      <link href="2020/03/02/HDU-2612/"/>
      <url>2020/03/02/HDU-2612/</url>
      
        <content type="html"><![CDATA[<p>两个标志数组，两次BFS，不是双BFS，双BFS应该是双入口BFS，是一次BFS，两个入口而已，<a href="https://donghuangzhong.github.io/2020/02/23/UVA-11624/">UVA-11624</a>这才是双入口BFS。二维数组对应的函数形参必须声明第二维，并且不能对传进函数的形参用memset,因为sizeof(数组)不对，这样只能自行指定memset的大小了。</p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="想办法"><a href="#想办法" class="headerlink" title="想办法"></a>想办法</h3><p><strong><em>\</em>时间限制：3000/1000 MS（Java /其他）内存限制：32768/32768 K（Java /其他）<br>总提交数量：35622接受提交数量：11329<br>**</strong></p><p>问题描述</p><p>终于在杭州经过一年的学习，一分飞终于到了宁波。离开宁波一年后，一分飞有很多人见面。特别是好朋友Merceki。<br>Yifenfei的家在乡下，而Merceki的家在城市中心。因此，易芬菲与Merceki安排了在肯德基会面。宁波有很多肯德基，他们想选择一种让总时间最短的肯德基。<br>现在给您一张宁波地图，yifenfei和Merceki都可以通过成本11分钟左右上下移动到相邻的道路。</p><p>输入值</p><p>输入包含多个测试用例。<br>每个测试用例包括前两个整数n，m。（2 &lt;= n，m &lt;= 200）。<br>接下来的n行，每行包含m个字符。<br>“ Y”表示一分钱的初始职位。<br>“ M”表示Merceki的初始位置。<br>‘＃’禁止道路；<br>‘。’ 路。<br>‘@’KCF</p><p>输出量</p><p>对于每个测试用例输出，yifenfei和Merceki到达肯德基之一的最短总时间。您可以肯定总是有一个肯德基可以让他们见面。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">4 4</span><br><span class="line">Y。＃@</span><br><span class="line">....</span><br><span class="line">。＃..</span><br><span class="line">@ .. M</span><br><span class="line">4 4</span><br><span class="line">Y。＃@</span><br><span class="line">....</span><br><span class="line">。＃..</span><br><span class="line">@＃。M</span><br><span class="line">5 5</span><br><span class="line">Y .. @。</span><br><span class="line">。＃...</span><br><span class="line">。＃...</span><br><span class="line">@ .. M。</span><br><span class="line">＃...＃</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">66</span><br><span class="line">88</span><br><span class="line">66</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">char map[201][201];</span><br><span class="line">int v1[201][201];</span><br><span class="line">int v2[201][201];</span><br><span class="line">int m,n,minn;</span><br><span class="line">int dir[4][2]&#x3D;&#123;0,1,1,0,0,-1,-1,0&#125;;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int x,y;</span><br><span class="line">&#125; a,b,y,M;</span><br><span class="line">void bfs(int x,int y,int v[201][201])&#123;</span><br><span class="line">memset(v,0,4*201*201);</span><br><span class="line">a.x&#x3D;x;a.y&#x3D;y;</span><br><span class="line">queue&lt;Point&gt; q;</span><br><span class="line">q.push(a);</span><br><span class="line">v[x][y]&#x3D;1;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+dir[i][0];</span><br><span class="line">b.y&#x3D;a.y+dir[i][1];</span><br><span class="line">if(b.x&gt;&#x3D;0&amp;&amp;b.x&lt;m&amp;&amp;b.y&gt;&#x3D;0&amp;&amp;b.y&lt;n&amp;&amp;map[b.x][b.y]!&#x3D;&#39;#&#39;&amp;&amp;v[b.x][b.y]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">v[b.x][b.y]&#x3D;v[a.x][a.y]+1;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(cin&gt;&gt;m&gt;&gt;n)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;Y&#39;)</span><br><span class="line">&#123;</span><br><span class="line">y.x&#x3D;i;y.y&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;M&#39;)</span><br><span class="line">&#123;</span><br><span class="line">M.x&#x3D;i;M.y&#x3D;j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">bfs(y.x,y.y,v1);</span><br><span class="line">bfs(M.x,M.y,v2);</span><br><span class="line">minn&#x3D;1000000;</span><br><span class="line">for(int i&#x3D;0;i&lt;m;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;@&#39;&amp;&amp;v1[i][j]&amp;&amp;v2[i][j])</span><br><span class="line">&#123;</span><br><span class="line">v2[i][j]+&#x3D;v1[i][j]-2;</span><br><span class="line">if(v2[i][j]&lt;minn)</span><br><span class="line">&#123;</span><br><span class="line">minn&#x3D;v2[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;&#125;</span><br><span class="line">cout&lt;&lt;minn*11&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 两次BFS </tag>
            
            <tag> 函数数组形参 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1495</title>
      <link href="2020/02/29/HDU-1495/"/>
      <url>2020/02/29/HDU-1495/</url>
      
        <content type="html"><![CDATA[<p>搜索所有的状态，标志数组同时用于记录次数，最后减一，用i!=j的方式遍历倒法，用3-i-j得到剩余的被子杯子的可乐。网上有一份数论的做法，极为精简，以后再研究吧。路漫漫其修远兮！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="非常可乐"><a href="#非常可乐" class="headerlink" title="非常可乐"></a>非常可乐</h3><p><strong><em>\</em>Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 36161  Accepted Submission(s): 14072<br>**</strong></p><p>Problem Description</p><p>大家一定觉的运动以后喝可乐是一件很惬意的事情，但是seeyou却不这么认为。因为每次当seeyou买了可乐以后，阿牛就要求和seeyou一起分享这一瓶可乐，而且一定要喝的和seeyou一样多。但seeyou的手中只有两个杯子，它们的容量分别是N 毫升和M 毫升 可乐的体积为S （S&lt;101）毫升　(正好装满一瓶) ，它们三个之间可以相互倒可乐 (都是没有刻度的，且 S==N+M，101＞S＞0，N＞0，M＞0) 。聪明的ACMER你们说他们能平分吗？如果能请输出倒可乐的最少的次数，如果不能输出”NO”。</p><p>Input</p><p>三个整数 : S 可乐的体积 , N 和 M是两个杯子的容量，以”0 0 0”结束。</p><p>Output</p><p>如果能平分的话请输出最少要倒的次数，否则输出”NO”。</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">7 4 3</span><br><span class="line">4 1 3</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NO</span><br><span class="line">3</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>刚开始状态为0,0,s。之后模拟所有倒法共有6种，能倒的前提是本瓶子有水，被倒的瓶子有空闲容量。根据这两个的大小倒之后可能有两个状态，本瓶子空，被倒瓶子水增加；本瓶子非空，被盗瓶子满。得到倒之后的状态，判断是否到达过这个状态，没有则步数加一……</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int m,n,s;</span><br><span class="line">int v[101][101][101];</span><br><span class="line">int r[3];</span><br><span class="line">struct S&#123;</span><br><span class="line">int c[3];</span><br><span class="line">&#125; a,b;</span><br><span class="line">void bfs()&#123;</span><br><span class="line">a.c[0]&#x3D;0;</span><br><span class="line">a.c[1]&#x3D;0;</span><br><span class="line">a.c[2]&#x3D;s;</span><br><span class="line">v[0][0][s]&#x3D;1;</span><br><span class="line">queue&lt;S&gt; q;</span><br><span class="line">q.push(a);</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;3;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;3;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(i!&#x3D;j)</span><br><span class="line">&#123;</span><br><span class="line">if(a.c[i]&gt;0&amp;&amp;r[j]-a.c[j]&gt;0)</span><br><span class="line">&#123;</span><br><span class="line">if(a.c[i]&gt;&#x3D;r[j]-a.c[j])</span><br><span class="line">&#123;b.c[j]&#x3D;r[j];</span><br><span class="line">b.c[i]&#x3D;a.c[i]-r[j]+a.c[j];</span><br><span class="line">b.c[3-i-j]&#x3D;a.c[3-i-j];</span><br><span class="line">&#125; </span><br><span class="line">else</span><br><span class="line">&#123;</span><br><span class="line">b.c[i]&#x3D;0;</span><br><span class="line">b.c[j]&#x3D;a.c[j]+a.c[i];</span><br><span class="line">b.c[3-i-j]&#x3D;a.c[3-i-j];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if(v[b.c[0]][b.c[1]][b.c[2]]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">v[b.c[0]][b.c[1]][b.c[2]]&#x3D;v[a.c[0]][a.c[1]][a.c[2]]+1;</span><br><span class="line">if((b.c[0]&#x3D;&#x3D;s&#x2F;2&amp;&amp;b.c[1]&#x3D;&#x3D;s&#x2F;2)||(b.c[1]&#x3D;&#x3D;s&#x2F;2&amp;&amp;b.c[2]&#x3D;&#x3D;s&#x2F;2)||(b.c[0]&#x3D;&#x3D;s&#x2F;2&amp;&amp;b.c[2]&#x3D;&#x3D;s&#x2F;2))</span><br><span class="line">&#123;cout&lt;&lt;v[b.c[0]][b.c[1]][b.c[2]]-1&lt;&lt;endl;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;NO&quot;&lt;&lt;endl;</span><br><span class="line">&#125; </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(cin&gt;&gt;s&gt;&gt;n&gt;&gt;m&amp;&amp;m&amp;&amp;n&amp;&amp;s)</span><br><span class="line">&#123;</span><br><span class="line">if(s%2 &#x3D;&#x3D; 1)&#123;</span><br><span class="line">printf(&quot;NO\n&quot;);</span><br><span class="line">continue;</span><br><span class="line">&#125;</span><br><span class="line">memset(v,0,sizeof(v));</span><br><span class="line">r[0]&#x3D;m;</span><br><span class="line">r[1]&#x3D;n;</span><br><span class="line">r[2]&#x3D;s;</span><br><span class="line">bfs();</span><br><span class="line">&#125;</span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 倒水 </tag>
            
            <tag> 数论 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1241</title>
      <link href="2020/02/23/HDU-1241/"/>
      <url>2020/02/23/HDU-1241/</url>
      
        <content type="html"><![CDATA[<p>简单BFS，找到一个入队点将所有可达的区域置为不可达</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="油藏"><a href="#油藏" class="headerlink" title="油藏"></a>油藏</h3><p><strong><em>\</em>时间限制：2000/1000 MS（Java /其他）内存限制：65536/32768 K（Java /其他）<br>提交总数：58896接受提交：33745<br>**</strong></p><p>问题描述</p><p>GeoSurvComp地质勘测公司负责检测地下油藏。GeoSurvComp一次处理一个大矩形区域的土地，并创建一个将土地划分为多个正方形图的网格。然后，它使用传感设备分别分析每个地块，以确定该地块是否包含油。包含油的地块称为矿穴。如果两个凹坑相邻，则它们是同一油藏的一部分。积油可能很大，可能包含许多凹穴。您的工作是确定网格中包含多少种不同的油藏。 </p><p>输入值</p><p>输入文件包含一个或多个网格。每个网格均以包含m和n的行开始，网格中的行和列数为m和n，并用单个空格分隔。如果m = 0，则表示输入结束；否则，输入0。否则为1 &lt;= m &lt;= 100和1 &lt;= n &lt;=100。紧随其后的是m行，每行n个字符（不计算行尾字符）。每个字符对应一个地块，要么是代表无油的“ *”，要么是代表油囊的“ @”。</p><p>输出量</p><p>对于每个网格，输出不同的油藏数量。如果两个不同的油藏在水平，垂直或对角线上相邻，则它们是同一油藏的一部分。积油最多可容纳100个口袋。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1 1 </span><br><span class="line">* </span><br><span class="line">3 5 </span><br><span class="line">* @ * @ * </span><br><span class="line">** @ ** </span><br><span class="line">* @ * @ * </span><br><span class="line">1 8 </span><br><span class="line">@@ **** @ * </span><br><span class="line">5 5 </span><br><span class="line">**** @ </span><br><span class="line">* @@ * @ </span><br><span class="line">* @ ** @ </span><br><span class="line">@@@ * @ </span><br><span class="line">@@ ** @ </span><br><span class="line">0 0</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 </span><br><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int dir[8][2]&#x3D;&#123;1,0,-1,0,0,1,0,-1,1,1,-1,-1,1,-1,-1,1&#125;;</span><br><span class="line">char map[101][101]; </span><br><span class="line">struct Point&#123;</span><br><span class="line">int x,y;</span><br><span class="line">&#125; a,b;</span><br><span class="line">int h,l;</span><br><span class="line">void bfs(int x,int y)&#123;</span><br><span class="line">queue&lt;Point&gt; q;</span><br><span class="line">a.x&#x3D;x;</span><br><span class="line">a.y&#x3D;y;</span><br><span class="line">q.push(a);</span><br><span class="line">map[x][y]&#x3D;&#39;*&#39;;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;8;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+dir[i][0];</span><br><span class="line">b.y&#x3D;a.y+dir[i][1];</span><br><span class="line">if(b.x&gt;&#x3D;0&amp;&amp;b.x&lt;h&amp;&amp;b.y&gt;&#x3D;0&amp;&amp;b.y&lt;l&amp;&amp;map[b.x][b.y]&#x3D;&#x3D;&#39;@&#39;)</span><br><span class="line">&#123;</span><br><span class="line">map[b.x][b.y]&#x3D;&#39;*&#39;;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(cin&gt;&gt;h&gt;&gt;l&amp;&amp;h&amp;&amp;l)</span><br><span class="line">&#123;</span><br><span class="line">int sum&#x3D;0;</span><br><span class="line">for(int i&#x3D;0;i&lt;h;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;l;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;h;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;l;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;@&#39;)</span><br><span class="line">&#123;</span><br><span class="line">bfs(i,j);</span><br><span class="line">sum++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图的连通区域 </tag>
            
            <tag> 水题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>迷宫问题</title>
      <link href="2020/02/23/%E8%BF%B7%E5%AE%AB%E9%97%AE%E9%A2%98/"/>
      <url>2020/02/23/%E8%BF%B7%E5%AE%AB%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>每个节点的去向有很多，不变保存，每个点的来源只有一个，方便保存，但是是逆序的，最后要递归输出</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="迷宫问题"><a href="#迷宫问题" class="headerlink" title="迷宫问题"></a>迷宫问题</h3><p>定义一个二维数组：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">int maze[5][5] &#x3D; &#123;</span><br><span class="line">0, 1, 0, 0, 0,</span><br><span class="line">0, 1, 0, 1, 0,</span><br><span class="line">0, 0, 0, 0, 0,</span><br><span class="line">0, 1, 1, 1, 0,</span><br><span class="line">0, 0, 0, 1, 0,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>它表示一个迷宫，其中的1表示墙壁，0表示可以走的路，只能横着走或竖着走，不能斜着走，要求编程序找出从左上角到右下角的最短路线。</p><p>Input</p><p>一个5 × 5的二维数组，表示一个迷宫。数据保证有唯一解。</p><p>Output</p><p>左上角到右下角的最短路径，格式如样例所示。</p><h4 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0 1 0 0 0</span><br><span class="line">0 1 0 1 0</span><br><span class="line">0 0 0 0 0</span><br><span class="line">0 1 1 1 0</span><br><span class="line">0 0 0 1 0</span><br></pre></td></tr></table></figure><h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(0, 0)</span><br><span class="line">(1, 0)</span><br><span class="line">(2, 0)</span><br><span class="line">(2, 1)</span><br><span class="line">(2, 2)</span><br><span class="line">(2, 3)</span><br><span class="line">(2, 4)</span><br><span class="line">(3, 4)</span><br><span class="line">(4, 4)</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>用另外一个和map一样大小的数组保存该点的上一个点的坐标，然后递归输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std; </span><br><span class="line">int dir[4][2]&#x3D;&#123;1,0,-1,0,0,1,0,-1&#125;;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int x;</span><br><span class="line">int y;</span><br><span class="line">&#125; a,b,point[5][5];</span><br><span class="line">int map[5][5];</span><br><span class="line">void printxy(int x,int y)</span><br><span class="line">&#123;</span><br><span class="line">if(x&#x3D;&#x3D;-1&amp;&amp;y&#x3D;&#x3D;-1)</span><br><span class="line">return ;</span><br><span class="line">printxy(point[x][y].x,point[x][y].y);</span><br><span class="line">cout&lt;&lt;&quot;(&quot;&lt;&lt;x&lt;&lt;&quot;, &quot;&lt;&lt;y&lt;&lt;&quot;)&quot;&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">void bfs()</span><br><span class="line">&#123;</span><br><span class="line">queue&lt;Point&gt; q;</span><br><span class="line">a.x&#x3D;0;</span><br><span class="line">a.y&#x3D;0;</span><br><span class="line">q.push(a);</span><br><span class="line">map[0][0]&#x3D;1;</span><br><span class="line">point[0][0].x&#x3D;-1;</span><br><span class="line">point[0][0].y&#x3D;-1;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+dir[i][0];</span><br><span class="line">b.y&#x3D;a.y+dir[i][1];</span><br><span class="line">if(b.x&gt;&#x3D;0&amp;&amp;b.x&lt;5&amp;&amp;b.y&gt;&#x3D;0&amp;&amp;b.y&lt;5&amp;&amp;map[b.x][b.y]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">map[b.x][b.y]&#x3D;1;</span><br><span class="line">point[b.x][b.y].x&#x3D;a.x;</span><br><span class="line">point[b.x][b.y].y&#x3D;a.y;</span><br><span class="line">if(b.x&#x3D;&#x3D;4&amp;&amp;b.y&#x3D;&#x3D;4)</span><br><span class="line">&#123;</span><br><span class="line">printxy(4,4);</span><br><span class="line">&#125;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">for(int i&#x3D;0;i&lt;5;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;5;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">bfs();</span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 输出路径 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UVA-11624</title>
      <link href="2020/02/23/UVA-11624/"/>
      <url>2020/02/23/UVA-11624/</url>
      
        <content type="html"><![CDATA[<p>一个BFS，多个入口，char的表示范围[0,127]，本来可以不用标志数组的，节省空间，但奈何char表示不了比较大的数</p><a id="more"></a><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><h3 id="火场逃生"><a href="#火场逃生" class="headerlink" title="火场逃生"></a>火场逃生</h3><p>一个矩阵中有一个人，用J表示，可以向上下左右走。有多个起火点，用F表示。#表示墙，.表示人可以行走的地方。要求是逃出这个矩阵即可，输出逃出这个矩阵的最短时间，如果不能逃出这个矩阵输出IMPOSSIBEL</p><h4 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">4 4</span><br><span class="line">#### </span><br><span class="line">#JF# </span><br><span class="line">#..# </span><br><span class="line">#..# </span><br><span class="line">3 3 </span><br><span class="line">### </span><br><span class="line">#J. </span><br><span class="line">#.F</span><br></pre></td></tr></table></figure><h4 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3 </span><br><span class="line">IMPOSSIBLE</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="单个BFS"><a href="#单个BFS" class="headerlink" title="单个BFS"></a>单个BFS</h3><p>火场逃生是一个连续的过程，同时有火的蔓延和人的移动。但可以将这个连续的过程分割，比如人先走一步，火再蔓延一步，人再走一步，火再蔓延一步······。可是既然是同时发生的，谁先谁后呢？肯定是人先火后了，因为这样不会改变的火场逃生的结果。不然火先的话，假设火和人差一步，火先的话人就死了，火场逃生的结果就不符合事实。人先火后的话问题就变得简单起来了，因为人要先行，所以人必须先入队(同时将该点的J，改变为K)，然后才是各个火种的入队。进入循环，取队首，队首出队，判断这个队首是火(火的话就是’F‘)还是人(&gt;=’K’)，如果是人，判断走完下一步是否走出矩阵，如果走出，则直接保存一下时间(这个时间的基数为’K‘，最后要减去’K‘)然后return，否则将这个点可达的’.’置为队首加一(没错，这是一个字符数组，但char和int在[0,127]互通,这也是为什么失败的原因)，可达点入队；如果是火，则将火的可达点(不是火并且不是墙)置为F，可达点入队……循环往复</p><p><strong>失败原因：char能表示的int为[0,127]，再加上基数为’K‘，能表示的时间就更短了，无奈溢出。。。。</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">int h,l,startx,starty,firex,firey,mintime;</span><br><span class="line">int dir[4][2]&#x3D;&#123;1,0,-1,0,0,1,0,-1&#125;;</span><br><span class="line">char map[1001][1001];</span><br><span class="line">using namespace std;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int x;</span><br><span class="line">int y;</span><br><span class="line">&#125; a,b;</span><br><span class="line">queue&lt;Point&gt; q;</span><br><span class="line">void bfs()&#123;</span><br><span class="line">mintime&#x3D;0;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+dir[i][0];</span><br><span class="line">b.y&#x3D;a.y+dir[i][1];</span><br><span class="line">if(map[a.x][a.y]&gt;&#x3D;&#39;K&#39;)</span><br><span class="line">&#123;</span><br><span class="line">if(b.x&lt;0||b.x&gt;&#x3D;h||b.y&lt;0||b.y&gt;&#x3D;l)</span><br><span class="line">&#123;</span><br><span class="line">mintime&#x3D;map[a.x][a.y]+1-&#39;K&#39;;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">else if(map[b.x][b.y]&#x3D;&#x3D;&#39;.&#39;)</span><br><span class="line">&#123;</span><br><span class="line">map[b.x][b.y]&#x3D;map[a.x][a.y]+1;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(map[a.x][a.y]&#x3D;&#x3D;&#39;F&#39;&amp;&amp;b.x&gt;&#x3D;0&amp;&amp;b.x&lt;h&amp;&amp;b.y&gt;&#x3D;0&amp;&amp;b.y&lt;l&amp;&amp;map[b.x][b.y]!&#x3D;&#39;F&#39;&amp;&amp;map[b.x][b.y]!&#x3D;&#39;#&#39;)</span><br><span class="line">&#123;</span><br><span class="line">map[b.x][b.y]&#x3D;&#39;F&#39;;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">   &#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line"> int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">while(n--)</span><br><span class="line">&#123;</span><br><span class="line">while(!q.empty()) q.pop();</span><br><span class="line">cin&gt;&gt;h&gt;&gt;l;</span><br><span class="line">for(int i&#x3D;0;i&lt;h;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;l;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;J&#39;)</span><br><span class="line">&#123;</span><br><span class="line">startx&#x3D;i;</span><br><span class="line">starty&#x3D;j;</span><br><span class="line">a.x&#x3D;startx;</span><br><span class="line">a.y&#x3D;starty;</span><br><span class="line">map[a.x][a.y]&#x3D;&#39;K&#39;;</span><br><span class="line">q.push(a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;h;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;l;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;F&#39;)</span><br><span class="line">&#123;</span><br><span class="line">firex&#x3D;i;</span><br><span class="line">firey&#x3D;j;</span><br><span class="line">a.x&#x3D;firex;</span><br><span class="line">a.y&#x3D;firey;</span><br><span class="line">q.push(a);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">bfs();</span><br><span class="line">if(mintime&#x3D;&#x3D;0)</span><br><span class="line">cout&lt;&lt;&quot;IMPOSSIBLE&quot;&lt;&lt;endl;</span><br><span class="line">else</span><br><span class="line">cout&lt;&lt;mintime&lt;&lt;endl;</span><br><span class="line">&#125; </span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这个在UVA上有debug功能，这个算法通过了所有的测试，但还是WA了，<strong>追求完美是每个人的向往，我看到这个题发现地图，标志数组，记录时间的数组可以共用一个，所以写出了上面的代码。</strong>知道失败的原因就好改了，记录时间的数组少不了。同时我也将标志数组和记录时间的数组共用一个(这是我的习惯，可以去看看我其他的BFS，其实大部分都是可以共用的)，于是有了下面的代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">int h,l,mintime;</span><br><span class="line">int dir[4][2]&#x3D;&#123;1,0,-1,0,0,1,0,-1&#125;;</span><br><span class="line">char map[1001][1001];</span><br><span class="line">int v[1001][1001];</span><br><span class="line">using namespace std;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int x;</span><br><span class="line">int y;</span><br><span class="line">&#125; a,b;</span><br><span class="line">queue&lt;Point&gt; q;</span><br><span class="line">void bfs()&#123;</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;4;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+dir[i][0];</span><br><span class="line">b.y&#x3D;a.y+dir[i][1];</span><br><span class="line">if(map[a.x][a.y]&#x3D;&#x3D;&#39;.&#39;)</span><br><span class="line">&#123;</span><br><span class="line">if(b.x&lt;0||b.x&gt;&#x3D;h||b.y&lt;0||b.y&gt;&#x3D;l)</span><br><span class="line">&#123;</span><br><span class="line">mintime&#x3D;v[a.x][a.y]+1-1;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">else if(map[b.x][b.y]&#x3D;&#x3D;&#39;.&#39;&amp;&amp;v[b.x][b.y]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">v[b.x][b.y]&#x3D;v[a.x][a.y]+1;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(map[a.x][a.y]&#x3D;&#x3D;&#39;F&#39;&amp;&amp;b.x&gt;&#x3D;0&amp;&amp;b.x&lt;h&amp;&amp;b.y&gt;&#x3D;0&amp;&amp;b.y&lt;l&amp;&amp;map[b.x][b.y]!&#x3D;&#39;F&#39;&amp;&amp;map[b.x][b.y]!&#x3D;&#39;#&#39;)</span><br><span class="line">&#123;</span><br><span class="line">map[b.x][b.y]&#x3D;&#39;F&#39;;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line"> int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">while(n--)</span><br><span class="line">&#123;</span><br><span class="line">mintime&#x3D;0;</span><br><span class="line">memset(v,0,sizeof(v));</span><br><span class="line">while(!q.empty()) q.pop();</span><br><span class="line">cin&gt;&gt;h&gt;&gt;l;</span><br><span class="line">for(int i&#x3D;0;i&lt;h;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;l;j++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;map[i][j];</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;J&#39;)</span><br><span class="line">&#123;</span><br><span class="line">a.x&#x3D;i;</span><br><span class="line">a.y&#x3D;j;</span><br><span class="line">v[a.x][a.y]&#x3D;1;</span><br><span class="line">map[a.x][a.y]&#x3D;&#39;.&#39;;</span><br><span class="line">q.push(a);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;h;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;l;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(map[i][j]&#x3D;&#x3D;&#39;F&#39;)</span><br><span class="line">&#123;</span><br><span class="line">a.x&#x3D;i;</span><br><span class="line">a.y&#x3D;j;</span><br><span class="line">q.push(a);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">bfs();</span><br><span class="line">if(mintime&#x3D;&#x3D;0)</span><br><span class="line">cout&lt;&lt;&quot;IMPOSSIBLE&quot;&lt;&lt;endl;</span><br><span class="line">else</span><br><span class="line">cout&lt;&lt;mintime&lt;&lt;endl;</span><br><span class="line">&#125; </span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="双BFS"><a href="#双BFS" class="headerlink" title="双BFS"></a>双BFS</h3><p>这也是一个方法，分为火的BFS和人的BFS，先算火的BFS，记录火到达每一个点的时间，然后再算人的BFS，加一个条件，人必须要比火先到才能走下一步，不过我没写代码</p>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 妙用标志数组 </tag>
            
            <tag> 多入口BFS </tag>
            
            <tag> 火场逃生 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-3126</title>
      <link href="2020/02/22/POJ-3126/"/>
      <url>2020/02/22/POJ-3126/</url>
      
        <content type="html"><![CDATA[<p>4位数素数共1061个，如果m个条件，其中固定a个条件成立，b个条件不成立，a+b=m，则可以列出这些条件，令它们的和为a</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="主要路径"><a href="#主要路径" class="headerlink" title="主要路径"></a>主要路径</h3><table><thead><tr><th><strong>时限：</strong> 1000MS</th><th></th><th><strong>内存限制：</strong> 65536K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 37988</td><td></td><td><strong>接受：</strong> 20286</td></tr></tbody></table><p><strong>就是给两个四位数素数a,b，每次只能变化a中个位十位百位千位其中的一位，问经过多少次变化可以a可以变成b</strong></p><blockquote><p>1033<br>1733<br>3733<br>3739<br>3779<br>8779<br>8179</p></blockquote><p>该解决方案的成本为6磅。请注意，在步骤2中粘贴的数字1不能在最后一步中重复使用-必须购买新的1。</p><p>输入值</p><p>一行带有正数：测试用例的数量（最多100个）。然后，对于每个测试用例，用两个数字用空格分隔的一行。这两个数字都是四位数的质数（无前导零）。</p><p>输出量</p><p>每种情况下一行，或者用数字表示最低费用，或者包含“不可能”一词。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1033 8179</span><br><span class="line">1373 8017</span><br><span class="line">1033 1033</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">7</span><br><span class="line">0</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>对素数进行打表，利用标志数组记录步数(基数为1，最终结果-1)，利用逻辑相加保证只有一位变化，比如找相比于a只有一位变化的数字，遍历素数数组p，(p[i]%10==g)+(p[i]/10%10==s)+(p[i]/100%10==ba)+(p[i]/1000==qi))==3就能保证只有一位发生变化，其中g,s,ba,qi分别为a的个，十，百，千位。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int a,b,minn&#x3D;1000000;</span><br><span class="line">int p[1062];</span><br><span class="line">int pp[1062];</span><br><span class="line">void bfs(int k)</span><br><span class="line">&#123;</span><br><span class="line">pp[k]&#x3D;1;</span><br><span class="line">queue&lt;int&gt; q;</span><br><span class="line">q.push(k);</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">int w&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">int g,s,ba,qi;</span><br><span class="line">g&#x3D;p[w]%10;</span><br><span class="line">s&#x3D;p[w]&#x2F;10%10;</span><br><span class="line">ba&#x3D;p[w]&#x2F;100%10;</span><br><span class="line">qi&#x3D;p[w]&#x2F;1000;</span><br><span class="line">for(int i&#x3D;1;i&lt;1062;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(((p[i]%10&#x3D;&#x3D;g)+(p[i]&#x2F;10%10&#x3D;&#x3D;s)+(p[i]&#x2F;100%10&#x3D;&#x3D;ba)+(p[i]&#x2F;1000&#x3D;&#x3D;qi))&#x3D;&#x3D;3&amp;&amp;pp[i]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">pp[i]&#x3D;pp[w]+1;</span><br><span class="line">if(p[i]&#x3D;&#x3D;b)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;pp[i]-1&lt;&lt;endl;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">q.push(i);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">    int qq&#x3D;0,j;</span><br><span class="line">  for(int i&#x3D;1000;i&lt;&#x3D;9999;i++)</span><br><span class="line">  &#123;</span><br><span class="line">  int sq&#x3D;sqrt(i);</span><br><span class="line">  for(j&#x3D;2;j&lt;&#x3D;sq;j++)</span><br><span class="line">  &#123;</span><br><span class="line">  if(i%j&#x3D;&#x3D;0)</span><br><span class="line">  break;</span><br><span class="line">  &#125;</span><br><span class="line">  if(j&lt;&#x3D;sq) continue;</span><br><span class="line">  qq++;</span><br><span class="line">  &#x2F;&#x2F;cout&lt;&lt;i&lt;&lt;&quot;   &quot;&lt;&lt;q&lt;&lt;endl;</span><br><span class="line">  p[qq]&#x3D;i;</span><br><span class="line">  &#125;</span><br><span class="line">  int n;</span><br><span class="line">  cin&gt;&gt;n;</span><br><span class="line">  while(n--)</span><br><span class="line">  &#123;</span><br><span class="line">  int r;</span><br><span class="line">  cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">  if(a&#x3D;&#x3D;b)</span><br><span class="line">  &#123;</span><br><span class="line">  cout&lt;&lt;0&lt;&lt;endl;</span><br><span class="line">  continue;</span><br><span class="line">  &#125;</span><br><span class="line">  memset(pp,0,sizeof(pp));</span><br><span class="line">  for(r&#x3D;1;r&lt;1062;r++)</span><br><span class="line">  if(p[r]&#x3D;&#x3D;a)</span><br><span class="line">  &#123;</span><br><span class="line">  break;</span><br><span class="line">  &#125;</span><br><span class="line">  pp[r]&#x3D;1;</span><br><span class="line">  bfs(r);</span><br><span class="line"> &#x2F;&#x2F; cout&lt;&lt;minn-1&lt;&lt;endl;</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;1&#x3D;&#x3D;1+</span><br><span class="line">  &#125;</span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 标志数组妙用 </tag>
            
            <tag> 素数打表 </tag>
            
            <tag> 逻辑相加妙用 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-1426</title>
      <link href="2020/02/21/POJ-1426/"/>
      <url>2020/02/21/POJ-1426/</url>
      
        <content type="html"><![CDATA[<p>代码是从网上抄下来的，我之前想过这个思路，但是被我否决了，否决的原因有两点，1.无法判断从小到大的每一种01组合对n取余是不是0？2.题目中说解的长度不超过100位，我无法判断解的最短长度的最大值。虽然AC了，但是网上的答案还是没有解决第二个问题，不知道他们是怎么确定答案在32位数以内</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="寻找多重"><a href="#寻找多重" class="headerlink" title="寻找多重"></a>寻找多重</h3><table><thead><tr><th><strong>时限：</strong> 1000MS</th><th></th><th><strong>内存限制：</strong> 10000K</th><th></th><th></th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 56332</td><td></td><td><strong>接受：</strong> 23292</td><td></td><td>特别法官</td></tr></tbody></table><p>描述</p><p>给定正整数n，编写一个程序以找出n的非零倍数m，其十进制表示形式仅包含数字0和1。您可以假定n不大于200，并且对应的m包含不超过100十进制数字。</p><p>输入值</p><p>输入文件可能包含多个测试用例。每行包含一个值n（1 &lt;= n &lt;= 200）。包含零的行将终止输入。</p><p>输出量</p><p>对于输入中n的每个值，打印一行包含m的对应值。m的十进制表示形式不能超过100个数字。如果给定值n有多个解，则其中任何一个都是可接受的。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">6</span><br><span class="line">19</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">100100100100100100</span><br><span class="line">111111111111111111</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>具体步骤就是二进制枚举，将一个整形的二进制表示十进制,注意是表示不是转换，例如11(二进制)=3(十进制)，这是转换，3(十进制)=11(二进制)表示为11(十进制)，这是表示。一个整形表示的范围为0<del>(2^31-1)，也就是二进制000,001,010,011,100</del>111(这只是3位，应该是31位)，这些01串正是从小到大的遍历。</p>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 二进制 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 同余定理 </tag>
            
            <tag> 二进制表示十进制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-3279</title>
      <link href="2020/02/20/POJ-3279/"/>
      <url>2020/02/20/POJ-3279/</url>
      
        <content type="html"><![CDATA[<p>本来想DFS的，但是复杂度太高了。第一次遇到这种开关类问题，关键就是要找唯一点，比如本题，要翻转一个色块有5种选择，砍掉四个，只留下最下面的一个选择。这样如果此色块为黑色，则下面的色块必须翻转；为白则必须不翻转</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="翻板"><a href="#翻板" class="headerlink" title="翻板"></a>翻板</h3><table><thead><tr><th><strong>时限：</strong> 2000MS</th><th></th><th><strong>内存限制：</strong> 65536K</th></tr></thead><tbody><tr><td><strong>提交总数：</strong> 25631</td><td></td><td><strong>接受的：</strong> 9075</td></tr></tbody></table><p>描述</p><p>农夫约翰知道，一头知识上满意的母牛是一头快乐的母牛，它将提供更多的牛奶。他已安排一个聪明的活动中，他们操纵奶牛<em>中号</em> × <em>Ñ</em>栅格（1≤ <em>中号</em> ≤15; 1≤ <em>ñ</em> ≤15）正方形瓷砖，其中的每一个着色为黑色的一侧和白色的另一侧。</p><p>就像人们猜测的那样，当翻转单个白色图块时，它会变为黑色。翻转单个黑色图块时，它将变为白色。母牛在翻转砖块时会得到奖励，因此每块砖块的白色侧面都朝上。但是，母牛的蹄子相当大，当他们尝试翻转特定的瓷砖时，它们也会翻转所有相邻的瓷砖（与翻转的瓷砖共享完整边缘的瓷砖）。由于翻转很累，奶牛希望尽量减少翻转次数。</p><p>帮助奶牛确定所需的最小翻转次数，以及达到该最小翻转的位置。如果有多种方法可以以最小的翻转次数来完成任务，则当将其视为字符串时，以输出中词典顺序最少的方式返回。如果无法完成任务，请用“ IMPOSSIBLE”一词打印一行。</p><p>输入值</p><p>第1行：两个以空格分隔的整数：<em>M</em>和<em>N</em><br>第2行<em>。M</em> +1：第<em>i</em> +1行描述了网格第i行的颜色（从左到右），其中<em>N个以</em>空格分隔的整数，黑色和1为黑色。 0代表白色</p><p>输出量</p><p>第1 .. <em>M</em>行：每行包含<em>N个以</em>空格分隔的整数，每个整数指定翻转该特定位置的次数。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">4 4</span><br><span class="line">1 0 0 1</span><br><span class="line">0 1 1 0</span><br><span class="line">0 1 1 0</span><br><span class="line">1 0 0 1</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 0 0 0</span><br><span class="line">1 0 0 1</span><br><span class="line">1 0 0 1</span><br><span class="line">0 0 0 0</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>该游戏不受步骤的影响，没有翻转的先后顺序，因为某一个色块被翻转的总和跟翻转的顺序没有关系，总和不变，颜色就不变，所以对于一个色块翻转两次没有意义。假设现在已经知道最优解的第一行要翻转哪几个色块(指的是中心色块，不是周围被翻转的四个)，那么将这几个色块根据规则翻转后，对于第一行的黑色块，它下面的色块(第二行)必须被翻转，因为对于这个黑色块而言，能够改变它颜色的邻居四个中只有下面的能翻转(上面没有色块，左右色块不能翻转，因为你已经将最优解中第一行的的翻转色块翻转完了)；同理第一行白色块下面必须不能翻转，这样就能确定第二行色块的翻转情况，将第二行翻转后，又回到第一行最优解翻转后的情况….。重复这个过程。所以如果知道第一行的翻转情况，就能知道整体的翻转情况。现在的问题是我们不知道最优解第一行的翻转情况，那么就需要枚举了，枚举第一行的翻转情况(最多2^n)，取最优即可，需要注意的是如果最后一行翻转后还有黑色，则此种第一行的分布不能得出解，因为最后一行没有能改变的选择了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int c,k,sum,minn;</span><br><span class="line">bool qipan[16][16],zturn[16][16],turn[16][16]; </span><br><span class="line">int lujing[5][2]&#x3D;&#123;0,0,0,1,0,-1,1,0,-1,0&#125;;</span><br><span class="line">bool getcolor(int a,int b)</span><br><span class="line">&#123;</span><br><span class="line">int turn_sum&#x3D;qipan[a][b];</span><br><span class="line">for(int i&#x3D;0;i&lt;5;i++)</span><br><span class="line">&#123;</span><br><span class="line">int x&#x3D;a+lujing[i][0];</span><br><span class="line">int y&#x3D;b+lujing[i][1];</span><br><span class="line">if(x&gt;&#x3D;0&amp;&amp;x&lt;c&amp;&amp;y&gt;&#x3D;0&amp;&amp;y&lt;k)</span><br><span class="line">turn_sum+&#x3D;turn[x][y];</span><br><span class="line">&#125;</span><br><span class="line">return turn_sum%2;</span><br><span class="line">&#125;</span><br><span class="line">void cal()</span><br><span class="line">&#123;</span><br><span class="line">for(int q&#x3D;1;q&lt;c;q++)</span><br><span class="line">   for(int w&#x3D;0;w&lt;k;w++)</span><br><span class="line">   &#123;</span><br><span class="line">   if(getcolor(q-1,w))</span><br><span class="line">   &#123;</span><br><span class="line">   turn[q][w]&#x3D;1;</span><br><span class="line">   sum++;</span><br><span class="line">   if(sum&gt;&#x3D;minn) return;</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   for(int e&#x3D;0;e&lt;k;e++)</span><br><span class="line">   if(getcolor(c-1,e))</span><br><span class="line">   return ;</span><br><span class="line">   if(sum&lt;minn)</span><br><span class="line">   &#123;</span><br><span class="line">   minn&#x3D;sum;</span><br><span class="line">   memcpy(zturn,turn,sizeof(turn));</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">   while(cin&gt;&gt;c&gt;&gt;k)</span><br><span class="line">   &#123;</span><br><span class="line">   for(int i&#x3D;0;i&lt;c;i++)</span><br><span class="line">   for(int j&#x3D;0;j&lt;k;j++)</span><br><span class="line">cin&gt;&gt;qipan[i][j];</span><br><span class="line">minn&#x3D;0x3f3f3f3f;</span><br><span class="line">   for(int i&#x3D;0;i&lt;1&lt;&lt;k;i++)</span><br><span class="line">   &#123;</span><br><span class="line">   sum&#x3D;0;</span><br><span class="line">memset(turn,0,sizeof(turn));</span><br><span class="line">   for(int j&#x3D;0;j&lt;k;j++)</span><br><span class="line">   &#123;</span><br><span class="line">   turn[0][k-1-j]&#x3D;(i&gt;&gt;j)&amp;1;</span><br><span class="line">   if(turn[0][k-1-j]&#x3D;&#x3D;1)</span><br><span class="line">   sum++;</span><br><span class="line">   &#125;</span><br><span class="line">   cal();</span><br><span class="line">   &#125;</span><br><span class="line">   if(minn&#x3D;&#x3D;0x3f3f3f3f)</span><br><span class="line">   cout&lt;&lt;&quot;IMPOSSIBLE&quot;&lt;&lt;endl;</span><br><span class="line">   else</span><br><span class="line">   &#123;</span><br><span class="line"> for(int i&#x3D;0;i&lt;c;i++)</span><br><span class="line"> &#123;</span><br><span class="line">for(int j&#x3D;0;j&lt;k;j++)</span><br><span class="line">cout&lt;&lt;zturn[i][j]&lt;&lt;&quot; &quot;;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line"> &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 开关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 翻转游戏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-2717 POJ-3278</title>
      <link href="2020/02/19/HDU-2717-POJ-3278/"/>
      <url>2020/02/19/HDU-2717-POJ-3278/</url>
      
        <content type="html"><![CDATA[<p>太坑了，题中没有标明有多个测试用例，如果只输入一次，POJ可以通过，HDU必需用<code>while(cin&gt;&gt;n&gt;&gt;k)</code>,并且POJ有一个测试用例是起点和终点一起，所以bfs的开始就要判断起点和终点是否相同，每一次入队前都要判断起点和终点是否相同，如果为了省代码出队判断是否为终点，牺牲了太多时间(多处理了太多点)，我非常不推荐</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="赶上那头牛"><a href="#赶上那头牛" class="headerlink" title="赶上那头牛"></a>赶上那头牛</h3><p><strong><em>\</em>时间限制：5000/2000 MS（Java /其他）内存限制：32768/32768 K（Java /其他）<br>总计提交：28511已接受提交：7809<br>**</strong></p><p>问题描述</p><p>农夫约翰已被告知一头逃犯的位置，并希望立即抓住她。他从数字线上的点N（0≤N≤100,000）开始，而母牛在同一数字线上的点K（0≤K≤100,000）。农夫约翰有两种运输方式：步行和传送。</p><p>*行走：FJ可以在一分钟内从任意点X移至点X-1或X + 1。<br>*传送：FJ可以在一分钟内从任意点X移至点2×X。</p><p>如果没有意识到它的追捕能力的母牛完全没有动弹，那么农夫约翰要花多长时间？</p><p>输入值</p><p>第1行：两个以空格分隔的整数：N和K</p><p>输出量</p><p>第1行：最短的时间（以分钟为单位），农夫John赶上了逃亡的母牛。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">5 17</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line"></span><br><span class="line">暗示农夫约翰到达逃亡者牛的最快方法是沿着以下路径移动：5-10-9-18-17，这需要4分钟。</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int n,k;</span><br><span class="line">int zhou[100001];</span><br><span class="line">int a,b;</span><br><span class="line">bool judge(int w)</span><br><span class="line">&#123;</span><br><span class="line">    if(w&gt;&#x3D;0&amp;&amp;w&lt;&#x3D;100000&amp;&amp;zhou[w]&#x3D;&#x3D;0)</span><br><span class="line">    return 1;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line">void bfs()&#123;</span><br><span class="line">    if(n&#x3D;&#x3D;k)&#123;</span><br><span class="line">        cout&lt;&lt;0&lt;&lt;endl;</span><br><span class="line">        return ;</span><br><span class="line">    &#125;</span><br><span class="line">    memset(zhou,0,sizeof(zhou));</span><br><span class="line">    zhou[n]&#x3D;1;</span><br><span class="line">    queue&lt;int&gt; q;</span><br><span class="line">    q.push(n);</span><br><span class="line">    while(!q.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        a&#x3D;q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        for(int i&#x3D;0;i&lt;3;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            if(i&#x3D;&#x3D;0) b&#x3D;a-1;</span><br><span class="line">            else if(i&#x3D;&#x3D;1) b&#x3D;a+1;</span><br><span class="line">            else b&#x3D;2*a;</span><br><span class="line">        &#x2F;&#x2F;if(b&lt;0||b&gt;100000) continue;</span><br><span class="line">        &#x2F;&#x2F;    if(zhou[b]&#x3D;&#x3D;0)</span><br><span class="line">        if(judge(b))</span><br><span class="line">            &#123;</span><br><span class="line">                zhou[b]&#x3D;zhou[a]+1;</span><br><span class="line">                if(b&#x3D;&#x3D;k)</span><br><span class="line">                &#123;</span><br><span class="line">                    cout&lt;&lt;zhou[b]-1&lt;&lt;endl;</span><br><span class="line">                    return ;</span><br><span class="line">                &#125;</span><br><span class="line">                q.push(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">    while(cin&gt;&gt;n&gt;&gt;k)</span><br><span class="line">    &#123;</span><br><span class="line">    if(k&lt;&#x3D;n) cout&lt;&lt;n-k&lt;&lt;endl;</span><br><span class="line">    else bfs();</span><br><span class="line">    &#125;</span><br><span class="line">    return 0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 标志数组妙用 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-2251</title>
      <link href="2020/02/19/POJ-2251/"/>
      <url>2020/02/19/POJ-2251/</url>
      
        <content type="html"><![CDATA[<p>无论是BFS还是DFS都需要一个标志数组来防止无意义的重复路径访问，并不是只能访问一次，有些迷宫会有加血或者加时间的设定。但有些仅仅是简单的只能访问一次，这样只能用到数组的01两个状态，如果有别的属性值(例如时间等)也可以放到标志数组中(前提是不能有乘除运算)，但是如果这样设定，起点初始化为被访问过，置1，这样有些时间就整体提升了1，所以在最后要减去1。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="Dungeon-Master"><a href="#Dungeon-Master" class="headerlink" title="Dungeon Master"></a>Dungeon Master</h3><table><thead><tr><th><strong>Time Limit:</strong> 1000MS</th><th></th><th><strong>Memory Limit:</strong> 65536K</th></tr></thead><tbody><tr><td><strong>Total Submissions:</strong> 68475</td><td></td><td><strong>Accepted:</strong> 24773</td></tr></tbody></table><p>Description</p><p>You are trapped in a 3D dungeon and need to find the quickest way out! The dungeon is composed of unit cubes which may or may not be filled with rock. It takes one minute to move one unit north, south, east, west, up or down. You cannot move diagonally and the maze is surrounded by solid rock on all sides.</p><p>Is an escape possible? If yes, how long will it take?</p><p>Input</p><p>The input consists of a number of dungeons. Each dungeon description starts with a line containing three integers L, R and C (all limited to 30 in size).<br>L is the number of levels making up the dungeon.<br>R and C are the number of rows and columns making up the plan of each level.<br>Then there will follow L blocks of R lines each containing C characters. Each character describes one cell of the dungeon. A cell full of rock is indicated by a ‘#’ and empty cells are represented by a ‘.’. Your starting position is indicated by ‘S’ and the exit by the letter ‘E’. There’s a single blank line after each level. Input is terminated by three zeroes for L, R and C.</p><p>Output</p><p>Each maze generates one line of output. If it is possible to reach the exit, print a line of the form</p><blockquote><p>Escaped in x minute(s).</p></blockquote><p>where x is replaced by the shortest time it takes to escape.<br>If it is not possible to escape, print the line</p><blockquote><p>Trapped!</p></blockquote><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">3 4 5</span><br><span class="line">S....</span><br><span class="line">.###.</span><br><span class="line">.##..</span><br><span class="line">###.#</span><br><span class="line"></span><br><span class="line">#####</span><br><span class="line">#####</span><br><span class="line">##.##</span><br><span class="line">##...</span><br><span class="line"></span><br><span class="line">#####</span><br><span class="line">#####</span><br><span class="line">#.###</span><br><span class="line">####E</span><br><span class="line"></span><br><span class="line">1 3 3</span><br><span class="line">S##</span><br><span class="line">#E#</span><br><span class="line">###</span><br><span class="line"></span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Escaped in 11 minute(s).</span><br><span class="line">Trapped!</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>这个题也可以不将起点置1，这样起点就可以访问两次(访问第二次后就不能再次访问)，对本题没有什么影响，因为本题的起点终点一定不会重合，但我实在不提倡这种做法</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">#include &lt;queue&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">char migong[31][31][31];</span><br><span class="line">int visit[31][31][31];</span><br><span class="line">int l,r,c;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int x,y,z;</span><br><span class="line">&#125; qi,zhong,a,b;</span><br><span class="line">int lujing[6][3]&#x3D;&#123;1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1&#125;;</span><br><span class="line">void bfs()&#123;</span><br><span class="line">queue&lt;Point&gt; q;</span><br><span class="line">a&#x3D;qi;</span><br><span class="line">if(a.x&#x3D;&#x3D;zhong.x&amp;&amp;a.y&#x3D;&#x3D;zhong.y&amp;&amp;a.z&#x3D;&#x3D;zhong.z) &#123;cout&lt;&lt;&quot;Escaped in 0 minute(s).&quot;&lt;&lt;endl;return ;</span><br><span class="line">&#125;</span><br><span class="line">memset(visit,0,sizeof(visit));</span><br><span class="line">visit[a.x][a.y][a.z]&#x3D;1;</span><br><span class="line">q.push(a);</span><br><span class="line">while(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">for(int i&#x3D;0;i&lt;6;i++)</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+lujing[i][0];</span><br><span class="line">b.y&#x3D;a.y+lujing[i][1];</span><br><span class="line">b.z&#x3D;a.z+lujing[i][2];</span><br><span class="line">if(b.x&gt;&#x3D;1&amp;&amp;b.x&lt;&#x3D;l&amp;&amp;b.y&gt;&#x3D;1&amp;&amp;b.y&lt;&#x3D;r&amp;&amp;b.z&gt;&#x3D;1&amp;&amp;b.z&lt;&#x3D;c&amp;&amp;migong[b.x][b.y][b.z]!&#x3D;&#39;#&#39;&amp;&amp;visit[b.x][b.y][b.z]&#x3D;&#x3D;0)</span><br><span class="line">&#123;</span><br><span class="line">visit[b.x][b.y][b.z]&#x3D;visit[a.x][a.y][a.z]+1;</span><br><span class="line">if(b.x&#x3D;&#x3D;zhong.x&amp;&amp;b.y&#x3D;&#x3D;zhong.y&amp;&amp;b.z&#x3D;&#x3D;zhong.z)&#123;</span><br><span class="line">cout&lt;&lt;&quot;Escaped in &quot;&lt;&lt;visit[b.x][b.y][b.z]-1&lt;&lt;&quot; minute(s).&quot;&lt;&lt;endl;return ;</span><br><span class="line">&#125;</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;&quot;Trapped!&quot;&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(cin&gt;&gt;l&gt;&gt;r&gt;&gt;c&amp;&amp;l&amp;&amp;r&amp;&amp;c)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;l;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;r;j++)</span><br><span class="line">&#123;</span><br><span class="line">for(int k&#x3D;1;k&lt;&#x3D;c;k++)</span><br><span class="line">&#123;</span><br><span class="line">cin&gt;&gt;migong[i][j][k];</span><br><span class="line">if(migong[i][j][k]&#x3D;&#x3D;&#39;E&#39;)&#123;</span><br><span class="line">zhong.x&#x3D;i;zhong.y&#x3D;j;zhong.z&#x3D;k;</span><br><span class="line">&#125;</span><br><span class="line">if(migong[i][j][k]&#x3D;&#x3D;&#39;S&#39;)&#123;</span><br><span class="line">qi.x&#x3D;i;qi.y&#x3D;j;qi.z&#x3D;k;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">​</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">bfs();</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line">return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> BFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 妙用标志数组 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>POJ-1312</title>
      <link href="2020/02/18/POJ-1312/"/>
      <url>2020/02/18/POJ-1312/</url>
      
        <content type="html"><![CDATA[<p>此问题只要求不在同一行和同一列，新奇的标志数组，难点：每次递归范围的确定</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="棋盘问题"><a href="#棋盘问题" class="headerlink" title="棋盘问题"></a>棋盘问题</h3><table><thead><tr><th><strong>Time Limit:</strong> 1000MS</th><th></th><th><strong>Memory Limit:</strong> 10000K</th></tr></thead><tbody><tr><td><strong>Total Submissions:</strong> 94015</td><td></td><td><strong>Accepted:</strong> 42955</td></tr></tbody></table><p>Description</p><p>在一个给定形状的棋盘（形状可能是不规则的）上面摆放棋子，棋子没有区别。要求摆放时任意的两个棋子不能放在棋盘中的同一行或者同一列，请编程求解对于给定形状和大小的棋盘，摆放k个棋子的所有可行的摆放方案C。</p><p>Input</p><p>输入含有多组测试数据。<br>每组数据的第一行是两个正整数，n k，用一个空格隔开，表示了将在一个n*n的矩阵内描述棋盘，以及摆放棋子的数目。 n &lt;= 8 , k &lt;= n<br>当为-1 -1时表示输入结束。<br>随后的n行描述了棋盘的形状：每行有n个字符，其中 # 表示棋盘区域， . 表示空白区域（数据保证不出现多余的空白行或者空白列）。</p><p>Output</p><p>对于每一组数据，给出一行输出，输出摆放的方案数目C （数据保证C&lt;2^31）。</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">2 1</span><br><span class="line">#.</span><br><span class="line">.#</span><br><span class="line">4 4</span><br><span class="line">...#</span><br><span class="line">..#.</span><br><span class="line">.#..</span><br><span class="line">#...</span><br><span class="line">-1 -1</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><p>棋盘上不一定放多少棋子，不一定每一行都有棋子(相对于全排列)，所以每次递归的范围为上一个棋子的下一行开始一直到棋盘的最后，因此行一定不重复，所以标志数组只需表示某列有没有棋子，即<code>lie[i]=0</code>。同时需要用到上一个棋子的行数，可以选择保留整个点(这样可以输出所有可能的情况)，也可以选择只保留上一个点的x坐标(这样不方便输出每一种情况)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">char qipan[9][9];</span><br><span class="line">bool lie[9];</span><br><span class="line">int n,sum,k;</span><br><span class="line">struct Point&#123;</span><br><span class="line">int x;</span><br><span class="line">int y;</span><br><span class="line">&#125; point[9];</span><br><span class="line">bool judge(int x,int y,int n)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n-1;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(point[i].x&#x3D;&#x3D;x||point[i].y&#x3D;&#x3D;y)</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line">void dfs(int nn)</span><br><span class="line">&#123;</span><br><span class="line">if(nn&#x3D;&#x3D;k+1)</span><br><span class="line">&#123;</span><br><span class="line">sum++;</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;point[nn-1].x+1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(qipan[i][j]&#x3D;&#x3D;&#39;#&#39;&amp;&amp;lie[j]&#x3D;&#x3D;0&amp;&amp;judge(i,j,nn-1))</span><br><span class="line">&#123;</span><br><span class="line">lie[j]&#x3D;1;</span><br><span class="line">point[nn].x&#x3D;i;</span><br><span class="line">point[nn].y&#x3D;j;</span><br><span class="line">dfs(nn+1);</span><br><span class="line">lie[j]&#x3D;0;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">while(cin&gt;&gt;n&gt;&gt;k&amp;&amp;n!&#x3D;-1&amp;&amp;k!&#x3D;-1)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">for(int j&#x3D;1;j&lt;&#x3D;n;j++)</span><br><span class="line">cin&gt;&gt;qipan[i][j];</span><br><span class="line">memset(lie,0,sizeof(lie));</span><br><span class="line">memset(point,0,sizeof(point));</span><br><span class="line">sum&#x3D;0;</span><br><span class="line">dfs(1);</span><br><span class="line">cout&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 八皇后简化版 </tag>
            
            <tag> 特殊标志数组 </tag>
            
            <tag> 递归范围 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1016</title>
      <link href="2020/02/17/HDU-1016/"/>
      <url>2020/02/17/HDU-1016/</url>
      
        <content type="html"><![CDATA[<p>典型的DFS数据类问题，介绍一个快速打表素数的方法</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="素环问题"><a href="#素环问题" class="headerlink" title="素环问题"></a>素环问题</h3><p><strong><em>\</em>时间限制：4000/2000 MS（Java /其他）内存限制：65536/32768 K（Java /其他）<br>提交总数：82346接受提交：33935<br>**</strong></p><p>问题描述</p><p>圆环由n个圆组成，如图所示。将自然数1、2，…，n分别放入每个圆，并且两个相邻圆中的数字总和应为质数。</p><p>注意：第一个圆的数目应始终为1。</p><p><img src="http://acm.hdu.edu.cn/data/images/1016-1.gif" alt="img"></p><p>输入值</p><p>n（0 &lt;n &lt;20）。</p><p>输出量</p><p>输出格式如下所示。每一行代表环中从顺时针和逆时针1开始的一系列圆圈编号。数字顺序必须满足上述要求。按字典顺序打印解决方案。</p><p>您将编写一个完成上述过程的程序。</p><p>在每种情况下都打印空白行。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">8</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">情况1：</span><br><span class="line">1 4 3 2 5 6</span><br><span class="line">1 6 5 2 3 4</span><br><span class="line"></span><br><span class="line">情况2：</span><br><span class="line">1 2 3 8 5 6 7 4</span><br><span class="line">1 2 5 8 3 4 7 6</span><br><span class="line">1 4 7 6 5 8 3 2</span><br><span class="line">1 6 7 4 3 8 5 2</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="快速打表素数-0-n"><a href="#快速打表素数-0-n" class="headerlink" title="快速打表素数(0~n)"></a>快速打表素数(0~n)</h3><p>利用memset置0(对字节操作，不能置1的)，0代表是素数，如果i是素数，则2i~ni都不是素数，只要将素数的倍数们都标记为非素数即可,需要注意的是它们的表示与我们通常的认知相反，用法:<code>!sushu[i]</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bool sushu[45]&#x3D;&#123;0&#125;;</span><br><span class="line">for(int i&#x3D;2;i&lt;8;i++)&#x2F;&#x2F;此处的8&#x3D;sqrt(45)+1</span><br><span class="line">    if(!sushu[i])</span><br><span class="line">     for(int j&#x3D;i*i;j&lt;45;j+&#x3D;i)</span><br><span class="line">       sushu[j]&#x3D;1;</span><br></pre></td></tr></table></figure><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int n;</span><br><span class="line">int flag[21];</span><br><span class="line">int b[21];</span><br><span class="line">int sum;</span><br><span class="line">bool sushu[45]&#x3D;&#123;0&#125;;</span><br><span class="line">bool judge(int a)</span><br><span class="line">&#123;</span><br><span class="line">return !sushu[a];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void dfs2(int q)</span><br><span class="line">&#123;</span><br><span class="line">if(q&#x3D;&#x3D;1)</span><br><span class="line">&#123;</span><br><span class="line">flag[1]&#x3D;1;</span><br><span class="line">b[1]&#x3D;1;</span><br><span class="line">dfs2(2);</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">if(q&#x3D;&#x3D;n+1)</span><br><span class="line">&#123;</span><br><span class="line">if(judge(b[q-1]+1))</span><br><span class="line">&#123;</span><br><span class="line">sum++;</span><br><span class="line">for(int k&#x3D;1;k&lt;&#x3D;n;k++)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;b[k];</span><br><span class="line">if(k!&#x3D;n)</span><br><span class="line">cout&lt;&lt;&quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(flag[i]&#x3D;&#x3D;0&amp;&amp;judge(b[q-1]+i))</span><br><span class="line">&#123;</span><br><span class="line">flag[i]&#x3D;1;</span><br><span class="line">b[q]&#x3D;i;</span><br><span class="line">dfs2(q+1);</span><br><span class="line">flag[i]&#x3D;0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  for(int i&#x3D;2;i&lt;8;i++)</span><br><span class="line">    if(!sushu[i])</span><br><span class="line">     for(int j&#x3D;i*i;j&lt;45;j+&#x3D;i)</span><br><span class="line">       sushu[j]&#x3D;1;</span><br><span class="line">int ca&#x3D;1; </span><br><span class="line">while(cin&gt;&gt;n)</span><br><span class="line">&#123;</span><br><span class="line">cout&lt;&lt;&quot;Case &quot;&lt;&lt;ca++&lt;&lt;&quot;:&quot;&lt;&lt;endl;</span><br><span class="line">sum&#x3D;0;</span><br><span class="line">memset(flag,0,sizeof(flag));</span><br><span class="line">dfs2(1);</span><br><span class="line">&#x2F;&#x2F;cout&lt;&lt;&quot;种数&quot;&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line">&#x2F;*void dfs(int nn,int ln)</span><br><span class="line">&#123;</span><br><span class="line">if(nn&#x3D;&#x3D;1) </span><br><span class="line">&#123;</span><br><span class="line">b[nn]&#x3D;1;</span><br><span class="line">flag[1]&#x3D;1;</span><br><span class="line">dfs(2,1);</span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">if(nn&#x3D;&#x3D;n+1)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if(judge(1+ln))</span><br><span class="line">&#123;sum++;</span><br><span class="line">for(int k&#x3D;1;k&lt;&#x3D;n;k++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">cout&lt;&lt;b[k];</span><br><span class="line">if(k!&#x3D;n)</span><br><span class="line">cout&lt;&lt;&quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return ;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;1;i&lt;&#x3D;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(flag[i]&#x3D;&#x3D;0&amp;&amp;judge(ln+i))</span><br><span class="line">&#123;</span><br><span class="line">flag[i]&#x3D;1;</span><br><span class="line">b[nn]&#x3D;i;</span><br><span class="line">dfs(nn+1,i);</span><br><span class="line">flag[i]&#x3D;0;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;*&#x2F;</span><br></pre></td></tr></table></figure><h3 id="presentation-error"><a href="#presentation-error" class="headerlink" title="presentation error"></a>presentation error</h3><p>输出的最后一个数字后面不应该有空格</p>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 素数环 </tag>
            
            <tag> 回溯 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PTA-L1-006</title>
      <link href="2020/02/17/PTA-L1-006/"/>
      <url>2020/02/17/PTA-L1-006/</url>
      
        <content type="html"><![CDATA[<p>给一个数，求这个数的最长连续因数</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>L1-006 连续因子 (20分)</p><p>一个正整数 <em>N</em> 的因子中可能存在若干连续的数字。例如 630 可以分解为 3×5×6×7，其中 5、6、7 就是 3 个连续的数字。给定任一正整数 <em>N</em>，要求编写程序求出最长连续因子的个数，并输出最小的连续因子序列。</p><h3 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h3><p>输入在一行中给出一个正整数 <em>N</em>（1&lt;<em>N</em>&lt;231）。</p><h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><p>首先在第 1 行输出最长连续因子的个数；然后在第 2 行中按 <code>因子1*因子2*……*因子k</code> 的格式输出最小的连续因子序列，其中因子按递增顺序输出，1 不算在内。</p><h3 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">630</span><br></pre></td></tr></table></figure><h3 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">5*6*7</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;cmath&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main() &#123;</span><br><span class="line">int N, temp;</span><br><span class="line">int count &#x3D; 0, maxcount &#x3D; 0, start &#x3D; 0;</span><br><span class="line">cin &gt;&gt; N;</span><br><span class="line">for (int i &#x3D; 2; i &lt;&#x3D; sqrt(N) ; i++) &#123;</span><br><span class="line">temp &#x3D; N;</span><br><span class="line">count &#x3D; 0;</span><br><span class="line">int j &#x3D; i;</span><br><span class="line">while (temp%j&#x3D;&#x3D;0) &#123;</span><br><span class="line">temp &#x2F;&#x3D; j++;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line">if (count &gt; maxcount) &#123;</span><br><span class="line">maxcount &#x3D; count;</span><br><span class="line">start &#x3D; i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if (maxcount) &#123;</span><br><span class="line">cout &lt;&lt; maxcount &lt;&lt; endl;</span><br><span class="line">for (int i &#x3D; start; i &lt; start+maxcount; i++) &#123;</span><br><span class="line">if(i!&#x3D;start)cout&lt;&lt;&quot;*&quot;;</span><br><span class="line">cout&lt;&lt;i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">else</span><br><span class="line">cout &lt;&lt;&quot;1&quot;&lt;&lt;endl&lt;&lt; N;</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 因数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最长连续因数 </tag>
            
            <tag> 按序列累除 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pintia-L1-005</title>
      <link href="2020/02/17/pintia-L1-005/"/>
      <url>2020/02/17/pintia-L1-005/</url>
      
        <content type="html"><![CDATA[<p>简单字典问题</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>L1-005 考试座位号 (15分)</p><p>每个 PAT 考生在参加考试时都会被分配两个座位号，一个是试机座位，一个是考试座位。正常情况下，考生在入场时先得到试机座位号码，入座进入试机状态后，系统会显示该考生的考试座位号码，考试时考生需要换到考试座位就座。但有些考生迟到了，试机已经结束，他们只能拿着领到的试机座位号码求助于你，从后台查出他们的考试座位号码。</p><h3 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h3><p>输入第一行给出一个正整数 <em>N</em>（≤1000），随后 <em>N</em> 行，每行给出一个考生的信息：<code>准考证号 试机座位号 考试座位号</code>。其中<code>准考证号</code>由 16 位数字组成，座位从 1 到 <em>N</em> 编号。输入保证每个人的准考证号都不同，并且任何时候都不会把两个人分配到同一个座位上。</p><p>考生信息之后，给出一个正整数 <em>M</em>（≤<em>N</em>），随后一行中给出 <em>M</em> 个待查询的试机座位号码，以空格分隔。</p><h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><p>对应每个需要查询的试机座位号码，在一行中输出对应考生的准考证号和考试座位号码，中间用 1 个空格分隔。</p><h3 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">3310120150912233 2 4</span><br><span class="line">3310120150912119 4 1</span><br><span class="line">3310120150912126 1 3</span><br><span class="line">3310120150912002 3 2</span><br><span class="line">2</span><br><span class="line">3 4</span><br></pre></td></tr></table></figure><h3 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3310120150912002 2</span><br><span class="line">3310120150912119 1</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">struct student&#123;</span><br><span class="line">string xuehao;</span><br><span class="line">int shiji;</span><br><span class="line">int kszwh;</span><br><span class="line">&#125; st[1001];</span><br><span class="line">int num[1001];</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">&#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">int n;</span><br><span class="line">cin&gt;&gt;n;</span><br><span class="line">for(int i&#x3D;0;i&lt;n;i++)</span><br><span class="line">cin&gt;&gt;st[i].xuehao&gt;&gt;st[i].shiji&gt;&gt;st[i].kszwh;</span><br><span class="line">int nn;</span><br><span class="line">cin&gt;&gt;nn;</span><br><span class="line">for(int i&#x3D;0;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line">int nnn;</span><br><span class="line">cin&gt;&gt;nnn;</span><br><span class="line">for(int j&#x3D;0;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line">if(st[j].shiji&#x3D;&#x3D;nnn)</span><br><span class="line">&#123;num[i]&#x3D;j;</span><br><span class="line">break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;nn;i++)</span><br><span class="line">cout&lt;&lt;st[num[i]].xuehao&lt;&lt;&quot; &quot;&lt;&lt;st[num[i]].kszwh&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> map </tag>
            
            <tag> 字典 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pintia-L1-004</title>
      <link href="2020/02/17/pintia-L1-004/"/>
      <url>2020/02/17/pintia-L1-004/</url>
      
        <content type="html"><![CDATA[<p>给华氏温度求摄氏温度</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>L1-004 计算摄氏温度 (5分)</p><p>给定一个华氏温度<em>F</em>，本题要求编写程序，计算对应的摄氏温度<em>C</em>。计算公式：<em>C</em>=5×(<em>F</em>−32)/9。题目保证输入与输出均在整型范围内。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式:"></a>输入格式:</h3><p>输入在一行中给出一个华氏温度。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式:"></a>输出格式:</h3><p>在一行中按照格式“Celsius = C”输出对应的摄氏温度C的整数值。</p><h3 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例:"></a>输入样例:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">150</span><br></pre></td></tr></table></figure><h3 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例:"></a>输出样例:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Celsius &#x3D; 65</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;  </span><br><span class="line">  int n;</span><br><span class="line">  cin&gt;&gt;n;</span><br><span class="line">  cout&lt;&lt;&quot;Celsius &#x3D; &quot;&lt;&lt;(int)(5*(n-32)&#x2F;9)&lt;&lt;endl; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摄氏华氏温度转换 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pintia-L1-003</title>
      <link href="2020/02/17/pintia-L1-003/"/>
      <url>2020/02/17/pintia-L1-003/</url>
      
        <content type="html"><![CDATA[<p>统计字数的个数</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>L1-003 个位数统计 (15分)</p><p>给定一个 <em>k</em> 位整数 <em>N</em>=<em>d<strong>k<em>−110</em>k<em>−1+⋯+</em>d<em>1101+</em>d<em>0 (0≤</em>d</strong>i*≤9, *i</em>=0,⋯,<em>k</em>−1, <em>d*<em>k</em>−1&gt;0)，请编写程序统计每种不同的个位数字出现的次数。例如：给定 *N</em>=100311，则有 2 个 0，3 个 1，和 1 个 3。</p><h3 id="输入格式："><a href="#输入格式：" class="headerlink" title="输入格式："></a>输入格式：</h3><p>每个输入包含 1 个测试用例，即一个不超过 1000 位的正整数 <em>N</em>。</p><h3 id="输出格式："><a href="#输出格式：" class="headerlink" title="输出格式："></a>输出格式：</h3><p>对 <em>N</em> 中每一种不同的个位数字，以 <code>D:M</code> 的格式在一行中输出该位数字 <code>D</code> 及其在 <em>N</em> 中出现的次数 <code>M</code>。要求按 <code>D</code> 的升序输出。</p><h3 id="输入样例："><a href="#输入样例：" class="headerlink" title="输入样例："></a>输入样例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">100311</span><br></pre></td></tr></table></figure><h3 id="输出样例："><a href="#输出样例：" class="headerlink" title="输出样例："></a>输出样例：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0:2</span><br><span class="line">1:3</span><br><span class="line">3:1</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">#include&lt;string.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">char ch[1001];</span><br><span class="line">int a[10]&#x3D;&#123;0&#125;;</span><br><span class="line">cin&gt;&gt;ch;</span><br><span class="line">int lenth&#x3D;strlen(ch);</span><br><span class="line">while(lenth--)</span><br><span class="line">&#123;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;9;i++)</span><br><span class="line">if((ch[lenth]-&#39;0&#39;)&#x3D;&#x3D;i)</span><br><span class="line">a[i]++;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;0;i&lt;&#x3D;9;i++)</span><br><span class="line">&#123;</span><br><span class="line">if(a[i])</span><br><span class="line">cout&lt;&lt;i&lt;&lt;&quot;:&quot;&lt;&lt;a[i]&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 统计数字的个数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pintia-L1-002</title>
      <link href="2020/02/17/pintia-L1-002/"/>
      <url>2020/02/17/pintia-L1-002/</url>
      
        <content type="html"><![CDATA[<p>公式求n,两个循环打印</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>L1-002 打印沙漏 (20分)</p><p>本题要求你写个程序把给定的符号打印成沙漏的形状。例如给定17个“*”，要求按下列格式打印</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*****</span><br><span class="line"> ***</span><br><span class="line">  *</span><br><span class="line"> ***</span><br><span class="line">*****</span><br></pre></td></tr></table></figure><p>所谓“沙漏形状”，是指每行输出奇数个符号；各行符号中心对齐；相邻两行符号数差2；符号数先从大到小顺序递减到1，再从小到大顺序递增；首尾符号数相等。</p><p>给定任意N个符号，不一定能正好组成一个沙漏。要求打印出的沙漏能用掉尽可能多的符号。</p><h3 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式:"></a>输入格式:</h3><p>输入在一行给出1个正整数N（≤1000）和一个符号，中间以空格分隔。</p><h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式:"></a>输出格式:</h3><p>首先打印出由给定符号组成的最大的沙漏形状，最后在一行中输出剩下没用掉的符号数。</p><h3 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例:"></a>输入样例:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">19 *</span><br></pre></td></tr></table></figure><h3 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例:"></a>输出样例:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*****</span><br><span class="line"> ***</span><br><span class="line">  *</span><br><span class="line"> ***</span><br><span class="line">*****</span><br><span class="line">2</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">#include&lt;math.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">int n;</span><br><span class="line">char ch;</span><br><span class="line">cin&gt;&gt;n&gt;&gt;ch;</span><br><span class="line">int nn&#x3D;(int)sqrt((n+1)&#x2F;2);</span><br><span class="line">for(int i&#x3D;nn;i&gt;&#x3D;1;i--)</span><br><span class="line">&#123;</span><br><span class="line">int k&#x3D;nn-i;</span><br><span class="line">while(k--) cout&lt;&lt;&quot; &quot;;</span><br><span class="line">k&#x3D;2*i-1;</span><br><span class="line">while(k--)</span><br><span class="line">cout&lt;&lt;ch;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">for(int i&#x3D;2;i&lt;&#x3D;nn;i++)</span><br><span class="line">&#123;</span><br><span class="line">int k&#x3D;nn-i;</span><br><span class="line">while(k--) cout&lt;&lt;&quot; &quot;;</span><br><span class="line">k&#x3D;2*i-1;</span><br><span class="line">while(k--)</span><br><span class="line">cout&lt;&lt;ch;</span><br><span class="line">cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line">int c&#x3D;n-2*nn*nn+1;</span><br><span class="line">&#x2F;&#x2F;if(c)</span><br><span class="line">cout&lt;&lt;c;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 沙漏 </tag>
            
            <tag> 等差数列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1008</title>
      <link href="2020/02/16/HDU-1008/"/>
      <url>2020/02/16/HDU-1008/</url>
      
        <content type="html"><![CDATA[<p>给出楼层，计算电梯的运行时间</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="电梯"><a href="#电梯" class="headerlink" title="电梯"></a>电梯</h3><p><strong><em>\</em>时间限制：2000/1000 MS（Java /其他）内存限制：65536/32768 K（Java /其他）<br>总提交数量：100638接受提交数量：54525<br>**</strong></p><p>问题描述</p><p>我们城市最高的建筑物只有一部电梯。请求列表由N个正数组成。数字按指定顺序表示电梯将停在的楼层。将电梯上移一层需要6秒钟，而将一层下移则需要4秒钟。电梯将在每个站点停留5秒钟。</p><p>对于给定的请求列表，您将计算完成列表上的请求所花费的总时间。电梯在开始时位于0楼，并且在满足请求后不必返回一楼。</p><p>输入值</p><p>有多个测试用例。每个案例包含一个正整数N，后跟N个正数。输入中的所有数字均小于100。N = 0的测试用例表示输入结束。该测试用例将不被处理。</p><p>输出量</p><p>将每个测试用例的总时间打印在一行上。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 2</span><br><span class="line">3 2 3 1</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">17</span><br><span class="line">41</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line"> &#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line"> int n,floor,lfloor;</span><br><span class="line">    while(cin&gt;&gt;n&amp;&amp;n)</span><br><span class="line">    &#123;</span><br><span class="line">    int time&#x3D;0;</span><br><span class="line">    lfloor&#x3D;0;</span><br><span class="line">    while(n--)</span><br><span class="line">    &#123;</span><br><span class="line">    cin&gt;&gt;floor;</span><br><span class="line">if(floor&gt;lfloor)</span><br><span class="line">time+&#x3D;6*(floor-lfloor);</span><br><span class="line">else</span><br><span class="line">time+&#x3D;4*(lfloor-floor);</span><br><span class="line">lfloor&#x3D;floor;</span><br><span class="line">time+&#x3D;5;    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;time&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 电梯 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dotcpp-1004</title>
      <link href="2020/02/16/dotcpp-1004/"/>
      <url>2020/02/16/dotcpp-1004/</url>
      
        <content type="html"><![CDATA[<p>第一年一头成年母牛，每年生一小牛，小牛四年后才成年，求第N年的牛的个数</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>题目描述</p><p>有一头母牛，它每年年初生一头小母牛。每头小母牛从第四个年头开始，每年年初也生一头小母牛。请编程实现在第n年的时候，共有多少头母牛？</p><p>输入</p><p>输入数据由多个测试实例组成，每个测试实例占一行，包括一个整数n(0&lt;n&lt;55)，n的含义如题目中描述。<br>n=0表示输入数据的结束，不做处理。</p><p>输出</p><p>对于每个测试实例，输出在第n年的时候母牛的数量。<br>每个输出占一行。</p><p>样例输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>样例输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">4</span><br><span class="line">6</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;iostream&gt;</span><br><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line"> &#x2F;&#x2F;freopen(&quot;input.txt&quot;, &quot;r&quot;, stdin);</span><br><span class="line">    int n;</span><br><span class="line">    int a[56];</span><br><span class="line">    a[1]&#x3D;1;</span><br><span class="line">    a[2]&#x3D;2;</span><br><span class="line">    a[3]&#x3D;3;</span><br><span class="line">    a[4]&#x3D;4;</span><br><span class="line">for(int i&#x3D;5;i&lt;56;i++)</span><br><span class="line">&#123;</span><br><span class="line">a[i]&#x3D;a[i-1]+a[i-3];</span><br><span class="line">&#125;</span><br><span class="line">    while(cin&gt;&gt;n&amp;&amp;n)</span><br><span class="line">    &#123;</span><br><span class="line">    cout&lt;&lt;a[n]&lt;&lt;endl;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 斐波那契 </tag>
            
            <tag> 兔子问题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1006</title>
      <link href="2020/02/14/HDU-1006/"/>
      <url>2020/02/14/HDU-1006/</url>
      
        <content type="html"><![CDATA[<p>一般我们的思维都是先找第一段符合题目的解，然后找第二段第三段，从而理解题目和找出规律。但对于有些题目，规律甚至第一段的解都非常难找，但如果我们知道解位于一个临界集合中，我们就可以不用去找这个解，转而寻找这个临界集合(因为寻找解非常复杂，寻找临界集合却比较容易)，前提是可以把解从临界集合中分离出来(一般是临界集合的最值)。这样我们就可以避开寻找解这个非常复杂的过程，简化题目。</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="滴答和滴答"><a href="#滴答和滴答" class="headerlink" title="滴答和滴答"></a>滴答和滴答</h3><p><strong><em>\</em>时间限制：2000/1000 MS（Java /其他）内存限制：65536/32768 K（Java /其他）<br>提交总计：26354接受提交：7208<br>**</strong></p><p>问题描述</p><p>时钟的三只指针每秒旋转一次，并且每天相遇很多次。最后，他们对此感到无聊，并且每个人都希望远离其他两个人。如果一只手与其余任何一只手至少有D度，那它就是快乐的。您要计算一天中所有双手都开心的时间。</p><p>输入值</p><p>输入包含许多测试用例。他们每个人都有一条单行，其实数D在0和120之间（含0和120）。输入以-1的D终止。</p><p>输出量</p><p>对于每个D，用一行打印一天中所有手牌都高兴的时间百分比，精确到小数点后3位。</p><p>样本输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">120</span><br><span class="line">90</span><br><span class="line">-1</span><br></pre></td></tr></table></figure><p>样本输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">100.000</span><br><span class="line">0.000</span><br><span class="line">6.251</span><br></pre></td></tr></table></figure><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="为什么暴力遍历每一秒不行"><a href="#为什么暴力遍历每一秒不行" class="headerlink" title="为什么暴力遍历每一秒不行"></a>为什么暴力遍历每一秒不行</h3><p>因为本题对精度有非常高的要求，这个表应该是静音表(扫秒表)，不会发出滴答滴答的声音，并且要用到角速度，因为只有这样才能满足精度要求</p><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>本题如果仔细思考求解的话，整个过程是非常复杂的，因为你不知道每一小段开始时究竟是那两个针到达临界值。既然这样那就求临界集合，将分针和时针从重合到再次重合看做一个大周期，将分针和表针从重合到再次重合看做一个周期，将时针和秒针从重合到再次重合看做一个小周期。一共有三个针，C32共有三种可能，也就是说每一小段的开始时刻必然在临界开始集合(分-时=n,秒-时=n,秒-分=n)中，并且是临界开始集合的最大值，而每一小段的结束必然存在于临界结束集合(分-时=360-n,秒-时=360-n,秒-分=360-n)中，并且是临界结束集合的最小值。这样只求两个临界集合就行了</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a,<span class="keyword">double</span> b,<span class="keyword">double</span> c)</span></span>&#123;</span><br><span class="line"><span class="keyword">double</span> <span class="built_in">max</span>=a&gt;b?a:b;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">max</span>&gt;c?<span class="built_in">max</span>:c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">min</span><span class="params">(<span class="keyword">double</span> a,<span class="keyword">double</span> b,<span class="keyword">double</span> c)</span></span>&#123;</span><br><span class="line"><span class="keyword">double</span> <span class="built_in">min</span>=a&lt;b?a:b;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">min</span>&lt;c?<span class="built_in">min</span>:c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="keyword">double</span> n;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&amp;&amp;n!=<span class="number">-1</span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> maxx=<span class="number">12</span>*<span class="number">60</span>*<span class="number">60</span>; </span><br><span class="line">    <span class="keyword">double</span> shij=<span class="number">30.0</span>/<span class="number">60</span>/<span class="number">60</span>;</span><br><span class="line">    <span class="keyword">double</span> fenj=<span class="number">6</span>/<span class="number">60.0</span>;</span><br><span class="line">    <span class="keyword">double</span> miaoj=<span class="number">6</span>/<span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">double</span> sfx=fenj-shij;</span><br><span class="line">    <span class="keyword">double</span> smx=miaoj-shij; </span><br><span class="line"></span><br><span class="line"> <span class="keyword">double</span> fmx=miaoj-fenj;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">double</span> sfz=<span class="number">360</span>/sfx;</span><br><span class="line"> <span class="keyword">double</span> sfn=n/sfx;</span><br><span class="line"> <span class="keyword">double</span> sf_n=(<span class="number">360</span>-n)/sfx;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">double</span> fmz=<span class="number">360</span>/fmx;</span><br><span class="line"> <span class="keyword">double</span> fmn=n/fmx;</span><br><span class="line"> <span class="keyword">double</span> fm_n=(<span class="number">360</span>-n)/fmx;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">double</span> smz=<span class="number">360</span>/smx;</span><br><span class="line"> <span class="keyword">double</span> smn=n/smx;</span><br><span class="line"> <span class="keyword">double</span> sm_n=(<span class="number">360</span>-n)/smx;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">double</span> shichang=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">double</span> i=<span class="number">0</span>;i&lt;=maxx;i+=sfz)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">double</span> j=<span class="number">0</span>;j&lt;=maxx;j+=fmz)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(j+fm_n&lt;i+sfn) <span class="keyword">continue</span>;</span><br><span class="line"> <span class="keyword">if</span>(i+sf_n&lt;j+fmn) <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">double</span> k=<span class="number">0</span>;k&lt;=maxx;k+=smz)</span><br><span class="line"> &#123;</span><br><span class="line"> <span class="keyword">if</span>(k+sm_n&lt;i+sfn||k+sm_n&lt;j+fmn) <span class="keyword">continue</span>;</span><br><span class="line"> <span class="keyword">if</span>(j+fm_n&lt;k+smn||i+sf_n&lt;k+smn) <span class="keyword">break</span>;</span><br><span class="line"> <span class="keyword">double</span> kaishi=<span class="built_in">max</span>(i+sfn,j+fmn,k+smn);</span><br><span class="line"> <span class="keyword">double</span> jieshu=<span class="built_in">min</span>(i+sf_n,j+fm_n,k+sm_n);</span><br><span class="line"> <span class="keyword">if</span>(jieshu&gt;kaishi)</span><br><span class="line"> shichang+=jieshu-kaishi;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"%.3f\n"</span>,<span class="number">100.0</span>*shichang/maxx);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 盲集合求交 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 临界最优 </tag>
            
            <tag> 屏蔽细节 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1005</title>
      <link href="2020/02/09/HDU-1005/"/>
      <url>2020/02/09/HDU-1005/</url>
      
        <content type="html"><![CDATA[<p>这个题大家第一次应该都是超时吧，这个题网上流传的%49或者%48都是错误的，大家反而觉得他们解释的逻辑很对，我也是服了，这么一份错答案竟然能够横扫CSDN！能够在网络上横行！HDUOJ也真是水！后台数据太水了！！！</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="Number-Sequence"><a href="#Number-Sequence" class="headerlink" title="Number Sequence"></a>Number Sequence</h3><p><strong><em>\</em>Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 234505  Accepted Submission(s): 59544<br>**</strong></p><p>Problem Description</p><p>A number sequence is defined as follows:</p><p>f(1) = 1, f(2) = 1, f(n) = (A * f(n - 1) + B * f(n - 2)) mod 7.</p><p>Given A, B, and n, you are to calculate the value of f(n).</p><p>Input</p><p>The input consists of multiple test cases. Each test case contains 3 integers A, B and n on a single line (1 &lt;= A, B &lt;= 1000, 1 &lt;= n &lt;= 100,000,000). Three zeros signal the end of input and this test case is not to be processed.</p><p>Output</p><p>For each test case, print the value of f(n) on a single line.</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 1 3</span><br><span class="line">1 2 10</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">5</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><p>这个确实要用到循环节，公式为<code>f(n) = (A * f(n - 1) + B * f(n - 2)) mod 7</code>由前两项推出第三项，所以如果出现连续两项相同，后面的也完全相同，对7取余，结果为0~6，一项有7种可能，将连续两项(2n+1,2n+2)看做一个循环节，则循环节共有7*7=49种可能，所以根据抽屉原理，前50个循环节内，必然存在两个一样的循环节，第一个循环节后的序列为周期序列，整个序列不一定是周期序列。例如序列:3、4项分别和13、14项相同，则从第3项开始，这个序列才是周期序列，整个序列不一定是周期序列。所以算出前100项，找出两个相同循环节(位置分别为a,b)，周期t=b-a，则从a开始，这个序列为周期序列，n&lt;=a，则直接输出，n&gt;a，则输出第<code>(n-a)%t+a</code>项</p><h3 id="测试数据"><a href="#测试数据" class="headerlink" title="测试数据"></a>测试数据</h3><p>如果取余49是正确的，那么就是说第50项一定为1。写代码的不觉得荒谬吗！测试数据1 5 50，自己去测试吧，可以用你们超时代码(超时代码的结果一定是正确的，只是时间太长)的测试结果和网上所谓取余49的代码的结果对比</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("input.txt", "r", stdin);</span></span><br><span class="line"><span class="keyword">int</span> a,b,n,y,t,kaishi;</span><br><span class="line"><span class="keyword">int</span> jieguo[<span class="number">101</span>];</span><br><span class="line">jieguo[<span class="number">1</span>]=jieguo[<span class="number">2</span>]=<span class="number">1</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>((<span class="built_in">cin</span>&gt;&gt;a&amp;&amp;<span class="built_in">cin</span>&gt;&gt;b&amp;&amp;<span class="built_in">cin</span>&gt;&gt;n)&amp;&amp;!(a==<span class="number">0</span>&amp;&amp;b==<span class="number">0</span>&amp;&amp;n==<span class="number">0</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">3</span>;i&lt;=<span class="number">100</span>;i++)</span><br><span class="line">jieguo[i]=(a*jieguo[i<span class="number">-1</span>]+b*jieguo[i<span class="number">-2</span>])%<span class="number">7</span>;</span><br><span class="line">t=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">99</span>;i+=<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(t!=<span class="number">-1</span>)</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">2</span>;j&lt;=<span class="number">99</span>;j+=<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(jieguo[i]==jieguo[j]&amp;&amp;jieguo[i+<span class="number">1</span>]==jieguo[j+<span class="number">1</span>])</span><br><span class="line">&#123;</span><br><span class="line">t=j-i;</span><br><span class="line">kaishi=i;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(n&lt;=kaishi)</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;jieguo[n]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;jieguo[(n-kaishi)%t+kaishi]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 大数动态周期 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 斐波那契取余版 </tag>
            
            <tag> 动态周期 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HUD-1004</title>
      <link href="2020/02/07/HUD-1004/"/>
      <url>2020/02/07/HUD-1004/</url>
      
        <content type="html"><![CDATA[<p>我在本题没有用map,因为一开始没有过map,用的话还得去查怎么使用，我的算法是统计每一个颜色出现的次数，取最大值的下标，存在的问题是可能超时。但令我不解的是C++显示编译错误，G++ AC。<code>while(cin&gt;&gt;n&amp;&amp;n)</code></p><a id="more"></a><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="Let-the-Balloon-Rise"><a href="#Let-the-Balloon-Rise" class="headerlink" title="Let the Balloon Rise"></a>Let the Balloon Rise</h3><p><strong><em>\</em>Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 175113  Accepted Submission(s): 69765<br>**</strong></p><p>Problem Description</p><p>Contest time again! How excited it is to see balloons floating around. But to tell you a secret, the judges’ favorite time is guessing the most popular problem. When the contest is over, they will count the balloons of each color and find the result.</p><p>This year, they decide to leave this lovely job to you.</p><p>Input</p><p>Input contains multiple test cases. Each test case starts with a number N (0 &lt; N &lt;= 1000) – the total number of balloons distributed. The next N lines contain one color each. The color of a balloon is a string of up to 15 lower-case letters.</p><p>A test case with N = 0 terminates the input and this test case is not to be processed.</p><p>Output</p><p>For each case, print the color of balloon for the most popular problem on a single line. It is guaranteed that there is a unique solution for each test case.</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">green</span><br><span class="line">red</span><br><span class="line">blue</span><br><span class="line">red</span><br><span class="line">red</span><br><span class="line">3</span><br><span class="line">pink</span><br><span class="line">orange</span><br><span class="line">pink</span><br><span class="line">0</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">red</span><br><span class="line">pink</span><br></pre></td></tr></table></figure><h2 id="代码-G-下AC，C-下编译错误"><a href="#代码-G-下AC，C-下编译错误" class="headerlink" title="代码(G++下AC，C++下编译错误)"></a>代码(G++下AC，C++下编译错误)</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="built_in">string</span> color[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">int</span> n,<span class="built_in">max</span>;</span><br><span class="line"><span class="keyword">int</span> xiabiao;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;n&amp;&amp;n)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">max</span>=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;color[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;n;k++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(color[j]==color[k])</span><br><span class="line">num++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="built_in">max</span>)&#123;</span><br><span class="line">xiabiao=j;</span><br><span class="line"><span class="built_in">max</span>=num;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;color[xiabiao]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 字典 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> map </tag>
            
            <tag> 字典 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1003</title>
      <link href="2020/02/07/HDU-1003/"/>
      <url>2020/02/07/HDU-1003/</url>
      
        <content type="html"><![CDATA[<p>这个问题作者都描述错了，应该是如果有多个结果，输出end最靠后，start最靠前的那个结果。这个和1002质量都不行，原来和1002是同一个作者</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="Max-Sum"><a href="#Max-Sum" class="headerlink" title="Max Sum"></a>Max Sum</h3><p><strong><em>\</em>Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 344830  Accepted Submission(s): 82002<br>**</strong></p><p>Problem Description</p><p>Given a sequence a[1],a[2],a[3]……a[n], your job is to calculate the max sum of a sub-sequence. For example, given (6,-1,5,4,-7), the max sum in this sequence is 6 + (-1) + 5 + 4 = 14.</p><p>Input</p><p>The first line of the input contains an integer T(1&lt;=T&lt;=20) which means the number of test cases. Then T lines follow, each line starts with a number N(1&lt;=N&lt;=100000), then N integers followed(all the integers are between -1000 and 1000). </p><p>Output</p><p>For each test case, you should output two lines. The first line is “Case #:”, # means the number of the test case. The second line contains three integers, the Max Sum in the sequence, the start position of the sub-sequence, the end position of the sub-sequence. If there are more than one result, output the first one. Output a blank line between two cases.</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">5 6 -1 5 4 -7</span><br><span class="line">7 0 6 -1 1 -6 7 -5</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Case 1:</span><br><span class="line">14 1 4</span><br><span class="line"></span><br><span class="line">Case 2:</span><br><span class="line">7 1 6</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码:"></a>代码:</h2><p>验证作者描述错误的序列:-100 5 5 -100 1 -1 10 -100</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//freopen("input.txt", "r", stdin);</span></span><br><span class="line"><span class="keyword">int</span> t;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> n,<span class="built_in">max</span>,kaishi,jieshu,shuzi;</span><br><span class="line"><span class="built_in">max</span>=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> maxmax=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">int</span> maxkaishi,maxjieshu;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">kaishi=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cin</span>&gt;&gt;shuzi;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">max</span>&gt;=<span class="number">0</span>)&#123;</span><br><span class="line"><span class="built_in">max</span>+=shuzi;</span><br><span class="line">jieshu=j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">max</span>=shuzi;</span><br><span class="line">kaishi=j;</span><br><span class="line">jieshu=j;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">max</span>&gt;=maxmax)&#123;</span><br><span class="line">maxmax=<span class="built_in">max</span>;</span><br><span class="line">maxkaishi=kaishi;</span><br><span class="line">maxjieshu=jieshu;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"Case "</span>&lt;&lt;i&lt;&lt;<span class="string">":"</span>&lt;&lt;<span class="built_in">endl</span>&lt;&lt;maxmax&lt;&lt;<span class="string">" "</span>&lt;&lt;maxkaishi&lt;&lt;<span class="string">" "</span>&lt;&lt;maxjieshu&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">if</span>(i!=t)<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 最大连续子序列 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1002</title>
      <link href="2020/02/06/HDU-1002/"/>
      <url>2020/02/06/HDU-1002/</url>
      
        <content type="html"><![CDATA[<p>此题在杭电oj上有问题，AC了也不一定代表可以正确，还有dev-cpp5.4.0这个环境，结束时自动输出一行换行</p><a id="more"></a><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="A-B-Problem-II"><a href="#A-B-Problem-II" class="headerlink" title="A + B Problem II"></a>A + B Problem II</h3><p><strong><em>\</em>Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 514958  Accepted Submission(s): 98584<br>**</strong></p><p>Problem Description</p><p>I have a very simple problem for you. Given two integers A and B, your job is to calculate the Sum of A + B.</p><p>Input</p><p>The first line of the input contains an integer T(1&lt;=T&lt;=20) which means the number of test cases. Then T lines follow, each line consists of two positive integers, A and B. Notice that the integers are very large, that means you should not process them by using 32-bit integer. You may assume the length of each integer will not exceed 1000.</p><p>Output</p><p>For each test case, you should output two lines. The first line is “Case #:”, # means the number of the test case. The second line is the an equation “A + B = Sum”, Sum means the result of A + B. Note there are some spaces int the equation. Output a blank line between two test cases.</p><p>Sample Input</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1 2</span><br><span class="line">112233445566778899 998877665544332211</span><br></pre></td></tr></table></figure><p>Sample Output</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Case 1:</span><br><span class="line">1 + 2 &#x3D; 3</span><br><span class="line"></span><br><span class="line">Case 2:</span><br></pre></td></tr></table></figure><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="代码1："><a href="#代码1：" class="headerlink" title="代码1："></a>代码1：</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="comment">//freopen("input.txt", "r", stdin);</span></span><br><span class="line">    <span class="keyword">int</span> n,ai,ci,j,sum,jinwei;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">char</span> c[<span class="number">1000</span>]; </span><br><span class="line"><span class="keyword">char</span> he[<span class="number">1000</span>]; </span><br><span class="line">   <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Case "</span>&lt;&lt;k&lt;&lt;<span class="string">":"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;c;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;a&lt;&lt;<span class="string">" + "</span>&lt;&lt;c&lt;&lt;<span class="string">" = "</span>;</span><br><span class="line">    ai=<span class="built_in">strlen</span>(a)<span class="number">-1</span>;</span><br><span class="line">    ci=<span class="built_in">strlen</span>(c)<span class="number">-1</span>;</span><br><span class="line"> jinwei=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">int</span> hei=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">while</span>(ai&gt;=<span class="number">0</span>&amp;&amp;ci&gt;=<span class="number">0</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> sum=a[ai]-<span class="string">'0'</span>+c[ci]-<span class="string">'0'</span>+jinwei;</span><br><span class="line"> he[hei++]=sum%<span class="number">10</span>+<span class="string">'0'</span>;</span><br><span class="line"> jinwei=sum&gt;=<span class="number">10</span>?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line"> ai--;</span><br><span class="line"> ci--;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">while</span>(ai&gt;=<span class="number">0</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> sum=a[ai]-<span class="string">'0'</span>+jinwei;</span><br><span class="line"> he[hei++]=sum%<span class="number">10</span>+<span class="string">'0'</span>;</span><br><span class="line"> jinwei=sum&gt;=<span class="number">10</span>?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line"> ai--;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">while</span>(ci&gt;=<span class="number">0</span>)&#123;</span><br><span class="line"> sum=c[ci]-<span class="string">'0'</span>+jinwei;</span><br><span class="line"> he[hei++]=sum%<span class="number">10</span>+<span class="string">'0'</span>;</span><br><span class="line"> jinwei=sum&gt;=<span class="number">10</span>?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line"> ci--;</span><br><span class="line"> &#125;</span><br><span class="line"> hei--;</span><br><span class="line"> <span class="keyword">if</span>(jinwei!=<span class="number">0</span>)</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;jinwei;</span><br><span class="line"> <span class="keyword">while</span>(hei&gt;=<span class="number">0</span>)</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;he[hei--];</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"> <span class="keyword">if</span>(k!=n)</span><br><span class="line"> <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="错误的AC代码-未考虑进位，结果错误，但还是AC了，输出1-9-0-："><a href="#错误的AC代码-未考虑进位，结果错误，但还是AC了，输出1-9-0-：" class="headerlink" title="错误的AC代码(未考虑进位，结果错误，但还是AC了，输出1+9=0)："></a>错误的AC代码(未考虑进位，结果错误，但还是AC了，输出1+9=0)：</h3><p>由此可见，杭电oj部分题目的后台测试还是不太准确</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="comment">//freopen("input.txt", "r", stdin);</span></span><br><span class="line">    <span class="keyword">int</span> n,b,d;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">1000</span>];</span><br><span class="line"><span class="keyword">char</span> c[<span class="number">1000</span>];  </span><br><span class="line">    <span class="comment">//cin&gt;&gt;n;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Case "</span>&lt;&lt;k&lt;&lt;<span class="string">":"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;c;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;a&lt;&lt;<span class="string">" + "</span>&lt;&lt;c&lt;&lt;<span class="string">" = "</span>;</span><br><span class="line"><span class="keyword">int</span> j;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">1000</span>;j++)</span><br><span class="line">    <span class="keyword">if</span>(a[j]==<span class="string">'\0'</span>)</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    b=j;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">1000</span>;j++)</span><br><span class="line">    <span class="keyword">if</span>(c[j]==<span class="string">'\0'</span>)</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    d=j;</span><br><span class="line">    <span class="comment">//cout&lt;&lt;b&lt;&lt;d;</span></span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">min</span>=b;</span><br><span class="line"> <span class="keyword">if</span>(<span class="built_in">min</span>&gt;d)</span><br><span class="line"> <span class="built_in">min</span>=d;</span><br><span class="line"> <span class="keyword">int</span> jinwei=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">int</span> sum;</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="built_in">min</span>;i++)&#123;</span><br><span class="line"> sum=a[b-i]-<span class="string">'0'</span>+c[d-i]-<span class="string">'0'</span>+jinwei;</span><br><span class="line"> c[d-i]=sum%<span class="number">10</span>+<span class="string">'0'</span>;</span><br><span class="line"> <span class="comment">//cout&lt;&lt;c[d-i]&lt;&lt;"";</span></span><br><span class="line"> jinwei=sum/<span class="number">10</span>;</span><br><span class="line"> </span><br><span class="line"> &#125; </span><br><span class="line"> <span class="comment">//cout&lt;&lt;endl;</span></span><br><span class="line"> <span class="keyword">if</span>(<span class="built_in">min</span>==b)</span><br><span class="line">  &#123;</span><br><span class="line">  c[d-<span class="built_in">min</span><span class="number">-1</span>]+=jinwei;</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;c;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span>&#123;</span><br><span class="line">  a[b-<span class="built_in">min</span><span class="number">-1</span>]+=jinwei;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=b-<span class="built_in">min</span><span class="number">-1</span>;i++)</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;a[i];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i=d-<span class="built_in">min</span>;i&lt;=d<span class="number">-1</span>;i++)</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;c[i];</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">  &#125;<span class="keyword">if</span>(k!=n)</span><br><span class="line">  <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 大数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数 </tag>
            
            <tag> 大数加法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1001</title>
      <link href="2020/02/06/HDU-1001/"/>
      <url>2020/02/06/HDU-1001/</url>
      
        <content type="html"><![CDATA[<p>这个题的平均通过比率大约为0.25(20200206)，平均提交四次才能通过。确实有一个大陷阱，这道题需要我们了解C语言的基本知识和计算机中的运算过程。</p><a id="more"></a><ul><li><h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>Sum Problem</p><p><strong><em>\</em>Time Limit: 1000/500 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 677426  Accepted Submission(s): 170938<br>**</strong></p></li></ul><p>  Problem Description</p><p>  Hey, welcome to HDOJ(Hangzhou Dianzi University Online Judge).</p><p>  In this problem, your task is to calculate SUM(n) = 1 + 2 + 3 + … + n.</p><p>  Input</p><p>  The input will consist of a series of integers n, one integer per line.</p><p>  Output</p><p>  For each case, output SUM(n) in one line, followed by a blank line. You may assume the result will be in the range of 32-bit signed integer.</p><p>  Sample Input</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">100</span><br></pre></td></tr></table></figure><p>  Sample Output</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line"></span><br><span class="line">5050</span><br></pre></td></tr></table></figure><h2 id="C语言中IO和运算过程"><a href="#C语言中IO和运算过程" class="headerlink" title="C语言中IO和运算过程"></a>C语言中IO和运算过程</h2><p>例如<code>cin&gt;&gt;a;</code>在屏幕上输入5然后点回车，存储过程为将5的补码存到a对应的地址，然后对这个补码进行运算。</p><p>例如<code>2*a+1</code>先计算<code>2*a</code>存到一个地方b，然后运算b+1。运算过程为一步一步的，每一步都保存结果，这样就导致了在运算过程中可能导致临时的结果溢出，例如本题中计算1+2+3+···+N有好多种算法(循环累加和公式法)，我们都会下意识的用比较简单的<code>n*(n+1)/2</code>，题目中告诉我们<code>n*(n+1)/2</code>在有符号整形的范围之内，但是计算<code>n*(n+1)</code>的时候要保存一个临时结果，这个结果是有可能比有符号整形大的，所以最终结果不准确。</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><h3 id="调整运算顺序将增大运算和减小运算交错排布"><a href="#调整运算顺序将增大运算和减小运算交错排布" class="headerlink" title="调整运算顺序将增大运算和减小运算交错排布"></a>调整运算顺序将增大运算和减小运算交错排布</h3><p>将<code>n*(n+1)/2</code>调整为<code>n/2*(n+1)</code>(n为偶数)或<code>(n+1)/2*n</code>(n+1为偶数)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;    </span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;a)&#123;</span><br><span class="line"><span class="keyword">if</span>(a%<span class="number">2</span>==<span class="number">0</span>)</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;a/<span class="number">2</span>*(a+<span class="number">1</span>)&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;(a+<span class="number">1</span>)/<span class="number">2</span>*a&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="消除运算过程中的减小运算-将公式法改为累加法"><a href="#消除运算过程中的减小运算-将公式法改为累加法" class="headerlink" title="消除运算过程中的减小运算(将公式法改为累加法)"></a>消除运算过程中的减小运算(将公式法改为累加法)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;    </span><br><span class="line"><span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;a)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=a;i++)</span><br><span class="line">sum+=i;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;sum&lt;&lt;<span class="built_in">endl</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 易错题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大数陷阱 </tag>
            
            <tag> 代数式最大化部分溢出 </tag>
            
            <tag> 补码 </tag>
            
            <tag> 计算机中运算过程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDU-1000</title>
      <link href="2020/02/05/HDU-1000/"/>
      <url>2020/02/05/HDU-1000/</url>
      
        <content type="html"><![CDATA[<p>C语言中EOF，C++中EOF，用input.txt代替手工输入，提高解题的测试速度</p><a id="more"></a><ul><li><p>题目</p><hr></li></ul><h1 id="A-B-Problem"><a href="#A-B-Problem" class="headerlink" title="A + B Problem"></a>A + B Problem</h1><p>  Time Limit: 2000/1000 MS (Java/Others)  Memory Limit: 65536/32768 K (Java/Others)<br>  Total Submission(s): 944642  Accepted Submission(s): 281848</p><p>  Problem Description</p><p>  Calculate <em>A + B</em>.</p><p>  Input</p><p>  Each line will contain two integers <em>A</em> and <em>B</em>. Process to end of file.</p><p>  Output</p><p>  For each case, output <em>A + B</em> in one line.</p><p>  Sample Input</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 1</span><br></pre></td></tr></table></figure><p>  Sample Output</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><hr><ol><li><p>C语言EOF</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;a,&amp;b)!=EOF)</span><br></pre></td></tr></table></figure></li><li><p>C++EOF</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b)&#123;</span><br></pre></td></tr></table></figure></li><li><p>用input.txt代替手工输入</p><ol><li><p>在源程序文件(.c、.cpp)的同级目录新建intut.txt文件，里面模拟手工输入的数据</p></li><li><p>在源程序中main()函数开始处添加代码(要添加#include&lt;stdio.h&gt;头文件)，<strong>！！！提交代码前一定要注释掉这行代码</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>本题AC代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> freopen(<span class="string">"input.txt"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line"><span class="keyword">int</span> a,b;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b)&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;a+b&lt;&lt;<span class="built_in">endl</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EOF </tag>
            
            <tag> C++文件代替手工输入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2020/02/03/hello-world/"/>
      <url>2020/02/03/hello-world/</url>
      
        <content type="html"><![CDATA[<p>使用方法</p><a id="more"></a><p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ACM-BFS</title>
      <link href="2019/08/31/ACM-BFS/"/>
      <url>2019/08/31/ACM-BFS/</url>
      
        <content type="html"><![CDATA[<p>摘要</p><a id="more"></a><h2 id="1-BFS的作用：遍历图找到与步长强相关的属性的最优解（也可以附带路径）"><a href="#1-BFS的作用：遍历图找到与步长强相关的属性的最优解（也可以附带路径）" class="headerlink" title="1.BFS的作用：遍历图找到与步长强相关的属性的最优解（也可以附带路径）"></a>1.BFS的作用：遍历图找到与步长强相关的属性的最优解（也可以附带路径）</h2><h2 id="2-原理"><a href="#2-原理" class="headerlink" title="2.原理"></a>2.原理</h2><p>起点入队，起点出队，从出队点开始下一步可以到达（符合条件）的所有点入队，队首再出队，从出队点开始下一步可以到达（符合条件）的所有点入队……。<strong>总之，步长为n的所有符合条件的点依次批量入队（n=0,1,2……），所以最先访问即步长最短，与步长相关的例如路径长度，消耗的时间最短，即最先访问即最优！</strong></p><h2 id="3-判断是否可以回头-不可随意重复访问标志的设立"><a href="#3-判断是否可以回头-不可随意重复访问标志的设立" class="headerlink" title="3.判断是否可以回头(不可随意重复访问标志的设立)"></a>3.判断是否可以回头(不可随意重复访问标志的设立)</h2><ul><li><p>传统01：不可重复访问</p></li><li><p>如果图中存在能量补充点、时间重置点等等是可以回头的，可以回头的条件是剩余的能量或时间要大于上一次来到这个点时的剩余能量或时间 </p></li></ul><h2 id="4-初始化"><a href="#4-初始化" class="headerlink" title="4.初始化"></a>4.初始化</h2><ol><li><p>三个数组</p><ul><li>地图数组（一般二维，可三维）：存放墙，可走点，能量补充点、时间充值点</li><li>路径变换数组（<code>s[走法种类数][维度]</code>）：通常加法变换，也可以写成乘法矩阵变换</li><li>随意访问的数组（跟地图数组一个格式的结构体）：存标志量(传统01，上次到此点剩余能量时间)、路径量(这个点的上一个点的坐标）、其他想随时访问的属性</li></ul></li><li><p>队列节点结构体</p><p>含x,y和仅终点访问的属性</p></li></ol><h2 id="3-实现方式（按常用程度排序）"><a href="#3-实现方式（按常用程度排序）" class="headerlink" title="3.实现方式（按常用程度排序）"></a>3.实现方式（按常用程度排序）</h2><ol><li>C自带队列</li></ol><ul><li><p>缺点：无法随意访问队列中任意节点，所以如果想要随时访问一个属性，此属性可以存在随意访问数组中</p></li><li><p>优点：书写简介方便</p></li><li><p>头文件：<code>#include &lt;queue&gt;</code></p></li><li><p>定义代码：<code>queue&lt;node&gt; q;</code></p></li><li><p>node:可以是结构体，一般含有x,y和仅终点访问的属性</p></li><li><p>通用代码：</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">queue</span>&lt;node&gt; q;</span><br><span class="line">node a,b;<span class="comment">//a:起点、当前节点、出队点;b:下一节点</span></span><br><span class="line">…………<span class="comment">//初始化a</span></span><br><span class="line">…………<span class="comment">/*初始化其他的不可计算量（不可通过上一节点计算的，比如上一次到达这个节点的剩余的时间或者能量）</span></span><br><span class="line"><span class="comment">用lasttime[][],memset(lastime,0,sizeof(lasttime))*/</span></span><br><span class="line">…………<span class="comment">//设置a点不可计算量</span></span><br><span class="line"><span class="keyword">if</span>(…………)&#123;…………;<span class="keyword">return</span>;&#125;<span class="comment">//判断起点是不是最优解</span></span><br><span class="line">q.push(a);</span><br><span class="line"><span class="keyword">while</span>(!q.empty())</span><br><span class="line">&#123;</span><br><span class="line">a=q.front();</span><br><span class="line">q.pop();</span><br><span class="line"><span class="keyword">if</span>(…………)<span class="comment">//当前节点必须可以走下一步，比如能量没用完，时间还有</span></span><br><span class="line"><span class="comment">//有些时候规定到达终点时间为0不算，要&gt;1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">4</span>;++i)<span class="comment">//向题目中规定的方向走</span></span><br><span class="line">&#123;</span><br><span class="line">b.x=a.x+s[i][<span class="number">0</span>];<span class="comment">//s数组存储变换矩阵,s[变幻种类][维度]</span></span><br><span class="line">b.y=a.y+s[i][<span class="number">1</span>];<span class="comment">//当然也可以写成乘法那种矩阵</span></span><br><span class="line"><span class="keyword">if</span>()<span class="comment">//判断是不是越界、和走到墙壁位置（如果是传统01标志现在就可以判断）</span></span><br><span class="line">&#123;</span><br><span class="line">…………<span class="comment">//计算b</span></span><br><span class="line"><span class="keyword">if</span>(…………)&#123;&#125;<span class="comment">//判断是不是能量补充点、时间重置点等等</span></span><br><span class="line"><span class="keyword">else</span>&#123;&#125;<span class="comment">//如果不是要消耗能量和时间</span></span><br><span class="line"><span class="keyword">if</span>(能量和剩余时间&lt;=上一次到达此点的能量和时间)&#123;…………;<span class="keyword">continue</span>;&#125;</span><br><span class="line"><span class="comment">//非01标志判断可不可以重复访问</span></span><br><span class="line"><span class="keyword">if</span>()&#123;<span class="keyword">return</span>;&#125;<span class="comment">//判断是不是终点，如果自定义队列求路径可以放在入队之后</span></span><br><span class="line">…………<span class="comment">//更新不可计算量（包括01标志）</span></span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">…………<span class="comment">//输出不能到达终点</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>自定义队列（需要知道程序需要的最大队列节点数）</p><p>自己写队列，不释放入队节点，只移动队首下标。所以可以随意访问队列中任意元素，在求解路径中只需要在队列的结构体中添加一个上一个节点的下标的属性就可以</p><ul><li><p>优点：方便求解路径</p></li><li><p>队列元素结构：<code>struct point{int x,y,s;};</code>s代表来源点的下标</p></li><li><p>队列结构：<code>struct p{point pp[1000];int t,w;};</code>其中t表示队列的头，w表示队列的尾</p></li><li><p>push():<code>d.pp[d.w++]=a;</code></p></li><li><p>!empty():<code>d.w!=d.t</code></p></li><li><p>front()&amp;pop():<code>a=d.pp[d.t++];</code></p></li></ul></li><li><p>递归（没什么意义，还是用的队列）</p><p>就是原函数初始化在外面，while()循环体单独写成BFS函数，用!q.empty()判断是否运行此函数</p><figure class="highlight plain"><figcaption><span>dfs()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">void dfs()</span><br><span class="line">&#123;</span><br><span class="line">a&#x3D;q.front();</span><br><span class="line">q.pop();</span><br><span class="line">if(…………)&#x2F;&#x2F;当前节点必须可以走下一步，比如能量没用完，时间还有</span><br><span class="line">&#x2F;&#x2F;有些时候规定到达终点时间为0不算，要&gt;1</span><br><span class="line">&#123;</span><br><span class="line">for(i&#x3D;0;i&lt;4;++i)&#x2F;&#x2F;向题目中规定的方向走</span><br><span class="line">&#123;</span><br><span class="line">b.x&#x3D;a.x+s[i][0];&#x2F;&#x2F;s数组存储变换矩阵,s[变幻种类][维度]</span><br><span class="line">b.y&#x3D;a.y+s[i][1];&#x2F;&#x2F;当然也可以写成乘法那种矩阵</span><br><span class="line">if()&#x2F;&#x2F;判断是不是越界、和走到墙壁位置（如果是传统01标志现在就可以判断）</span><br><span class="line">&#123;</span><br><span class="line">…………&#x2F;&#x2F;计算b</span><br><span class="line">if(…………)&#123;&#125;&#x2F;&#x2F;判断是不是能量补充点、时间重置点等等</span><br><span class="line">else&#123;&#125;&#x2F;&#x2F;如果不是要消耗能量和时间</span><br><span class="line">if(能量和剩余时间&lt;&#x3D;上一次到达此点的能量和时间)&#123;…………;continue;&#125;</span><br><span class="line">&#x2F;&#x2F;非01标志判断可不可以重复访问</span><br><span class="line">if()&#123;return;&#125;&#x2F;&#x2F;判断是不是终点，如果自定义队列求路径可以放在入队之后</span><br><span class="line">…………&#x2F;&#x2F;更新不可计算量（包括01标志）</span><br><span class="line">q.push(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">if(!q.empty())</span><br><span class="line">dfs();</span><br><span class="line">else</span><br><span class="line">…………;&#x2F;&#x2F;输出不能到达终点</span><br><span class="line">&#125;</span><br><span class="line">queue&lt;node&gt; q;</span><br><span class="line">node a,b;&#x2F;&#x2F;a:起点、当前节点、出队点;b:下一节点</span><br><span class="line">int main()&#123;</span><br><span class="line"></span><br><span class="line">…………&#x2F;&#x2F;初始化a</span><br><span class="line">…………&#x2F;*初始化其他的不可计算量（不可通过上一节点计算的，比如上一次到达这个节点的剩余的时间或者能量）</span><br><span class="line">用lasttime[][],memset(lastime,0,sizeof(lasttime))*&#x2F;</span><br><span class="line">…………&#x2F;&#x2F;设置a点不可计算量</span><br><span class="line">if(…………)&#123;…………;return;&#125;&#x2F;&#x2F;判断起点是不是最优解</span><br><span class="line">q.push(a);</span><br><span class="line">if(!q.empty())</span><br><span class="line">dfs();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-路径打印"><a href="#4-路径打印" class="headerlink" title="4. 路径打印"></a>4. 路径打印</h2><p>因为一个点的来源只有一个，但一个点的去处可能有好多点，所以在存储路径的时候一般存储这个点的上一个点，但这样就出现了一个问题，打印路径的时候是倒着的，一般有两种方法解决这个问题，其实是一种</p><ul><li><p>初始化</p><p>起点的前一个点的参数设置为-1，自带队列：<code>a[0][0].x=a[0][0].y=-1;</code>自定义：<code>a.s=-1;</code></p></li><li><p>递归（隐式调用栈）</p><ol><li>c自带队列</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">void print(int x,int y或者int n)&#x2F;&#x2F;注意参数是-，null-0-0-0-</span><br><span class="line">&#123;</span><br><span class="line">if(x&#x3D;&#x3D;-1&amp;&amp;y&#x3D;&#x3D;-1或者s&#x3D;&#x3D;-1)</span><br><span class="line">return ;</span><br><span class="line">print(a[x][y].x,a[x][y].y或者p.a[n].s);</span><br><span class="line">cout&lt;&lt;x&lt;&lt;y或者cout&lt;&lt;p.a[n].x&lt;&lt;p.a[n].y;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>显式用栈:没什么意义，写起来不方便</p></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BFS </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
